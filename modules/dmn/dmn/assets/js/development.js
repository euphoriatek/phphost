
(function(G,gd){"object"===typeof exports&&"undefined"!==typeof module?module.exports=gd():"function"===typeof define&&define.amd?define(gd):(G=G||self,G.DmnJS=gd())})(this,function(){function G(a){G="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b};return G(a)}function gd(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;
d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function Dv(a,b,c){b&&gd(a.prototype,b);c&&gd(a,c);return a}function Ev(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&Dg(a,b)}function Eg(a){Eg=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)};return Eg(a)}
function Dg(a,b){Dg=Object.setPrototypeOf||function(c,d){c.__proto__=d;return c};return Dg(a,b)}function ja(a){return"[object Array]"===Qd.call(a)}function gb(a){return"[object Object]"===Qd.call(a)}function ua(a){return"[object Number]"===Qd.call(a)}function Na(a){a=Qd.call(a);return"[object Function]"===a||"[object AsyncFunction]"===a||"[object GeneratorFunction]"===a||"[object AsyncGeneratorFunction]"===a||"[object Proxy]"===a}function Sa(a){return"[object String]"===Qd.call(a)}function Ha(a,b){b=
Fv(b);var c;O(a,function(d,e){if(b(d,e))return c=d,!1});return c}function hb(a,b){var c=[];O(a,function(d,e){b(d,e)&&c.push(d)});return c}function O(a,b){if(void 0!==a){var c=ja(a)?Gv:Hv,d;for(d in a)if(Iv.call(a,d)){var e=a[d];var f=b(e,c(d));if(!1===f)return e}}}function qb(a,b,c){O(a,function(d,e){c=b(c,d,e)});return c}function gc(a,b){return!!qb(a,function(c,d,e){return c&&b(d,e)},!0)}function We(a,b){return!!Ha(a,b)}function hc(a,b){var c=[];O(a,function(d,e){c.push(b(d,e))});return c}function ic(a){return a&&
Object.keys(a)||[]}function Vm(a){return hc(a,function(b){return b})}function Rd(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};b=Fg(b);O(a,function(d){var e=b(d)||"_",f=c[e];f||(f=c[e]=[]);f.push(d)});return c}function Jv(a){a=Fg(a);for(var b={},c=arguments.length,d=Array(1<c?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];O(d,function(f){return Rd(f,a,b)});return hc(b,function(f,g){return f[0]})}function hd(a,b){b=Fg(b);var c=[];O(a,function(d,e){for(var f=b(d,e),g={d:f,v:d},h=0;h<
c.length;h++)if(f<c[h].d){c.splice(h,0,g);return}c.push(g)});return hc(c,function(d){return d.v})}function Sd(a){return function(b){return gc(a,function(c,d){return b[d]===c})}}function Fg(a){return Na(a)?a:function(b){return b[a]}}function Fv(a){return Na(a)?a:function(b){return b===a}}function Hv(a){return a}function Gv(a){return Number(a)}function Td(a,b){function c(){var h=Date.now();h=g+b-h;0<h?d=setTimeout(c,h):(a.apply(f,e),d=g=e=f=void 0)}var d,e,f,g;return function(){g=Date.now();for(var h=
arguments.length,k=Array(h),m=0;m<h;m++)k[m]=arguments[m];e=k;f=this;d||(d=setTimeout(c,b))}}function Ud(a,b){return a.bind(b)}function Gg(){Gg=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],d;for(d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a};return Gg.apply(this,arguments)}function R(a){for(var b=arguments.length,c=Array(1<b?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];return Gg.apply(void 0,[a].concat(c))}function Jc(a,b){var c={},d=Object(a);
O(b,function(e){e in d&&(c[e]=a[e])});return c}function Wm(a,b){var c={};O(Object(a),function(d,e){-1===b.indexOf(e)&&(c[e]=d)});return c}function Ta(){this._listeners={};this.on("diagram.destroy",1,this._destroy,this)}function Vd(){}function Hg(){}function Xm(a,b){this.model=a;this.properties=b}function Ig(a,b){var c=Jg[a];return c?c(b):b}function bb(a,b){var c=a.split(/:/);if(1===c.length){var d=a;c=b}else if(2===c.length)d=c[1],c=c[0];else throw Error("expected <prefix:localName> or <localName>, got "+
a);return{name:(c?c+":":"")+d,prefix:c,localName:d}}function rb(a){this.ns=a;this.name=a.name;this.allTypes=[];this.allTypesByName={};this.properties=[];this.propertiesByName={}}function jc(a,b){this.packageMap={};this.typeMap={};this.packages=[];this.properties=b;O(a,this.registerPackage.bind(this))}function Ym(a,b,c){b=b[c];if(b in a)throw Error("package with "+c+" <"+b+"> already defined");}function id(a){this.model=a}function Zm(a,b,c){Object.defineProperty(a,b.name,{enumerable:!b.isReference,
writable:!0,value:c,configurable:!0})}function sb(a){this.properties=new id(this);this.factory=new Xm(this,this.properties);this.registry=new jc(a,this.properties);this.typeCache={}}function Kv(a,b,c,d){return d?Lv.call(Wd,d)?Wd[d]:"&"+d+";":b?$m(b):$m(parseInt(c,16))}function Kc(a){return 3<a.length&&-1!==a.indexOf("&")?a.replace(Mv,Kv):a}function an(a){return"missing namespace for prefix <"+a+">"}function Xe(a){return{get:a,enumerable:!0}}function Nv(a){var b={},c;for(c in a){var d=a[c];b[d]=d;
b[d+"$uri"]=c}return b}function bn(){return{line:0,column:0}}function Ov(a){throw a;}function cn(a){function b(A){A instanceof Error||(A=Error(A));p=A;m(A,v)}function c(A){l&&(A instanceof Error||(A=Error(A)),l(A,v))}function d(A){function z(){if(null!==Pa)return Pa;var Ia=n&&B.xmlns,va=n&&w?[]:null,pa=oa,ya=fa,Wa=ya.length,ba,Ba,Bb={},tb={};a:for(;pa<Wa;pa++){var na=!1;var V=ya.charCodeAt(pa);if(!(32===V||14>V&&8<V)){(65>V||122<V||90<V&&97>V)&&95!==V&&58!==V&&(c("illegal first char attribute name"),
na=!0);for(ba=pa+1;ba<Wa;ba++)if(V=ya.charCodeAt(ba),!(96<V&&123>V||64<V&&91>V||47<V&&59>V||46===V||45===V||95===V)){if(32===V||14>V&&8<V){c("missing attribute value");pa=ba;continue a}if(61===V)break;c("illegal attribute name char");na=!0}var qa=ya.substring(pa,ba);"xmlns:xmlns"===qa&&(c("illegal declaration of xmlns"),na=!0);V=ya.charCodeAt(ba+1);if(34===V)ba=ya.indexOf('"',pa=ba+2),-1===ba&&(ba=ya.indexOf("'",pa),-1!==ba&&(c("attribute value quote missmatch"),na=!0));else if(39===V)ba=ya.indexOf("'",
pa=ba+2),-1===ba&&(ba=ya.indexOf('"',pa),-1!==ba&&(c("attribute value quote missmatch"),na=!0));else for(c("missing attribute value quotes"),na=!0,ba+=1;ba<Wa&&!(V=ya.charCodeAt(ba+1),32===V||14>V&&8<V);ba++);-1===ba&&(c("missing closing quotes"),ba=Wa,na=!0);na||(Ba=ya.substring(pa,ba));for(pa=ba;ba+1<Wa;ba++){V=ya.charCodeAt(ba+1);if(32===V||14>V&&8<V)break;pa===ba&&(c("illegal character after attribute end"),na=!0)}pa=ba+1;if(na)continue a;if(qa in tb)c("attribute <"+qa+"> already defined");else if(tb[qa]=
!0,n)if(w)if(ba="xmlns"===qa?"xmlns":120===qa.charCodeAt(0)&&"xmlns:"===qa.substr(0,6)?qa.substr(6):null,null!==ba){V=Kc(Ba);na=ba+"$uri";var ub=x[V];if(!ub){if("xmlns"===ba||na in B&&B[na]!==V){do ub="ns"+H++;while("undefined"!==typeof B[ub])}else ub=ba;x[V]=ub}if(B[ba]!==ub){if(!Lc){var Lc=void 0;var Wb=B,Jb={};for(Lc in Wb)Jb[Lc]=Wb[Lc];B=Jb;Lc=!0}B[ba]=ub;"xmlns"===ba&&(B[ub+"$uri"]=V,Ia=ub);B[na]=V}Bb[qa]=Ba}else va.push(qa,Ba);else V=qa.indexOf(":"),-1===V?Bb[qa]=Ba:(na=B[qa.substring(0,V)])?
(qa=Ia===na?qa.substr(V+1):na+qa.substr(V),"xsi:type"===qa&&(V=Ba.indexOf(":"),-1!==V?(na=Ba.substring(0,V),na=B[na]||na,Ba=na+Ba.substring(V)):Ba=Ia+":"+Ba),Bb[qa]=Ba):c(an(qa.substring(0,V)));else Bb[qa]=Ba}}if(w)for(pa=0,Wa=va.length;pa<Wa;pa++){qa=va[pa++];Ba=va[pa];V=qa.indexOf(":");if(-1!==V){if(!(na=B[qa.substring(0,V)])){c(an(qa.substring(0,V)));continue}qa=Ia===na?qa.substr(V+1):na+qa.substr(V);"xsi:type"===qa&&(V=Ba.indexOf(":"),-1!==V?(na=Ba.substring(0,V),na=B[na]||na,Ba=na+Ba.substring(V)):
Ba=Ia+":"+Ba)}Bb[qa]=Ba}return Pa=Bb}var y=n?[]:null,B=n?Nv(x):null,D=[],H=0,L=!1,J=!1,K=0,N=0,Q,S,ka,fa="",oa=0;v=function(){for(var Ia=/(\r\n|\r|\n)/g,va=0,pa=0,ya=0,Wa=N,ba;K>=ya;){ba=Ia.exec(A);if(!ba)break;Wa=ba[0].length+ba.index;if(Wa>K)break;va+=1;ya=Wa}-1==K?(pa=Wa,Ia=A.substring(N)):0===N?(console.log(K-ya),Ia=A.substring(N,K)):(pa=K-ya,Ia=-1==N?A.substring(K):A.substring(K,N+1));return{data:Ia,line:va,column:pa}};for(e&&(ka=Object.create({},{name:Xe(function(){return S}),originalName:Xe(function(){return ib}),
attrs:Xe(z),ns:Xe(function(){return B})}));-1!==N;){K=60===A.charCodeAt(N)?N:A.indexOf("<",N);if(-1===K){if(D.length)return b("unexpected end of file");if(0===N)return b("missing start tag");N<A.length&&A.substring(N).trim()&&c("non-whitespace outside of root node");break}if(N!==K)if(D.length){if(f&&(f(A.substring(N,K),Kc,v),t))break}else if(A.substring(N,K).trim()&&(c("non-whitespace outside of root node"),t))break;var ca=A.charCodeAt(K+1);if(33===ca)if(ca=A.charCodeAt(K+2),91===ca&&"CDATA["===A.substr(K+
3,6)){N=A.indexOf("]]\x3e",K);if(-1===N)return b("unclosed cdata");if(k&&(k(A.substring(K+9,N),v),t))break;N+=3}else if(45===ca&&45===A.charCodeAt(K+3)){N=A.indexOf("--\x3e",K);if(-1===N)return b("unclosed comment");if(r&&(r(A.substring(K+4,N),Kc,v),t))break;N+=3}else{N=A.indexOf(">",K+1);if(-1===N)return b("unclosed tag");if(u&&(u(A.substring(K,N+1),Kc,v),t))break;N+=1}else if(63===ca){N=A.indexOf("?>",K);if(-1===N)return b("unclosed question");if(q&&(q(A.substring(K,N+2),v),t))break;N+=2}else{N=
A.indexOf(">",K+1);if(-1==N)return b("unclosed tag");var Pa={};if(47===ca){L=!1;J=!0;if(!D.length)return b("missing open tag");var Ja=S=D.pop();var ra=K+2+Ja.length;if(A.substring(K+2,ra)!==Ja)return b("closing tag mismatch");for(;ra<N;ra++)if(ca=A.charCodeAt(ra),!(32===ca||8<ca&&14>ca))return b("close tag")}else{47===A.charCodeAt(N-1)?(Ja=S=A.substring(K+1,N-1),J=L=!0):(Ja=S=A.substring(K+1,N),L=!0,J=!1);if(!(96<ca&&123>ca||64<ca&&91>ca||95===ca||58===ca))return b("illegal first char nodeName");
ra=1;for(Q=Ja.length;ra<Q;ra++)if(ca=Ja.charCodeAt(ra),!(96<ca&&123>ca||64<ca&&91>ca||47<ca&&59>ca||45===ca||95===ca||46==ca)){if(32===ca||14>ca&&8<ca){S=Ja.substring(0,ra);Pa=null;break}return b("invalid nodeName")}J||D.push(S)}if(n){var jb=B;L&&(J||y.push(jb),null===Pa&&(w=-1!==Ja.indexOf("xmlns",ra))&&(oa=ra,fa=Ja,z(),w=!1));var ib=S;ca=S.indexOf(":");if(-1!==ca){Q=B[S.substring(0,ca)];if(!Q)return b("missing namespace on <"+ib+">");S=S.substr(ca+1)}else Q=B.xmlns;Q&&(S=Q+":"+S)}if(L&&(oa=ra,fa=
Ja,g&&(e?g(ka,Kc,J,v):g(S,z,Kc,J,v),t)))break;if(J){if(h&&(h(e?ka:S,Kc,L,v),t))break;n&&(B=L?jb:y.pop())}N+=1}}}if(!this)return new cn(a);var e=a&&a.proxy,f,g,h,k,m=Ov,l,r,q,u,v=bn,w=!1,n=!1,p=null,t=!1,x;this.on=function(A,z){if("function"!==typeof z)throw Error("required args <name, cb>");switch(A){case "openTag":g=z;break;case "text":f=z;break;case "closeTag":h=z;break;case "error":m=z;break;case "warn":l=z;break;case "cdata":k=z;break;case "attention":u=z;break;case "question":q=z;break;case "comment":r=
z;break;default:throw Error("unsupported event: "+A);}return this};this.ns=function(A){"undefined"===typeof A&&(A={});if("object"!==G(A))throw Error("required args <nsMap={}>");var z={},y;for(y in A)z[y]=A[y];z["http://www.w3.org/2001/XMLSchema-instance"]="xsi";n=!0;x=z;return this};this.parse=function(A){if("string"!==typeof A)throw Error("required args <xml=string>");p=null;d(A);v=bn;t=!1;return p};this.stop=function(){t=!0}}function dn(a){return a.xml&&"lowerCase"===a.xml.tagAlias}function en(a,
b){if(!dn(b))return a.name;var c=a.prefix+":";var d=a.localName;d=d.charAt(0).toUpperCase()+d.slice(1);return c+d}function Pv(a,b){var c=bb(a),d=b.getPackage(c.prefix);var e=c.name,f=c.localName;c=(d=d.xml&&d.xml.typePrefix)&&0===f.indexOf(d)?c.prefix+":"+f.slice(d.length):e;return c}function Qv(a){R(this,a);this.elementsById={};this.references=[];this.warnings=[];this.addReference=function(b){this.references.push(b)};this.addElement=function(b){if(!b)throw Error("expected element");var c=this.elementsById,
d=b.$descriptor.idProperty;if(d&&(d=b.get(d.name))){if(!/^([a-z][\w-.]*:)?[a-z_][\w-.]*$/i.test(d))throw Error("illegal ID <"+d+">");if(c[d])throw Error("duplicate ID <"+d+">");c[d]=b}};this.addWarning=function(b){this.warnings.push(b)}}function Xd(){}function Kg(){}function jd(){}function Yd(a,b){this.property=a;this.context=b}function Lg(a,b){this.element=b;this.propertyDesc=a}function Ye(){}function Xa(a,b,c){this.model=a;this.type=a.getType(b);this.context=c}function Mg(a,b,c){Xa.call(this,a,
b,c)}function kd(a,b,c){this.model=a;this.context=c}function Ng(a){a instanceof sb&&(a={model:a});R(this,{lax:!1},a)}function Rv(){var a=[];Object.defineProperty(a,"peek",{value:function(){return this[this.length-1]}});return a}function Sv(a){var b={},c={},d={},e=[],f=[];this.byUri=function(g){return c[g]||a&&a.byUri(g)};this.add=function(g,h){c[g.uri]=g;h?e.push(g):f.push(g);this.mapPrefix(g.prefix,g.uri)};this.uriByPrefix=function(g){return b[g||"xmlns"]};this.mapPrefix=function(g,h){b[g||"xmlns"]=
h};this.logUsed=function(g){g=g.uri;d[g]=this.byUri(g)};this.getUsed=function(g){return[].concat(e,f).filter(function(h){return d[h.uri]})}}function fn(a,b){a.super_=b;a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}function gn(a){return Sa(a)?a:(a.prefix?a.prefix+":":"")+a.localName}function Tv(a){return hc(a.getUsed(),function(b){return{name:"xmlns"+(b.prefix?":"+b.prefix:""),value:b.uri}})}function Uv(a){return hb(a.$descriptor.properties,
function(b){var c=b.name;if(b.isVirtual||!a.hasOwnProperty(c))return!1;c=a[c];return c===b["default"]||null===c?!1:b.isMany?c.length:!0})}function hn(a,b,c){a=Sa(a)?a:""+a;return a.replace(b,function(d){return"&"+c[d]+";"})}function Vv(a){return hb(a,function(b){return b.isAttr})}function Wv(a){return hb(a,function(b){return!b.isAttr})}function Og(a){this.tagName=a}function Mc(){}function Pg(a){this.tagName=a}function Ca(a,b){this.body=[];this.attrs=[];this.parent=a;this.propertyDescriptor=b}function Ze(a,
b){Ca.call(this,a,b)}function Xv(){this.value="";this.write=function(a){this.value+=a}}function Yv(a,b){var c=[""];this.append=function(d){a.write(d);return this};this.appendNewLine=function(){b&&a.write("\n");return this};this.appendIndent=function(){b&&a.write(c.join("  "));return this};this.indent=function(){c.push("");return this};this.unindent=function(){c.pop();return this}}function Zv(a){a=R({format:!1,preamble:!0},a||{});return{toXML:function(b,c){var d=c||new Xv,e=new Yv(d,a.format);a.preamble&&
e.append('<?xml version="1.0" encoding="UTF-8"?>\n');(new Ca).build(b).serializeTo(e);if(!c)return d.value}}}function $e(a,b){sb.call(this,a,b)}function $v(a,b){var c=R({},aw,a);return new $e(c,b)}function Kb(a,b,c){if(2==arguments.length)return a.getAttribute(b);if(null===c)return a.removeAttribute(b);a.setAttribute(b,c);return a}function wa(a){return new kc(a)}function kc(a){if(!a||!a.nodeType)throw Error("A DOM element reference is required");this.el=a;this.list=a.classList}function Qg(a){for(var b;a.childNodes.length;)b=
a.childNodes[0],a.removeChild(b);return a}function xa(a,b){b=b||document;return b.querySelector(a)}function Xb(a,b){b=b||document;return b.querySelectorAll(a)}function kb(a){a.parentNode&&a.parentNode.removeChild(a)}function jn(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}));c.push.apply(c,d)}return c}function bw(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?
arguments[b]:{};b%2?jn(c,!0).forEach(function(d){kn(a,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):jn(c).forEach(function(d){Object.defineProperty(a,d,Object.getOwnPropertyDescriptor(c,d))})}return a}function Rg(a){if(Array.isArray(a)){var b=0;for(var c=Array(a.length);b<a.length;b++)c[b]=a[b];b=c}else b=void 0;b||(b=Symbol.iterator in Object(a)||"[object Arguments]"===Object.prototype.toString.call(a)?Array.from(a):void 0);if(!(a=b))throw new TypeError("Invalid attempt to spread non-iterable instance");
return a}function Sg(a){Sg="function"===typeof Symbol&&"symbol"===G(Symbol.iterator)?function(b){return G(b)}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":G(b)};return Sg(a)}function ln(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function cw(a,b,c){b&&ln(a.prototype,b);c&&ln(a,c);return a}function kn(a,b,c){b in a?Object.defineProperty(a,
b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c;return a}function Tg(){}function mn(a){return a+(ua(a)?"px":"")}function dw(a){var b=/unparsable content <([^>]+)> detected([\s\S]*)$/.exec(a.message);b&&(a.message="unparsable content <"+b[1]+"> detected; this may indicate an invalid DMN 1.1 diagram file"+b[2]);return a}function Ug(a,b){return a.filter(b)[0]}function nn(a,b){return"undefined"===typeof a?"undefined"===typeof b?!0:!1:"undefined"===typeof b?!1:a.element===b.element||a.element.id===
b.element.id}function on(a,b){if("function"===typeof a[b])a[b]()}function af(a,b){return b={exports:{}},a(b,b.exports),b.exports}function Yb(a){if(!(this instanceof Yb))return new Yb(a);a=a||[128,36,1];this._seed=a.length?ew.rack(a[0],a[1],a[2]):a}function P(a,b){var c=ld(a);return c&&"function"===typeof c.$instanceOf&&c.$instanceOf(b)}function Da(a){return P(a,"dmn:InputClause")}function vb(a){return P(a,"dmn:OutputClause")}function ld(a){return a&&a.businessObject||a}function Cb(a,b){return We(b,
function(c){return P(a,c)})}function Vg(a){Vg="function"===typeof Symbol&&"symbol"===G(Symbol.iterator)?function(b){return G(b)}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":G(b)};return Vg(a)}function pn(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function fw(a,b,c){b&&pn(a.prototype,b);c&&pn(a,c);return a}function bf(a,b,c){bf=
"undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(d,e,f){for(;!Object.prototype.hasOwnProperty.call(d,e)&&(d=md(d),null!==d););if(d)return e=Object.getOwnPropertyDescriptor(d,e),e.get?e.get.call(f):e.value};return bf(a,b,c||a)}function md(a){md=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)};return md(a)}function gw(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=
Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&Wg(a,b)}function Wg(a,b){Wg=Object.setPrototypeOf||function(c,d){c.__proto__=d;return c};return Wg(a,b)}function Xg(a){return"[object Array]"===Object.prototype.toString.call(a)}function cf(){var a=Array.prototype.slice.call(arguments);1===a.length&&Xg(a[0])&&(a=a[0]);var b=a.pop();b.$inject=a;return b}function hw(a){if("function"!==typeof a)throw Error('Cannot annotate "'+a+'". Expected a function!');var b=a.toString().match(iw.test(a.toString())?
jw:kw);return b?b[1]&&b[1].split(",").map(function(c){return(b=c.match(lw))?b[1].trim():c.trim()})||[]:[]}function qn(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function Zd(a,b){b=b||{get:function(u,v){c.push(u);if(!1===v)return null;throw g('No provider for "'+u+'"!');}};var c=[],d=this._providers=Object.create(b._providers||null),e=this._instances=Object.create(null),f=e.injector=this,g=function(u){var v=c.join(" -> ");c.length=0;
return Error(v?u+" (Resolving: "+v+")":u)},h=function n(v,w){if(!d[v]&&-1!==v.indexOf(".")){for(var p=v.split("."),t=n(p.shift());p.length;)t=t[p.shift()];return t}if(Object.hasOwnProperty.call(e,v))return e[v];if(Object.hasOwnProperty.call(d,v)){if(-1!==c.indexOf(v))throw c.push(v),g("Cannot resolve circular dependency!");c.push(v);e[v]=d[v][0](d[v][1]);c.pop();return e[v]}return b.get(v,w)},k=function(v){var w=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if("function"!==typeof v)if(Xg(v))v=
cf(v.slice());else throw Error('Cannot invoke "'+v+'". Expected a function!');var n=(v.$inject||hw(v)).map(function(p){return Object.hasOwnProperty.call(w,p)?w[p]:h(p)});return{fn:v,dependencies:n}},m=function(v){v=k(v);return new (Function.prototype.bind.apply(v.fn,[null].concat(qn(v.dependencies))))},l=function(v,w,n){v=k(v,n);n=v.fn;return n.call.apply(n,[w].concat(qn(v.dependencies)))},r=function(v){return cf(function(w){return v.get(w)})},q={factory:l,type:m,value:function(v){return v}};a.forEach(function(v){if("object"===
("undefined"===typeof v?"undefined":mw(v)))if(v.__exports__){var w=Object.keys(v).reduce(function(t,x){"__"!==x.substring(0,2)&&(t[x]=v[x]);return t},Object.create(null)),n=new Zd((v.__modules__||[]).concat([w]),f),p=cf(function(t){return n.get(t)});v.__exports__.forEach(function(t){d[t]=[p,t,"private",n]})}else Object.keys(v).forEach(function(t){if("private"===v[t][2])d[t]=v[t];else{var x=v[t][0],A=q[x],z=v[t][1];"value"!==x&&Xg(z)&&(z=cf(z.slice()));d[t]=[A,z,x]}})});this.get=h;this.invoke=l;this.instantiate=
m;this.createChild=function(v,w){if(w&&w.length){var n=Object.create(null),p=Object.create(null),t=[],x=[],A=[],z;for(z in d){var y=d[z];if(-1!==w.indexOf(z)){if("private"===y[2]){var B=t.indexOf(y[3]);if(-1===B){B=y[3].createChild([],w);var D=r(B);t.push(y[3]);x.push(B);A.push(D);n[z]=[D,z,"private",B]}else n[z]=[A[B],z,"private",x[B]]}else n[z]=[y[2],y[1]];p[z]=!0}"factory"!==y[2]&&"type"!==y[2]||!y[1].$scope||w.forEach(function(H){-1!==y[1].$scope.indexOf(H)&&(n[z]=[y[2],y[1]],p[H]=!0)})}w.forEach(function(H){if(!p[H])throw Error('No provider for "'+
H+'". Cannot use provider from the parent!');});v.unshift(n)}return new Zd(v,f)}}function Db(a,b){var c=this;b=b||1E3;a.on(["render.shape","render.connection"],b,function(d,e){var f=d.type,g=e.element,h=e.gfx;if(c.canRender(g))return"render.shape"===f?c.drawShape(h,g):c.drawConnection(h,g)});a.on(["render.getShapePath","render.getConnectionPath"],b,function(d,e){if(c.canRender(e))return"render.getShapePath"===d.type?c.getShapePath(e):c.getConnectionPath(e)})}function ha(a,b){var c=a.appendChild;a:{if(b.ownerDocument!==
a.ownerDocument)try{var d=a.ownerDocument.importNode(b,!0);break a}catch(e){}d=b}c.call(a,d);return a}function rn(a,b,c){var d=b.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),e=sn[d];e?(2===e&&"number"===typeof c&&(c=String(c)+"px"),a.style[d]=c):a.setAttributeNS(null,b,c)}function W(a,b,c){if("string"===typeof b)if(void 0!==c)rn(a,b,c);else return a=sn[b]?a.style[b]:a.getAttributeNS(null,b),a;else{c=Object.keys(b);var d;var e=0;for(d;d=c[e];e++)rn(a,d,b[d])}return a}function Yg(a,b){if(a.indexOf)return a.indexOf(b);
for(var c=0;c<a.length;++c)if(a[c]===b)return c;return-1}function Zg(a){return"undefined"!==typeof a}function za(a){return new lc(a)}function lc(a){if(!a||!a.nodeType)throw Error("A DOM element reference is required");this.el=a;this.list=a.classList}function cb(a){var b=a.parentNode;b&&b.removeChild(a);return a}function nw(a){for(var b;b=a.firstChild;)cb(b);return a}function ea(a,b){if("<"===a.charAt(0)){var c=a;var d=!1;"<svg"===c.substring(0,4)?-1===c.indexOf($g.svg)&&(c=tn+c.substring(4)):(c=tn+
">"+c+"</svg>",d=!0);var e=new DOMParser;e.async=!1;c=e.parseFromString(c,"text/xml");if(d)for(d=document.createDocumentFragment(),c=c.firstChild;c.firstChild;)d.appendChild(c.firstChild);else d=c;d=d.firstChild;d=document.importNode(d,!0)}else d=document.createElementNS($g.svg,a);b&&W(d,b);return d}function un(a,b){var c,d,e=Object.keys(b);for(c=0;d=e[c];c++)a[d]=b[d];return a}function ow(a,b,c,d,e,f){var g=ah.createSVGMatrix();switch(arguments.length){case 0:return g;case 1:return un(g,a);case 6:return un(g,
{a:a,b:b,c:c,d:d,e:e,f:f})}}function bh(a,b){return a.replace(b,function(c,d){return pw[d]||d})}function vn(a,b){var c;switch(a.nodeType){case 3:b.push(bh(a.textContent,wn));break;case 1:b.push("<",a.tagName);if(a.hasAttributes()){var d=a.attributes;var e=0;for(c=d.length;e<c;++e){var f=d.item(e);b.push(" ",f.name,'="',bh(f.value,qw),'"')}}if(a.hasChildNodes()){b.push(">");d=a.childNodes;e=0;for(c=d.length;e<c;++e)vn(d.item(e),b);b.push("</",a.tagName,">")}else b.push("/>");break;case 8:b.push("\x3c!--",
bh(a.nodeValue,wn),"--\x3e");break;case 4:b.push("<![CDATA[",a.nodeValue,"]]\x3e");break;default:throw Error("unable to handle node "+a.nodeType);}return b}function df(a,b){var c=a.transform.baseVal;if(b){Array.isArray(b)||(b=[b]);var d=b,e,f;c.clear();for(e=0;f=d[e];e++){var g=c,h=g.appendItem;f=f instanceof SVGMatrix?c.createSVGTransformFromMatrix(f):f;h.call(g,f)}}return c.consolidate()}function xn(a){for(var b="",c=0,d;d=a[c];c++)b+=d.x+","+d.y+" ";return b}function ch(a,b){var c=ea("polyline");
W(c,{points:xn(a)});b&&W(c,b);return c}function rw(a){return hb(a,function(b){return!Ha(a,function(c){return c!==b&&yn(b,c)})})}function yn(a,b){if(b){if(a===b)return b;if(a.parent)return yn(a.parent,b)}}function zn(a,b,c){(c=!c||-1===a.indexOf(b))&&a.push(b);return c}function dh(a,b,c){c=c||0;ja(a)||(a=[a]);O(a,function(d,e){var f=b(d,e,c);ja(f)&&f.length&&dh(f,b,c+1)})}function sw(a,b,c){var d=[],e=[];dh(a,function(f,g,h){zn(d,f,b);f=f.children;if((-1===c||h<c)&&f&&zn(e,f,b))return f});return d}
function tw(a,b,c){function d(m){k[m.source.id]&&k[m.target.id]&&(k[m.id]=[m]);e[m.source.id]&&e[m.target.id]&&(h[m.id]=g[m.id]=m);f[m.id]=m}void 0===b&&(b=!0);gb(b)&&(c=b,b=!0);c=c||{};var e=$d(c.allShapes),f=$d(c.allConnections),g=$d(c.enclosedElements),h=$d(c.enclosedConnections),k=$d(c.topLevel,b&&Rd(a,function(m){return m.id}));dh(a,function(m){g[m.id]=m;if(m.waypoints)h[m.id]=f[m.id]=m;else return e[m.id]=m,O(m.incoming,d),O(m.outgoing,d),m.children});return{allShapes:e,allConnections:f,topLevel:k,
enclosedConnections:h,enclosedElements:g}}function mc(a,b){b=!!b;ja(a)||(a=[a]);var c,d,e,f;O(a,function(g){var h=g;g.waypoints&&!b&&(h=mc(g.waypoints,!0));g=h.x;var k=h.y,m=h.height||0;h=h.width||0;if(g<c||void 0===c)c=g;if(k<d||void 0===d)d=k;if(g+h>e||void 0===e)e=g+h;if(k+m>f||void 0===f)f=k+m});return{x:c,y:d,height:f-d,width:e-c}}function uw(a,b){var c={};O(a,function(d){var e=d;e.waypoints&&(e=mc(e));!ua(b.y)&&e.x>b.x&&(c[d.id]=d);!ua(b.x)&&e.y>b.y&&(c[d.id]=d);e.x>b.x&&e.y>b.y&&(ua(b.width)&&
ua(b.height)&&e.width+e.x<b.width+b.x&&e.height+e.y<b.height+b.y?c[d.id]=d:ua(b.width)&&ua(b.height)||(c[d.id]=d))});return c}function An(a){return"waypoints"in a?"connection":"x"in a?"shape":"root"}function $d(a,b){return R({},a||{},b||{})}function nc(a,b){Db.call(this,a,1);this.CONNECTION_STYLE=b.style(["no-fill"],{strokeWidth:5,stroke:"fuchsia"});this.SHAPE_STYLE=b.style({fill:"white",stroke:"fuchsia",strokeWidth:2});this.FRAME_STYLE=b.style(["no-fill"],{stroke:"fuchsia",strokeDasharray:4,strokeWidth:2})}
function nd(a,b){if(!a||!b)return-1;var c=a.indexOf(b);-1!==c&&a.splice(c,1);return c}function oc(a,b,c){if(a&&b){"number"!==typeof c&&(c=-1);var d=a.indexOf(b);if(-1!==d)if(d!==c&&-1!==c)a.splice(d,1);else return;-1!==c?a.splice(c,0,b):a.push(b)}}function Bn(a){return ua(a)?a+"px":a}function vw(a){a=R({},{width:"100%",height:"100%"},a);var b=a.container||document.body,c=document.createElement("div");c.setAttribute("class","djs-container");R(c.style,{position:"relative",overflow:"hidden",width:Bn(a.width),
height:Bn(a.height)});b.appendChild(c);return c}function Cn(a,b,c){var d=ea("g");za(d).add(b);a.insertBefore(d,a.childNodes[void 0!==c?c:a.childNodes.length-1]||null);return d}function la(a,b,c,d){this._eventBus=b;this._elementRegistry=d;this._graphicsFactory=c;this._init(a||{})}function Dn(a,b){a.setAttribute("transform","matrix("+b.a+","+b.b+","+b.c+","+b.d+","+b.e+","+b.f+")")}function Eb(a){this._elements={};this._eventBus=a}function En(a,b,c){var d=eh.extend(c[b.name]||[],a,b,c);Object.defineProperty(c,
b.name,{enumerable:b.enumerable,value:d});d.length&&d.forEach(function(e){a.set(e,b.inverse,c)})}function ww(a,b,c){var d=b.inverse,e=c[b.name];Object.defineProperty(c,b.name,{configurable:b.configurable,enumerable:b.enumerable,get:function(){return e},set:function(f){if(f!==e){var g=e;e=null;g&&a.unset(g,d,c);e=f;a.set(e,d,c)}}})}function nb(a,b){if(!(this instanceof nb))return new nb(a,b);a.inverse=b;b.inverse=a;this.props={};this.props[a.name]=a;this.props[b.name]=b}function ae(){Object.defineProperty(this,
"businessObject",{writable:!0});Object.defineProperty(this,"label",{get:function(){return this.labels[0]},set:function(a){var b=this.label,c=this.labels;!a&&b?c.remove(b):c.add(a,0)}});Fn.bind(this,"parent");Gn.bind(this,"labels");Hn.bind(this,"outgoing");In.bind(this,"incoming")}function od(){ae.call(this);Fn.bind(this,"children");Jn.bind(this,"host");Jn.bind(this,"attachers")}function Kn(){od.call(this)}function Ln(){od.call(this);Gn.bind(this,"labelTarget")}function Mn(){ae.call(this);Hn.bind(this,
"source");In.bind(this,"target")}function pc(){this._uid=12}function Lb(a,b,c){var d=ah.createSVGTransform();d.setTranslate(b,c);df(a,d)}function ob(a,b){this._eventBus=a;this._elementRegistry=b}function xw(a){function b(f){0<=c.indexOf(f)||((f.__depends__||[]).forEach(b),0<=c.indexOf(f)||(c.push(f),(f.__init__||[]).forEach(function(g){d.push(g)})))}var c=[],d=[];a.forEach(b);var e=new Zd(c);d.forEach(function(f){try{e["string"===typeof f?"get":"invoke"](f)}catch(g){throw console.error("Failed to instantiate component"),
console.error(g.stack),g;}});return e}function be(a,b){var c;(c=b)||(c=a||{},c=[{config:["value",c]},yw].concat(c.modules||[]),c=xw(c));this.injector=b=c;this.get=b.get;this.invoke=b.invoke;this.get("eventBus").fire("diagram.init")}function zw(a,b){function c(k,m){if(k.gfx)throw Error("already rendered "+k.id);return a.element(k,m)}function d(k){O(k,function(m){m()})}function e(k){var m=[];g(k,function(l){P(l,"biodi:Bounds")?c(k,l):P(l,"biodi:Edge")&&m.push(l)});f(m,k)}function f(k,m){function l(r,
q){var u=q&&q.href.slice(1),v=Ha(k,Sd({source:u}));v&&h.push(function(){c(r,v)})}if(P(m,"dmn:Association"))return l(m,m.sourceRef);O(["informationRequirement","knowledgeRequirement","authorityRequirement"],function(r){O(m[r],function(q){var u=null;P(q,"dmn:InformationRequirement")?u=["requiredDecision","requiredInput"]:P(q,"dmn:KnowledgeRequirement")?u=["requiredKnowledge"]:P(q,"dmn:AuthorityRequirement")&&(u=["requiredDecision","requiredInput","requiredAuthority"]);u&&O(u,function(v){q[v]&&l(q,q[v])})})})}
function g(k,m){var l=k.extensionElements;l&&O(l.values,m)}var h=[];return{handleDefinitions:function(k){a.root(k);O(["decision","drgElements","artifacts"],function(m){k[m]&&O(k[m],e)});d(h)}}}function Aw(a,b,c){function d(h){(new zw({root:function(k){return e.root(k)},element:function(k,m){return e.add(k,m)},error:function(k,m){f.push({message:k,context:m})}})).handleDefinitions(h)}var e=a.get("drdImporter");a=a.get("eventBus");var f=[];a.fire("import.start",{definitions:b});try{d(b)}catch(h){var g=
h}a.fire("import.done",{error:g,warnings:f});c(g,f)}function Bw(a){a=a.split("-");return{horizontal:a[0]||"center",vertical:a[1]||"top"}}function Cw(a){return gb(a)?R({top:0,left:0,right:0,bottom:0},a):{top:a,left:a,right:a,bottom:a}}function Dw(a,b,c){for(var d=a.shift(),e=d,f;;){var g=void 0,h=void 0,k=e,m=c;m.textContent=k;try{var l=""===k;m.textContent=l?"dummy":k;h=m.getBBox();g={width:h.width+2*h.x,height:h.height};l&&(g.width=0);f=g}catch(q){f={width:0,height:0}}f.width=e?f.width:0;if(" "===
e||""===e||f.width<Math.round(b)||2>e.length)return b=e,b.length<d.length&&(d=d.slice(b.length).trim(),a.unshift(d)),{width:f.width,height:f.height,text:b};k=g=Math.max(b/f.width*e.length,1);m=e.split(/(\s|-)/g);l=[];var r=0;if(1<m.length)for(;h=m.shift();)if(h.length+r<k)l.push(h),r+=h.length;else{"-"===h&&l.pop();break}(h=l.join(""))||(h=e.slice(0,Math.max(Math.round(g-1),1)));e=h}}function Ew(){var a=document.getElementById("helper-svg");a||(a=ea("svg"),W(a,{id:"helper-svg",width:0,height:0,style:"visibility: hidden; position: fixed"}),
document.body.appendChild(a));return a}function ef(a){this._config=R({},{size:Fw,padding:0,style:{},align:"center-top"},a||{})}function fh(a,b,c){function d(v){return"url(#"+q[v].id+")"}function e(v){function w(p,t){var x=R({strokeWidth:1,strokeLinecap:"round",strokeDasharray:"none"},t.attrs),A=t.ref||{x:0,y:0},z=t.scale||1;"none"===x.strokeDasharray&&(x.strokeDasharray=[1E4,1]);var y=ea("marker");W(t.element,x);ha(y,t.element);W(y,{id:p,viewBox:"0 0 20 20",refX:A.x,refY:A.y,markerWidth:20*z,markerHeight:20*
z,orient:"auto"});x=xa("defs",v);x||(x=ea("defs"),ha(v,x));ha(x,y);q[p]=y}var n=ea("path");W(n,{d:"M 11 5 L 1 10 L 11 15"});w("association-start",{element:n,attrs:{fill:"none",stroke:"black",strokeWidth:1.5},ref:{x:1,y:10},scale:.5});n=ea("path");W(n,{d:"M 1 5 L 11 10 L 1 15"});w("association-end",{element:n,attrs:{fill:"none",stroke:"black",strokeWidth:1.5},ref:{x:12,y:10},scale:.5});n=ea("path");W(n,{d:"M 1 5 L 11 10 L 1 15 Z"});w("information-requirement-end",{element:n,ref:{x:11,y:10},scale:1});
n=ea("path");W(n,{d:"M 1 3 L 11 10 L 1 17"});w("knowledge-requirement-end",{element:n,attrs:{fill:"none",stroke:"black",strokeWidth:2},ref:{x:11,y:10},scale:.8});n=ea("circle");W(n,{cx:3,cy:3,r:3});w("authority-requirement-end",{element:n,ref:{x:3,y:3},scale:.9})}function f(v,w,n){ja(w)||(n=w,w=[]);return c.style(w||[],R(n,v||{}))}function g(v,w,n,p,t,x){gb(t)&&(x=t,t=0);t=t||0;x=f(x,{stroke:"black",strokeWidth:2,fill:"white"});var A=ea("rect");W(A,{x:t,y:t,width:w-2*t,height:n-2*t,rx:p,ry:p});W(A,
x);ha(v,A);return A}function h(v,w,n){w=r.createText(w||"",n);Kb(w,"class","djs-label");ha(v,w);return w}function k(v,w,n){var p=ld(w).name;return h(v,p,{box:w,align:n,padding:5})}function m(v,w,n){n=f(n,["no-fill"],{strokeWidth:2,stroke:"black"});var p=ea("path");W(p,{d:w});W(p,n);ha(v,p);return p}function l(v,w,n){n=f(n,["no-fill"],{stroke:"black",strokeWidth:2,fill:"none"});w=ch(w,n);ha(v,w);return w}Db.call(this,a);var r=new ef({style:{fontFamily:"Arial, sans-serif",fontSize:"12px"},size:{width:100}}),
q={},u={"dmn:Decision":function(v,w,n){n=g(v,w.width,w.height,0,n);k(v,w,"center-middle");return n},"dmn:KnowledgeSource":function(v,w,n){n=b.getScaledPath("KNOWLEDGE_SOURCE",{xScaleFactor:1.021,yScaleFactor:1,containerWidth:w.width,containerHeight:w.height,position:{mx:0,my:.075}});n=m(v,n,{strokeWidth:2,fill:"white",stroke:"black"});k(v,w,"center-middle");return n},"dmn:BusinessKnowledgeModel":function(v,w,n){n=b.getScaledPath("BUSINESS_KNOWLEDGE_MODEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:w.width,
containerHeight:w.height,position:{mx:0,my:.3}});n=m(v,n,{strokeWidth:2,fill:"white",stroke:"black"});k(v,w,"center-middle");return n},"dmn:InputData":function(v,w,n){n=g(v,w.width,w.height,22,n);k(v,w,"center-middle");return n},"dmn:TextAnnotation":function(v,w,n){n=g(v,w.width,w.height,0,0,{fill:"none",stroke:"none"});var p=b.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:w.width,containerHeight:w.height,position:{mx:0,my:0}});m(v,p);h(v,w.businessObject.text||"",
{box:w,align:"left-middle",padding:5});return n},"dmn:Association":function(v,w,n){var p=w.businessObject;n=R({strokeDasharray:"0.5, 5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"},n||{});if("One"===p.associationDirection||"Both"===p.associationDirection)n.markerEnd=d("association-end");"Both"===p.associationDirection&&(n.markerStart=d("association-start"));return l(v,w.waypoints,n)},"dmn:InformationRequirement":function(v,w,n){n=R({strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",
markerEnd:d("information-requirement-end")},n||{});return l(v,w.waypoints,n)},"dmn:KnowledgeRequirement":function(v,w,n){n=R({strokeWidth:1,strokeDasharray:5,strokeLinecap:"round",strokeLinejoin:"round",markerEnd:d("knowledge-requirement-end")},n||{});return l(v,w.waypoints,n)},"dmn:AuthorityRequirement":function(v,w,n){n=R({strokeWidth:1.5,strokeDasharray:5,strokeLinecap:"round",strokeLinejoin:"round",markerEnd:d("authority-requirement-end")},n||{});return l(v,w.waypoints,n)}};this.canRender=function(v){return P(v,
"dmn:DMNElement")||P(v,"dmn:InformationRequirement")||P(v,"dmn:KnowledgeRequirement")||P(v,"dmn:AuthorityRequirement")};this.drawShape=function(v,w){var n=u[w.type];return n?n(v,w):Db.prototype.drawShape.apply(this,[v,w])};this.drawConnection=function(v,w){var n=u[w.type];return n?n(v,w):Db.prototype.drawConnection.apply(this,[v,w])};a.on("canvas.init",function(v){e(v.svg)})}function Gw(a,b,c){var d=c;b.replace(Hw,function(e,f,g,h,k){f=f||h;d&&(f in d&&(d=d[f]),"function"==typeof d&&k&&(d=d()))});
return d=(null==d||d==c?a:d)+""}function Iw(a,b){return String(a).replace(Jw,function(c,d){return Gw(c,d,b)})}function gh(a,b){return R({id:a.id,type:a.$type,businessObject:a},b)}function Kw(a){if(a=a.waypoints)return hc(a,function(b){b={x:b.x,y:b.y};return R({original:b},b)})}function ce(a,b,c,d){this._eventBus=a;this._canvas=b;this._elementRegistry=d;this._elementFactory=c}function pd(a){a&&"function"===typeof a.stopPropagation&&a.stopPropagation()}function qc(a){return a.originalEvent||a.srcEvent}
function rc(a){a.pointers&&a.pointers.length&&(a=a.pointers[0]);a.touches&&a.touches.length&&(a=a.touches[0]);return a?{x:a.clientX,y:a.clientY}:null}function hh(a){return!(qc(a)||a).button}function Nn(a){var b=qc(a)||a;return hh(a)?/mac/i.test(navigator.platform)?b.metaKey:b.ctrlKey:!1}function Lw(a){return!0}function On(a,b,c){function d(p,t,x){if((u[p]||hh)(t)){var A;if(x)var z=b.getGraphics(x);else if(A=t.delegateTarget||t.target)z=A,x=b.get(z);z&&x&&!1===a.fire(p,{element:x,gfx:z,originalEvent:t})&&
(t.stopPropagation(),t.preventDefault())}}function e(p,t,x,A){var z=r[x]=function(y){d(x,y)};A&&(u[x]=A);z.$delegate=Mb.bind(p,"svg, .djs-element",t,z)}function f(p,t,x){(x=r[x])&&Mb.unbind(p,t,x.$delegate)}function g(p){O(q,function(t,x){e(p,x,t)})}function h(p){O(q,function(t,x){f(p,x,t)})}function k(p,t){t=R({stroke:"white",strokeWidth:15},t||{});return c.cls(p,["no-fill","no-border"],t)}function m(p,t){var x=n[t];if(!x)throw Error("invalid hit type <"+t+">");W(p,x);return p}var l=this,r={},q=
{click:"element.click",contextmenu:"element.contextmenu",dblclick:"element.dblclick",mousedown:"element.mousedown",mousemove:"element.mousemove",mouseover:"element.hover",mouseout:"element.out",mouseup:"element.mouseup"},u={"element.contextmenu":Lw};a.on("canvas.destroy",function(p){h(p.svg)});a.on("canvas.init",function(p){g(p.svg)});a.on(["shape.added","connection.added"],function(p){a.fire("interactionEvents.createHit",{element:p.element,gfx:p.gfx})});a.on(["shape.changed","connection.changed"],
500,function(p){a.fire("interactionEvents.updateHit",{element:p.element,gfx:p.gfx})});a.on("interactionEvents.createHit",500,function(p){l.createDefaultHit(p.element,p.gfx)});a.on("interactionEvents.updateHit",function(p){l.updateDefaultHit(p.element,p.gfx)});var v=k("djs-hit djs-hit-stroke"),w=k("djs-hit djs-hit-click-stroke"),n={all:k("djs-hit djs-hit-all"),"click-stroke":w,stroke:v};this.removeHits=function(p){p=Xb(".djs-hit",p);O(p,cb)};this.createDefaultHit=function(p,t){var x=p.waypoints,A=
p.isFrame;return x?this.createWaypointsHit(t,x):this.createBoxHit(t,A?"stroke":"all",{width:p.width,height:p.height})};this.createWaypointsHit=function(p,t){var x=ch(t);m(x,"stroke");ha(p,x);return x};this.createBoxHit=function(p,t,x){x=R({x:0,y:0},x);var A=ea("rect");m(A,t);W(A,x);ha(p,A);return A};this.updateDefaultHit=function(p,t){var x=xa(".djs-hit",t);if(x)return p.waypoints?W(x,{points:xn(p.waypoints)}):W(x,{width:p.width,height:p.height}),x};this.fire=d;this.triggerMouseEvent=function(p,t,
x){var A=q[p];if(!A)throw Error("unmapped DOM event name <"+p+">");return d(A,t,x)};this.mouseHandler=function(p){return r[p]};this.registerEvent=e;this.unregisterEvent=f}function ff(a,b,c){function d(g,h){var k=ea("rect");W(k,R({x:10,y:10,width:100,height:100},e));ha(g,k);return k}this.offset=6;var e=b.cls("djs-outline",["no-fill"]),f=this;a.on(["shape.added","shape.changed"],500,function(g){var h=g.element;g=g.gfx;var k=xa(".djs-outline",g);k||(k=d(g));f.updateShapeOutline(k,h)});a.on(["connection.added",
"connection.changed"],function(g){var h=g.element;g=g.gfx;var k=xa(".djs-outline",g);k||(k=d(g));f.updateConnectionOutline(k,h)})}function qd(a){this._eventBus=a;this._selectedElements=[];var b=this;a.on(["shape.remove","connection.remove"],function(c){b.deselect(c.element)});a.on(["diagram.clear"],function(c){b.select(null)})}function Pn(a,b,c,d){this._multiSelectionBox=null;a.on("element.hover",function(e){b.addMarker(e.element,"hover")});a.on("element.out",function(e){b.removeMarker(e.element,
"hover")});a.on("selection.changed",function(e){var f=e.oldSelection,g=e.newSelection;O(f,function(h){-1===g.indexOf(h)&&b.removeMarker(h,"selected")});O(g,function(h){-1===f.indexOf(h)&&b.addMarker(h,"selected")})})}function Qn(a,b,c,d){a.on("create.end",500,function(e){e=e.context;var f=e.elements,g=(e.hints||{}).autoSelect;e.canExecute&&!1!==g&&(ja(g)?b.select(g):b.select(f))});a.on("connect.end",500,function(e){e.context.canExecute&&e.context.target&&b.select(e.context.target)});a.on("shape.move.end",
500,function(e){var f=e.previousSelection||[],g=d.get(e.context.shape.id);Ha(f,function(h){return g.id===h.id})||b.select(g)});a.on("element.click",function(e){var f=e.element;f===c.getRootElement()&&(f=null);var g=b.isSelected(f),h=1<b.get().length;e=Nn(e);if(g&&h)return e?b.deselect(f):b.select(f);g?b.deselect(f):b.select(f,e)})}function Rn(a){this._counter=0;this._prefix=(a?a+"-":"")+Math.floor(1E9*Math.random())+"-"}function Qa(a,b,c,d){this._eventBus=b;this._canvas=c;this._elementRegistry=d;
this._ids=Mw;this._overlayDefaults=R({show:null,scale:!0},a&&a.defaults);this._overlays={};this._overlayContainers=[];a=c.getContainer();b=ta('<div class="djs-overlay-container" style="position: absolute; width: 0; height: 0;" />');a.insertBefore(b,a.firstChild);this._overlayRoot=b;this._init()}function ih(a,b){a.style.display=!1===b?"none":""}function Sn(a,b){a.style["transform-origin"]="top left";["","-ms-","-webkit-"].forEach(function(c){a.style[c+"transform"]=b})}function rd(a,b){this._eventBus=
a;this._canvas=b;a.on("diagram.init",function(){this._init()},this);a.on("import.done",function(c){this.update()},this)}function jh(a,b){a.on("palette.create",function(){var c=b.getContainer();wa(c).toggle("with-palette",!0)});a.on("palette.changed",function(c){c=c.twoColumn;var d=b.getContainer();wa(d).toggle("with-palette-two-column",c)})}function Tn(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,
d)}}function Nw(a,b,c){b&&Tn(a.prototype,b);c&&Tn(a,c);return a}function Ow(){de||(de=ta(Pw),Mb.bind(de,".backdrop","click",function(a){document.body.removeChild(de)}));document.body.appendChild(de)}function Un(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}));c.push.apply(c,d)}return c}function Vn(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:
{};b%2?Un(c,!0).forEach(function(d){var e=c[d];d in a?Object.defineProperty(a,d,{value:e,enumerable:!0,configurable:!0,writable:!0}):a[d]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):Un(c).forEach(function(d){Object.defineProperty(a,d,Object.getOwnPropertyDescriptor(c,d))})}return a}function Wn(a){if(Array.isArray(a)){var b=0;for(var c=Array(a.length);b<a.length;b++)c[b]=a[b];b=c}else b=void 0;b||(b=Symbol.iterator in Object(a)||"[object Arguments]"===
Object.prototype.toString.call(a)?Array.from(a):void 0);if(!(a=b))throw new TypeError("Invalid attempt to spread non-iterable instance");return a}function Ya(a){this._container=this._createContainer();Qw(this._container);this._init(this._container,a)}function Qw(a){var b=ta('<a href="http://bpmn.io" target="_blank" class="bjs-powered-by" title="Powered by bpmn.io" style="position: absolute; bottom: 15px; right: 15px; z-index: 100">'+Xn+"</a>");a.appendChild(b);U.bind(b,"click",function(c){Ow();c.preventDefault()})}
function sd(a,b){return{x:a.x-b.x,y:a.y-b.y}}function Yn(a,b){return(Math.abs(Math.log(a.min)/Math.log(10))+Math.abs(Math.log(a.max)/Math.log(10)))/b}function Nb(a,b,c){a=a||{};this._enabled=!1;this._canvas=c;this._container=c._container;this._handleWheel=this._handleWheel.bind(this);this._totalDelta=0;this._scale=a.scale||.75;var d=this;b.on("canvas.init",function(e){d._init(!1!==a.enabled)})}function gf(a){var b=wa(document.body);b.removeMatching(Rw);a&&b.add("djs-cursor-"+a)}function Zn(a,b){function c(){return!1}
b=b||"element.click";a.once(b,5E3,c);return function(){a.off(b,c)}}function $n(a,b){function c(f){var g=e.start,h=rc(f);g=sd(h,g);!e.dragging&&15<Math.sqrt(Math.pow(g.x,2)+Math.pow(g.y,2))&&(e.dragging=!0,Zn(a),gf("grab"));e.dragging&&(g=sd(h,e.last||e.start),b.scroll({dx:g.x,dy:g.y}),e.last=h);f.preventDefault()}function d(f){U.unbind(document,"mousemove",c);U.unbind(document,"mouseup",d);e=null;gf(null)}var e;a.on("element.mousedown",500,function(f){f=f.originalEvent;Za(f.target,".djs-draggable")?
f=void 0:f.button||f.ctrlKey||f.shiftKey||f.altKey?f=void 0:(e={start:rc(f)},U.bind(document,"mousemove",c),U.bind(document,"mouseup",d),f=!0);return f})}function kh(a){a.preventDefault();a.stopPropagation();"function"===typeof a.stopImmediatePropagation&&a.stopImmediatePropagation()}function lh(a){function b(k){setTimeout(function(){O(ao,function(m){U.unbind(a,m,kh,!0)})},500)}U.bind(a,"touchstart",function(k){O(ao,function(m){U.bind(a,m,kh,!0)})},!0);U.bind(a,"touchend",b,!0);U.bind(a,"touchcancel",
b,!0);var c=new Nc.Manager(a,{inputClass:Nc.TouchInput,recognizers:[]}),d=new Nc.Tap,e=new Nc.Pan({threshold:10}),f=new Nc.Press,g=new Nc.Pinch,h=new Nc.Tap({event:"doubletap",taps:2});g.requireFailure(e);g.requireFailure(f);c.add([e,f,g,h,d]);c.reset=function(k){var m=this.recognizers,l=this.session;l.stopped||(c.stop(k),setTimeout(function(){var r,q;for(r=0;q=m[r];r++)q.reset(),q.state=8;l.curRecognizer=null},0))};c.on("hammer.input",function(k){k.srcEvent.defaultPrevented&&c.reset(!0)});return c}
function bo(a,b,c,d,e){function f(q){return function(u){e.fire(q,u)}}function g(q){function u(w){function n(A){b.scroll({dx:A.deltaX-t,dy:A.deltaY-x});t=A.deltaX;x=A.deltaY}function p(A){r.off("panmove",n);r.off("panend",p);r.off("pancancel",p)}var t=0,x=0;r.on("panmove",n);r.on("panend",p);r.on("pancancel",p)}function v(w){var n=Za(w.target,"svg, .djs-element",!0);n=n&&d.get(n);if(k&&b.getRootElement()!==n)return k.start(w,n,!0);u()}r=lh(q);r.on("doubletap",f("element.dblclick"));r.on("tap",f("element.click"));
r.on("panstart",v);r.on("press",v);r.on("pinchstart",function(w){function n(A){b.zoom(Math.max(.2,Math.min(4,(1-(1-A.scale)/1.5)*t)),x);kh(A)}function p(A){r.off("pinchmove",n);r.off("pinchend",p);r.off("pinchcancel",p);r.reset(!0)}var t=b.zoom(),x=w.center;r.on("pinchmove",n);r.on("pinchend",p);r.on("pinchcancel",p)})}var h=a.get("dragging",!1),k=a.get("move",!1),m=a.get("contextPad",!1),l=a.get("palette",!1),r;if(h)c.on("drag.move",function(q){var u=q.originalEvent;if(u&&!(u instanceof MouseEvent)){u=
rc(u);u=document.elementFromPoint(u.x,u.y);var v=(u=Za(u,"svg, .djs-element",!0))&&d.get(u);v!==q.hover&&(q.hover&&h.out(q),v&&(h.hover({element:v,gfx:u}),q.hover=v,q.hoverGfx=u))}});if(m)c.on("contextPad.create",function(q){q=lh(q.pad.html);q.on("panstart",function(u){m.trigger("dragstart",u,!0)});q.on("press",function(u){m.trigger("dragstart",u,!0)});q.on("tap",function(u){m.trigger("click",u)})});if(l)c.on("palette.create",function(q){q=lh(q.container);q.on("panstart",function(u){l.trigger("dragstart",
u,!0)});q.on("press",function(u){l.trigger("dragstart",u,!0)});q.on("tap",function(u){l.trigger("click",u)})});c.on("canvas.init",function(q){g(q.svg)})}function mh(a,b){var c=this;b.on("canvas.init",function(d){c.addBBoxMarker(d.svg)})}function td(a){Ya.call(this,a)}function co(a){return a.y}function eo(a){return a.x}function ud(a){this._modeling=a}function Oc(a){a.preventDefault()}function fo(a,b,c,d){function e(t){var x=b.viewbox(),A=b._container.getBoundingClientRect();return{x:x.x+(t.x-A.left)/
x.scale,y:x.y+(t.y-A.top)/x.scale}}function f(t,x){x=x||p;var A=a.createEvent(R({},x.payload,x.data,{isTouch:x.isTouch}));return!1===a.fire("drag."+t,A)?!1:a.fire(x.prefix+"."+t,A)}function g(t){t=t.filter(function(x){return d.get(x.id)});t.length&&c.select(t)}function h(t,x){var A=p.payload,z=p.displacement,y=p.globalStart,B=rc(t);y=sd(B,y);var D=p.localStart;B=e(B);var H=sd(B,D);if(!p.active&&(x||Math.sqrt(Math.pow(y.x,2)+Math.pow(y.y,2))>p.threshold)){R(A,{x:vd(D.x+z.x),y:vd(D.y+z.y),dx:0,dy:0},
{originalEvent:t});if(!1===f("start"))return v();p.active=!0;p.keepSelection||(A.previousSelection=c.get(),c.select(null));p.cursor&&gf(p.cursor);b.addMarker(b.getRootElement(),"djs-drag-active")}pd(t);pd(qc(t));p.active&&(R(A,{x:vd(B.x+z.x),y:vd(B.y+z.y),dx:vd(H.x),dy:vd(H.y)},{originalEvent:t}),f("move"))}function k(t){var x=!0;p.active&&(t&&(p.payload.originalEvent=t,pd(t),pd(qc(t))),x=f("end"));!1===x&&f("rejected");t=w(!0!==x);f("ended",t)}function m(t){27===t.which&&(Oc(t),v())}function l(t){if(p.active){var x=
Zn(a);setTimeout(x,400);Oc(t)}k(t)}function r(t){h(t)}function q(t){var x=p.payload;x.hoverGfx=t.gfx;x.hover=t.element;f("hover")}function u(t){f("out");t=p.payload;t.hoverGfx=null;t.hover=null}function v(t){if(p){var x=p.active;x&&f("cancel");t=w(t);x&&f("canceled",t)}}function w(t){f("cleanup");gf(null);var x=p.trapClick?l:k;U.unbind(document,"mousemove",h);U.unbind(document,"dragstart",Oc);U.unbind(document,"selectstart",Oc);U.unbind(document,"mousedown",x,!0);U.unbind(document,"mouseup",x,!0);
U.unbind(document,"keyup",m);U.unbind(document,"touchstart",r,!0);U.unbind(document,"touchcancel",v,!0);U.unbind(document,"touchmove",h,!0);U.unbind(document,"touchend",k,!0);a.off("element.hover",q);a.off("element.out",u);b.removeMarker(b.getRootElement(),"djs-drag-active");x=p.payload.previousSelection;!1!==t&&x&&!c.get().length&&g(x);t=p;p=null;return t}var n={threshold:5,trapClick:!0},p;a.on("diagram.destroy",v);this.init=function(t,x,A,z){p&&v(!1);"string"===typeof x&&(z=A,A=x,x=null);z=R({},
n,z||{});var y=z.data||{};var B=z.trapClick?l:k;if(t){var D=qc(t)||t;var H=rc(t);pd(t);pd(qc(t));"dragstart"===D.type&&Oc(D)}else D=null,H={x:0,y:0};var L=e(H);x||(x=L);D="undefined"!==typeof TouchEvent&&D instanceof TouchEvent;p=R({prefix:A,data:y,payload:{},globalStart:H,displacement:sd(x,L),localStart:L,isTouch:D},z);z.manual||(D?(U.bind(document,"touchstart",r,!0),U.bind(document,"touchcancel",v,!0),U.bind(document,"touchmove",h,!0),U.bind(document,"touchend",k,!0)):(U.bind(document,"mousemove",
h),U.bind(document,"dragstart",Oc),U.bind(document,"selectstart",Oc),U.bind(document,"mousedown",B,!0),U.bind(document,"mouseup",B,!0)),U.bind(document,"keyup",m),a.on("element.hover",q),a.on("element.out",u));f("init");z.autoActivate&&h(t,!0)};this.move=h;this.hover=q;this.out=u;this.end=k;this.cancel=v;this.context=function(){return p};this.setOptions=function(t){R(n,t)}}function go(a,b,c){var d=this;a.on("drag.start",function(e){a.once("drag.move",1500,function(f){if(!f.hover){var g=f.originalEvent,
h=d._findTargetGfx(g),k=h&&c.get(h);h&&k&&(f.stopPropagation(),b.hover({element:k,gfx:h}),b.move(g))}})});a.on("drag.init",function(){function e(m){h=m.hover;k=m.hoverGfx}function f(){k=h=null}function g(){if(h){var m=h,l=k;k=h=null;b.out({element:m,gfx:l})}}var h,k;a.on("drag.hover",e);a.on("element.out",f);a.on("element.hover",1500,g);a.once("drag.cleanup",function(){a.off("drag.hover",e);a.off("element.out",f);a.off("element.hover",g)})});this._findTargetGfx=function(e){if(e instanceof MouseEvent)return e=
rc(e),e=document.elementFromPoint(e.x,e.y),Za(e,"svg, .djs-element",!0)}}function wd(a,b,c){this._canvas=c;this._opts=R({scrollThresholdIn:[20,20,20,20],scrollThresholdOut:[0,0,0,0],scrollRepeatTimeout:15,scrollStep:10},a);var d=this;b.on("drag.move",function(e){e=d._toBorderPoint(e);d.startScroll(e)});b.on(["drag.cleanup"],function(){d.stopScroll()})}function Sw(a,b,c){return b<a&&a<c?!0:!1}function nh(a){this._commandStack=a.get("commandStack",!1)}function hf(a,b){return a&&b?Math.sqrt(Math.pow(a.x-
b.x,2)+Math.pow(a.y-b.y,2)):-1}function ho(a,b,c,d){"undefined"===typeof d&&(d=5);if(!a||!b||!c)return!1;c=(b.x-a.x)*(c.y-a.y)-(b.y-a.y)*(c.x-a.x);a=hf(a,b);return Math.abs(c/a)<=d}function xd(a,b){var c=ja(a)?a:[a,b];return Tw(c)?"h":Uw(c)?"v":!1}function Tw(a,b){var c=ja(a)?a:[a,b];var d=c.slice().shift();return gc(c,function(e){return 2>=Math.abs(d.y-e.y)})}function Uw(a,b){var c=ja(a)?a:[a,b];var d=c.slice().shift();return gc(c,function(e){return 2>=Math.abs(d.x-e.x)})}function oh(a,b){return{x:Math.round(a.x+
(b.x-a.x)/2),y:Math.round(a.y+(b.y-a.y)/2)}}function ee(a){if("function"==typeof a||Object(a)!==a)return a;var b=new a.constructor,c;for(c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=ee(a[c]));return b}function Vw(a){function b(){var c=Array.prototype.slice.call(arguments,0),d=c.join("\u2400"),e=b.cache=b.cache||{},f=b.count=b.count||[];if(Object.prototype.hasOwnProperty.call(e,d)){a:{c=0;for(var g=f.length;c<g;c++)if(f[c]===d){f.push(f.splice(c,1)[0]);break a}}return e[d]}1E3<=f.length&&
delete e[f.shift()];f.push(d);e[d]=a.apply(0,c);return e[d]}return b}function Ww(a){if(!a)return null;var b=yd(a);if(b.arr)return ee(b.arr);var c={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},d=[];jf(a)&&jf(a[0])&&(d=ee(a));d.length||String(a).replace(Xw,function(e,f,g){var h=[];e=f.toLowerCase();g.replace(Yw,function(k,m){m&&h.push(+m)});"m"==e&&2<h.length&&(d.push([f].concat(h.splice(0,2))),e="l",f="m"==f?"l":"L");for(;h.length>=c[e]&&(d.push([f].concat(h.splice(0,c[e]))),c[e]););});d.toString=yd.toString;
b.arr=ee(d);return d}function yd(a){var b=yd.ps=yd.ps||{};b[a]?b[a].sleep=100:b[a]={sleep:100};setTimeout(function(){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&c!=a&&(b[c].sleep--,!b[c].sleep&&delete b[c])});return b[a]}function ph(a,b,c,d){1===arguments.length&&(b=a.y,c=a.width,d=a.height,a=a.x);return{x:a,y:b,width:c,height:d,x2:a+c,y2:b+d}}function io(){return this.join(",").replace(Zw,"$1")}function kf(a){a=ee(a);a.toString=io;return a}function jo(a,b,c,d,e,f,g,h,k){var m=1-k,l=
ko(m,3),r=ko(m,2),q=k*k*k;return{x:Math.round(1E11*(l*a+3*r*k*c+3*m*k*k*e+q*g))/1E11,y:Math.round(1E11*(l*b+3*r*k*d+3*m*k*k*f+q*h))/1E11}}function lo(a){a=$w.apply(null,a);return ph(a.x0,a.y0,a.x1-a.x0,a.y1-a.y0)}function sc(a,b,c){return b>=a.x&&b<=a.x+a.width&&c>=a.y&&c<=a.y+a.height}function mo(a,b,c,d,e,f,g,h,k){null==k&&(k=1);k=(1<k?1:0>k?0:k)/2;for(var m=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],l=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,
.0472,.0472],r=0,q=0;12>q;q++){var u=k*m[q]+k,v=u*(u*(-3*a+9*c-9*e+3*g)+6*a-12*c+6*e)-3*a+3*c;u=u*(u*(-3*b+9*d-9*f+3*h)+6*b-12*d+6*f)-3*b+3*d;r+=l[q]*Fa.sqrt(v*v+u*u)}return k*r}function ax(a){var b=yd(a);if(b.abs)return kf(b.abs);jf(a)&&jf(a&&a[0])||(a=Ww(a));if(!a||!a.length)return[["M",0,0]];var c=[],d=0,e=0,f=0,g=0,h=0;"M"==a[0][0]&&(d=+a[0][1],e=+a[0][2],f=d,g=e,h++,c[0]=["M",d,e]);for(var k,m,l=h,r=a.length;l<r;l++){c.push(k=[]);m=a[l];h=m[0];if(h!=h.toUpperCase())switch(k[0]=h.toUpperCase(),
k[0]){case "A":k[1]=m[1];k[2]=m[2];k[3]=m[3];k[4]=m[4];k[5]=m[5];k[6]=+m[6]+d;k[7]=+m[7]+e;break;case "V":k[1]=+m[1]+e;break;case "H":k[1]=+m[1]+d;break;case "M":f=+m[1]+d,g=+m[2]+e;default:for(var q=1,u=m.length;q<u;q++)k[q]=+m[q]+(q%2?d:e)}else for(q=0,u=m.length;q<u;q++)k[q]=m[q];h.toUpperCase();switch(k[0]){case "Z":d=+f;e=+g;break;case "H":d=k[1];break;case "V":e=k[1];break;case "M":f=k[k.length-2],g=k[k.length-1];default:d=k[k.length-2],e=k[k.length-1]}}c.toString=io;b.abs=kf(c);return c}function no(a){return a[0]===
a[2]&&a[1]===a[3]&&a[4]===a[6]&&a[5]===a[7]}function lf(a,b,c,d){return[a,b,c,d,c,d]}function oo(a,b,c,d,e,f){var g=1/3,h=2/3;return[g*a+h*c,g*b+h*d,g*e+h*c,g*f+h*d,e,f]}function po(a,b,c,d,e,f,g,h,k,m){var l=120*tc/180,r=tc/180*(+e||0),q=[],u=Vw(function(x,A,z){var y=x*Fa.cos(z)-A*Fa.sin(z);x=x*Fa.sin(z)+A*Fa.cos(z);return{x:y,y:x}});if(m){p=m[0];var v=m[1];f=m[2];n=m[3]}else{v=u(a,b,-r);a=v.x;b=v.y;v=u(h,k,-r);h=v.x;k=v.y;v=(a-h)/2;p=(b-k)/2;n=v*v/(c*c)+p*p/(d*d);1<n&&(n=Fa.sqrt(n),c*=n,d*=n);n=
c*c;var w=d*d;n=(f==g?-1:1)*Fa.sqrt(uc((n*w-n*p*p-w*v*v)/(n*p*p+w*v*v)));f=n*c*p/d+(a+h)/2;var n=n*-d*v/c+(b+k)/2,p=Fa.asin(((b-n)/d).toFixed(9));v=Fa.asin(((k-n)/d).toFixed(9));p=a<f?tc-p:p;v=h<f?tc-v:v;0>p&&(p=2*tc+p);0>v&&(v=2*tc+v);g&&p>v&&(p-=2*tc);!g&&v>p&&(v-=2*tc)}if(uc(v-p)>l){q=v;w=h;var t=k;v=p+l*(g&&v>p?1:-1);h=f+c*Fa.cos(v);k=n+d*Fa.sin(v);q=po(h,k,c,d,e,0,g,w,t,[v,q,f,n])}f=v-p;e=Fa.cos(p);l=Fa.sin(p);g=Fa.cos(v);v=Fa.sin(v);f=Fa.tan(f/4);c=4/3*c*f;f*=4/3*d;d=[a,b];a=[a+c*l,b-f*e];b=
[h+c*v,k-f*g];h=[h,k];a[0]=2*d[0]-a[0];a[1]=2*d[1]-a[1];if(m)return[a,b,h].concat(q);q=[a,b,h].concat(q).join().split(",");m=[];h=0;for(k=q.length;h<k;h++)m[h]=h%2?u(q[h-1],q[h],r).y:u(q[h],q[h+1],r).x;return m}function $w(a,b,c,d,e,f,g,h){for(var k=[],m=[[],[]],l,r,q,u,v=0;2>v;++v)0==v?(r=6*a-12*c+6*e,l=-3*a+9*c-9*e+3*g,q=3*c-3*a):(r=6*b-12*d+6*f,l=-3*b+9*d-9*f+3*h,q=3*d-3*b),1E-12>uc(l)?1E-12>uc(r)||(l=-q/r,0<l&&1>l&&k.push(l)):(u=r*r-4*q*l,q=Fa.sqrt(u),0>u||(u=(-r+q)/(2*l),0<u&&1>u&&k.push(u),
l=(-r-q)/(2*l),0<l&&1>l&&k.push(l)));for(r=v=k.length;v--;)l=k[v],q=1-l,m[0][v]=q*q*q*a+3*q*q*l*c+3*q*l*l*e+l*l*l*g,m[1][v]=q*q*q*b+3*q*q*l*d+3*q*l*l*f+l*l*l*h;m[0][r]=a;m[1][r]=b;m[0][r+1]=g;m[1][r+1]=h;m[0].length=m[1].length=r+2;return{x0:Ob.apply(0,m[0]),y0:Ob.apply(0,m[1]),x1:Pb.apply(0,m[0]),y1:Pb.apply(0,m[1])}}function qo(a){var b=yd(a);if(b.curve)return kf(b.curve);var c=ax(a);a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};var d=function(q,u,v){if(!q)return["C",u.x,u.y,u.x,u.y,u.x,u.y];q[0]in
{T:1,Q:1}||(u.qx=u.qy=null);switch(q[0]){case "M":u.X=q[1];u.Y=q[2];break;case "A":q=["C"].concat(po.apply(0,[u.x,u.y].concat(q.slice(1))));break;case "S":"C"==v||"S"==v?(v=2*u.x-u.bx,u=2*u.y-u.by):(v=u.x,u=u.y);q=["C",v,u].concat(q.slice(1));break;case "T":"Q"==v||"T"==v?(u.qx=2*u.x-u.qx,u.qy=2*u.y-u.qy):(u.qx=u.x,u.qy=u.y);q=["C"].concat(oo(u.x,u.y,u.qx,u.qy,q[1],q[2]));break;case "Q":u.qx=q[1];u.qy=q[2];q=["C"].concat(oo(u.x,u.y,q[1],q[2],q[3],q[4]));break;case "L":q=["C"].concat(lf(u.x,u.y,q[1],
q[2]));break;case "H":q=["C"].concat(lf(u.x,u.y,q[1],u.y));break;case "V":q=["C"].concat(lf(u.x,u.y,u.x,q[1]));break;case "Z":q=["C"].concat(lf(u.x,u.y,u.X,u.Y))}return q},e=function(q,u){if(7<q[u].length){q[u].shift();for(var v=q[u];v.length;)f[u]="A",q.splice(u++,0,["C"].concat(v.splice(0,6)));q.splice(u,1);m=c.length}},f=[],g="",h="",k=0,m=c.length;for(;k<m;k++){c[k]&&(g=c[k][0]);"C"!=g&&(f[k]=g,k&&(h=f[k-1]));c[k]=d(c[k],a,h);"A"!=f[k]&&"C"==g&&(f[k]="C");e(c,k);var l=c[k],r=l.length;a.x=l[r-
2];a.y=l[r-1];a.bx=ro(l[r-4])||a.x;a.by=ro(l[r-3])||a.y}b.curve=kf(c);return c}function bx(a){var b=[];a.forEach(function(c,d){b.push([0===d?"M":"L",c.x,c.y])});return b}function cx(a,b){var c=so([["M",b.x,b.y],["m",0,-10],["a",10,10,0,1,1,0,20],["a",10,10,0,1,1,0,-20],["z"]],bx(a)),d=c[0];c=c[c.length-1];return d?d!==c?d.segment2!==c.segment2?(d=dx(d.segment2,c.segment2)-1,{point:a[d],bendpoint:!0,index:d}):{point:{x:mf(d.x+c.x)/2,y:mf(d.y+c.y)/2},index:d.segment2}:{point:{x:mf(d.x),y:mf(d.y)},index:d.segment2}:
null}function qh(a,b,c){var d=rc(c);var e=a._container.getBoundingClientRect();c=e.left;e=e.top;a=a.viewbox();a={x:a.x+(d.x-c)/a.scale,y:a.y+(d.y-e)/a.scale};a:{for(c=0;d=b[c];c++)if(10>=hf(d,a)){c={point:b[c],bendpoint:!0,index:c};break a}c=null}return c||cx(b,a)}function rh(a,b){var c=ea("g");za(c).add("djs-bendpoint");ha(a,c);var d=ea("circle");W(d,{cx:0,cy:0,r:4});za(d).add("djs-visual");ha(c,d);d=ea("circle");W(d,{cx:0,cy:0,r:10});za(d).add("djs-hit");ha(c,d);b&&za(c).add(b);return c}function to(a,
b,c){var d=ea("g"),e=oh(b,c),f=xd(b,c);ha(a,d);a=ea("g");ha(d,a);var g=c.x-b.x;b=c.y-b.y;b="h"===f?Math.abs(Math.round(2*g/3)):Math.abs(Math.round(2*b/3));c=ea("rect");W(c,{x:-7,y:-1.5,width:14,height:3});za(c).add("djs-visual");ha(a,c);c=ea("rect");W(c,{x:-b/2,y:-4.5,width:b,height:9});za(c).add("djs-hit");ha(a,c);b="v"===f?90:0;c=ah.createSVGTransform();c.setRotate(b,0,0);df(a,c);za(d).add("djs-segment-dragger");za(d).add("h"===f?"horizontal":"vertical");Lb(d,e.x,e.y);return d}function uo(a,b,c,
d,e){function f(v,w,n){U.bind(v,w,function(p){c.triggerMouseEvent(w,p,n);p.stopPropagation()})}function g(v,w){var n=b.getLayer("overlays"),p=xa('.djs-bendpoints[data-element-id="'+sh(v.id)+'"]',n);!p&&w&&(p=ea("g"),W(p,{"data-element-id":v.id}),za(p).add("djs-bendpoints"),ha(n,p),f(p,"mousedown",v),f(p,"click",v),f(p,"dblclick",v));return p}function h(v,w){return xa('.djs-segment-dragger[data-segment-idx="'+v+'"]',w)}function k(v,w){w.waypoints.forEach(function(n,p){var t=rh(v);ha(v,t);Lb(t,n.x,
n.y)});rh(v,"floating")}function m(v,w){for(var n=w.waypoints,p,t,x=1;x<n.length;x++)p=n[x-1],t=n[x],xd(p,t)&&(p=to(v,p,t),W(p,{"data-segment-idx":x}),f(p,"mousemove",w))}function l(v){O(Xb(".djs-bendpoint",v),function(w){cb(w)})}function r(v){O(Xb(".djs-segment-dragger",v),function(w){cb(w)})}function q(v){var w=g(v);w||(w=g(v,!0),k(w,v),m(w,v));return w}function u(v){var w=g(v);w&&(r(w),l(w),m(w,v),k(w,v))}a.on("connection.changed",function(v){u(v.element)});a.on("connection.remove",function(v){(v=
g(v.element))&&cb(v)});a.on("element.marker.update",function(v){var w=v.element;w.waypoints&&(w=q(w),v.add?za(w).add(v.marker):za(w).remove(v.marker))});a.on("element.mousemove",function(v){var w=v.element,n=w.waypoints;if(n&&(w=g(w,!0),v=qh(b,n,v.originalEvent))){var p=xa(".floating",w),t=v.point;p&&Lb(p,t.x,t.y);v.bendpoint||(w=h(v.index,w),p=n[v.index-1],t=n[v.index],n=v.point,v=oh(p,t),p=xd(p,t),w&&(w=xa(".djs-visual",w),n={x:n.x-v.x,y:n.y-v.y},"v"===p&&(n={x:n.y,y:n.x}),Lb(w,n.x,n.y)))}});a.on("element.mousedown",
function(v){var w=v.element;if(w.waypoints){v=v.originalEvent;var n=w.waypoints,p=qh(b,n,v);if(p){var t=w.waypoints;var x;if(0>=p.index||p.bendpoint)var A=null;else A=t[p.index-1],t=t[p.index],A=(x=xd(A,t))?Math.abs(Math.round(2*("h"===x?t.x-A.x:t.y-A.y)/3))/2:null;var z=p.index;t=p.point;0>=z||p.bendpoint?n=!1:(x=n[z-1],z=n[z],n=oh(x,z),x=xd(x,z),z=Math.abs(t.x-n.x),n=Math.abs(t.y-n.y),n=x&&z<=A&&n<=A);n?e.start(v,w,p.index):d.start(v,w,p.index,!p.bendpoint);w=!0}else w=void 0;return w}});a.on("selection.changed",
function(v){(v=v.newSelection[0])&&v.waypoints&&q(v)});a.on("element.hover",function(v){var w=v.element;w.waypoints&&(q(w),c.registerEvent(v.gfx,"mousemove","element.mousemove"))});a.on("element.out",function(v){c.unregisterEvent(v.gfx,"mousemove","element.mousemove")});a.on("element.updateId",function(v){var w=v.element;v=v.newId;w.waypoints&&(w=g(w))&&W(w,{"data-element-id":v})});this.addHandles=q;this.updateHandles=u;this.getBendpointsContainer=g;this.getSegmentDragger=h}function nf(a){return{x:Math.round(a.x),
y:Math.round(a.y)}}function th(a){return{top:a.y,right:a.x+(a.width||0),bottom:a.y+(a.height||0),left:a.x}}function pb(a){return nf({x:a.x+(a.width||0)/2,y:a.y+(a.height||0)/2})}function vo(a,b,c){c=c||0;gb(c)||(c={x:c,y:c});a=th(a);b=th(b);var d=a.left-c.x>=b.right,e=a.top-c.y>=b.bottom;e=a.bottom+c.y<=b.top?"top":e?"bottom":null;return(c=a.right+c.x<=b.left?"left":d?"right":null)&&e?e+"-"+c:c||e||"intersect"}function uh(a,b,c){a=so(a,b);return 1===a.length||2===a.length&&1>hf(a[0],a[1])?nf(a[0]):
1<a.length?(a=hd(a,function(d){var e=Math.floor(100*d.t2)||1;e=100-e;return d.segment2+"#"+((10>e?"0":"")+e)}),nf(a[c?0:a.length-1])):null}function vh(a,b,c,d,e,f){this._injector=a;this.start=function(g,h,k,m){var l=c.getGraphics(h),r=h.source,q=h.target,u=h.waypoints;u=m||0!==k?m||k!==u.length-1?"updateWaypoints":"reconnectEnd":"reconnectStart";var v="updateWaypoints"===u?"connection.updateWaypoints":"connection.reconnect",w=e.allowed(v,{connection:h,source:r,target:q});!1===w&&(w=e.allowed(v,{connection:h,
source:q,target:r}));!1!==w&&d.init(g,"bendpoint.move",{data:{connection:h,connectionGfx:l,context:{allowed:w,bendpointIndex:k,connection:h,source:r,target:q,insert:m,type:u}}})};b.on("bendpoint.move.hover",function(g){var h=g.context,k=h.connection,m=k.source,l=k.target;g=g.hover;var r=h.type;h.hover=g;var q;if(g){var u="updateWaypoints"===r?"connection.updateWaypoints":"connection.reconnect";(q=h.allowed=e.allowed(u,{connection:k,source:"reconnectStart"===r?g:m,target:"reconnectEnd"===r?g:l}))?
(h.source="reconnectStart"===r?g:m,h.target="reconnectEnd"===r?g:l):(!1===q&&(q=h.allowed=e.allowed(u,{connection:k,source:"reconnectEnd"===r?g:l,target:"reconnectStart"===r?g:m})),q&&(h.source="reconnectEnd"===r?g:l,h.target="reconnectStart"===r?g:m))}});b.on(["bendpoint.move.out","bendpoint.move.cleanup"],function(g){g=g.context;g.hover=null;g.source=null;g.target=null;g.allowed=!1});b.on("bendpoint.move.end",function(g){var h=g.context,k=h.allowed,m=h.bendpointIndex,l=h.connection,r=h.insert,q=
l.waypoints.slice(),u=h.source,v=h.target,w=h.type,n={};g={x:wo(g.x),y:wo(g.y)};if(!k)return!1;if("updateWaypoints"===w){r?q.splice(m,0,g):q[m]=g;n={bendpointMove:{insert:r,bendpointIndex:m}};q=this.cropWaypoints(l,q);h=f.updateWaypoints;q=q.slice();for(k=0;q[k];)m=q[k],r=q[k-1],u=q[k+1],0===hf(m,u)||ho(r,u,m)?q.splice(k,1):k++;h.call(f,l,q,n)}else"reconnectStart"===w?(n.docking="source",of(h)&&(n.docking="target",n.newWaypoints=q.reverse())):"reconnectEnd"===w&&(n.docking="target",of(h)&&(n.docking=
"source",n.newWaypoints=q.reverse())),f.reconnect(l,u,v,g,n)},this)}function of(a){var b=a.hover,c=a.source,d=a.target;a=a.type;if("reconnectStart"===a)return b&&d&&b===d&&c!==d;if("reconnectEnd"===a)return b&&c&&b===c&&c!==d}function xo(a,b,c,d){this._injector=b;var e=b.get("connectionPreview",!1);c.on("bendpoint.move.start",function(f){var g=f.context,h=g.bendpointIndex,k=g.connection,m=g.insert,l=k.waypoints,r=l.slice();g.waypoints=l;m&&r.splice(h,0,{x:f.x,y:f.y});k.waypoints=r;f=g.draggerGfx=
rh(d.getLayer("overlays"));za(f).add("djs-dragging");d.addMarker(k,"djs-element-hidden");d.addMarker(k,"djs-updating")});c.on("bendpoint.move.hover",function(f){var g=f.context;f=g.allowed;var h=g.hover;g=g.type;h&&(d.addMarker(h,"connect-hover"),"updateWaypoints"!==g&&(f?(d.removeMarker(h,"connect-not-ok"),d.addMarker(h,"connect-ok")):!1===f&&(d.removeMarker(h,"connect-ok"),d.addMarker(h,"connect-not-ok"))))});c.on(["bendpoint.move.out","bendpoint.move.cleanup"],1100,function(f){var g=f.context;
f=g.hover;g=g.target;f&&(d.removeMarker(f,"connect-hover"),d.removeMarker(f,g?"connect-ok":"connect-not-ok"))});c.on("bendpoint.move.move",function(f){var g=f.context,h=g.allowed,k=g.bendpointIndex,m=g.draggerGfx,l=g.hover,r=g.type,q=g.connection,u=q.source,v=q.target,w=q.waypoints.slice(),n={x:f.x,y:f.y};if(e){var p={source:u,target:v};"reconnectStart"===r?of(g)?(p.connectionEnd=n,p.source=v,p.target=l||u,w=w.reverse()):(p.connectionStart=n,p.source=l||u):"reconnectEnd"===r?of(g)?(p.connectionStart=
n,p.target=u,p.source=l||v,w=w.reverse()):(p.connectionEnd=n,p.target=l||v):(p.noCropping=!0,p.noLayout=!0,w[k]=n);"updateWaypoints"===r&&(w=a.cropWaypoints(q,w));p.waypoints=w;e.drawPreview(g,h,p)}Lb(m,f.x,f.y)},this);c.on(["bendpoint.move.end","bendpoint.move.cancel"],1100,function(f){f=f.context;var g=f.connection,h=f.draggerGfx,k=f.hover,m=f.target;g.waypoints=f.waypoints;cb(h);d.removeMarker(g,"djs-updating");d.removeMarker(g,"djs-element-hidden");k&&(d.removeMarker(k,"connect-ok"),d.removeMarker(k,
m?"connect-ok":"connect-not-ok"));e&&e.cleanUp(f)})}function pf(a,b,c){return{x:"x"===b?c:a.x,y:"y"===b?c:a.y}}function yo(a,b,c){if(a.original)return a.original;b=pb(b);c="x"===c?"y":"x";return pf(a,c,b[c])}function zo(a,b,c,d,e,f){function g(l,r){if(!m)return r;var q=l.waypoints;l.waypoints=r;var u=m.getCroppedWaypoints(l);l.waypoints=q;return u}function h(l){e.update("connection",l.connection,l.connectionGfx)}function k(l,r){var q=0;return{waypoints:l.filter(function(u,v){return ho(l[v-1],l[v+
1],u)?(q=v<=r?q-1:q,!1):!0}),segmentOffset:q}}var m=a.get("connectionDocking",!1);this.start=function(l,r,q){var u=c.getGraphics(r),v=q-1,w=r.waypoints,n=w[v],p=w[q],t=qh(c,w,l),x;if(x=xd(n,p))x="v"===x?"x":"y",0===v&&(n=yo(n,r.source,x)),q===w.length-1&&(p=yo(p,r.target,x)),w=t?t.point:{x:(n.x+p.x)/2,y:(n.y+p.y)/2},d.init(l,w,"connectionSegment.move",{cursor:"x"===x?"resize-ew":"resize-ns",data:{connection:r,connectionGfx:u,context:{connection:r,segmentStartIndex:v,segmentEndIndex:q,segmentStart:n,
segmentEnd:p,axis:x,dragPosition:w}}})};b.on("connectionSegment.move.start",function(l){var r=l.context;l=l.connection;var q=c.getLayer("overlays");r.originalWaypoints=l.waypoints.slice();r.draggerGfx=to(q,r.segmentStart,r.segmentEnd);za(r.draggerGfx).add("djs-dragging");c.addMarker(l,"djs-updating")});b.on("connectionSegment.move.move",function(l){var r=l.context,q=r.connection,u=r.segmentStartIndex,v=r.segmentEndIndex,w=r.segmentStart,n=r.segmentEnd,p=r.axis,t=r.originalWaypoints.slice(),x=pf(w,
p,w[p]+l["d"+p]),A=pf(n,p,n[p]+l["d"+p]),z=t.length;p=0;t[u]=x;t[v]=A;if(2>u){var y=vo(q.source,x);1===u?"intersect"===y&&(t.shift(),t[0]=x,p--):"intersect"!==y&&(t.unshift(w),p++)}v>z-3&&(w=vo(q.target,A),v===z-2?"intersect"===w&&(t.pop(),t[t.length-1]=A):"intersect"!==w&&t.push(n));r.newWaypoints=q.waypoints=g(q,t);v=r.newWaypoints;q=v[r.segmentStartIndex+p];v=v[r.segmentEndIndex+p];n="x"===r.axis?"y":"x";q=pf(q,n,Math.min(Math.max(Math.min(q[n],v[n])+20,l[n]),Math.max(q[n],v[n])-20));Lb(r.draggerGfx,
q.x,q.y);r.newSegmentStartIndex=u+p;h(l)});b.on("connectionSegment.move.hover",function(l){l.context.hover=l.hover;c.addMarker(l.hover,"connect-hover")});b.on(["connectionSegment.move.out","connectionSegment.move.cleanup"],function(l){(l=l.context.hover)&&c.removeMarker(l,"connect-hover")});b.on("connectionSegment.move.cleanup",function(l){l=l.context;var r=l.connection;l.draggerGfx&&cb(l.draggerGfx);c.removeMarker(r,"djs-updating")});b.on(["connectionSegment.move.cancel","connectionSegment.move.end"],
function(l){var r=l.context;r.connection.waypoints=r.originalWaypoints;h(l)});b.on("connectionSegment.move.end",function(l){l=l.context;var r=l.connection,q=l.newWaypoints,u=l.newSegmentStartIndex;q=q.map(function(w){return{original:w.original,x:Math.round(w.x),y:Math.round(w.y)}});q=k(q,u);var v=g(r,q.waypoints);f.updateWaypoints(r,v,{segmentMove:{segmentStartIndex:l.segmentStartIndex,newSegmentStartIndex:u+q.segmentOffset}})})}function zd(a,b){return!a||isNaN(a.x)||isNaN(a.y)?b:{x:Ao(a.x+a.width/
2),y:Ao(a.y+a.height/2)}}function fe(a,b){var c=a.snapped;return c?"string"===typeof b?c[b]:c.x&&c.y:!1}function vc(a,b,c){if("string"!==typeof b)throw Error("axis must be in [x, y]");if("number"!==typeof c&&!1!==c)throw Error("value must be Number or false");var d=a[b],e=a.snapped=a.snapped||{};!1===c?e[b]=!1:(e[b]=!0,c-=d,a[b]+=c,a["d"+b]+=c);return d}function Bo(a){function b(f,g){if(ja(f))for(var h=f.length;h--;){if(10>=ex(f[h]-g))return f[h]}else{f=+f;h=g%f;if(10>h)return g-h;if(h>f-10)return g-
h+f}return g}function c(f){if(f.width)return{x:Co(f.width/2+f.x),y:Co(f.height/2+f.y)}}function d(f){var g=f.snapPoints,h=f.connection,k=h.waypoints,m=f.segmentStartIndex,l=f.segmentEndIndex,r=f.axis;if(g)return g;var q=[k[m-1],f.segmentStart,f.segmentEnd,k[l+1]];2>m&&q.unshift(c(h.source));l>k.length-3&&q.unshift(c(h.target));f.snapPoints=g={horizontal:[],vertical:[]};O(q,function(u){u&&(u=u.original||u,"y"===r&&g.horizontal.push(u.y),"x"===r&&g.vertical.push(u.x))});return g}function e(f){var g=
f.snapPoints,h=f.connection.waypoints,k=f.bendpointIndex;if(g)return g;h=[h[k-1],h[k+1]];f.snapPoints=g={horizontal:[],vertical:[]};O(h,function(m){m&&(m=m.original||m,g.horizontal.push(m.y),g.vertical.push(m.x))});return g}a.on("connectionSegment.move.move",1500,function(f){var g=d(f.context),h=f.x,k=f.y;if(g){var m=b(g.vertical,h);var l=b(g.horizontal,k);var r=h-m,q=k-l;R(f,{dx:f.dx-r,dy:f.dy-q,x:m,y:l});(r||-1!==g.vertical.indexOf(h))&&vc(f,"x",m);(q||-1!==g.horizontal.indexOf(k))&&vc(f,"y",l)}});
a.on(["bendpoint.move.move","bendpoint.move.end"],1500,function(f){var g=f.context,h=e(g),k=(g=g.hover)&&c(g);g=f.x;var m=f.y;if(h){var l=b(k?h.vertical.concat([k.x]):h.vertical,g);k=b(k?h.horizontal.concat([k.y]):h.horizontal,m);var r=g-l,q=m-k;R(f,{dx:f.dx-r,dy:f.dy-q,x:f.x-r,y:f.y-q});(r||-1!==h.vertical.indexOf(g))&&vc(f,"x",l);(q||-1!==h.horizontal.indexOf(m))&&vc(f,"y",k)}})}function wb(a,b,c){this._eventBus=b;this._overlays=c;this._overlaysConfig={position:{right:-9,top:-6},scale:void 0!==
(a&&a.scale)?a.scale:{min:1,max:1.5}};this._current=null;this._init()}function fx(a,b){var c=wa(a);(ja(b)?b:b.split(/\s+/g)).forEach(function(d){c.add(d)})}function Do(a,b,c,d){function e(f,g){return d.allowed("connection.create",{source:f,target:g})}a.on("connect.hover",function(f){var g=f.context,h=g.start;f=f.hover;g.hover=f;var k=g.canExecute=e(h,f);null!=k&&(!1!==k?(g.source=h,g.target=f):(k=g.canExecute=e(f,h),null!=k&&!1!==k&&(g.source=f,g.target=h)))});a.on(["connect.out","connect.cleanup"],
function(f){f=f.context;f.hover=null;f.source=null;f.target=null;f.canExecute=!1});a.on("connect.end",function(f){var g=f.context,h=g.canExecute,k=g.connectionStart,m={x:f.x,y:f.y};f=g.source;var l=g.target;if(!h)return!1;var r=null;g={connectionStart:qf(g)?m:k,connectionEnd:qf(g)?k:m};gb(h)&&(r=h);c.connect(f,l,r,g)});this.start=function(f,g,h,k){gb(h)||(k=h,h=pb(g));b.init(f,"connect",{autoActivate:k,data:{shape:g,context:{start:g,connectionStart:h}}})}}function qf(a){var b=a.hover,c=a.source;a=
a.target;return b&&c&&b===c&&c!==a}function Eo(a,b,c){var d=a.get("connectionPreview",!1);d&&b.on("connect.move",function(e){var f=e.context,g=f.canExecute,h=f.hover,k=f.source,m=f.start,l=f.startPosition,r=f.target,q=qf(f)?{x:e.x,y:e.y}:l;e=qf(f)?l:{x:e.x,y:e.y};d.drawPreview(f,g,{source:k||m,target:r||h,connectionStart:q,connectionEnd:e})});b.on("connect.hover",900,function(e){var f=e.context.canExecute;null!==f&&c.addMarker(e.hover,f?"connect-ok":"connect-not-ok")});b.on(["connect.out","connect.cleanup"],
1100,function(e){if(e=e.hover)c.removeMarker(e,"connect-ok"),c.removeMarker(e,"connect-not-ok")});d&&b.on("connect.cleanup",function(e){d.cleanUp(e.context)})}function Pc(a,b,c,d){this._elementRegistry=a;this._canvas=c;this._styles=d;this._clonedMarkers={};var e=this;b.on("drag.cleanup",function(){O(e._clonedMarkers,function(f){cb(f)});e._clonedMarkers={}})}function Fo(a,b,c,d,e){function f(k,m,l,r){if(!m)return!1;k=hb(k,function(n){var p=n.labelTarget;return!n.parent&&!(n.labelTarget&&-1!==k.indexOf(p))});
var q=Ha(k,function(n){return!n.waypoints}),u=!1,v=!1,w=!1;k&&1===k.length&&!k[0].waypoints&&(u=e.allowed("shape.attach",{position:l,shape:q,target:m}));u||(w=k&&1===k.length&&!k[0].waypoints?e.allowed("shape.create",{position:l,shape:q,source:r,target:m}):e.allowed("elements.create",{elements:k,position:l,target:m}));return w||u?(q&&r&&(v=e.allowed("connection.create",{source:r,target:q,hints:{targetParent:m,targetAttach:u}})),{attach:u,connect:v}):null===w||null===u?null:!1}function g(k,m){["attach-ok",
"drop-ok","drop-not-ok","new-parent"].forEach(function(l){l===m?a.addMarker(k,l):a.removeMarker(k,l)})}function h(){var k=b.context();k&&"create"===k.prefix&&b.cancel()}c.on(["create.move","create.hover"],function(k){var m=k.context,l=m.elements,r=k.hover,q=m.source;r?(Go(k),k={x:k.x,y:k.y},l=m.canExecute=r&&f(l,r,k,q),r&&null!==l&&(m.target=r,l&&l.attach?g(r,"attach-ok"):g(r,l?"new-parent":"drop-not-ok"))):(m.canExecute=!1,m.target=null)});c.on(["create.end","create.out","create.cleanup"],function(k){(k=
k.hover)&&g(k,null)});c.on("create.end",function(k){var m=k.context,l=m.source,r=m.shape,q=m.elements,u=m.target,v=m.hints,w=m.canExecute,n=w&&w.attach,p=w&&w.connect;if(!1===w||!u)return!1;Go(k);w={x:k.x,y:k.y};p?r=d.appendShape(l,r,w,u,{attach:n,connection:!0===p?{}:p}):(q=d.createElements(q,w,u,R({},v,{attach:n})),r=Ha(q,function(t){return!t.waypoints}));R(m,{elements:q,shape:r});R(k,{elements:q,shape:r})});c.on("create.init",function(){c.on("elements.changed",h);c.once(["create.cancel","create.end"],
2E3,function(){c.off("elements.changed",h)})});this.start=function(k,m,l){ja(m)||(m=[m]);var r=Ha(m,function(u){return!u.waypoints});if(r){l=R({elements:m,hints:{},shape:r},l||{});O(m,function(u){ua(u.x)||(u.x=0);ua(u.y)||(u.y=0)});var q=mc(m);O(m,function(u){u.waypoints&&(u.waypoints=hc(u.waypoints,function(v){return{x:v.x-q.x-q.width/2,y:v.y-q.y-q.height/2}}));R(u,{x:u.x-q.x-q.width/2,y:u.y-q.y-q.height/2})});b.init(k,"create",{cursor:"grabbing",autoActivate:!0,data:{shape:r,elements:m,context:l}})}}}
function Go(a){var b=a.context.createConstraints;b&&(b.left&&(a.x=Math.max(a.x,b.left)),b.right&&(a.x=Math.min(a.x,b.right)),b.top&&(a.y=Math.max(a.y,b.top)),b.bottom&&(a.y=Math.min(a.y,b.bottom)))}function Ho(a,b,c,d,e){function f(g){var h=ea("g");W(h,e.cls("djs-drag-group",["no-events"]));var k=ea("g");g.forEach(function(m){if(m.waypoints){var l=c._createContainer("connection",k);c.drawConnection(l.childNodes[0],m)}else l=c._createContainer("shape",k),c.drawShape(l.childNodes[0],m),Lb(l,m.x,m.y);
d.addDragger(m,h,l)});return h}b.on("create.move",750,function(g){var h=g.hover,k=g.context,m=k.elements,l=k.dragGroup;l||(l=k.dragGroup=f(m));h?(l.parentNode||(h=a.getDefaultLayer(),ha(h,l)),Lb(l,g.x,g.y)):cb(l)});b.on("create.cleanup",function(g){(g=g.context.dragGroup)&&cb(g)})}function Ka(a,b,c){this._config={scale:void 0!==(a&&a.scale)?a.scale:{min:1,max:1.5}};this._eventBus=b;this._canvas=c;this._providers={};this._current={}}function gx(a,b){a.style["transform-origin"]="top left";["","-ms-",
"-webkit-"].forEach(function(c){a.style[c+"transform"]=b})}function wh(a){this._modeling=a}function Io(a,b,c,d){this.replaceElement=function(e,f,g){g=g||{};var h=f.type,k=e.businessObject,m=a.create(h);h={type:h,businessObject:m};h.width=e.width;h.height=e.height;m.name=k.name;if(f.table){k=a.create("dmn:DecisionTable");m.decisionTable=k;k.$parent=m;var l=a.create("dmn:OutputClause");l.typeRef="string";l.$parent=k;k.output=[l];l=a.create("dmn:InputClause");l.$parent=k;var r=a.create("dmn:LiteralExpression",
{typeRef:"string"});l.inputExpression=r;r.$parent=l;k.input=[l]}f.expression&&(m.literalExpression=a.create("dmn:LiteralExpression"),m.variable=a.create("dmn:InformationItem"));return b.replaceElement(e,h,g)}}function Qc(a,b,c,d,e,f){this._popupMenu=a;this._modeling=b;this._moddle=c;this._drdReplace=d;this._rules=e;this._translate=f;this.register()}function xh(a,b,c,d,e,f,g,h,k,m){b.registerProvider(this);this._contextPad=b;this._modeling=c;this._elementFactory=d;this._connect=e;this._create=f;this._rules=
g;this._popupMenu=h;this._canvas=k;this._translate=m;a.on("create.end",250,function(l){var r=l.context.shape;if(Nn(l)){var q=b.getEntries(r);q.replace&&q.replace.action.click(l,r)}})}function Zb(a,b,c,d){this._canvas=b;this._graphicsFactory=c;this._elementFactory=d;this._connectionDocking=a.get("connectionDocking",!1);this._layouter=a.get("layouter",!1)}function hx(a){var b={};return function(c){var d=JSON.stringify(c),e=b[d];e||(e=b[d]=a.apply(null,arguments));return e}}function rf(a,b,c){this._eventBus=
a;this._modeling=b;this._canvas=c;a.on("definitionIdView.create",function(d){var e=d.html;d=xa(".dmn-definitions-name",e);e=xa(".dmn-definitions-id",e);this._setup(d,"name");this._setup(e,"id")},this)}function $b(a){this._modeling=a;this._filters=[];this.registerFilter(function(b,c,d){var e=0,f=0;O(b,function(h){h.waypoints||h.labelTarget||(e+=h[d],f+=1)});var g=Math.round(e/f);return hb(b,function(h){return h[d]<g+50})})}function Jo(a){a.registerFilter(function(b){return hb(b,function(c){var d=Cb(c,
["dmn:AuthorityRequirement","dmn:InformationRequirement","dmn:KnowledgeRequirement","dmn:Association","dmn:TextAnnotation"]);return!(c.labelTarget||d)})})}function xb(a,b){this._actions={};var c=this;a.on("diagram.init",function(){c._registerDefaultActions(b);a.fire("editorActions.init",{editorActions:c})})}function sf(a){a.invoke(xb,this)}function Ko(a){return(a=(a=a.extensionElements)&&a.values)&&Ha(a,function(b){return P(b,"biodi:Bounds")})}function Lo(a,b,c){function d(e){var f=0;O(e.drgElements,
function(g){if(P(g,"dmn:Decision")){var h=g.extensionElements;h||(h=g.extensionElements=a.createExtensionElements(),h.$parent=g);g=b._getDefaultSize(g);g=a.createDiBounds({x:150+30*f,y:150+30*f,width:g.width,height:g.height});h.get("values").push(g);g.$parent=h;f++}})}c.on("import.start",function(e){e=e.definitions;We(e.drgElements,Ko)||d(e)})}function Fb(a){return a.altKey?!1:a.ctrlKey||a.metaKey}function Qb(a,b){a=ja(a)?a:[a];return-1<a.indexOf(b.key)}function yh(a,b,c){c||(c="round");return Math[c](a/
b)*b}function wc(a,b,c){var d=!c||!1!==c.active;this._eventBus=b;var e=this;b.on("diagram.init",800,function(){e.setActive(d)});b.on("create.move create.end bendpoint.move.move bendpoint.move.end connect.move connect.end connectionSegment.move.move connectionSegment.move.end resize.move resize.end shape.move.move shape.move.end".split(" "),1200,function(f){var g=f.originalEvent;if(!(!e.active||g&&Fb(g))){g=f.context;var h=g.gridSnappingContext;h||(h=g.gridSnappingContext={});["x","y"].forEach(function(k){var m=
{};var l=f.shape;var r=f.context.gridSnappingContext,q=r.snapLocation,u=r.snapOffset;u&&ua(u[k])||(u||(u=r.snapOffset={}),ua(u[k])||(u[k]=0),l&&(a.get(l.id)||("x"===k?u[k]+=l[k]+l.width/2:u[k]+=l[k]+l.height/2),q&&("x"===k?/left/.test(q)?u[k]-=l.width/2:/right/.test(q)&&(u[k]+=l.width/2):/top/.test(q)?u[k]-=l.height/2:/bottom/.test(q)&&(u[k]+=l.height/2))));l=u[k];l&&(m.offset=l);u=f.context;q=u.createConstraints;r=u.resizeConstraints||{};var v=u.gridSnappingContext;l=v.snapConstraints;l&&l[k]||(l||
(l=v.snapConstraints={}),l[k]||(l[k]={}),u=u.direction,q&&("x"===k?(l.x.min=q.left,l.x.max=q.right):(l.y.min=q.top,l.y.max=q.bottom)),q=r.min,r=r.max,q&&("x"===k?-1!==u.indexOf("w")?l.x.max=q.left:l.x.min=q.right:-1!==u.indexOf("n")?l.y.max=q.top:l.y.min=q.bottom),r&&("x"===k?-1!==u.indexOf("w")?l.x.min=r.left:l.x.max=r.right:-1!==u.indexOf("n")?l.y.min=r.top:l.y.max=r.bottom));l=l[k];l&&R(m,l);fe(f,k)||e.snapEvent(f,k,m)})}})}function Ua(a){this._eventBus=a}function ix(a,b){return function(c){return a.call(b||
null,c.context,c.command,c)}}function Rc(a,b){this._eventBus=a;this._gridSnapping=b;var c=this;this.preExecute("shape.resize",function(d){d=d.context;var e=(d.hints||{}).autoResize;if(e){var f=d.shape,g=d.newBounds;Sa(e)?d.newBounds=c.snapComplex(g,e):d.newBounds=c.snapSimple(f,g)}})}function Mo(a,b){a.on(["spaceTool.move","spaceTool.end"],2E3,function(c){var d=c.context;d.initialized&&("x"===d.axis?c.dx=b.snapValue(c.dx):c.dy=b.snapValue(c.dy))})}function db(a,b){var c=this;this._config=a||{};this._eventBus=
b;this._keydownHandler=this._keydownHandler.bind(this);this._keyupHandler=this._keyupHandler.bind(this);b.on("diagram.destroy",function(){c._fire("destroy");c.unbind()});b.on("diagram.init",function(){c._fire("init")});b.on("attach",function(){a&&a.bindTo&&c.bind(a.bindTo)});b.on("detach",function(){c.unbind()})}function Ad(a,b){var c=this;a.on("editorActions.init",500,function(d){c.registerBindings(b,d.editorActions)})}function tf(a){a.invoke(Ad,this)}function No(a,b,c){var d=this;this._config=R({},
jx,a||{});b.addListener(function(e){e=e.keyEvent;var f=d._config;if(b.isCmd(e)&&b.isKey("ArrowLeft Left ArrowUp Up ArrowDown Down ArrowRight Right".split(" "),e)){f=b.isShift(e)?f.moveSpeedAccelerated:f.moveSpeed;switch(e.key){case "ArrowLeft":case "Left":var g="left";break;case "ArrowUp":case "Up":g="up";break;case "ArrowRight":case "Right":g="right";break;case "ArrowDown":case "Down":g="down"}d.moveCanvas({speed:f,direction:g});return!0}});this.moveCanvas=function(e){var f=0,g=0,h=e.speed/Math.min(Math.sqrt(c.viewbox().scale),
1);switch(e.direction){case "left":f=h;break;case "up":g=h;break;case "right":f=-h;break;case "down":g=-h}c.scroll({dx:f,dy:g})}}function Oo(a,b,c,d,e){var f=this;this._config=R({},kx,a||{});b.addListener(1500,function(g){var h=g.keyEvent;if((g=lx[h.key])&&!b.isCmd(h))return h=b.isShift(h),f.moveSelection(g,h),!0});this.moveSelection=function(g,h){var k=e.get();if(k.length){var m=mx[g](this._config[h?"moveSpeedAccelerated":"moveSpeed"]);d.allowed("elements.move",{shapes:k})&&c.moveElements(k,m)}}}
function Aa(a,b){this._handlerMap={};this._stack=[];this._stackIdx=-1;this._currentExecution={actions:[],dirty:[]};this._injector=b;this._eventBus=a;this._uid=1;a.on(["diagram.destroy","diagram.clear"],function(){this.clear(!1)},this)}function Po(a,b,c,d){a.on("element.changed",function(e){var f=e.element;if(f.parent||f===b.getRootElement())e.gfx=c.getGraphics(f);e.gfx&&a.fire(An(f)+".changed",e)});a.on("elements.changed",function(e){e=e.elements;e.forEach(function(f){a.fire("element.changed",{element:f})});
d.updateContainments(e)});a.on("shape.changed",function(e){d.update("shape",e.element,e.gfx)});a.on("connection.changed",function(e){d.update("connection",e.element,e.gfx)})}function ge(a){a.stopPropagation()}function Gb(a){this.container=a.container;this.parent=ta('<div class="djs-direct-editing-parent"><div class="djs-direct-editing-content" contenteditable="true"></div></div>');this.content=xa("[contenteditable]",this.parent);this.keyHandler=a.keyHandler||function(){};this.resizeHandler=a.resizeHandler||
function(){};this.autoResize=this.autoResize.bind(this);this.handlePaste=this.handlePaste.bind(this)}function yb(a,b){this._eventBus=a;this._providers=[];this._textbox=new Gb({container:b.getContainer(),keyHandler:this._handleKey.bind(this),resizeHandler:this._handleResize.bind(this)})}function Qo(a){if(P(a,"dmn:Decision")||P(a,"dmn:BusinessKnowledgeModel")||P(a,"dmn:InputData")||P(a,"dmn:KnowledgeSource"))return"name";if(P(a,"dmn:TextAnnotation"))return"text"}function Ro(a){a=a.businessObject;var b=
Qo(a);if(b)return a[b]||""}function nx(){function a(b,c){var d=b.label||b,e=b.labelTarget||b,f=e!==d,g=d.businessObject,h=Qo(g);h&&(g[h]=c);f&&(d.hidden=!c);return[d,e]}this.execute=function(b){b.oldLabel=Ro(b.element);return a(b.element,b.newLabel)};this.revert=function(b){return a(b.element,b.oldLabel)}}function he(a,b,c,d){this._canvas=b;this._commandStack=d;c.registerProvider(this);d.registerHandler("element.updateLabel",nx);a.on("element.dblclick",function(e){c.activate(e.element)});a.on(["element.mousedown",
"drag.init","canvas.viewbox.changed"],function(e){c.complete()});a.on(["commandStack.changed"],function(){c.cancel()});a.on("create.end",500,function(e){e=e.shape;(P(e,"dmn:Decision")||P(e,"dmn:InputData")||P(e,"dmn:BusinessKnowledgeModel")||P(e,"dmn:KnowledgeSource"))&&c.activate(e)})}function zh(a,b){b.invoke(Ua,this);this.preExecute("connection.create",function(c){var d=c.connection,e=d.businessObject,f=c.source,g=c.target;c=c.di=a.createDiEdge(f,[pb(f),pb(g)]);P(d,"dmn:Association")?(d=e.sourceRef=
a.create("dmn:DMNElementReference",{href:"#"+f.id}),d.$parent=e,g=e.targetRef=a.create("dmn:DMNElementReference",{href:"#"+g.id}),g.$parent=e,e=e.extensionElements=a.create("dmn:ExtensionElements"),e.values=[c],c.$parent=e):(c=e["required"+ox(f)]=a.create("dmn:DMNElementReference",{href:"#"+f.id}),c.$parent=e)},!0)}function ox(a){if(P(a,"dmn:BusinessKnowledgeModel"))return"Knowledge";if(P(a,"dmn:Decision"))return"Decision";if(P(a,"dmn:InputData"))return"Input";if(P(a,"dmn:KnowledgeSource"))return"Authority"}
function Ah(a,b,c){a.invoke(Ua,this);this.preExecute("connection.reconnect",function(d){var e=d.connection,f=d.newSource||e.source,g=d.newTarget||e.target,h=e.waypoints.slice(),k=c.allowed("connection.reconnect",{connection:e,source:f,target:g});k&&k.type!==e.type&&(d.connection=b.connect(f,g,{type:k.type,waypoints:h}),b.removeConnection(e))},!0)}function Bh(a,b){this._eventBus=a;this._modeling=b;this.postExecuted(["shape.replace"],1500,function(c){c=c.context;var d=c.oldShape;c=c.newShape;var e=
c.id;b.unclaimId(d.businessObject.id,d.businessObject);b.updateProperties(c,{id:d.id});O(c.outgoing,function(f){f=f.businessObject;f.$instanceOf("dmn:Association")?(f.sourceRef.href="#"+d.id,f=f.extensionElements):(f.requiredDecision.href="#"+d.id,f=f.$parent.extensionElements);if(f=hb(f.values,function(g){return"biodi:Edge"===g.$type&&g.source===e})[0])f.source=d.id})})}function Ch(a){Ch="function"===typeof Symbol&&"symbol"===G(Symbol.iterator)?function(b){return G(b)}:function(b){return b&&"function"===
typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":G(b)};return Ch(a)}function So(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function px(a,b,c){b&&So(a.prototype,b);c&&So(a,c);return a}function Dh(a){Dh=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)};return Dh(a)}function To(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return a}function qx(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&Eh(a,b)}function Eh(a,b){Eh=Object.setPrototypeOf||function(c,d){c.__proto__=d;return c};return Eh(a,b)}function rx(a){for(;!P(a,"dmn:Definitions");)a=a.$parent;return a.drgElements}function sx(a,b,c){O({authorityRequirement:function(){a.authorityRequirement.forEach(function(d){var e=
d.requiredAuthority,f=d.requiredDecision;d=d.requiredInput;e&&e.href==="#".concat(b)&&(e.href="#".concat(c));f&&f.href==="#".concat(b)&&(f.href="#".concat(c));d&&d.href==="#".concat(b)&&(d.href="#".concat(c))})},informationRequirement:function(){a.informationRequirement.forEach(function(d){var e=d.requiredDecision;d=d.requiredInput;e&&e.href==="#".concat(b)&&(e.href="#".concat(c));d&&d.href==="#".concat(b)&&(d.href="#".concat(c))})},knowledgeRequirement:function(){a.knowledgeRequirement.forEach(function(d){(d=
d.requiredKnowledge)&&d.href==="#".concat(b)&&(d.href="#".concat(c))})}},function(d,e){a[e]&&d()})}function tx(a,b,c){a.extensionElements&&a.extensionElements.values.forEach(function(d){P(d,"biodi:Edge")&&d.source===b&&(d.source=c)})}function Sc(a){this._eventBus=a;this.init()}function Tc(a){a.invoke(Sc,this)}function Fh(a,b){if(!a||a.labelTarget||!b||b.labelTarget)return null;if(a===b)return!1;if(P(a,"dmn:BusinessKnowledgeModel")&&Cb(b,["dmn:BusinessKnowledgeModel","dmn:Decision"]))return{type:"dmn:KnowledgeRequirement"};
if(P(a,"dmn:Decision")){if(P(b,"dmn:Decision"))return{type:"dmn:InformationRequirement"};if(P(b,"dmn:KnowledgeSource"))return{type:"dmn:AuthorityRequirement"}}if(P(a,"dmn:Definitions")||P(b,"dmn:Definitions"))return!1;if(P(a,"dmn:InputData")){if(P(b,"dmn:Decision"))return{type:"dmn:InformationRequirement"};if(P(b,"dmn:KnowledgeSource"))return{type:"dmn:AuthorityRequirement"}}return P(a,"dmn:KnowledgeSource")&&Cb(b,["dmn:BusinessKnowledgeModel","dmn:Decision","dmn:KnowledgeSource"])?{type:"dmn:AuthorityRequirement"}:
P(b,"dmn:TextAnnotation")?{type:"dmn:Association"}:!1}function Uo(a,b){return Cb(a,["dmn:BusinessKnowledgeModel","dmn:Decision","dmn:InputData","dmn:KnowledgeSource","dmn:TextAnnotation"])&&P(b,"dmn:Definitions")}function Vo(a,b){ja(a)||(a=[a]);return!b||gc(a,function(c){return Cb(c,"dmn:BusinessKnowledgeModel dmn:Decision dmn:InputData dmn:KnowledgeSource dmn:TextAnnotation dmn:InformationRequirement dmn:AuthorityRequirement dmn:KnowledgeRequirement dmn:Association".split(" "))})&&P(b,"dmn:Definitions")?
!0:!1}function Rb(a){this._model=a}function Uc(a,b,c,d,e){function f(l){var r=l.connection,q=l.parent;l=l.shape;r&&!P(r,"dmn:Association")&&(q=r.target);m.updateParent(l||r,q)}function g(l){var r=l.connection,q=l.shape;l=l.parent||l.newParent;r&&!P(r,"dmn:Association")&&(l=r.target);m.updateParent(q||r,l)}function h(l){l=l.shape;(P(l,"dmn:DRGElement")||P(l,"dmn:TextAnnotation"))&&m.updateBounds(l)}function k(l){m.updateConnectionWaypoints(l)}e.invoke(Ua,this);this._definitionPropertiesView=b;this._drdFactory=
c;this._drdRules=d;var m=this;this.executed(["connection.create","connection.layout"],function(l){var r=l.connection;l.cropped||(r.waypoints=a.getCroppedWaypoints(r),l.cropped=!0)},!0);this.reverted(["connection.layout"],function(l){delete l.cropped},!0);this.executed(["connection.create","connection.delete","connection.move","shape.create","shape.delete"],f,!0);this.reverted(["connection.create","connection.delete","connection.move","shape.create","shape.delete"],g,!0);this.executed(["shape.create",
"shape.move"],h,!0);this.reverted(["shape.create","shape.move"],h,!0);this.executed(["connection.layout","connection.move","connection.updateWaypoints"],k,!0);this.reverted(["connection.layout","connection.move","connection.updateWaypoints"],k,!0);this.executed("connection.create",function(l){var r=l.connection,q=r.businessObject,u=l.target.businessObject,v=u.get("extensionElements"),w=l.di;P(r,"dmn:Association")?f(l):(m.updateSemanticParent(q,u),O(w.waypoints,function(n,p){n.x=r.waypoints[p].x;n.y=
r.waypoints[p].y}),v.get("values").push(w))},!0);this.reverted("connection.create",function(l){var r=l.connection,q=l.target.businessObject.get("extensionElements"),u=l.di;g(l);if(l=!P(r,"dmn:Association"))l=-1!==q.get("values").indexOf(u);l&&ie(q.get("values"),u)},!0);this.executed("connection.delete",function(l){var r=l.connection,q=l.source,u=l.target.businessObject.get("extensionElements");!P(r,"dmn:Association")&&(r=Ha(u.get("values"),function(v){return P(v,"biodi:Edge")&&v.source===q.id}))&&
(l.oldDI=r,ie(u.get("values"),r))},!0);this.reverted("connection.delete",function(l){var r=l.connection,q=l.oldDI;l=l.target.businessObject.get("extensionElements");q&&!P(r,"dmn:Association")&&l.get("values").push(q)},!0);this.executed("connection.reconnect",function(l){var r=l.connection.businessObject,q=l.oldSource,u=l.newSource,v=l.oldTarget.businessObject.get("extensionElements");l=l.newTarget;var w=l.businessObject,n=w.get("extensionElements");m.updateSemanticParent(r,w);if(r=Ha(v.get("values"),
function(p){var t=p.source;return P(p,"biodi:Edge")&&t===q.id}))ie(v.get("values"),r),P(l,"dmn:TextAnnotation")||n.get("values").push(r),u&&(r.source=u.id)},!0);this.reverted("connection.reconnect",function(l){var r=l.connection.businessObject,q=l.oldSource,u=l.newSource,v=l.oldTarget.businessObject,w=v.get("extensionElements");l=l.newTarget;var n=l.businessObject.get("extensionElements");m.updateSemanticParent(r,v);if(r=Ha(n.get("values"),function(p){var t=p.source;return P(p,"biodi:Edge")&&t===
(u||q).id}))P(l,"dmn:TextAnnotation")||ie(n.get("values"),r),w.get("values").push(r),q&&(r.source=q.id)},!0);this.executed("element.updateProperties",function(l){b.update();var r=l.element.outgoing;if(l.properties.id&&r){var q=l.oldProperties,u=l.properties;O(r,function(v){v=v.target.businessObject.get("extensionElements");if(v=Ha(v.get("values"),function(w){return P(w,"biodi:Edge")&&w.source===q.id}))v.source=u.id})}},!0);this.reverted("element.updateProperties",function(l){b.update();var r=l.element.outgoing;
if(l.properties.id&&r){var q=l.oldProperties,u=l.properties;O(r,function(v){v=v.target.businessObject.get("extensionElements");if(v=Ha(v.get("values"),function(w){return P(w,"biodi:Edge")&&w.source===u.id}))v.source=q.id})}},!0)}function ie(a,b){a.splice(a.indexOf(b),1);return a}function Vc(a){this._uid=12;this._drdFactory=a}function uf(a,b){this._modeling=a;this._canvas=b}function vf(a){this._modeling=a}function ux(a,b){return We(a.outgoing,function(c){return c.target===b})}function wf(a,b){this._canvas=
a;this._layouter=b}function Gh(a){this._modeling=a}function Wc(a){this._canvas=a}function je(a){this._canvas=a}function vx(a){["width","height"].forEach(function(b){"undefined"===typeof a[b]&&(a[b]=0)})}function xf(a,b){this._canvas=a;this._modeling=b}function Hh(a,b){this._modeling=a;this._elementRegistry=b}function Ih(a,b){if("function"!==typeof b)throw Error("removeFn iterator must be a function");if(a){for(var c;c=a[0];)b(c);return a}}function ke(a,b){this._canvas=a;this._modeling=b}function yf(a){this._modeling=
a}function zf(a,b){this._layouter=a;this._canvas=b}function Jh(){}function Wo(a,b,c){var d=c.x+c.width/2,e=c.y+c.height/2;a=sd(a,{x:b.x+b.width/2,y:b.y+b.height/2});return nf({x:d+c.width/b.width*a.x,y:e+c.height/b.height*a.y})}function Af(a,b,c){a=Xo(a)[0];return Wo(a.original||a,c,b)}function Bf(a,b,c){a=Xo(a);a=a[a.length-1];return Wo(a.original||a,c,b)}function Cf(a,b){return{x:a.x-b.x,y:a.y-b.y,width:a.width,height:a.height}}function Xo(a){var b=a.waypoints;if(!b.length)throw Error("connection#"+
a.id+": no waypoints");return b}function Kh(){this.allShapes={};this.allConnections={};this.enclosedElements={};this.enclosedConnections={};this.topLevel={}}function le(a){this._modeling=a}function Df(a){this._helper=new le(a)}function Xc(a){this._modeling=a;this._helper=new le(a)}function me(a){this._modeling=a}function ac(a,b){this._modeling=a;this._rules=b}function ne(a){this._modeling=a}function Bd(a){this._modeling=a}function Ef(a){this._modeling=a}function Yo(a){var b={};O(a,function(c){b[c.id]=
c.hidden;c.children&&(b=R({},b,Yo(c.children)))});return b}function Zo(a,b){var c=[];O(a,function(d){d.hidden=b;c=c.concat(d);d.children&&(c=c.concat(Zo(d.children,d.collapsed||b)))});return c}function $o(a,b){var c=[];O(a,function(d){d.hidden=b[d.id];c=c.concat(d);d.children&&(c=c.concat($o(d.children,b)))});return c}function Ff(a){this._modeling=a}function ap(a,b,c){if(a){var d=a.attachers;d||(a.attachers=d=[]);oc(d,b,c)}}function Lh(){}function sa(a,b,c){this._eventBus=a;this._elementFactory=b;
this._commandStack=c;var d=this;a.on("diagram.init",function(){d.registerHandlers(c)})}function Gf(a,b){this._elementRegistry=a;this._moddle=b}function wx(a,b){return qb(b,function(c,d){c[d]=a.get(d);return c},{})}function bp(a,b){O(b,function(c,d){a.set(d,c)})}function Hf(a){this._moddle=a}function xc(a,b,c){this._canvas=a;this._drdRules=b;c.invoke(sa,this)}function cp(){}function Mh(){}function yc(a,b){this._elementRegistry=a;this._graphicsFactory=b}function dp(a,b,c,d,e){function f(h,k,m,l){return e.allowed("elements.move",
{shapes:h,delta:k,position:m,target:l})}function g(h,k,m,l){gb(m)&&(l=m,m=!1);if(!k.waypoints&&k.parent){var r={x:k.x+If(k.width/2),y:k.y+If(k.height/2)};b.init(h,r,"shape.move",{cursor:"grabbing",autoActivate:m,data:{shape:k,context:l||{}}});return!0}}a.on("shape.move.start",1500,function(h){var k=h.context;h=h.shape;var m=d.get().slice();-1===m.indexOf(h)&&(m=[h]);m=xx(m);R(k,{shapes:m,validatedShapes:m,shape:h})});a.on("shape.move.start",1250,function(h){h=h.context;if(!(h.canExecute=f(h.validatedShapes)))return!1});
a.on("shape.move.move",500,function(h){var k=h.context,m=h.hover,l={x:h.dx,y:h.dy};h=f(k.validatedShapes,l,{x:h.x,y:h.y},m);k.delta=l;k.canExecute=h;k.target=null===h?null:m});a.on("shape.move.end",function(h){h=h.context;var k=h.delta,m=h.canExecute,l="attach"===m,r=h.shapes;if(!1===m)return!1;k.x=If(k.x);k.y=If(k.y);0===k.x&&0===k.y||c.moveElements(r,k,h.target,{primaryShape:h.shape,attach:l})});a.on("element.mousedown",function(h){var k=qc(h);if(!k)throw Error("must supply DOM mousedown event");
return g(k,h.element)});this.start=g}function xx(a){var b=Rd(a,"id");return hb(a,function(c){for(;c=c.parent;)if(b[c.id])return!1;return!0})}function ep(a,b,c,d){function e(h){h=f(h);return yx(h)}function f(h){h=sw(h,!1,-1);var k=hc(h,function(m){return(m.incoming||[]).concat(m.outgoing||[])});return Array.prototype.concat.apply([],h.concat(k))}function g(h,k){["attach-ok","drop-ok","drop-not-ok","new-parent"].forEach(function(m){m===k?b.addMarker(h,m):b.removeMarker(h,m)})}a.on("shape.move.start",
499,function(h){var k=h.context;h=k.shapes;var m=k.allDraggedElements,l=e(h);if(!k.dragGroup){var r=ea("g");W(r,c.cls("djs-drag-group",["no-events"]));var q=b.getDefaultLayer();ha(q,r);k.dragGroup=r}l.forEach(function(u){d.addDragger(u,k.dragGroup)});m=m?Array.prototype.concat.apply([],[m,f(h)]):f(h);O(m,function(u){b.addMarker(u,"djs-dragging")});k.allDraggedElements=m;k.differentParents=zx(h)});a.on("shape.move.move",499,function(h){var k=h.context,m=k.dragGroup,l=k.target,r=k.shape.parent,q=k.canExecute;
l&&("attach"===q?g(l,"attach-ok"):k.canExecute&&l&&l.id!==r.id?g(l,"new-parent"):g(l,k.canExecute?"drop-ok":"drop-not-ok"));Lb(m,h.dx,h.dy)});a.on(["shape.move.out","shape.move.cleanup"],function(h){(h=h.context.target)&&g(h,null)});a.on("shape.move.cleanup",function(h){h=h.context;var k=h.dragGroup;O(h.allDraggedElements,function(m){b.removeMarker(m,"djs-dragging")});k&&cb(k)});this.makeDraggable=function(h,k,m){d.addDragger(k,h.dragGroup);m&&b.addMarker(k,"djs-dragging");h.allDraggedElements?h.allDraggedElements.push(k):
h.allDraggedElements=[k]}}function yx(a){return hb(a,function(b){return b.waypoints?Ha(a,Sd({id:b.source.id}))&&Ha(a,Sd({id:b.target.id})):!0})}function zx(a){return 1!==ic(Rd(a,function(b){return b.parent&&b.parent.id})).length}function La(a,b){this._eventBus=a;this._canvas=b;var c=this;a.on("tool-manager.update",function(d){c.updateToolHighlight(d.tool)});a.on("i18n.changed",function(){c._update()});a.on("diagram.init",function(){c._diagramInitialized=!0;c._rebuild()})}function Ax(a,b){var c=wa(a);
(ja(b)?b:b.split(/\s+/g)).forEach(function(d){c.add(d)})}function Bx(a,b){var c=b.getPaletteEntries();if(Na(c))return c(a);O(c,function(d,e){a[e]=d});return a}function Yc(a,b){this._eventBus=a;this._dragging=b;this._tools=[];this._active=null}function Zc(a,b,c,d,e,f){this._selection=e;this._dragging=c;var g=this,h={create:function(k){var m=b.getDefaultLayer();k=k.frame=ea("rect");W(k,{"class":"djs-lasso-overlay",width:1,height:1,x:0,y:0});ha(m,k)},update:function(k){var m=k.bbox;W(k.frame,{x:m.x,
y:m.y,width:m.width,height:m.height})},remove:function(k){k.frame&&cb(k.frame)}};f.registerTool("lasso",{tool:"lasso.selection",dragging:"lasso"});a.on("lasso.selection.end",function(k){var m=k.originalEvent.target;if(k.hover||m instanceof SVGElement)a.once("lasso.selection.ended",function(){g.activateLasso(k.originalEvent,!0)})});a.on("lasso.end",function(k){k=Nh(k);var m=d.filter(function(l){return l});g.select(m,k)});a.on("lasso.start",function(k){var m=k.context;m.bbox=Nh(k);h.create(m)});a.on("lasso.move",
function(k){var m=k.context;m.bbox=Nh(k);h.update(m)});a.on("lasso.cleanup",function(k){h.remove(k.context)});a.on("element.mousedown",1500,function(k){var m=qc(k)||k;if(hh(k)&&m.shiftKey)return g.activateLasso(k.originalEvent),!0})}function Nh(a){var b=a.x-a.dx,c=a.y-a.dy,d=a.x;a=a.y;return b<=d&&c<a||b<d&&c<=a?{x:b,y:c,width:d-b,height:a-c}:b>=d&&c<a||b>d&&c<=a?{x:d,y:c,width:b-d,height:a-c}:b<=d&&c>a||b<d&&c>=a?{x:b,y:a,width:d-b,height:c-a}:b>=d&&c>a||b>d&&c>=a?{x:d,y:a,width:b-d,height:c-a}:
{x:d,y:a,width:0,height:0}}function Oh(a,b,c,d,e){this._palette=a;this._create=b;this._elementFactory=c;this._lassoTool=d;this._translate=e;a.registerProvider(this)}function zc(){this._targets={};this._snapOrigins={};this._snapLocations=[];this._defaultSnaps={}}function Jf(a){this._snapValues={}}function oe(a,b,c){var d=this;this._elementRegistry=a;b.on(["create.start","shape.move.start"],function(e){d.initSnap(e)});b.on(["create.move","create.end","shape.move.move","shape.move.end"],1250,function(e){var f=
e.context,g=f.shape,h=f.snapContext;f=f.target;e.originalEvent&&Fb(e.originalEvent)||fe(e)||!f||(h=h.pointsForTarget(f),h.initialized||(h=d.addSnapTargetPoints(h,g,f),h.initialized=!0),c.snap(e,h))});b.on(["create.cleanup","shape.move.cleanup"],function(){c.hide()})}function pe(a,b){var c=this;a.on(["resize.start"],function(d){c.initSnap(d)});a.on(["resize.move","resize.end"],1250,function(d){var e=d.context,f=e.shape,g=f.parent,h=e.direction;e=e.snapContext;d.originalEvent&&Fb(d.originalEvent)||
fe(d)||(e=e.pointsForTarget(g),e.initialized||(e=c.addSnapTargetPoints(e,f,g,h),e.initialized=!0),"n"!==h&&"s"!==h||vc(d,"x",d.x),"e"!==h&&"w"!==h||vc(d,"y",d.y),b.snap(d,e))});a.on(["resize.cleanup"],function(){b.hide()})}function fp(a,b){var c=pb(a),d=th(a);c={x:c.x,y:c.y};-1!==b.indexOf("n")?c.y=d.top:-1!==b.indexOf("s")&&(c.y=d.bottom);-1!==b.indexOf("e")?c.x=d.right:-1!==b.indexOf("w")&&(c.x=d.left);return c}function Ac(a){this._canvas=a;this._asyncHide=Td(this.hide.bind(this),1E3)}function Cd(a){Ya.call(this,
a)}function Ph(a){Ph="function"===typeof Symbol&&"symbol"===G(Symbol.iterator)?function(b){return G(b)}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":G(b)};return Ph(a)}function Kf(a,b){return!b||"object"!==Ph(b)&&"function"!==typeof b?bc(a):b}function Dd(a){Dd=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)};return Dd(a)}function bc(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return a}function Lf(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&Qh(a,b)}function Qh(a,b){Qh=Object.setPrototypeOf||function(c,d){c.__proto__=d;return c};return Qh(a,b)}function qe(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function gp(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=
d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function Cx(a,b,c){b&&gp(a.prototype,b);c&&gp(a,c);return a}function hp(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function Dx(a,b,c){b&&hp(a.prototype,b);c&&hp(a,c);return a}function Rh(a){return Object.keys(a).map(function(b){return a[b]})}function ip(a,b){for(var c=0;c<b.length;c++){var d=
b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function Ex(a,b,c){b&&ip(a.prototype,b);c&&ip(a,c);return a}function jp(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function Fx(a,b,c){b&&jp(a.prototype,b);c&&jp(a,c);return a}function Sh(a){a=G(a);return"string"===a||"number"===a}function ma(a){return void 0===a||null===a}
function Bc(a){return null===a||!1===a||!0===a||void 0===a}function ia(a){return"function"===typeof a}function re(a){return"string"===typeof a}function se(a,b){var c={};if(a)for(var d in a)c[d]=a[d];if(b)for(var e in b)c[e]=b[e];return c}function Th(a,b,c,d,e,f,g,h){return{childFlags:a,children:b,className:c,dom:null,flags:d,key:void 0===e?null:e,parentVNode:null,props:void 0===f?null:f,ref:void 0===g?null:g,type:h}}function E(a,b,c,d,e,f,g,h){e=void 0===e?1:e;a=Th(e,d,c,a,g,f,h,b);0===e&&kp(a,a.children);
return a}function X(a,b,c,d,e){0<(a&2)&&(a=b.prototype&&ia(b.prototype.render)?4:8);var f=b.defaultProps;if(!ma(f)){c||(c={});for(var g in f)void 0===c[g]&&(c[g]=f[g])}if(0<(a&8)&&(f=b.defaultHooks,!ma(f)))if(e)for(var h in f)void 0===e[h]&&(e[h]=f[h]);else e=f;a=Th(1,null,null,a,d,c,e,b);b=$a.createVNode;ia(b)&&b(a);return a}function aa(a,b){return Th(1,ma(a)?"":a,null,16,b,null,null,null)}function Uh(a){var b=a.props;if(b){var c=a.flags;c&481&&(void 0!==b.children&&ma(a.children)&&kp(a,b.children),
void 0!==b.className&&(a.className=b.className||null,b.className=void 0));void 0!==b.key&&(a.key=b.key,b.key=void 0);void 0!==b.ref&&(a.ref=c&8?se(a.ref,b.ref):b.ref,b.ref=void 0)}return a}function ab(a){var b=a.flags;if(b&14){var c=a.props;if(null!==c){var d={};for(var e in c)d[e]=c[e]}c=X(b,a.type,d,a.key,a.ref)}else b&481?c=E(b,a.type,a.className,a.children,a.childFlags,a.props,a.key,a.ref):b&16?c=aa(a.children,a.key):b&1024&&(c=a);return c}function lp(a,b,c,d){for(var e=a.length;c<e;c++){var f=
a[c];if(!Bc(f)){var g=d+"$"+c;if(Mf(f))lp(f,b,0,g);else{if(Sh(f))f=aa(f,g);else{var h=f.key,k=re(h)&&"$"===h[0];if(null!==f.dom||k)f=ab(f);f.key=null===h||k?g:d+h}b.push(f)}}}}function kp(a,b){var c=1;if(Bc(b))var d=b;else if(re(b))c=2,d=aa(b);else if("number"===typeof b)c=2,d=aa(b+"");else if(Mf(b)){var e=b.length;if(0===e)d=null,c=1;else{if(Object.isFrozen(b)||!0===b.$)b=b.slice();c=8;for(var f=0;f<e;f++){var g=b[f];if(Bc(g)||Mf(g)){d=d||b.slice(0,f);lp(b,d,f,"");break}else if(Sh(g))d=d||b.slice(0,
f),d.push(aa(g,"$"+f));else{var h=g.key,k=null===g.dom,m=null===h;h=!m&&"$"===h[0];if(!k||m||h){d=d||b.slice(0,f);if(!k||h)g=ab(g);if(m||h)g.key="$"+f;d.push(g)}else d&&d.push(g)}}d=d||b;d.$=!0}}else d=b,null!==b.dom&&(d=ab(b)),c=2;a.children=d;a.childFlags=c;return a}function Nf(a,b,c){ma(c)?a.appendChild(b):a.insertBefore(b,c)}function Vh(a){for(var b;void 0!==(b=a.shift());)b()}function mp(a,b,c){var d=Of[a],e=c.$EV;b?(d||(Wh[a]=Gx(a),Of[a]=0),e||(e=c.$EV={}),e[a]||Of[a]++,e[a]=b):e&&e[a]&&(Of[a]--,
1===d&&(document.removeEventListener(a.substr(2).toLowerCase(),Wh[a]),Wh[a]=null),e[a]=b)}function Hx(a,b,c,d,e){for(;!(null===b||c&&b.disabled);){var f=b.$EV;if(f&&(f=f[d])&&(e.dom=b,f.event?f.event(f.data,a):f(a),a.cancelBubble))break;b=b.parentNode}}function Ix(){this.cancelBubble=!0;this.immediatePropagationStopped||this.stopImmediatePropagation()}function Gx(a){var b=function(c){var d=c.type;if((d="click"===d||"dblclick"===d)&&0!==c.button)return c.preventDefault(),c.stopPropagation(),!1;c.stopPropagation=
Ix;var e={dom:document};Object.defineProperty(c,"currentTarget",{configurable:!0,get:function(){return e.dom}});Hx(c,c.target,d,a,e)};document.addEventListener(a.substr(2).toLowerCase(),b);return b}function np(a,b){var c=document.createElement("i");c.innerHTML=b;return c.innerHTML===a.innerHTML}function op(a,b,c){if(a[b])a=a[b],a.event?a.event(a.data,c):a(c);else if(b=b.toLowerCase(),a[b])a[b](c)}function te(a,b){var c=function(d){d.stopPropagation();var e=this.$V;if(e){var f=e.props||Ra;e=e.dom;
if(re(a))op(f,a,d);else for(var g=0;g<a.length;g++)op(f,a[g],d);ia(b)&&(d=this.$V,b(d.props||Ra,e,!1,d))}};Object.defineProperty(c,"wrapped",{configurable:!1,enumerable:!1,value:!0,writable:!1});return c}function Xh(a){return"checkbox"===a||"radio"===a}function pp(a){a.stopPropagation()}function Pf(a,b){var c=a.type,d=a.value,e=a.checked,f=a.multiple,g=a.defaultValue,h=!ma(d);c&&c!==b.type&&b.setAttribute("type",c);ma(f)||f===b.multiple||(b.multiple=f);ma(g)||h||(b.defaultValue=g+"");Xh(c)?(h&&(b.value=
d),ma(e)||(b.checked=e)):h&&b.value!==d?(b.defaultValue=d,b.value=d):ma(e)||(b.checked=e)}function qp(a,b){if("optgroup"===a.type){var c=a.children,d=a.childFlags;if(d&12){d=0;for(var e=c.length;d<e;d++)Yh(c[d],b)}else 2===d&&Yh(c,b)}else Yh(a,b)}function Yh(a,b){var c=a.props||Ra,d=a.dom;d.value=c.value;Mf(b)&&-1!==b.indexOf(c.value)||c.value===b?d.selected=!0:ma(b)&&ma(c.selected)||(d.selected=c.selected||!1)}function Zh(a,b,c,d){var e=!!a.multiple;ma(a.multiple)||e===b.multiple||(b.multiple=e);
e=d.childFlags;if(0===(e&1))if(d=d.children,b=a.value,c&&ma(b)&&(b=a.defaultValue),e&12)for(a=0,c=d.length;a<c;a++)qp(d[a],b);else 2===e&&qp(d,b)}function $h(a,b,c){var d=a.value,e=b.value;ma(d)?c&&(a=a.defaultValue,ma(a)||a===e||(b.defaultValue=a,b.value=a)):e!==d&&(b.defaultValue=d,b.value=d)}function rp(a){return a.type&&Xh(a.type)?!ma(a.checked):!ma(a.value)}function zb(a,b){cc(a);null!==b&&(b.removeChild(a.dom),a.dom=null)}function cc(a){var b=a.flags;if(b&481){var c=a.ref;b=a.props;ia(c)&&c(null);
c=a.children;var d=a.childFlags;d&12?Ed(c):2===d&&cc(c);if(null!==b)for(var e in b)switch(e){case "onClick":case "onDblClick":case "onFocusIn":case "onFocusOut":case "onKeyDown":case "onKeyPress":case "onKeyUp":case "onMouseDown":case "onMouseMove":case "onMouseUp":case "onSubmit":case "onTouchEnd":case "onTouchMove":case "onTouchStart":mp(e,null,a.dom)}}else if(b&14)if(e=a.children,c=a.ref,b&4)ia($a.beforeUnmount)&&$a.beforeUnmount(a),ia(e.componentWillUnmount)&&e.componentWillUnmount(),ia(c)&&c(null),
e.$UN=!0,cc(e.$LI);else{if(!ma(c)&&ia(c.onComponentWillUnmount))c.onComponentWillUnmount(a.dom,a.props||Ra);cc(e)}else b&1024&&(e=a.children,null!==e&&"object"===G(e)&&zb(e,a.type))}function Ed(a){for(var b=0,c=a.length;b<c;b++)cc(a[b])}function Jx(a,b){return function(c){a(b.data,c)}}function sp(a,b){switch(a){case "animationIterationCount":case "borderImageOutset":case "borderImageSlice":case "borderImageWidth":case "boxFlex":case "boxFlexGroup":case "boxOrdinalGroup":case "columnCount":case "fillOpacity":case "flex":case "flexGrow":case "flexNegative":case "flexOrder":case "flexPositive":case "flexShrink":case "floodOpacity":case "fontWeight":case "gridColumn":case "gridRow":case "lineClamp":case "lineHeight":case "opacity":case "order":case "orphans":case "stopOpacity":case "strokeDasharray":case "strokeDashoffset":case "strokeMiterlimit":case "strokeOpacity":case "strokeWidth":case "tabSize":case "widows":case "zIndex":case "zoom":return b;
default:return b+"px"}}function ai(a,b,c,d,e,f,g){switch(a){case "onClick":case "onDblClick":case "onFocusIn":case "onFocusOut":case "onKeyDown":case "onKeyPress":case "onKeyUp":case "onMouseDown":case "onMouseMove":case "onMouseUp":case "onSubmit":case "onTouchEnd":case "onTouchMove":case "onTouchStart":mp(a,c,d);break;case "children":case "childrenType":case "className":case "defaultValue":case "key":case "multiple":case "ref":break;case "allowfullscreen":case "autoFocus":case "autoplay":case "capture":case "checked":case "controls":case "default":case "disabled":case "hidden":case "indeterminate":case "loop":case "muted":case "novalidate":case "open":case "readOnly":case "required":case "reversed":case "scoped":case "seamless":case "selected":a=
"autoFocus"===a?a.toLowerCase():a;d[a]=!!c;break;case "defaultChecked":case "value":case "volume":if(f&&"value"===a)break;c=ma(c)?"":c;d[a]!==c&&(d[a]=c);break;case "dangerouslySetInnerHTML":c=c&&c.__html||"";(b&&b.__html||"")===c||ma(c)||np(d,c)||(null!==g&&(g.childFlags&12?Ed(g.children):2===g.childFlags&&cc(g.children),g.children=null,g.childFlags=1),d.innerHTML=c);break;default:if("o"===a[0]&&"n"===a[1])if(b=a.toLowerCase(),ia(c)||ma(c)){var h=d[b];h&&h.wrapped||(d[b]=c)}else(h=c.event)&&ia(h)&&
(d[b]=Jx(h,c));else if(ma(c))d.removeAttribute(a);else if("style"===a)if(d=d.style,re(c))d.cssText=c;else if(ma(b)||re(b))for(h in c)a=c[h],d[h]="number"===typeof a?sp(h,a):a;else{for(h in c)a=c[h],a!==b[h]&&(d[h]="number"===typeof a?sp(h,a):a);for(h in b)ma(c[h])&&(d[h]="")}else e&&tp[a]?d.setAttributeNS(tp[a],a,c):d.setAttribute(a,c)}}function up(a,b,c,d,e){var f=!1,g=0<(b&448);g&&(f=rp(c))&&(b&64?Xh(c.type)?(d.onchange=Kx,d.onclick=pp):d.oninput=Lx:b&256?d.onchange=Mx:b&128&&(d.oninput=Nx,c.onChange&&
(d.onchange=Ox)));for(var h in c)ai(h,null,c[h],d,e,f,null);g&&(e=f,b&64?Pf(c,d):b&256?Zh(c,d,!0,a):b&128&&$h(c,d,!0),e&&(d.$V=a))}function vp(a,b,c,d){b=new b(c,d);a.children=b;b.$V=a;b.$BS=!1;b.context=d;b.props===Ra&&(b.props=c);b.$UN=!1;if(ia(b.componentWillMount)){b.$BR=!0;b.componentWillMount();if(b.$PSS){var e=b.state,f=b.$PS;if(null===e)b.state=f;else for(var g in f)e[g]=f[g];b.$PSS=!1;b.$PS=null}b.$BR=!1}ia($a.beforeRender)&&$a.beforeRender(b);a=ue(b.render(c,b.state,d),a);var h;ia(b.getChildContext)&&
(h=b.getChildContext());ma(h)?b.$CX=d:b.$CX=se(d,h);ia($a.afterRender)&&$a.afterRender(b);b.$LI=a;return b}function ue(a,b){Bc(a)?a=aa("",null):Sh(a)?a=aa(a,null):(a.dom&&(a=ab(a)),a.flags&14&&(a.parentVNode=b));return a}function Va(a,b,c,d,e){var f=a.flags;if(f&481)return wp(a,b,c,d,e);if(f&14){var g=a.type,h=a.props||Ra,k=a.ref;0<(f&4)?(h=vp(a,g,h,d),a.dom=e=Va(h.$LI,null,c,h.$CX,e),xp(a,k,h,c),h.$UPD=!1):(f=ue(g(h,d),a),a.children=f,a.dom=e=Va(f,null,c,d,e),yp(h,k,e,c));null!==b&&b.appendChild(e);
return e}if(f&512||f&16)return bi(a,b);if(f&1024)return Va(a.children,a.type,c,d,!1),a.dom=bi(aa("",null),b)}function bi(a,b){var c=a.dom=document.createTextNode(a.children);null!==b&&b.appendChild(c);return c}function wp(a,b,c,d,e){var f=a.flags,g=a.children,h=a.props,k=a.className,m=a.ref,l=a.childFlags;e=e||0<(f&32);var r=a.type;r=!0===e?document.createElementNS("http://www.w3.org/2000/svg",r):document.createElement(r);a.dom=r;ma(k)||""===k||(e?r.setAttribute("class",k):r.className=k);null!==b&&
b.appendChild(r);0===(l&1)&&(b=!0===e&&"foreignObject"!==a.type,2===l?Va(g,r,c,d,b):l&12&&ve(g,r,c,d,b));null!==h&&up(a,f,h,r,e);ia(m)&&ci(r,m,c);return r}function ve(a,b,c,d,e){for(var f=0,g=a.length;f<g;f++){var h=a[f];null!==h.dom&&(a[f]=h=ab(h));Va(h,b,c,d,e)}}function Px(a,b,c,d,e){return function(){a.$UPD=!0;b&&c(d);e&&a.componentDidMount();a.$UPD=!1}}function xp(a,b,c,d){ia(b)&&b(c);b=ia(c.componentDidMount);var e=$a.afterMount,f=ia(e);(b||f)&&d.push(Px(c,f,e,a,b))}function Qx(a,b,c){return function(){return a.onComponentDidMount(b,
c)}}function yp(a,b,c,d){if(!ma(b)){if(ia(b.onComponentWillMount))b.onComponentWillMount(a);ia(b.onComponentDidMount)&&d.push(Qx(b,c,a))}}function ci(a,b,c){c.push(function(){return b(a)})}function we(a,b,c,d,e){var f=a.flags;if(f&14){var g=a.type,h=a.ref,k=a.props||Ra;0<(f&4)?(d=vp(a,g,k,d),k=d.$LI,we(k,b,c,d.$CX,e),a.dom=k.dom,xp(a,h,d,c),d.$UPD=!1):(f=ue(g(k,d),a),we(f,b,c,d,e),a.children=f,a.dom=f.dom,yp(k,h,b,c))}else if(f&481){h=a.children;k=a.props;f=a.className;g=a.flags;var m=a.ref;e=e||
0<(g&32);if(1!==b.nodeType||b.tagName.toLowerCase()!==a.type)c=wp(a,null,c,d,e),a.dom=c,b.parentNode.replaceChild(c,b);else{a.dom=b;var l=b.firstChild,r=a.childFlags;if(0===(r&1)){for(var q;l;)q=l.nextSibling,8===l.nodeType&&("!"===l.data?b.replaceChild(document.createTextNode(""),l):b.removeChild(l)),l=q;l=b.firstChild;if(2===r)null===l?Va(h,b,c,d,e):(q=l.nextSibling,we(h,l,c,d,e),l=q);else if(r&12){r=0;for(var u=h.length;r<u;r++){var v=h[r];null===l?Va(v,b,c,d,e):(q=l.nextSibling,we(v,l,c,d,e),
l=q)}}for(;l;)q=l.nextSibling,b.removeChild(l),l=q}else null===b.firstChild||k&&k.dangerouslySetInnerHTML&&k.dangerouslySetInnerHTML.__html&&np(b,k.dangerouslySetInnerHTML.__html)||(b.textContent="",g&448&&(b.defaultValue=""));null===k||up(a,g,k,b,e);ma(f)?""!==b.className&&b.removeAttribute("class"):e?b.setAttribute("class",f):b.className=f;ia(m)&&ci(b,m,c)}}else if(f&16)3!==b.nodeType?(c=bi(a,null),a.dom=c,b.parentNode.replaceChild(c,b)):(c=a.children,b.nodeValue!==c&&(b.nodeValue=c),a.dom=b);else if(f&
512)a.dom=b;else throw Error("Inferno Error: a runtime error occured! Use Inferno in development environment to find the error.");}function dc(a,b,c,d,e,f){if(a!==b){var g=b.flags|0;if(a.flags!==g||g&2048)cc(a),b=Va(b,null,d,e,f),c.replaceChild(b,a.dom);else if(g&481){var h=b.type;if(a.type!==h)cc(a),b=Va(b,null,d,e,f),c.replaceChild(b,a.dom);else{c=a.dom;g=b.flags;var k=a.props,m=b.props,l=!1,r=!1;b.dom=c;f=f||0<(g&32);if(k!==m){k=k||Ra;var q=m||Ra;if(q!==Ra){(l=0<(g&448))&&(r=rp(q));for(var u in q){m=
k[u];var v=q[u];m!==v&&ai(u,m,v,c,f,r,a)}}if(k!==Ra)for(var w in k)q.hasOwnProperty(w)||ma(k[w])||ai(w,k[w],null,c,f,r,a)}m=a.children;v=b.children;u=b.ref;w=a.className;k=b.className;m!==v&&zp(a.childFlags,b.childFlags,m,v,c,d,e,f&&"foreignObject"!==h);l&&(e=q,q=r,g&64?Pf(e,c):g&256?Zh(e,c,!1,b):g&128&&$h(e,c,!1),q&&(c.$V=b));w!==k&&(ma(k)?c.removeAttribute("class"):f?c.setAttribute("class",k):c.className=k);ia(u)&&a.ref!==u&&ci(c,u,d)}}else if(g&14)if(h=0<(g&4),q=b.type,g=a.key,r=b.key,a.type!==
q||g!==r)cc(a),b=Va(b,null,d,e,f),c.replaceChild(b,a.dom);else if(g=b.props||Ra,h)a=a.children,a.$UPD=!0,Ap(a,a.state,b,g,c,d,e,f,!1,!1),a.$V=b,a.$UPD=!1;else if(w=!0,h=a.props,r=b.ref,l=!ma(r),u=a.children,b.dom=a.dom,b.children=u,l&&ia(r.onComponentShouldUpdate)&&(w=r.onComponentShouldUpdate(h,g)),!1!==w){if(l&&ia(r.onComponentWillUpdate))r.onComponentWillUpdate(h,g);a=q(g,e);if("$NO_OP"!==a&&(a=ue(a,b),dc(u,a,c,d,e,f),b.children=a,b.dom=a.dom,l&&ia(r.onComponentDidUpdate)))r.onComponentDidUpdate(h,
g)}else u.flags&14&&(u.parentVNode=b);else g&16?(d=b.children,null===c.firstChild?(c.textContent=d,e=c.firstChild):(e=a.dom,d!==a.children&&(e.nodeValue=d)),b.dom=e):g&512?b.dom=a.dom:(c=a.type,f=b.type,q=b.children,zp(a.childFlags,b.childFlags,a.children,q,c,d,e,!1),b.dom=a.dom,c===f||Bc(q)||(a=q.dom,c.removeChild(a),f.appendChild(a)))}}function zp(a,b,c,d,e,f,g,h){switch(a){case 2:switch(b){case 2:dc(c,d,e,f,g,h);break;case 1:zb(c,e);break;default:zb(c,e),ve(d,e,f,g,h)}break;case 1:switch(b){case 2:Va(d,
e,f,g,h);break;case 1:break;default:ve(d,e,f,g,h)}break;default:if(b&12){var k=c.length,m=d.length;if(0===k)0<m&&ve(d,e,f,g,h);else if(0===m)Ed(c),e.textContent="";else if(8===b&&8===a){var l=k-1,r=m-1,q=0;a=0;var u,v=c[q],w=d[a];a:{for(;v.key===w.key;){w.dom&&(d[a]=w=ab(w));dc(v,w,e,f,g,h);q++;a++;if(q>l||a>r)break a;v=c[q];w=d[a]}v=c[l];for(w=d[r];v.key===w.key;){w.dom&&(d[r]=w=ab(w));dc(v,w,e,f,g,h);l--;r--;if(q>l||a>r)break a;v=c[l];w=d[r]}}if(q>l){if(a<=r){var n=r+1;for(m=n<m?d[n].dom:null;a<=
r;)w=d[a],w.dom&&(d[a]=w=ab(w)),a++,Nf(e,Va(w,null,f,g,h),m)}}else if(a>r)for(;q<=l;)zb(c[q++],e);else{w=l-q+1;n=r-a+1;b=[];for(u=0;u<n;u++)b.push(0);var p=w===k,t=!1,x=0,A=0;if(4>m||32>(w|n))for(u=q;u<=l;u++)if(v=c[u],A<n){for(k=a;k<=r;k++)if(w=d[k],v.key===w.key){b[k-a]=u+1;if(p)for(p=!1;u>q;)zb(c[q++],e);x>k?t=!0:x=k;w.dom&&(d[k]=w=ab(w));dc(v,w,e,f,g,h);A++;break}!p&&k>r&&zb(v,e)}else p||zb(v,e);else{var z={};for(u=a;u<=r;u++)z[d[u].key]=u;for(u=q;u<=l;u++)if(v=c[u],A<n)if(k=z[v.key],void 0!==
k){if(p)for(p=!1;u>q;)zb(c[q++],e);w=d[k];b[k-a]=u+1;x>k?t=!0:x=k;w.dom&&(d[k]=w=ab(w));dc(v,w,e,f,g,h);A++}else p||zb(v,e);else p||zb(v,e)}if(p)Ed(c),e.textContent="",ve(d,e,f,g,h);else if(t){r=b.slice();c=[0];w=b.length;for(u=0;u<w;u++)if(l=b[u],0!==l)if(q=c[c.length-1],b[q]<l)r[u]=q,c.push(u);else{q=0;for(k=c.length-1;q<k;)x=(q+k)/2|0,b[c[x]]<l?q=x+1:k=x;l<b[c[q]]&&(0<q&&(r[u]=c[q-1]),c[q]=u)}q=c.length;for(k=c[q-1];0<q--;)c[q]=k,k=r[k];k=c.length-1;for(u=n-1;0<=u;u--)0===b[u]?(x=u+a,w=d[x],w.dom&&
(d[x]=w=ab(w)),n=x+1,Nf(e,Va(w,null,f,g,h),n<m?d[n].dom:null)):0>k||u!==c[k]?(x=u+a,w=d[x],n=x+1,Nf(e,w.dom,n<m?d[n].dom:null)):k--}else if(A!==n)for(u=n-1;0<=u;u--)0===b[u]&&(x=u+a,w=d[x],w.dom&&(d[x]=w=ab(w)),n=x+1,Nf(e,Va(w,null,f,g,h),n<m?d[n].dom:null))}}else{a=k>m?m:k;for(b=0;b<a;b++)n=d[b],n.dom&&(n=d[b]=ab(n)),dc(c[b],n,e,f,g,h);if(k<m)for(b=a;b<m;b++)n=d[b],n.dom&&(n=d[b]=ab(n)),Va(n,e,f,g,h);else if(k>m)for(b=a;b<k;b++)zb(c[b],e)}}else 1===b?(Ed(c),e.textContent=""):(Ed(c),e.textContent=
"",Va(d,e,f,g,h))}}function Ap(a,b,c,d,e,f,g,h,k,m){var l=a.state,r=a.props;c.children=a;if(!a.$UN){if(r!==d||d===Ra){if(!m&&ia(a.componentWillReceiveProps)){a.$BR=!0;a.componentWillReceiveProps(d,g);if(a.$UN)return;a.$BR=!1}a.$PSS&&(b=se(b,a.$PS),a.$PSS=!1,a.$PS=null)}m=ia(a.shouldComponentUpdate);if(k||!m||m&&a.shouldComponentUpdate(d,b,g)){ia(a.componentWillUpdate)&&(a.$BS=!0,a.componentWillUpdate(d,b,g),a.$BS=!1);a.props=d;a.state=b;a.context=g;ia($a.beforeRender)&&$a.beforeRender(a);b=a.render(d,
b,g);ia($a.afterRender)&&$a.afterRender(a);d="$NO_OP"!==b;var q;ia(a.getChildContext)&&(q=a.getChildContext());q=ma(q)?g:se(g,q);a.$CX=q;d&&(g=a.$LI,b=a.$LI=ue(b,c),dc(g,b,e,f,q,h),ia(a.componentDidUpdate)&&a.componentDidUpdate(r,l),ia($a.afterUpdate)&&$a.afterUpdate(c))}else a.props=d,a.state=b,a.context=g;c.dom=a.$LI.dom}}function Qf(a,b,c){if("$NO_OP"!==a){var d=Rf.length,e;for(e=0;e<d;e++)if(Rf[e]===b){var f=b.$V;break}if(void 0===f){if(!Bc(a)){a.dom&&(a=ab(a));if(null===b.firstChild)Va(a,b,Hb,
Ra,!1),b.$V=a,Rf.push(b);else{d=a;f=b.firstChild;if(null!==f)for(Bc(d)||we(d,f,Hb,Ra,!1),f=b.firstChild;f=f.nextSibling;)b.removeChild(f);0<Hb.length&&Vh(Hb);b.$V||$a.roots.push(b);b.$V=d;ia(void 0)&&(void 0)()}f=a}}else ma(a)?(zb(f,b),Rf.splice(e,1)):(a.dom&&(a=ab(a)),dc(f,a,b,Hb,Ra,!1),f=b.$V=a);0<Hb.length&&Vh(Hb);ia(c)&&c();if(f&&f.flags&14)return f.children}}function Rx(a,b){return E(1024,b,null,a,0,null,Bc(a)?null:a.key,null)}function Sx(a,b){return function(){a.$QU=null;a.$UPD=!0;di(a,!1,function(){for(var c=
0,d=b.length;c<d;c++)b[c].call(a)});a.$UPD=!1}}function di(a,b,c){if(!a.$UN){if(b||!a.$BR){a.$PSS=!1;var d=se(a.state,a.$PS),e=a.props,f=a.context;a.$PS=null;var g=a.$V,h=a.$LI;Ap(a,d,g,e,h.dom&&h.dom.parentNode,Hb,f,0<(g.flags&32),b,!0);if(a.$UN)return;if(0===(a.$LI.flags&1024))for(b=a.$LI.dom;null!==(g=g.parentVNode);)0<(g.flags&14)&&(g.dom=b);0<Hb.length&&Vh(Hb)}else a.state=a.$PS,a.$PS=null;ia(c)&&c.call(a)}}function ei(a){ei="function"===typeof Symbol&&"symbol"===G(Symbol.iterator)?function(b){return G(b)}:
function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":G(b)};return ei(a)}function Bp(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function Tx(a,b,c){b&&Bp(a.prototype,b);c&&Bp(a,c);return a}function fi(a){fi=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)};return fi(a)}function Cp(a){if(void 0===
a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Ux(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&gi(a,b)}function gi(a,b){gi=Object.setPrototypeOf||function(c,d){c.__proto__=d;return c};return gi(a,b)}function Dp(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||
!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function Vx(a,b,c){b&&Dp(a.prototype,b);c&&Dp(a,c);return a}function Ep(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function Wx(a,b,c){b&&Ep(a.prototype,b);c&&Ep(a,c);return a}function Fp(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);
Object.defineProperty(a,d.key,d)}}function Xx(a,b,c){b&&Fp(a.prototype,b);c&&Fp(a,c);return a}function Yx(a){function b(f){0<=c.indexOf(f)||((f.__depends__||[]).forEach(b),0<=c.indexOf(f)||(c.push(f),(f.__init__||[]).forEach(function(g){d.push(g)})))}var c=[],d=[];a.forEach(b);var e=new Zd(c);d.forEach(function(f){try{e["string"===typeof f?"get":"invoke"](f)}catch(g){throw console.error("Failed to instantiate component"),console.error(g.stack),g;}});return e}function hi(a){if(!a)return"<null>";var b=
a.id?' id="'.concat(a.id,'"'):"";return"<".concat(a.$type).concat(b," />")}function Zx(a,b){function c(g,h,k){if(g.gfx)throw Error("already rendered ".concat(hi(g)));return a.element(g,h,k)}function d(g,h,k){O(g,function(m){c(m,h,k)})}function e(g,h,k){O(g,function(m){c(m,h,k);f(m.inputEntry,m);f(m.outputEntry,m)})}function f(g,h,k){O(g,function(m){c(m,h,k)})}return{handleDecision:function(g){g.id||(g.id="decision");var h=g.decisionTable;if(h){if(!h.output)throw Error("missing output for ".concat(hi(h)));
g=a.table(h);h.input&&d(h.input,g,h);d(h.output,g,h);e(h.rule,g,h)}else throw Error("no table for ".concat(hi(g)));}}}function $x(a,b,c){function d(l){(new Zx({create:function(r,q,u,v){return e.create(r,q,u,v)},table:function(r){return e.add(r)},element:function(r,q,u){return e.add(r,q,u)},error:function(r,q){k.push({message:r,context:q})}},{canAddMissingEntries:h})).handleDecision(l)}var e=a.get("tableImporter"),f=a.get("eventBus"),g=a.get("sheet"),h=a.get("modeling",!1),k=[];f.fire("import.render.start",
{decision:b});try{d(b)}catch(l){var m=l}f.fire("import.render.complete",{error:m,warnings:k});f.fire("elements.changed",{elements:[g.getRoot()]});c(m,k)}function Gp(a,b){var c=b.injector.get("translate");return E(1,"th","annotation header",c("Annotation"),0,{rowspan:"3"})}function ii(a){ii="function"===typeof Symbol&&"symbol"===G(Symbol.iterator)?function(b){return G(b)}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":G(b)};return ii(a)}function Hp(a,
b){var c=Object.keys(a);Object.getOwnPropertySymbols&&c.push.apply(c,Object.getOwnPropertySymbols(a));b&&(c=c.filter(function(d){return Object.getOwnPropertyDescriptor(a,d).enumerable}));return c}function ay(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?Hp(c,!0).forEach(function(d){Ip(a,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):Hp(c).forEach(function(d){Object.defineProperty(a,d,Object.getOwnPropertyDescriptor(c,
d))})}return a}function Ip(a,b,c){b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c;return a}function Jp(a,b){var c=a.elements,d=a.index;if(d[b])return a;var e=[],f=e.concat;if(Array.isArray(c)){var g=0;for(var h=Array(c.length);g<c.length;g++)h[g]=c[g];g=h}else g=void 0;g||(g=Symbol.iterator in Object(c)||"[object Arguments]"===Object.prototype.toString.call(c)?Array.from(c):void 0);if(!(c=g))throw new TypeError("Invalid attempt to spread non-iterable instance");
return{elements:f.call(e,c,[b]),index:ay({},d,Ip({},b,!0))}}function Sf(){for(var a={elements:[],index:{}},b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];c.forEach(function(e){var f=ii(e);"string"===f&&0<e.length?a=Jp(a,e):"object"===f&&null!==e&&Object.keys(e).forEach(function(g){e[g]&&(a=Jp(a,g))})});return a.elements.join(" ")}function by(a){if(Array.isArray(a)){var b=0;for(var c=Array(a.length);b<a.length;b++)c[b]=a[b];b=c}else b=void 0;b||(b=Symbol.iterator in Object(a)||"[object Arguments]"===
Object.prototype.toString.call(a)?Array.from(a):void 0);if(!(a=b))throw new TypeError("Invalid attempt to spread non-iterable instance");return a}function Ab(a){return Kp(a.constructor,a)}function Kp(a,b){var c=a.$inject;if(c){var d=b.context.injector,e=[].concat(by(c),[function(){for(var f=arguments.length,g=Array(f),h=0;h<f;h++)g[h]=arguments[h];for(var k in g)b[c[k]]=g[k]}]);d.invoke(e)}}function cy(a){for(var b=arguments.length,c=Array(1<b?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];return function(){for(var e=
arguments.length,f=Array(e),g=0;g<e;g++)f[g]=arguments[g];var h;c.forEach(function(k){h=k.call.apply(k,[a].concat(f));if("undefined"!==typeof h)return!1});return h}.bind(a)}function $c(a,b){Object.keys(b).forEach(function(c){if("$inject"!==c&&"__init"!==c){var d=b[c];"constructor"===c&&d.call(a,a.props,a.context);var e=a[c];if("undefined"!==typeof e){if("function"!==typeof e)throw Error("failed to mixin <".concat(c,">: cannot combine with non-fn component value"));a[c]=cy(a,e,d)}else a[c]=d.bind(a)}});
"$inject"in b&&Kp(b,a);"__init"in b&&b.__init.call(a,a.props,a.context)}function ji(a){ji="function"===typeof Symbol&&"symbol"===G(Symbol.iterator)?function(b){return G(b)}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":G(b)};return ji(a)}function Lp(a,b){var c=Object.keys(a);Object.getOwnPropertySymbols&&c.push.apply(c,Object.getOwnPropertySymbols(a));b&&(c=c.filter(function(d){return Object.getOwnPropertyDescriptor(a,d).enumerable}));return c}
function dy(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?Lp(c,!0).forEach(function(d){var e=c[d];d in a?Object.defineProperty(a,d,{value:e,enumerable:!0,configurable:!0,writable:!0}):a[d]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):Lp(c).forEach(function(d){Object.defineProperty(a,d,Object.getOwnPropertyDescriptor(c,d))})}return a}function Mp(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||
!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function ey(a,b,c){b&&Mp(a.prototype,b);c&&Mp(a,c);return a}function ki(a){ki=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)};return ki(a)}function li(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function fy(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");
a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&mi(a,b)}function mi(a,b){mi=Object.setPrototypeOf||function(c,d){c.__proto__=d;return c};return mi(a,b)}function ni(a){ni="function"===typeof Symbol&&"symbol"===G(Symbol.iterator)?function(b){return G(b)}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":G(b)};return ni(a)}function Np(a,b){var c=Object.keys(a);Object.getOwnPropertySymbols&&c.push.apply(c,
Object.getOwnPropertySymbols(a));b&&(c=c.filter(function(d){return Object.getOwnPropertyDescriptor(a,d).enumerable}));return c}function gy(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?Np(c,!0).forEach(function(d){var e=c[d];d in a?Object.defineProperty(a,d,{value:e,enumerable:!0,configurable:!0,writable:!0}):a[d]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):Np(c).forEach(function(d){Object.defineProperty(a,
d,Object.getOwnPropertyDescriptor(c,d))})}return a}function Op(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function hy(a,b,c){b&&Op(a.prototype,b);c&&Op(a,c);return a}function oi(a){oi=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)};return oi(a)}function iy(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");
a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&pi(a,b)}function pi(a,b){pi=Object.setPrototypeOf||function(c,d){c.__proto__=d;return c};return pi(a,b)}function jy(a){a=a.row.businessObject;return X(2,xe,{className:"annotation",elementId:a.id+"__annotation",children:a.description||"-"})}function Pp(a){a.onGetComponent("cell",function(b){b=b.cellType;if("after-label-cells"===b)return Gp;if("after-rule-cells"===b)return jy})}function Qp(a){if(Array.isArray(a)){var b=
0;for(var c=Array(a.length);b<a.length;b++)c[b]=a[b];b=c}else b=void 0;b||(b=Symbol.iterator in Object(a)||"[object Arguments]"===Object.prototype.toString.call(a)?Array.from(a):void 0);if(!(a=b))throw new TypeError("Invalid attempt to spread non-iterable instance");return a}function Rp(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function ky(a,b,c){b&&Rp(a.prototype,b);c&&Rp(a,c);return a}
function ye(a,b){return R({id:a.id,type:a.$type,businessObject:a},b)}function Sp(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}));c.push.apply(c,d)}return c}function Tp(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?Sp(c,!0).forEach(function(d){var e=c[d];d in a?Object.defineProperty(a,d,{value:e,enumerable:!0,configurable:!0,writable:!0}):
a[d]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):Sp(c).forEach(function(d){Object.defineProperty(a,d,Object.getOwnPropertyDescriptor(c,d))})}return a}function Up(a,b){if(null==a)return{};if(null==a)var c={};else{c={};var d=Object.keys(a),e;for(e=0;e<d.length;e++){var f=d[e];0<=b.indexOf(f)||(c[f]=a[f])}}if(Object.getOwnPropertySymbols)for(e=Object.getOwnPropertySymbols(a),f=0;f<e.length;f++)d=e[f],0<=b.indexOf(d)||Object.prototype.propertyIsEnumerable.call(a,
d)&&(c[d]=a[d]);return c}function qi(a){qi="function"===typeof Symbol&&"symbol"===G(Symbol.iterator)?function(b){return G(b)}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":G(b)};return qi(a)}function ri(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function Vp(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,
d.key,d)}}function si(a,b,c){b&&Vp(a.prototype,b);c&&Vp(a,c);return a}function ti(a,b){return!b||"object"!==qi(b)&&"function"!==typeof b?ui(a):b}function ze(a){ze=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)};return ze(a)}function ui(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function vi(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");
a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&wi(a,b)}function wi(a,b){wi=Object.setPrototypeOf||function(c,d){c.__proto__=d;return c};return wi(a,b)}function ly(a,b,c){b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c;return a}function my(a,b){var c=a.input,d=a.className,e=c.label,f=c.inputExpression,g=b.injector.get("translate");return E(1,"th",(d||"")+" input-cell",e?E(1,"span","input-label",e,0,{title:g("Input Label")}):
E(1,"span","input-expression",f.text||"-",0,{title:g("Input Expression")}),0,{"data-col-id":c.id},c.id)}function ny(a,b){var c=a.output,d=a.className,e=c.label,f=c.name,g=b.injector.get("translate");return E(1,"th",(d||"")+" output-cell",e?E(1,"span","output-label",e,0,{title:g("Output Label")}):E(1,"span","output-name",f||"-",0,{title:g("Output Name")}),0,null,c.id)}function Wp(a,b){var c=a.className,d=a.element,e=b.injector.get("translate");return E(1,"th",c+" type-ref",d.typeRef,0,{title:e("Data Type")})}
function Xp(a){a.onGetComponent("table.head",function(){return oy})}function xi(a){xi="function"===typeof Symbol&&"symbol"===G(Symbol.iterator)?function(b){return G(b)}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":G(b)};return xi(a)}function Yp(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function py(a,b,c){b&&Yp(a.prototype,b);c&&
Yp(a,c);return a}function yi(a){yi=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)};return yi(a)}function qy(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&zi(a,b)}function zi(a,b){zi=Object.setPrototypeOf||function(c,d){c.__proto__=d;return c};return zi(a,b)}function Ai(a){Ai="function"===
typeof Symbol&&"symbol"===G(Symbol.iterator)?function(b){return G(b)}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":G(b)};return Ai(a)}function Zp(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function ry(a,b,c){b&&Zp(a.prototype,b);c&&Zp(a,c);return a}function Bi(a){Bi=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||
Object.getPrototypeOf(b)};return Bi(a)}function sy(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&Ci(a,b)}function Ci(a,b){Ci=Object.setPrototypeOf||function(c,d){c.__proto__=d;return c};return Ci(a,b)}function $p(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,
d.key,d)}}function ty(a,b,c){b&&$p(a.prototype,b);c&&$p(a,c);return a}function Di(a){Di="function"===typeof Symbol&&"symbol"===G(Symbol.iterator)?function(b){return G(b)}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":G(b)};return Di(a)}function aq(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function uy(a,b,c){b&&aq(a.prototype,b);
c&&aq(a,c);return a}function Ei(a){Ei=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)};return Ei(a)}function vy(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&Fi(a,b)}function Fi(a,b){Fi=Object.setPrototypeOf||function(c,d){c.__proto__=d;return c};return Fi(a,b)}function Gi(a){Gi="function"===
typeof Symbol&&"symbol"===G(Symbol.iterator)?function(b){return G(b)}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":G(b)};return Gi(a)}function bq(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function wy(a,b,c){b&&bq(a.prototype,b);c&&bq(a,c);return a}function Hi(a){Hi=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||
Object.getPrototypeOf(b)};return Hi(a)}function cq(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function xy(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&Ii(a,b)}function Ii(a,b){Ii=Object.setPrototypeOf||function(c,d){c.__proto__=d;return c};return Ii(a,b)}function Ji(a){Ji=
"function"===typeof Symbol&&"symbol"===G(Symbol.iterator)?function(b){return G(b)}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":G(b)};return Ji(a)}function dq(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function yy(a,b,c){b&&dq(a.prototype,b);c&&dq(a,c);return a}function Ki(a){Ki=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||
Object.getPrototypeOf(b)};return Ki(a)}function zy(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&Li(a,b)}function Li(a,b){Li=Object.setPrototypeOf||function(c,d){c.__proto__=d;return c};return Li(a,b)}function Mi(a){Mi="function"===typeof Symbol&&"symbol"===G(Symbol.iterator)?function(b){return G(b)}:function(b){return b&&"function"===
typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":G(b)};return Mi(a)}function eq(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function Ay(a,b,c){b&&eq(a.prototype,b);c&&eq(a,c);return a}function Ni(a){Ni=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)};return Ni(a)}function By(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");
a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&Oi(a,b)}function Oi(a,b){Oi=Object.setPrototypeOf||function(c,d){c.__proto__=d;return c};return Oi(a,b)}function Cy(a){switch(a){case "SUM":return"+";case "MIN":return"<";case "MAX":return">";case "COUNT":return"#";default:return""}}function fq(a){a.onGetComponent("cell",function(b){if("before-label-cells"===b.cellType)return Dy})}function Pi(a){Pi="function"===typeof Symbol&&"symbol"===G(Symbol.iterator)?
function(b){return G(b)}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":G(b)};return Pi(a)}function gq(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function Ey(a,b,c){b&&gq(a.prototype,b);c&&gq(a,c);return a}function Fy(a,b){return!b||"object"!==Pi(b)&&"function"!==typeof b?hq(a):b}function Qi(a){Qi=Object.setPrototypeOf?Object.getPrototypeOf:
function(b){return b.__proto__||Object.getPrototypeOf(b)};return Qi(a)}function hq(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Gy(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&Ri(a,b)}function Ri(a,b){Ri=Object.setPrototypeOf||function(c,d){c.__proto__=d;return c};
return Ri(a,b)}function Hy(a,b,c){b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c;return a}function iq(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function Iy(a,b,c){b&&iq(a.prototype,b);c&&iq(a,c);return a}function jq(a){if(a=a.businessObject)return a.$parent.$parent}function Si(a){Si="function"===typeof Symbol&&"symbol"===G(Symbol.iterator)?
function(b){return G(b)}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":G(b)};return Si(a)}function kq(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function Jy(a,b,c){b&&kq(a.prototype,b);c&&kq(a,c);return a}function Ky(a,b){return!b||"object"!==Si(b)&&"function"!==typeof b?lq(a):b}function Ti(a){Ti=Object.setPrototypeOf?Object.getPrototypeOf:
function(b){return b.__proto__||Object.getPrototypeOf(b)};return Ti(a)}function lq(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Ly(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&Ui(a,b)}function Ui(a,b){Ui=Object.setPrototypeOf||function(c,d){c.__proto__=d;return c};
return Ui(a,b)}function My(a,b,c){b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c;return a}function Vi(a){Vi="function"===typeof Symbol&&"symbol"===G(Symbol.iterator)?function(b){return G(b)}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":G(b)};return Vi(a)}function mq(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,
d.key,d)}}function Ny(a,b,c){b&&mq(a.prototype,b);c&&mq(a,c);return a}function Wi(a){Wi=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)};return Wi(a)}function Xi(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Oy(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,
writable:!0,configurable:!0}});b&&Yi(a,b)}function Yi(a,b){Yi=Object.setPrototypeOf||function(c,d){c.__proto__=d;return c};return Yi(a,b)}function Zi(a){Zi="function"===typeof Symbol&&"symbol"===G(Symbol.iterator)?function(b){return G(b)}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":G(b)};return Zi(a)}function nq(a){if(Array.isArray(a)){var b=0;for(var c=Array(a.length);b<a.length;b++)c[b]=a[b];b=c}else b=void 0;b||(b=Symbol.iterator in Object(a)||
"[object Arguments]"===Object.prototype.toString.call(a)?Array.from(a):void 0);if(!(a=b))throw new TypeError("Invalid attempt to spread non-iterable instance");return a}function oq(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function Py(a,b,c){b&&oq(a.prototype,b);c&&oq(a,c);return a}function $i(a,b,c){$i="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(d,e,f){for(;!Object.prototype.hasOwnProperty.call(d,
e)&&(d=Ae(d),null!==d););if(d)return e=Object.getOwnPropertyDescriptor(d,e),e.get?e.get.call(f):e.value};return $i(a,b,c||a)}function Ae(a){Ae=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)};return Ae(a)}function Qy(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&aj(a,b)}function aj(a,
b){aj=Object.setPrototypeOf||function(c,d){c.__proto__=d;return c};return aj(a,b)}function bj(a){bj="function"===typeof Symbol&&"symbol"===G(Symbol.iterator)?function(b){return G(b)}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":G(b)};return bj(a)}function pq(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function Ry(a,b,c){b&&pq(a.prototype,
b);c&&pq(a,c);return a}function Sy(a,b){return!b||"object"!==bj(b)&&"function"!==typeof b?Tf(a):b}function cj(a){cj=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)};return cj(a)}function Tf(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Ty(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&
b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&dj(a,b)}function dj(a,b){dj=Object.setPrototypeOf||function(c,d){c.__proto__=d;return c};return dj(a,b)}function Uy(a,b,c){b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c;return a}function qq(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function Vy(a,b,c){b&&qq(a.prototype,b);c&&
qq(a,c);return a}function rq(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function Wy(a,b,c){b&&rq(a.prototype,b);c&&rq(a,c);return a}function Xy(a,b,c){b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c;return a}function Yy(a,b,c){return a.replace(/\.\w+|\w+ *\(|"[^"]*"|'[^']*'|\/([^/]+)\/|[a-zA-Z_]\w*/g,function(d){return"("==d[d.length-1]?c(d):
~b.indexOf(d)?c(d):d})}function Zy(a){return function(b){return a+b}}function Ma(a,b){if(!(this instanceof Ma))return new Ma(a,b);this.node=this.start=this.peeked=a;this.root=b;this.closingTag=!1;this._revisit=!0;this._selects=[];this._rejects=[];if(a&&this.higher(a))throw Error("root must be a parent or ancestor to node");}function sq(a,b){var c="nextSibling"==a;return function(d,e,f){d=this.compile(d);e=e&&0<e?e:1;for(var g=this.node,h=this.closingTag,k=this._revisit;g;){if(c^h&&g[b])g=g[b],h=!c;
else if(1==g.nodeType&&!g[b]&&c^h){if(h=c,!k)continue}else if(g[a])g=g[a],h=!c;else if(g=g.parentNode,h=c,!k)continue;if(!g||this.higher(g,this.root))break;if(d(g)&&this.selects(g,f)&&this.rejects(g,f)&&!--e)return f||(this.node=g),this.closingTag=h,g}return null}}function Uf(a){Fd.removeAllRanges();Fd.addRange(a)}function $y(a){if(!Fd.rangeCount)return null;var b=Fd.focusNode;3===b.nodeType&&(b=b.parentNode);return a==b||a.contains(b)}function ej(a){function b(q,u){1===arguments.length&&(u=q);return q.parentNode===
f&&u==f.childNodes[h]}function c(q,u){1===arguments.length&&(u=q);return q.parentNode===e&&u==e.childNodes[g]}if(!$y(a))return null;var d=Fd.getRangeAt(0),e=d.startContainer,f=d.endContainer,g=d.startOffset,h=d.endOffset;a=tq(a.firstChild,a);d=a.node;for(var k,m=!1,l,r=0;d;){c(d)&&(l=r);if(b(d))break;m||(1===d.nodeType&&"BR"===d.nodeName||k&&k.nextSibling==d&&(1===d.nodeType&&"DIV"===d.nodeName||1===d.nodeType&&"P"===d.nodeName))&&r++;if(3===d.nodeType){e===d&&(l=r+g);if(f===d){r+=h;break}r+=d.textContent.length}if(3===
d.nodeType||m)if(c(d,d.nextSibling)&&(l=r),b(d,d.nextSibling))break;k=d;d=a.next();m=a.closingTag}return{start:"undefined"===typeof l?r:l,end:r}}function fj(a,b){for(var c=b.start,d=b.end,e=document.createRange(),f=tq(a.firstChild,a),g=f.node,h=!1,k=0;g;){k===c&&(h?e.setStartAfter(g):e.setStartBefore(g));if(k===d)return h?e.setEndAfter(g):e.setEndBefore(g),e;h||(1===g.nodeType&&"BR"===g.nodeName||g.previousSibling&&(1===g.nodeType&&"DIV"===g.nodeName||1===g.nodeType&&"P"===g.nodeName))&&k++;if(3===
g.nodeType){h=g.textContent.length;k<=c&&k+h>c&&e.setStart(g,c-k);if(k+h>d)return e.setEnd(g,d-k),e;k+=h}g=f.next();h=f.closingTag}k<=c&&(a.lastChild?e.setStartAfter(a.lastChild):e.setStart(a,0));a.lastChild?e.setEndAfter(a.lastChild):e.setEnd(a,0);return e}function Vf(a){return a.getAttribute("data-element-id")}function Gd(a,b){return xa('[data-element-id="'.concat(sh(a),'"]'),b)}function uq(a){return gj(a,"[contenteditable]")?a:xa("[contenteditable]",a)}function vq(a,b,c,d,e){function f(m,l){b.fire("selection."+
m+".changed",l);b.fire("cellSelection.changed",{elementId:m,selection:l})}function g(m){var l=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0;k!==m&&f(k,{selected:!1,focussed:!1});(k=m)&&f(m,{selected:!0,focussed:l});m?d.select(m):d.deselect()}var h=a.container,k=null;b.on("cell.click",500,function(m){var l=m.target;Za(l,".no-deselect",!0)||(l=(l=Za(l,"[data-element-id]",!0))&&Vf(l),g(l,!m.defaultPrevented),m.stopPropagation())});b.on("cell.focusin",500,function(m){var l=Vf(m.target),r=
!m.defaultPrevented;m.stopPropagation();return g(l,r)});b.on("cell.focusout",500,function(m){m=Vf(m.target);f(m,{focussed:!1})});b.on("cellSelection.changed",function(m){var l=m.selection;m=Gd(m.elementId,h);l.focussed&&m&&(l=uq(m))&&document.body.contains(l)&&document.activeElement!==l&&(l.focus(),m=ej(l),m&&0!==m.end||(l=fj(l,{start:5E3,end:5E3}),Uf(l)))});b.on("selection.changed",function(m){var l=m.selection,r=m.oldSelection;m=l&&l.id;r=r&&r.id;m&&m!==k?g(l.id):r&&r===k&&g()});this.isCellSelected=
function(){return!!k};this.getCellSelection=function(){return k};this.selectCell=function(m){if(k){if(!(m in az))throw Error("direction must be any of { above, below, left, right }");var l=Gd(k,h).getAttribute("data-coords");if(l){l=l.split(":");var r=Array.isArray(l)?l:void 0;if(!r)if(Symbol.iterator in Object(l)||"[object Arguments]"===Object.prototype.toString.call(l)){r=[];var q=!0,u=!1,v=void 0;try{var w=l[Symbol.iterator]();for(var n;!(q=(n=w.next()).done)&&(r.push(n.value),2!==r.length);q=
!0);}catch(p){u=!0,v=p}finally{try{if(!q&&null!=w["return"])w["return"]()}finally{if(u)throw v;}}}else r=void 0;if(!(w=r))throw new TypeError("Invalid attempt to destructure non-iterable instance");w={row:w[0],col:w[1]}}else w=null;if(!w)return!1;n=w.row;l=w.col;if("above"===m||"below"===m)n=parseInt(n,10),m=isNaN(n)?w:{col:l,row:"above"===m?n-1:n+1};else if("left"===m||"right"===m)l=parseInt(l,10),m=isNaN(l)?w:{row:n,col:"left"===m?l-1:l+1};else throw Error("invalid direction <"+m+">");m="".concat(m.row,
":").concat(m.col);m=xa('[data-coords="'.concat(sh(m),'"]'),h);if(!m)return!1;(m=Vf(m))&&g(m,{focussed:!0,selected:!0});return!0}};b.on("contextMenu.close",function(){if(k)return g(k)})}function Be(){}function hj(a){hj="function"===typeof Symbol&&"symbol"===G(Symbol.iterator)?function(b){return G(b)}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":G(b)};return hj(a)}function wq(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||
!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function bz(a,b,c){b&&wq(a.prototype,b);c&&wq(a,c);return a}function ij(a){ij=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)};return ij(a)}function cz(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&jj(a,
b)}function jj(a,b){jj=Object.setPrototypeOf||function(c,d){c.__proto__=d;return c};return jj(a,b)}function xq(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function dz(a,b,c){b&&xq(a.prototype,b);c&&xq(a,c);return a}function yq(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(e){return Object.getOwnPropertyDescriptor(a,
e).enumerable}));c.push.apply(c,d)}return c}function eb(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?yq(c,!0).forEach(function(d){Ce(a,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):yq(c).forEach(function(d){Object.defineProperty(a,d,Object.getOwnPropertyDescriptor(c,d))})}return a}function Ce(a,b,c){b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c;return a}
function zq(a){if(Array.isArray(a)){var b=0;for(var c=Array(a.length);b<a.length;b++)c[b]=a[b];b=c}else b=void 0;b||(b=Symbol.iterator in Object(a)||"[object Arguments]"===Object.prototype.toString.call(a)?Array.from(a):void 0);if(!(a=b))throw new TypeError("Invalid attempt to spread non-iterable instance");return a}function kj(a,b,c){c=c||ez;b=b||{};return ja(a)?fz(a,b,c):Aq(a,b,c)}function fz(a,b,c){return qb(a,function(d,e){var f=d.descriptorCache,g=d.root,h=Aq(e,f,c),k=h.root;h=h.descriptorCache;
return{root:[].concat(zq(g),[k]),descriptorCache:eb({},f,{},h)}},{root:[],descriptorCache:b})}function Aq(a,b,c){var d=a.id,e=b.elements||{},f=e[d];if(f)return{root:f,descriptorCache:b};a=gz(a,{id:d},c,eb({},b,{elements:e}));return{root:a.root,descriptorCache:eb({},a.descriptorCache,{elements:eb({},a.descriptorCache.elements,Ce({},d,a.root))})}}function gz(a,b,c,d){function e(f,g){return kj(f,g,c)}return qb(c,function(f,g){return g(a,f.root,f.descriptorCache,e)},{root:b,descriptorCache:d})}function lj(a,
b){var c,d=a.id;if(d){var e=b.boCache||{};if(c=e[d])return{root:c,descriptorCache:b}}var f={$type:a.$type};d&&(f.id=d,e=eb({},e,Ce({},d,f)),b=eb({},b,{boCache:e}));a.$descriptor.properties.forEach(function(g){var h=a[g.name];h&&(ja(h)&&(h=h.map(function(k){k=lj(k,b);b=k.descriptorCache;return k.root})),h.$type&&(h=lj(h,b),b=h.descriptorCache,h=h.root),f[g.name]=h)});return{root:f,descriptorCache:b}}function Bq(a,b,c){c=c||hz;b=b||{};return ja(a.root)?iz(a,b,c):Cq(a,b,c)}function iz(a,b,c){var d=a.descriptorCache;
return qb(a.root,function(e,f){var g=e.root,h=Cq({root:f,descriptorCache:d},e.reviveCache,c),k=h.root;h=h.reviveCache;return{root:[].concat(zq(g),[k]),reviveCache:h}},{root:[],reviveCache:b})}function Cq(a,b,c){var d=a.root.id,e=b.elements||{},f=e[d];if(f)return{root:f,reviveCache:b};a=jz(a,{id:d},c,eb({},b,{elements:e}));return{root:a.root,reviveCache:eb({},a.reviveCache,{elements:eb({},a.reviveCache.elements,Ce({},d,a.root))})}}function jz(a,b,c,d){function e(f,g){return Bq(f,g,c)}return qb(c,function(f,
g){return g(a,f.root,f.reviveCache,e)},{root:b,reviveCache:d})}function mj(a,b){var c=a.root,d=c.id,e;if(d){var f=b.boCache||{};if(e=f[d])return{root:e,reviveCache:b}}var g={};ic(c).forEach(function(k){if(c[k].$type){var m=mj({root:c[k]},b);var l=m.root;b=m.reviveCache;f=b.boCache||{}}else l=ja(c[k])?c[k].map(function(r){m=mj({root:r},b);b=m.reviveCache;f=b.boCache||{};return m.root}):c[k];g[k]=l});e=g.$type;delete g.$type;b._keepIds&&!b._model.ids.assigned(g.id)||delete g.id;var h=b._dmnFactory.create(e,
g);O(g,function(k){k.$type&&(k.$parent=h);ja(k)&&k.forEach(function(m){return m.$parent=h})});d&&(f=eb({},f,Ce({},d,h)),b=eb({},b,{boCache:f}));return{root:h,reviveCache:b}}function Dq(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function kz(a,b,c){b&&Dq(a.prototype,b);c&&Dq(a,c);return a}function Eq(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);
b&&(d=d.filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}));c.push.apply(c,d)}return c}function lz(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?Eq(c,!0).forEach(function(d){var e=c[d];d in a?Object.defineProperty(a,d,{value:e,enumerable:!0,configurable:!0,writable:!0}):a[d]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):Eq(c).forEach(function(d){Object.defineProperty(a,d,Object.getOwnPropertyDescriptor(c,
d))})}return a}function Fq(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function mz(a,b,c){b&&Fq(a.prototype,b);c&&Fq(a,c);return a}function Gq(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function nz(a,b,c){b&&Gq(a.prototype,b);c&&Gq(a,c);return a}function Hq(a,b){return{start:a,
end:void 0===b?a:b}}function nj(a){nj="function"===typeof Symbol&&"symbol"===G(Symbol.iterator)?function(b){return G(b)}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":G(b)};return nj(a)}function Iq(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function oz(a,b,c){b&&Iq(a.prototype,b);c&&Iq(a,c);return a}function pz(a,b){return!b||"object"!==
nj(b)&&"function"!==typeof b?ad(a):b}function oj(a){oj=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)};return oj(a)}function ad(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function qz(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});
b&&pj(a,b)}function pj(a,b){pj=Object.setPrototypeOf||function(c,d){c.__proto__=d;return c};return pj(a,b)}function Hd(a,b,c){b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c;return a}function Jq(){}function rz(){var a=window.navigator.userAgent;return 0<a.indexOf("MSIE ")||0<a.indexOf("Trident/")}function qj(a){qj="function"===typeof Symbol&&"symbol"===G(Symbol.iterator)?function(b){return G(b)}:function(b){return b&&"function"===typeof Symbol&&b.constructor===
Symbol&&b!==Symbol.prototype?"symbol":G(b)};return qj(a)}function Kq(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function sz(a,b,c){b&&Kq(a.prototype,b);c&&Kq(a,c);return a}function tz(a,b){return!b||"object"!==qj(b)&&"function"!==typeof b?rj(a):b}function sj(a){sj=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)};return sj(a)}function rj(a){if(void 0===
a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function uz(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&tj(a,b)}function tj(a,b){tj=Object.setPrototypeOf||function(c,d){c.__proto__=d;return c};return tj(a,b)}function Lq(a,b,c){b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,
writable:!0}):a[b]=c;return a}function uj(a){uj="function"===typeof Symbol&&"symbol"===G(Symbol.iterator)?function(b){return G(b)}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":G(b)};return uj(a)}function Mq(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function Nq(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,
d.key,d)}}function Oq(a,b,c){b&&Nq(a.prototype,b);c&&Nq(a,c);return a}function Pq(a,b){return!b||"object"!==uj(b)&&"function"!==typeof b?Wf(a):b}function Xf(a){Xf=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)};return Xf(a)}function Wf(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Qq(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");
a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&vj(a,b)}function vj(a,b){vj=Object.setPrototypeOf||function(c,d){c.__proto__=d;return c};return vj(a,b)}function Rq(a,b,c){b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c;return a}function Sq(a){a.onGetComponent("cell",function(b){b=b.cellType;if("after-label-cells"===b)return Gp;if("after-rule-cells"===b)return Tq})}function Uq(a){return function(b){if(!1!==
a){var c=ua(a)?a:300;return Td(b,c)}return b}}function wj(a){wj="function"===typeof Symbol&&"symbol"===G(Symbol.iterator)?function(b){return G(b)}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":G(b)};return wj(a)}function Vq(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function Wq(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,
d.key,d)}}function Xq(a,b,c){b&&Wq(a.prototype,b);c&&Wq(a,c);return a}function Yq(a,b){return!b||"object"!==wj(b)&&"function"!==typeof b?Sb(a):b}function Yf(a){Yf=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)};return Yf(a)}function Sb(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Zq(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");
a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&xj(a,b)}function xj(a,b){xj=Object.setPrototypeOf||function(c,d){c.__proto__=d;return c};return xj(a,b)}function bd(a,b,c){b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c;return a}function $q(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function vz(a,
b,c){b&&$q(a.prototype,b);c&&$q(a,c);return a}function Id(a){return a.altKey?!1:a.ctrlKey||a.metaKey}function ar(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function wz(a,b,c){b&&ar(a.prototype,b);c&&ar(a,c);return a}function br(a,b,c){b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c;return a}function yj(a){yj="function"===typeof Symbol&&"symbol"===
G(Symbol.iterator)?function(b){return G(b)}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":G(b)};return yj(a)}function cr(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function xz(a,b,c){b&&cr(a.prototype,b);c&&cr(a,c);return a}function yz(a,b){return!b||"object"!==yj(b)&&"function"!==typeof b?zj(a):b}function Aj(a){Aj=Object.setPrototypeOf?
Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)};return Aj(a)}function zj(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function zz(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&Bj(a,b)}function Bj(a,b){Bj=Object.setPrototypeOf||function(c,
d){c.__proto__=d;return c};return Bj(a,b)}function Az(a,b,c){b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c;return a}function Cj(a){Cj="function"===typeof Symbol&&"symbol"===G(Symbol.iterator)?function(b){return G(b)}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":G(b)};return Cj(a)}function dr(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&
(d.writable=!0);Object.defineProperty(a,d.key,d)}}function Bz(a,b,c){b&&dr(a.prototype,b);c&&dr(a,c);return a}function Cz(a,b){return!b||"object"!==Cj(b)&&"function"!==typeof b?Dj(a):b}function Ej(a){Ej=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)};return Ej(a)}function Dj(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Dz(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");
a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&Fj(a,b)}function Fj(a,b){Fj=Object.setPrototypeOf||function(c,d){c.__proto__=d;return c};return Fj(a,b)}function Ez(a,b,c){b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c;return a}function er(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function Fz(a,
b,c){b&&er(a.prototype,b);c&&er(a,c);return a}function Gj(a){Gj="function"===typeof Symbol&&"symbol"===G(Symbol.iterator)?function(b){return G(b)}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":G(b)};return Gj(a)}function fr(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function Gz(a,b,c){b&&fr(a.prototype,b);c&&fr(a,c);return a}function Hz(a,
b){return!b||"object"!==Gj(b)&&"function"!==typeof b?De(a):b}function Hj(a){Hj=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)};return Hj(a)}function De(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Iz(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,
writable:!0,configurable:!0}});b&&Ij(a,b)}function Ij(a,b){Ij=Object.setPrototypeOf||function(c,d){c.__proto__=d;return c};return Ij(a,b)}function Jj(a,b,c){b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c;return a}function Kj(a){Kj="function"===typeof Symbol&&"symbol"===G(Symbol.iterator)?function(b){return G(b)}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":G(b)};return Kj(a)}function gr(a,b){for(var c=
0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function Jz(a,b,c){b&&gr(a.prototype,b);c&&gr(a,c);return a}function Kz(a,b){return!b||"object"!==Kj(b)&&"function"!==typeof b?Zf(a):b}function Lj(a){Lj=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)};return Lj(a)}function Zf(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return a}function Lz(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&Mj(a,b)}function Mj(a,b){Mj=Object.setPrototypeOf||function(c,d){c.__proto__=d;return c};return Mj(a,b)}function Nj(a,b,c){b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c;return a}function Oj(a){Oj="function"===typeof Symbol&&
"symbol"===G(Symbol.iterator)?function(b){return G(b)}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":G(b)};return Oj(a)}function hr(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function Mz(a,b,c){b&&hr(a.prototype,b);c&&hr(a,c);return a}function Nz(a,b){if(b&&("object"===Oj(b)||"function"===typeof b))return b;if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return a}function Pj(a){Pj=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)};return Pj(a)}function Oz(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&Qj(a,b)}function Qj(a,b){Qj=Object.setPrototypeOf||function(c,d){c.__proto__=d;return c};return Qj(a,b)}function Pz(a){return a}function Rj(a){Rj=
"function"===typeof Symbol&&"symbol"===G(Symbol.iterator)?function(b){return G(b)}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":G(b)};return Rj(a)}function ir(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}));c.push.apply(c,d)}return c}function Qz(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?
arguments[b]:{};b%2?ir(c,!0).forEach(function(d){Sj(a,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):ir(c).forEach(function(d){Object.defineProperty(a,d,Object.getOwnPropertyDescriptor(c,d))})}return a}function jr(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function Rz(a,b,c){b&&jr(a.prototype,b);c&&jr(a,c);return a}function Sz(a,
b){return!b||"object"!==Rj(b)&&"function"!==typeof b?$f(a):b}function Tj(a){Tj=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)};return Tj(a)}function $f(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Tz(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,
writable:!0,configurable:!0}});b&&Uj(a,b)}function Uj(a,b){Uj=Object.setPrototypeOf||function(c,d){c.__proto__=d;return c};return Uj(a,b)}function Sj(a,b,c){b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c;return a}function Vj(a){Vj="function"===typeof Symbol&&"symbol"===G(Symbol.iterator)?function(b){return G(b)}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":G(b)};return Vj(a)}function kr(a,b){for(var c=
0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function Uz(a,b,c){b&&kr(a.prototype,b);c&&kr(a,c);return a}function Vz(a,b){return!b||"object"!==Vj(b)&&"function"!==typeof b?Ee(a):b}function Wj(a){Wj=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)};return Wj(a)}function Ee(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return a}function Wz(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&Xj(a,b)}function Xj(a,b){Xj=Object.setPrototypeOf||function(c,d){c.__proto__=d;return c};return Xj(a,b)}function Yj(a,b,c){b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c;return a}function Zj(a){Zj="function"===typeof Symbol&&
"symbol"===G(Symbol.iterator)?function(b){return G(b)}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":G(b)};return Zj(a)}function lr(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function Xz(a,b,c){b&&lr(a.prototype,b);c&&lr(a,c);return a}function Yz(a,b){return!b||"object"!==Zj(b)&&"function"!==typeof b?Tb(a):b}function ak(a){ak=Object.setPrototypeOf?
Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)};return ak(a)}function Tb(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Zz(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&bk(a,b)}function bk(a,b){bk=Object.setPrototypeOf||function(c,
d){c.__proto__=d;return c};return bk(a,b)}function Cc(a,b,c){b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c;return a}function mr(a){a.stopPropagation()}function ck(a){ck="function"===typeof Symbol&&"symbol"===G(Symbol.iterator)?function(b){return G(b)}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":G(b)};return ck(a)}function nr(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||
!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function $z(a,b,c){b&&nr(a.prototype,b);c&&nr(a,c);return a}function aA(a,b){if(b&&("object"===ck(b)||"function"===typeof b))return b;if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function dk(a){dk=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)};return dk(a)}function bA(a,b){if("function"!==typeof b&&
null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&ek(a,b)}function ek(a,b){ek=Object.setPrototypeOf||function(c,d){c.__proto__=d;return c};return ek(a,b)}function cA(a){return a}function fk(a){fk="function"===typeof Symbol&&"symbol"===G(Symbol.iterator)?function(b){return G(b)}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?
"symbol":G(b)};return fk(a)}function or(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}));c.push.apply(c,d)}return c}function dA(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?or(c,!0).forEach(function(d){gk(a,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):or(c).forEach(function(d){Object.defineProperty(a,
d,Object.getOwnPropertyDescriptor(c,d))})}return a}function pr(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function eA(a,b,c){b&&pr(a.prototype,b);c&&pr(a,c);return a}function fA(a,b){return!b||"object"!==fk(b)&&"function"!==typeof b?ag(a):b}function hk(a){hk=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)};return hk(a)}function ag(a){if(void 0===
a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function gA(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&ik(a,b)}function ik(a,b){ik=Object.setPrototypeOf||function(c,d){c.__proto__=d;return c};return ik(a,b)}function gk(a,b,c){b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,
writable:!0}):a[b]=c;return a}function jk(a){jk="function"===typeof Symbol&&"symbol"===G(Symbol.iterator)?function(b){return G(b)}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":G(b)};return jk(a)}function qr(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function hA(a,b,c){b&&qr(a.prototype,b);c&&qr(a,c);return a}function iA(a,b){return!b||
"object"!==jk(b)&&"function"!==typeof b?bg(a):b}function kk(a){kk=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)};return kk(a)}function bg(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function jA(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,
configurable:!0}});b&&lk(a,b)}function lk(a,b){lk=Object.setPrototypeOf||function(c,d){c.__proto__=d;return c};return lk(a,b)}function mk(a,b,c){b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c;return a}function nk(a){nk="function"===typeof Symbol&&"symbol"===G(Symbol.iterator)?function(b){return G(b)}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":G(b)};return nk(a)}function rr(a,b){for(var c=0;c<
b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function kA(a,b,c){b&&rr(a.prototype,b);c&&rr(a,c);return a}function lA(a,b){return!b||"object"!==nk(b)&&"function"!==typeof b?sr(a):b}function ok(a){ok=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)};return ok(a)}function sr(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return a}function mA(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&pk(a,b)}function pk(a,b){pk=Object.setPrototypeOf||function(c,d){c.__proto__=d;return c};return pk(a,b)}function nA(a,b,c){b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c;return a}function qk(a){qk="function"===typeof Symbol&&
"symbol"===G(Symbol.iterator)?function(b){return G(b)}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":G(b)};return qk(a)}function oA(a,b){if(b&&("object"===qk(b)||"function"===typeof b))return b;if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function rk(a){rk=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)};return rk(a)}function pA(a,
b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&sk(a,b)}function sk(a,b){sk=Object.setPrototypeOf||function(c,d){c.__proto__=d;return c};return sk(a,b)}function tk(a){tk="function"===typeof Symbol&&"symbol"===G(Symbol.iterator)?function(b){return G(b)}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?
"symbol":G(b)};return tk(a)}function tr(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function qA(a,b,c){b&&tr(a.prototype,b);c&&tr(a,c);return a}function rA(a,b){return!b||"object"!==tk(b)&&"function"!==typeof b?Fe(a):b}function uk(a){uk=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)};return uk(a)}function Fe(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return a}function sA(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&vk(a,b)}function vk(a,b){vk=Object.setPrototypeOf||function(c,d){c.__proto__=d;return c};return vk(a,b)}function cg(a,b,c){b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c;return a}function tA(a){var b=[],c;for(c in a)b.push([c,
a[c]]);return b}function wk(a){wk="function"===typeof Symbol&&"symbol"===G(Symbol.iterator)?function(b){return G(b)}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":G(b)};return wk(a)}function ur(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function uA(a,b,c){b&&ur(a.prototype,b);c&&ur(a,c);return a}function xk(a){xk=Object.setPrototypeOf?
Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)};return xk(a)}function dg(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function vA(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&yk(a,b)}function yk(a,b){yk=Object.setPrototypeOf||function(c,
d){c.__proto__=d;return c};return yk(a,b)}function zk(a){if(!a||""===a.trim())return{values:[]};var b={values:[]},c="";a.split(",").forEach(function(d){c+=d;/^"[^"]*"$/.test(c.trim())?(b.values.push(c.trim()),c=""):c+=","});if(!c)return b}function wA(a){return a.map(function(b){return b.value})}function Ak(a){Ak="function"===typeof Symbol&&"symbol"===G(Symbol.iterator)?function(b){return G(b)}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":
G(b)};return Ak(a)}function vr(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function xA(a,b,c){b&&vr(a.prototype,b);c&&vr(a,c);return a}function yA(a,b){return!b||"object"!==Ak(b)&&"function"!==typeof b?Dc(a):b}function Bk(a){Bk=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)};return Bk(a)}function Dc(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return a}function zA(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&Ck(a,b)}function Ck(a,b){Ck=Object.setPrototypeOf||function(c,d){c.__proto__=d;return c};return Ck(a,b)}function cd(a,b,c){b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c;return a}function Dk(a){Dk="function"===typeof Symbol&&
"symbol"===G(Symbol.iterator)?function(b){return G(b)}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":G(b)};return Dk(a)}function wr(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function AA(a,b,c){b&&wr(a.prototype,b);c&&wr(a,c);return a}function BA(a,b){return!b||"object"!==Dk(b)&&"function"!==typeof b?eg(a):b}function Ek(a){Ek=Object.setPrototypeOf?
Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)};return Ek(a)}function eg(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function CA(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&Fk(a,b)}function Fk(a,b){Fk=Object.setPrototypeOf||function(c,
d){c.__proto__=d;return c};return Fk(a,b)}function Gk(a,b,c){b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c;return a}function Hk(a){Hk="function"===typeof Symbol&&"symbol"===G(Symbol.iterator)?function(b){return G(b)}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":G(b)};return Hk(a)}function xr(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&
(d.writable=!0);Object.defineProperty(a,d.key,d)}}function DA(a,b,c){b&&xr(a.prototype,b);c&&xr(a,c);return a}function EA(a,b){return!b||"object"!==Hk(b)&&"function"!==typeof b?fg(a):b}function Ik(a){Ik=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)};return Ik(a)}function fg(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function FA(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");
a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&Jk(a,b)}function Jk(a,b){Jk=Object.setPrototypeOf||function(c,d){c.__proto__=d;return c};return Jk(a,b)}function Kk(a,b,c){b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c;return a}function yr(a,b,c){a.onGetComponent("cell",function(d){d=d.cellType;if("input-label"===d)return GA;if("output-label"===d)return HA});c.on("addInput",function(){b.trigger("addInput")});
c.on("addOutput",function(){b.trigger("addOutput")})}function zr(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function IA(a,b,c){b&&zr(a.prototype,b);c&&zr(a,c);return a}function Lk(a,b,c){b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c;return a}function gg(a,b){a.stopPropagation();!0!==b&&a.preventDefault()}function Ar(a,b){for(var c=0;c<b.length;c++){var d=
b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function JA(a,b,c){b&&Ar(a.prototype,b);c&&Ar(a,c);return a}function KA(a,b,c){b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c;return a}function Br(a,b,c){if(a=a.dataset.rowId)b=Xb("[data-row-id=".concat(a,"]"),b),O(b,function(d){Jd(d)&&(wa(d).add("dragover"),wa(d).add(c))})}function Cr(a,b,c){if(a=a.dataset.colId)b=Xb("[data-col-id=".concat(a,
"]"),b),O(b,function(d){Jd(d)&&(wa(d).add("dragover"),wa(d).add(c))})}function Mk(a){a=Xb(".dragover",a);O(a,function(b){Jd(b)&&(wa(b).remove("dragover"),wa(b).remove("top"),wa(b).remove("right"),wa(b).remove("bottom"),wa(b).remove("left"))})}function LA(a,b){var c=Xb("[data-row-id=".concat(a.id,"]"),b);O(c,function(d){Jd(d)&&wa(d).add("dragged")})}function MA(a,b){var c=Xb("[data-col-id=".concat(a.id,"]"),b);O(c,function(d){Jd(d)&&wa(d).add("dragged")})}function NA(a){a=Xb(".dragged",a);O(a,function(b){Jd(b)&&
wa(b).remove("dragged")})}function Dr(a,b){var c=b.getBoundingClientRect();return a.clientX<c.left+c.width/2?"left":"right"}function Er(a,b){var c=b.getBoundingClientRect();return a.clientY<c.top+c.height/2?"top":"bottom"}function OA(a,b){var c=b.indexOf(a);if(vb(a)){var d=b.filter(function(e){return vb(e)})[0];d=b.indexOf(d);return b[Math.max(d,c-1)]}return b[Math.max(0,c-1)]}function PA(a,b){var c=b.indexOf(a);if(Da(a)){var d=b.filter(function(e){return Da(e)});d=b.indexOf(d[d.length-1]);return b[Math.min(d,
c+1)]}return b[Math.min(b.length-1,c+1)]}function Jd(a){return a&&(1===a.nodeType||11==a.nodeType)}function Nk(a){Nk="function"===typeof Symbol&&"symbol"===G(Symbol.iterator)?function(b){return G(b)}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":G(b)};return Nk(a)}function Fr(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function Gr(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||
!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function Hr(a,b,c){b&&Gr(a.prototype,b);c&&Gr(a,c);return a}function Ir(a,b){return!b||"object"!==Nk(b)&&"function"!==typeof b?Ok(a):b}function hg(a){hg=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)};return hg(a)}function Ok(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Jr(a,b){if("function"!==
typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&Pk(a,b)}function Pk(a,b){Pk=Object.setPrototypeOf||function(c,d){c.__proto__=d;return c};return Pk(a,b)}function Kr(a,b,c){b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c;return a}function Lr(a,b,c){b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,
writable:!0}):a[b]=c;return a}function Mr(a,b){return{x:b.left+a.parentNode.scrollLeft-26,y:b.top+a.parentNode.scrollTop,width:b.width+52,height:b.height}}function Nr(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function QA(a,b,c){b&&Nr(a.prototype,b);c&&Nr(a,c);return a}function Or(a,b){var c=a.$model.ids.assigned(b);!b||c&&c!==a?c="Element must have an unique id.":(c=b.replace(RA,"$1"),
c=SA.test(c)?"Id must not contain spaces.":TA.test(c)?void 0:UA.test(c)?"Id must not contain prefix.":"Id must be a valid QName.");return c}function Qk(a){Qk="function"===typeof Symbol&&"symbol"===G(Symbol.iterator)?function(b){return G(b)}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":G(b)};return Qk(a)}function Rk(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function Pr(a,b){for(var c=0;c<b.length;c++){var d=
b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function Sk(a,b,c){b&&Pr(a.prototype,b);c&&Pr(a,c);return a}function Tk(a,b){return!b||"object"!==Qk(b)&&"function"!==typeof b?Ec(a):b}function Ge(a){Ge=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)};return Ge(a)}function Ec(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}
function Uk(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&Vk(a,b)}function Vk(a,b){Vk=Object.setPrototypeOf||function(c,d){c.__proto__=d;return c};return Vk(a,b)}function ig(a,b,c){b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c;return a}function Wk(a){Wk="function"===typeof Symbol&&"symbol"===
G(Symbol.iterator)?function(b){return G(b)}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":G(b)};return Wk(a)}function Qr(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function VA(a,b,c){b&&Qr(a.prototype,b);c&&Qr(a,c);return a}function WA(a,b){return!b||"object"!==Wk(b)&&"function"!==typeof b?jg(a):b}function Xk(a){Xk=Object.setPrototypeOf?
Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)};return Xk(a)}function jg(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function XA(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&Yk(a,b)}function Yk(a,b){Yk=Object.setPrototypeOf||function(c,
d){c.__proto__=d;return c};return Yk(a,b)}function Rr(a,b,c){b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c;return a}function YA(a){switch(a){case "SUM":return"+";case "MIN":return"<";case "MAX":return">";case "COUNT":return"#";default:return""}}function Zk(a){Zk="function"===typeof Symbol&&"symbol"===G(Symbol.iterator)?function(b){return G(b)}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":G(b)};
return Zk(a)}function Sr(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function ZA(a,b,c){b&&Sr(a.prototype,b);c&&Sr(a,c);return a}function $k(a){$k=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)};return $k(a)}function kg(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function $A(a,
b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&al(a,b)}function al(a,b){al=Object.setPrototypeOf||function(c,d){c.__proto__=d;return c};return al(a,b)}function Tr(a,b,c,d){a.onGetComponent("cell",function(e){if("before-label-cells"===e.cellType)return Ur});a.onGetComponent("context-menu",function(){var e=0<arguments.length&&void 0!==arguments[0]?
arguments[0]:{};if(e.contextMenuType&&"hit-policy-edit"===e.contextMenuType)return aB});c.on("hitPolicy.edit",function(e){var f=Za(e.event.target,"th",!0).getBoundingClientRect();e=f.left;var g=f.top,h=f.width;f=f.height;var k=d.getContainer();b.open({x:e+k.parentNode.scrollLeft,y:g+k.parentNode.scrollTop,width:h,height:f},{contextMenuType:"hit-policy-edit",offset:{x:4,y:4}})})}function Vr(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=
!0);Object.defineProperty(a,d.key,d)}}function bB(a,b,c){b&&Vr(a.prototype,b);c&&Vr(a,c);return a}function lg(a,b,c){b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c;return a}function bl(a){bl="function"===typeof Symbol&&"symbol"===G(Symbol.iterator)?function(b){return G(b)}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":G(b)};return bl(a)}function Wr(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=
d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function cB(a,b,c){b&&Wr(a.prototype,b);c&&Wr(a,c);return a}function dB(a,b){if(b&&("object"===bl(b)||"function"===typeof b))return b;if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function cl(a){cl=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)};return cl(a)}function eB(a,b){if("function"!==
typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&dl(a,b)}function dl(a,b){dl=Object.setPrototypeOf||function(c,d){c.__proto__=d;return c};return dl(a,b)}function Xr(a){return function(b){var c=b.context;P(c.row||c.col,"dmn:DMNElement")&&a(b)}}function Yr(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&
(d.writable=!0);Object.defineProperty(a,d.key,d)}}function fB(a,b,c){b&&Yr(a.prototype,b);c&&Yr(a,c);return a}function el(a){el="function"===typeof Symbol&&"symbol"===G(Symbol.iterator)?function(b){return G(b)}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":G(b)};return el(a)}function Zr(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(e){return Object.getOwnPropertyDescriptor(a,
e).enumerable}));c.push.apply(c,d)}return c}function gB(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?Zr(c,!0).forEach(function(d){var e=c[d];d in a?Object.defineProperty(a,d,{value:e,enumerable:!0,configurable:!0,writable:!0}):a[d]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):Zr(c).forEach(function(d){Object.defineProperty(a,d,Object.getOwnPropertyDescriptor(c,d))})}return a}function $r(a,b){for(var c=0;c<
b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function hB(a,b,c){b&&$r(a.prototype,b);c&&$r(a,c);return a}function fl(a,b,c){fl="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(d,e,f){for(;!Object.prototype.hasOwnProperty.call(d,e)&&(d=He(d),null!==d););if(d)return e=Object.getOwnPropertyDescriptor(d,e),e.get?e.get.call(f):e.value};return fl(a,b,c||a)}function He(a){He=Object.setPrototypeOf?Object.getPrototypeOf:
function(b){return b.__proto__||Object.getPrototypeOf(b)};return He(a)}function iB(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&gl(a,b)}function gl(a,b){gl=Object.setPrototypeOf||function(c,d){c.__proto__=d;return c};return gl(a,b)}function as(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;
"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function jB(a,b,c){b&&as(a.prototype,b);c&&as(a,c);return a}function bs(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function kB(a,b,c){b&&bs(a.prototype,b);c&&bs(a,c);return a}function cs(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,
d.key,d)}}function lB(a,b,c){b&&cs(a.prototype,b);c&&cs(a,c);return a}function ds(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function mB(a,b,c){b&&ds(a.prototype,b);c&&ds(a,c);return a}function es(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function nB(a,b,c){b&&es(a.prototype,
b);c&&es(a,c);return a}function fs(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function oB(a,b,c){b&&fs(a.prototype,b);c&&fs(a,c);return a}function gs(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function pB(a,b,c){b&&gs(a.prototype,b);c&&gs(a,c);return a}function hs(a,b){var c=Object.keys(a);
Object.getOwnPropertySymbols&&c.push.apply(c,Object.getOwnPropertySymbols(a));b&&(c=c.filter(function(d){return Object.getOwnPropertyDescriptor(a,d).enumerable}));return c}function qB(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?hs(c,!0).forEach(function(d){var e=c[d];d in a?Object.defineProperty(a,d,{value:e,enumerable:!0,configurable:!0,writable:!0}):a[d]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):hs(c).forEach(function(d){Object.defineProperty(a,
d,Object.getOwnPropertyDescriptor(c,d))})}return a}function is(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function rB(a,b,c){b&&is(a.prototype,b);c&&is(a,c);return a}function sB(a,b){O(a,function(c,d){b.registerHandler(d,c)})}function js(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,
d)}}function tB(a,b,c){b&&js(a.prototype,b);c&&js(a,c);return a}function ks(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}));c.push.apply(c,d)}return c}function ls(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?ks(c,!0).forEach(function(d){hl(a,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):
ks(c).forEach(function(d){Object.defineProperty(a,d,Object.getOwnPropertyDescriptor(c,d))})}return a}function hl(a,b,c){b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c;return a}function mg(a){if(Array.isArray(a)){var b=0;for(var c=Array(a.length);b<a.length;b++)c[b]=a[b];b=c}else b=void 0;b||(b=Symbol.iterator in Object(a)||"[object Arguments]"===Object.prototype.toString.call(a)?Array.from(a):void 0);if(!(a=b))throw new TypeError("Invalid attempt to spread non-iterable instance");
return a}function ms(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function uB(a,b,c){b&&ms(a.prototype,b);c&&ms(a,c);return a}function ns(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function vB(a,b,c){b&&ns(a.prototype,b);c&&ns(a,c);return a}function il(a){il="function"===typeof Symbol&&
"symbol"===G(Symbol.iterator)?function(b){return G(b)}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":G(b)};return il(a)}function os(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function wB(a,b,c){b&&os(a.prototype,b);c&&os(a,c);return a}function jl(a,b,c){jl="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(d,e,f){for(;!Object.prototype.hasOwnProperty.call(d,
e)&&(d=Ie(d),null!==d););if(d)return e=Object.getOwnPropertyDescriptor(d,e),e.get?e.get.call(f):e.value};return jl(a,b,c||a)}function Ie(a){Ie=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)};return Ie(a)}function xB(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&kl(a,b)}function kl(a,
b){kl=Object.setPrototypeOf||function(c,d){c.__proto__=d;return c};return kl(a,b)}function ll(a){ll="function"===typeof Symbol&&"symbol"===G(Symbol.iterator)?function(b){return G(b)}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":G(b)};return ll(a)}function ps(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function yB(a,b,c){b&&ps(a.prototype,
b);c&&ps(a,c);return a}function zB(a,b){if(b&&("object"===ll(b)||"function"===typeof b))return b;if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function ml(a){ml=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)};return ml(a)}function AB(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,
{constructor:{value:a,writable:!0,configurable:!0}});b&&nl(a,b)}function nl(a,b){nl=Object.setPrototypeOf||function(c,d){c.__proto__=d;return c};return nl(a,b)}function ol(a){ol="function"===typeof Symbol&&"symbol"===G(Symbol.iterator)?function(b){return G(b)}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":G(b)};return ol(a)}function qs(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&
(d.writable=!0);Object.defineProperty(a,d.key,d)}}function BB(a,b,c){b&&qs(a.prototype,b);c&&qs(a,c);return a}function CB(a,b){if(b&&("object"===ol(b)||"function"===typeof b))return b;if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function pl(a){pl=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)};return pl(a)}function DB(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");
a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&ql(a,b)}function ql(a,b){ql=Object.setPrototypeOf||function(c,d){c.__proto__=d;return c};return ql(a,b)}function rl(a){rl="function"===typeof Symbol&&"symbol"===G(Symbol.iterator)?function(b){return G(b)}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":G(b)};return rl(a)}function rs(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");
}function ss(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function ts(a,b,c){b&&ss(a.prototype,b);c&&ss(a,c);return a}function us(a,b){return!b||"object"!==rl(b)&&"function"!==typeof b?Je(a):b}function ng(a){ng=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)};return ng(a)}function Je(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return a}function vs(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&sl(a,b)}function sl(a,b){sl=Object.setPrototypeOf||function(c,d){c.__proto__=d;return c};return sl(a,b)}function tl(a){tl="function"===typeof Symbol&&"symbol"===G(Symbol.iterator)?function(b){return G(b)}:function(b){return b&&"function"===typeof Symbol&&b.constructor===
Symbol&&b!==Symbol.prototype?"symbol":G(b)};return tl(a)}function ws(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function EB(a,b,c){b&&ws(a.prototype,b);c&&ws(a,c);return a}function FB(a,b){return!b||"object"!==tl(b)&&"function"!==typeof b?ul(a):b}function vl(a){vl=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)};return vl(a)}function ul(a){if(void 0===
a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function GB(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&wl(a,b)}function wl(a,b){wl=Object.setPrototypeOf||function(c,d){c.__proto__=d;return c};return wl(a,b)}function xs(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||
!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function HB(a,b,c){b&&xs(a.prototype,b);c&&xs(a,c);return a}function xl(a){xl="function"===typeof Symbol&&"symbol"===G(Symbol.iterator)?function(b){return G(b)}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":G(b)};return xl(a)}function ys(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);
Object.defineProperty(a,d.key,d)}}function IB(a,b,c){b&&ys(a.prototype,b);c&&ys(a,c);return a}function yl(a){yl=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)};return yl(a)}function zl(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function JB(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&
b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&Al(a,b)}function Al(a,b){Al=Object.setPrototypeOf||function(c,d){c.__proto__=d;return c};return Al(a,b)}function zs(a){return Da(a.col)?a.col&&a.col.businessObject.inputExpression.typeRef:a.col&&a.col.businessObject.typeRef}function Bl(a){if(!KB.test(a.trim()))return"Date must match pattern yyyy-MM-ddTHH:mm:ss."}function Fc(a,b){if("exact"===a)return'date and time("'.concat(b[0],'")');if("before"===a)return'< date and time("'.concat(b[0],
'")');if("after"===a)return'> date and time("'.concat(b[0],'")');if("between"===a)return'[date and time("'.concat(b[0],'")..date and time("').concat(b[1],'")]')}function Kd(){var a=new Date;a.setUTCHours(0,0,0,0);return a.toISOString().slice(0,-5)}function Ke(a){if(!a||""===a.trim())return{type:"exact",date:""};var b=a.match(LB);if(b)return{type:"between",dates:[b[1],b[2]]};if(b=a.match(MB))return{type:"<"===b[1]?"before":"after",date:b[2]};if(b=a.match(NB))return{type:"exact",date:b[1]}}function Cl(a){Cl=
"function"===typeof Symbol&&"symbol"===G(Symbol.iterator)?function(b){return G(b)}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":G(b)};return Cl(a)}function As(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function OB(a,b,c){b&&As(a.prototype,b);c&&As(a,c);return a}function Dl(a){Dl=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||
Object.getPrototypeOf(b)};return Dl(a)}function Gc(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function PB(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&El(a,b)}function El(a,b){El=Object.setPrototypeOf||function(c,d){c.__proto__=d;return c};return El(a,b)}function Fl(a){Fl=
"function"===typeof Symbol&&"symbol"===G(Symbol.iterator)?function(b){return G(b)}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":G(b)};return Fl(a)}function Bs(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function QB(a,b,c){b&&Bs(a.prototype,b);c&&Bs(a,c);return a}function Gl(a){Gl=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||
Object.getPrototypeOf(b)};return Gl(a)}function Le(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function RB(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&Hl(a,b)}function Hl(a,b){Hl=Object.setPrototypeOf||function(c,d){c.__proto__=d;return c};return Hl(a,b)}function Cs(a){return Da(a.col)?
a.col&&a.col.businessObject.inputExpression.typeRef:a.col&&a.col.businessObject.typeRef}function SB(a){return ic(Il).filter(function(b){return a===Il[b]})[0]}function Ds(a){if(!a||""===a.trim())return{type:"comparison"};var b=a.match(TB);a=a.match(UB);if(b){if(b[0]&&b[1]&&!b[2]&&!b[3])return{type:"comparison",value:parseFloat(b[1]),operator:"equals"};if(b[0]&&!b[1]&&b[2]&&b[3])return{type:"comparison",value:parseFloat(b[3]),operator:SB(b[2])}}else if(a)return{type:"range",values:[a[2],a[3]].map(function(c){return parseFloat(c)}),
start:"]"===a[1]?"exclude":"include",end:"["===a[4]?"exclude":"include"}}function Jl(a,b){return"equals"===a?"".concat(b):"".concat(Il[a]," ").concat(b)}function Me(a,b,c,d){d="exclude"===d?"[":"]";return"".concat("exclude"===c?"]":"[").concat(a,"..").concat(b).concat(d)}function Kl(a){Kl="function"===typeof Symbol&&"symbol"===G(Symbol.iterator)?function(b){return G(b)}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":G(b)};return Kl(a)}function Es(a,
b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function VB(a,b,c){b&&Es(a.prototype,b);c&&Es(a,c);return a}function Ll(a){Ll=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)};return Ll(a)}function Ub(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function WB(a,b){if("function"!==
typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&Ml(a,b)}function Ml(a,b){Ml=Object.setPrototypeOf||function(c,d){c.__proto__=d;return c};return Ml(a,b)}function Nl(a){Nl="function"===typeof Symbol&&"symbol"===G(Symbol.iterator)?function(b){return G(b)}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":G(b)};
return Nl(a)}function Fs(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function XB(a,b,c){b&&Fs(a.prototype,b);c&&Fs(a,c);return a}function Ol(a){Ol=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)};return Ol(a)}function og(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function YB(a,
b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&Pl(a,b)}function Pl(a,b){Pl=Object.setPrototypeOf||function(c,d){c.__proto__=d;return c};return Pl(a,b)}function Gs(a){return Da(a.col)?a.col&&a.col.businessObject.inputExpression.typeRef:a.col&&a.col.businessObject.typeRef}function pg(a){if(!a||""===a.trim())return{type:"disjunction",values:[]};
var b=a.split(","),c={type:"disjunction",values:[]},d="";b.forEach(function(e){d+=e;/^"[^"]*"$/.test(d.trim())?(c.values.push(d.trim()),d=""):d+=","});if(!d)return c;c.type="negation";c.values=[];d="";if(a=a.match(/^\s*not\((.*)\)\s*$/))if(b=a[1].split(","),b.forEach(function(e){d+=e;/^"[^"]*"$/.test(d.trim())?(c.values.push(d.trim()),d=""):d+=","}),!d)return c}function ZB(a){return(a=Da(a)?a.inputValues:a.outputValues)&&""!==a.text?a.text.split(",").map(function(b){return b.trim()}):[]}function Ql(a){Ql=
"function"===typeof Symbol&&"symbol"===G(Symbol.iterator)?function(b){return G(b)}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":G(b)};return Ql(a)}function Hs(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function $B(a,b,c){b&&Hs(a.prototype,b);c&&Hs(a,c);return a}function aC(a,b){return!b||"object"!==Ql(b)&&"function"!==typeof b?ec(a):
b}function Rl(a){Rl=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)};return Rl(a)}function ec(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function bC(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&Sl(a,b)}function Sl(a,
b){Sl=Object.setPrototypeOf||function(c,d){c.__proto__=d;return c};return Sl(a,b)}function Tl(a){return a.filter(function(b){return b.isChecked}).map(function(b){return b.value})}function Is(a){return Da(a.col)?a.col&&a.col.businessObject.inputExpression.typeRef:a.col&&a.col.businessObject.typeRef}function Ul(a){Ul="function"===typeof Symbol&&"symbol"===G(Symbol.iterator)?function(b){return G(b)}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":
G(b)};return Ul(a)}function Js(a){if(Array.isArray(a)){var b=0;for(var c=Array(a.length);b<a.length;b++)c[b]=a[b];b=c}else b=void 0;b||(b=Symbol.iterator in Object(a)||"[object Arguments]"===Object.prototype.toString.call(a)?Array.from(a):void 0);if(!(a=b))throw new TypeError("Invalid attempt to spread non-iterable instance");return a}function Ks(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}
function cC(a,b,c){b&&Ks(a.prototype,b);c&&Ks(a,c);return a}function Vl(a){Vl=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)};return Vl(a)}function dC(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&Wl(a,b)}function Wl(a,b){Wl=Object.setPrototypeOf||function(c,d){c.__proto__=d;return c};
return Wl(a,b)}function Ls(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function eC(a,b,c){b&&Ls(a.prototype,b);c&&Ls(a,c);return a}function Ms(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function fC(a,b,c){b&&Ms(a.prototype,b);c&&Ms(a,c);return a}function Xl(a){Xl="function"===typeof Symbol&&
"symbol"===G(Symbol.iterator)?function(b){return G(b)}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":G(b)};return Xl(a)}function Ns(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function gC(a,b,c){b&&Ns(a.prototype,b);c&&Ns(a,c);return a}function Yl(a){Yl=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)};
return Yl(a)}function hC(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&Zl(a,b)}function Zl(a,b){Zl=Object.setPrototypeOf||function(c,d){c.__proto__=d;return c};return Zl(a,b)}function Os(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,
d)}}function iC(a,b,c){b&&Os(a.prototype,b);c&&Os(a,c);return a}function Ps(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function jC(a,b,c){b&&Ps(a.prototype,b);c&&Ps(a,c);return a}function kC(a){function b(f){0<=c.indexOf(f)||((f.__depends__||[]).forEach(b),0<=c.indexOf(f)||(c.push(f),(f.__init__||[]).forEach(function(g){d.push(g)})))}var c=[],d=[];a.forEach(b);var e=new Zd(c);d.forEach(function(f){try{e["string"===
typeof f?"get":"invoke"](f)}catch(g){throw console.error("Failed to instantiate component"),console.error(g.stack),g;}});return e}function Qs(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function lC(a,b,c){b&&Qs(a.prototype,b);c&&Qs(a,c);return a}function $l(a){$l="function"===typeof Symbol&&"symbol"===G(Symbol.iterator)?function(b){return G(b)}:function(b){return b&&"function"===typeof Symbol&&
b.constructor===Symbol&&b!==Symbol.prototype?"symbol":G(b)};return $l(a)}function Rs(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function mC(a,b,c){b&&Rs(a.prototype,b);c&&Rs(a,c);return a}function am(a){am=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)};return am(a)}function nC(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");
a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&bm(a,b)}function bm(a,b){bm=Object.setPrototypeOf||function(c,d){c.__proto__=d;return c};return bm(a,b)}function cm(a){cm="function"===typeof Symbol&&"symbol"===G(Symbol.iterator)?function(b){return G(b)}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":G(b)};return cm(a)}function Ss(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||
!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function oC(a,b,c){b&&Ss(a.prototype,b);c&&Ss(a,c);return a}function dm(a){dm=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)};return dm(a)}function pC(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&em(a,
b)}function em(a,b){em=Object.setPrototypeOf||function(c,d){c.__proto__=d;return c};return em(a,b)}function fm(a){fm="function"===typeof Symbol&&"symbol"===G(Symbol.iterator)?function(b){return G(b)}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":G(b)};return fm(a)}function Ts(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function qC(a,
b,c){b&&Ts(a.prototype,b);c&&Ts(a,c);return a}function rC(a,b){return!b||"object"!==fm(b)&&"function"!==typeof b?Us(a):b}function gm(a){gm=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)};return gm(a)}function Us(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function sC(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");
a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&hm(a,b)}function hm(a,b){hm=Object.setPrototypeOf||function(c,d){c.__proto__=d;return c};return hm(a,b)}function tC(a,b,c){b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c;return a}function im(a){im="function"===typeof Symbol&&"symbol"===G(Symbol.iterator)?function(b){return G(b)}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==
Symbol.prototype?"symbol":G(b)};return im(a)}function Vs(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function uC(a,b,c){b&&Vs(a.prototype,b);c&&Vs(a,c);return a}function jm(a){jm=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)};return jm(a)}function km(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return a}function vC(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&lm(a,b)}function lm(a,b){lm=Object.setPrototypeOf||function(c,d){c.__proto__=d;return c};return lm(a,b)}function mm(a){mm="function"===typeof Symbol&&"symbol"===G(Symbol.iterator)?function(b){return G(b)}:function(b){return b&&"function"===typeof Symbol&&b.constructor===
Symbol&&b!==Symbol.prototype?"symbol":G(b)};return mm(a)}function Ws(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function wC(a,b,c){b&&Ws(a.prototype,b);c&&Ws(a,c);return a}function nm(a){nm=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)};return nm(a)}function xC(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");
a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&om(a,b)}function om(a,b){om=Object.setPrototypeOf||function(c,d){c.__proto__=d;return c};return om(a,b)}function pm(a){pm="function"===typeof Symbol&&"symbol"===G(Symbol.iterator)?function(b){return G(b)}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":G(b)};return pm(a)}function Xs(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||
!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function yC(a,b,c){b&&Xs(a.prototype,b);c&&Xs(a,c);return a}function zC(a,b){return!b||"object"!==pm(b)&&"function"!==typeof b?Ys(a):b}function qm(a){qm=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)};return qm(a)}function Ys(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function AC(a,b){if("function"!==
typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&rm(a,b)}function rm(a,b){rm=Object.setPrototypeOf||function(c,d){c.__proto__=d;return c};return rm(a,b)}function BC(a,b,c){b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c;return a}function Zs(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;
d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function CC(a,b,c){b&&Zs(a.prototype,b);c&&Zs(a,c);return a}function sm(a){sm="function"===typeof Symbol&&"symbol"===G(Symbol.iterator)?function(b){return G(b)}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":G(b)};return sm(a)}function $s(a){if(Array.isArray(a)){var b=0;for(var c=Array(a.length);b<a.length;b++)c[b]=a[b];b=c}else b=void 0;b||(b=Symbol.iterator in
Object(a)||"[object Arguments]"===Object.prototype.toString.call(a)?Array.from(a):void 0);if(!(a=b))throw new TypeError("Invalid attempt to spread non-iterable instance");return a}function at(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function DC(a,b,c){b&&at(a.prototype,b);c&&at(a,c);return a}function tm(a,b,c){tm="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(d,e,f){for(;!Object.prototype.hasOwnProperty.call(d,
e)&&(d=Ne(d),null!==d););if(d)return e=Object.getOwnPropertyDescriptor(d,e),e.get?e.get.call(f):e.value};return tm(a,b,c||a)}function Ne(a){Ne=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)};return Ne(a)}function EC(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&um(a,b)}function um(a,
b){um=Object.setPrototypeOf||function(c,d){c.__proto__=d;return c};return um(a,b)}function vm(a){vm="function"===typeof Symbol&&"symbol"===G(Symbol.iterator)?function(b){return G(b)}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":G(b)};return vm(a)}function wm(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function bt(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=
!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function xm(a,b,c){b&&bt(a.prototype,b);c&&bt(a,c);return a}function ym(a,b){return!b||"object"!==vm(b)&&"function"!==typeof b?Oe(a):b}function Pe(a){Pe=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)};return Pe(a)}function Oe(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function zm(a,b){if("function"!==typeof b&&
null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&Am(a,b)}function Am(a,b){Am=Object.setPrototypeOf||function(c,d){c.__proto__=d;return c};return Am(a,b)}function qg(a,b,c){b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c;return a}function ct(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=
!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function FC(a,b,c){b&&ct(a.prototype,b);c&&ct(a,c);return a}function dt(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function GC(a,b,c){b&&dt(a.prototype,b);c&&dt(a,c);return a}function rg(a,b,c){b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c;return a}function Bm(a){Bm="function"===
typeof Symbol&&"symbol"===G(Symbol.iterator)?function(b){return G(b)}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":G(b)};return Bm(a)}function et(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function HC(a,b,c){b&&et(a.prototype,b);c&&et(a,c);return a}function Cm(a){Cm=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||
Object.getPrototypeOf(b)};return Cm(a)}function sg(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function IC(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&Dm(a,b)}function Dm(a,b){Dm=Object.setPrototypeOf||function(c,d){c.__proto__=d;return c};return Dm(a,b)}function ft(a,
b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function JC(a,b,c){b&&ft(a.prototype,b);c&&ft(a,c);return a}function KC(a,b){O(a,function(c,d){b.registerHandler(d,c)})}function Em(a){Em="function"===typeof Symbol&&"symbol"===G(Symbol.iterator)?function(b){return G(b)}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":G(b)};return Em(a)}function gt(a,
b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function ht(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function it(a,b,c){b&&ht(a.prototype,b);c&&ht(a,c);return a}function jt(a,b){return!b||"object"!==Em(b)&&"function"!==typeof b?Fm(a):b}function tg(a){tg=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)};
return tg(a)}function Fm(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function kt(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&Gm(a,b)}function Gm(a,b){Gm=Object.setPrototypeOf||function(c,d){c.__proto__=d;return c};return Gm(a,b)}function Hm(a){Hm="function"===typeof Symbol&&
"symbol"===G(Symbol.iterator)?function(b){return G(b)}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":G(b)};return Hm(a)}function lt(a){if(Array.isArray(a)){var b=0;for(var c=Array(a.length);b<a.length;b++)c[b]=a[b];b=c}else b=void 0;b||(b=Symbol.iterator in Object(a)||"[object Arguments]"===Object.prototype.toString.call(a)?Array.from(a):void 0);if(!(a=b))throw new TypeError("Invalid attempt to spread non-iterable instance");return a}function mt(a,
b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function LC(a,b,c){b&&mt(a.prototype,b);c&&mt(a,c);return a}function Im(a){Im=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)};return Im(a)}function MC(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&
b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&Jm(a,b)}function Jm(a,b){Jm=Object.setPrototypeOf||function(c,d){c.__proto__=d;return c};return Jm(a,b)}var Qd=Object.prototype.toString,Iv=Object.prototype.hasOwnProperty,NC=Array.prototype.slice;Ta.prototype.on=function(a,b,c,d){a=ja(a)?a:[a];Na(b)&&(d=c,c=b,b=1E3);if(!ua(b))throw Error("priority must be a number");var e=c;d&&(e=c.bind(d),e.__fn=c.__fn||c);var f=this;a.forEach(function(g){f._addListener(g,{priority:b,callback:e,
next:null})})};Ta.prototype.once=function(a,b,c,d){function e(){var g=c.apply(d,arguments);f.off(a,e);return g}var f=this;Na(b)&&(d=c,c=b,b=1E3);if(!ua(b))throw Error("priority must be a number");e.__fn=c;this.on(a,b,e)};Ta.prototype.off=function(a,b){a=ja(a)?a:[a];var c=this;a.forEach(function(d){c._removeListener(d,b)})};Ta.prototype.createEvent=function(a){var b=new Vd;b.init(a);return b};Ta.prototype.fire=function(a,b){var c;var d=NC.call(arguments);"object"===G(a)&&(b=a,a=b.type);if(!a)throw Error("no event type specified");
if(c=this._listeners[a]){var e=b instanceof Vd?b:this.createEvent(b);d[0]=e;var f=e.type;a!==f&&(e.type=a);try{var g=this._invokeListeners(e,d,c)}finally{a!==f&&(e.type=f)}void 0===g&&e.defaultPrevented&&(g=!1);return g}};Ta.prototype.handleError=function(a){return!1===this.fire("error",{error:a})};Ta.prototype._destroy=function(){this._listeners={}};Ta.prototype._invokeListeners=function(a,b,c){for(var d;c&&!a.cancelBubble;)d=this._invokeListener(a,b,c),c=c.next;return d};Ta.prototype._invokeListener=
function(a,b,c){try{var d=c.callback.apply(null,b);void 0!==d&&(a.returnValue=d,a.stopPropagation());!1===d&&a.preventDefault()}catch(e){if(!this.handleError(e))throw console.error("unhandled error in event listener"),console.error(e.stack),e;}return d};Ta.prototype._addListener=function(a,b){var c=this._getListeners(a);if(c){for(;c;){if(c.priority<b.priority){b.next=c;d?d.next=b:this._setListeners(a,b);return}var d=c;c=c.next}d.next=b}else this._setListeners(a,b)};Ta.prototype._getListeners=function(a){return this._listeners[a]};
Ta.prototype._setListeners=function(a,b){this._listeners[a]=b};Ta.prototype._removeListener=function(a,b){var c=this._getListeners(a);if(b)for(;c;){var d=c.next;var e=c.callback;if(e===b||e.__fn===b)f?f.next=d:this._setListeners(a,d);var f=c;c=d}else this._setListeners(a,null)};Vd.prototype.stopPropagation=function(){this.cancelBubble=!0};Vd.prototype.preventDefault=function(){this.defaultPrevented=!0};Vd.prototype.init=function(a){R(this,a||{})};Hg.prototype.get=function(a){return this.$model.properties.get(this,
a)};Hg.prototype.set=function(a,b){this.$model.properties.set(this,a,b)};Xm.prototype.createType=function(a){function b(g){d.define(this,"$type",{value:f,enumerable:!0});d.define(this,"$attrs",{value:{}});d.define(this,"$parent",{writable:!0});O(g,Ud(function(h,k){this.set(k,h)},this))}var c=this.model,d=this.properties,e=Object.create(Hg.prototype);O(a.properties,function(g){g.isMany||void 0===g["default"]||(e[g.name]=g["default"])});d.defineModel(e,c);d.defineDescriptor(e,a);var f=a.ns.name;b.prototype=
e;b.hasType=e.$instanceOf=this.model.hasType;d.defineModel(b,c);d.defineDescriptor(b,a);return b};var Km={String:!0,Boolean:!0,Integer:!0,Real:!0,Element:!0},Jg={String:function(a){return a},Boolean:function(a){return"true"===a},Integer:function(a){return parseInt(a,10)},Real:function(a){return parseFloat(a,10)}};rb.prototype.build=function(){return Jc(this,"ns name allTypes allTypesByName properties propertiesByName bodyProperty idProperty".split(" "))};rb.prototype.addProperty=function(a,b,c){"boolean"===
typeof b&&(c=b,b=void 0);this.addNamedProperty(a,!1!==c);c=this.properties;void 0!==b?c.splice(b,0,a):c.push(a)};rb.prototype.replaceProperty=function(a,b,c){var d=a.ns,e=this.properties,f=this.propertiesByName,g=a.name!==b.name;if(a.isId){if(!b.isId)throw Error("property <"+b.ns.name+"> must be id property to refine <"+a.ns.name+">");this.setIdProperty(b,!1)}if(a.isBody){if(!b.isBody)throw Error("property <"+b.ns.name+"> must be body property to refine <"+a.ns.name+">");this.setBodyProperty(b,!1)}a=
e.indexOf(a);if(-1===a)throw Error("property <"+d.name+"> not found in property list");e.splice(a,1);this.addProperty(b,c?void 0:a,g);f[d.name]=f[d.localName]=b};rb.prototype.redefineProperty=function(a,b,c){var d=a.ns.prefix;b=b.split("#");d=bb(b[0],d);d=bb(b[1],d.prefix).name;if(b=this.propertiesByName[d])this.replaceProperty(b,a,c);else throw Error("refined property <"+d+"> not found");delete a.redefines};rb.prototype.addNamedProperty=function(a,b){var c=a.ns,d=this.propertiesByName;b&&(this.assertNotDefined(a,
c.name),this.assertNotDefined(a,c.localName));d[c.name]=d[c.localName]=a};rb.prototype.removeNamedProperty=function(a){a=a.ns;var b=this.propertiesByName;delete b[a.name];delete b[a.localName]};rb.prototype.setBodyProperty=function(a,b){if(b&&this.bodyProperty)throw Error("body property defined multiple times (<"+this.bodyProperty.ns.name+">, <"+a.ns.name+">)");this.bodyProperty=a};rb.prototype.setIdProperty=function(a,b){if(b&&this.idProperty)throw Error("id property defined multiple times (<"+this.idProperty.ns.name+
">, <"+a.ns.name+">)");this.idProperty=a};rb.prototype.assertNotDefined=function(a,b){var c=a.name,d=this.propertiesByName[c];if(d)throw Error("property <"+c+"> already defined; override of <"+d.definedBy.ns.name+"#"+d.ns.name+"> by <"+a.definedBy.ns.name+"#"+a.ns.name+"> not allowed without redefines");};rb.prototype.hasProperty=function(a){return this.propertiesByName[a]};rb.prototype.addTrait=function(a,b){var c=this.allTypesByName,d=this.allTypes,e=a.name;e in c||(O(a.properties,Ud(function(f){f=
R({},f,{name:f.ns.localName,inherited:b});Object.defineProperty(f,"definedBy",{value:a});var g=f.replaces,h=f.redefines;g||h?this.redefineProperty(f,g||h,g):(f.isBody&&this.setBodyProperty(f),f.isId&&this.setIdProperty(f),this.addProperty(f))},this)),d.push(a),c[e]=a)};jc.prototype.getPackage=function(a){return this.packageMap[a]};jc.prototype.getPackages=function(){return this.packages};jc.prototype.registerPackage=function(a){a=R({},a);var b=this.packageMap;Ym(b,a,"prefix");Ym(b,a,"uri");O(a.types,
Ud(function(c){this.registerType(c,a)},this));b[a.uri]=b[a.prefix]=a;this.packages.push(a)};jc.prototype.registerType=function(a,b){a=R({},a,{superClass:(a.superClass||[]).slice(),"extends":(a["extends"]||[]).slice(),properties:(a.properties||[]).slice(),meta:R(a.meta||{})});var c=bb(a.name,b.prefix),d=c.name,e={};O(a.properties,Ud(function(f){var g=bb(f.name,c.prefix),h=g.name;Km[f.type]||(f.type=bb(f.type,g.prefix).name);R(f,{ns:g,name:h});e[h]=f},this));R(a,{ns:c,name:d,propertiesByName:e});O(a["extends"],
Ud(function(f){f=this.typeMap[f];f.traits=f.traits||[];f.traits.push(d)},this));this.definePackage(a,b);this.typeMap[d]=a};jc.prototype.mapTypes=function(a,b,c){function d(h){return e(h,!0)}function e(h,k){var m=bb(h,Km[h]?"":a.prefix);g.mapTypes(m,b,k)}var f=Km[a.name]?{name:a.name}:this.typeMap[a.name],g=this;if(!f)throw Error("unknown type <"+a.name+">");O(f.superClass,c?d:e);b(f,!c);O(f.traits,d)};jc.prototype.getEffectiveDescriptor=function(a){a=bb(a);var b=new rb(a);this.mapTypes(a,function(c,
d){b.addTrait(c,d)});a=b.build();this.definePackage(a,a.allTypes[a.allTypes.length-1].$pkg);return a};jc.prototype.definePackage=function(a,b){this.properties.define(a,"$pkg",{value:b})};id.prototype.set=function(a,b,c){var d=this.model.getPropertyDescriptor(a,b),e=d&&d.name;"undefined"===typeof c?d?delete a[e]:delete a.$attrs[b]:d?e in a?a[e]=c:Zm(a,d,c):a.$attrs[b]=c};id.prototype.get=function(a,b){var c=this.model.getPropertyDescriptor(a,b);if(!c)return a.$attrs[b];var d=c.name;!a[d]&&c.isMany&&
Zm(a,c,[]);return a[d]};id.prototype.define=function(a,b,c){Object.defineProperty(a,b,c)};id.prototype.defineDescriptor=function(a,b){this.define(a,"$descriptor",{value:b})};id.prototype.defineModel=function(a,b){this.define(a,"$model",{value:b})};sb.prototype.create=function(a,b){var c=this.getType(a);if(!c)throw Error("unknown type <"+a+">");return new c(b)};sb.prototype.getType=function(a){var b=this.typeCache,c=Sa(a)?a:a.ns.name;a=b[c];a||(a=this.registry.getEffectiveDescriptor(c),a=b[c]=this.factory.createType(a));
return a};sb.prototype.createAny=function(a,b,c){var d=bb(a),e={$type:a,$instanceOf:function(f){return f===this.$type}};this.properties.defineDescriptor(e,{name:a,isGeneric:!0,ns:{prefix:d.prefix,localName:d.localName,uri:b}});this.properties.defineModel(e,this);this.properties.define(e,"$parent",{enumerable:!1,writable:!0});O(c,function(f,g){gb(f)&&void 0!==f.value?e[f.name]=f.value:e[g]=f});return e};sb.prototype.getPackage=function(a){return this.registry.getPackage(a)};sb.prototype.getPackages=
function(){return this.registry.getPackages()};sb.prototype.getElementDescriptor=function(a){return a.$descriptor};sb.prototype.hasType=function(a,b){void 0===b&&(b=a,a=this);var c=a.$model.getElementDescriptor(a);return b in c.allTypesByName};sb.prototype.getPropertyDescriptor=function(a,b){return this.getElementDescriptor(a).propertiesByName[b]};sb.prototype.getTypeDescriptor=function(a){return this.registry.typeMap[a]};var $m=String.fromCharCode,Lv=Object.prototype.hasOwnProperty,Mv=/&#(\d+);|&#x([0-9a-f]+);|&(\w+);/ig,
Wd={amp:"&",apos:"'",gt:">",lt:"<",quot:'"'};Object.keys(Wd).forEach(function(a){Wd[a.toUpperCase()]=Wd[a]});var OC={xsi:"http://www.w3.org/2001/XMLSchema-instance"};Xd.prototype.handleEnd=function(){};Xd.prototype.handleText=function(){};Xd.prototype.handleNode=function(){};Kg.prototype=Object.create(Xd.prototype);Kg.prototype.handleNode=function(){return this};jd.prototype=Object.create(Xd.prototype);jd.prototype.handleText=function(a){this.body=(this.body||"")+a};Yd.prototype=Object.create(jd.prototype);
Yd.prototype.handleNode=function(a){if(this.element)throw Error("expected no sub nodes");this.element=this.createReference(a);return this};Yd.prototype.handleEnd=function(){this.element.id=this.body};Yd.prototype.createReference=function(a){return{property:this.property.ns.name,id:""}};Lg.prototype=Object.create(jd.prototype);Lg.prototype.handleEnd=function(){var a=this.body||"",b=this.element,c=this.propertyDesc;a=Ig(c.type,a);c.isMany?b.get(c.name).push(a):b.set(c.name,a)};Ye.prototype=Object.create(jd.prototype);
Ye.prototype.handleNode=function(a){var b=this,c=this.element;c?b=this.handleChild(a):(c=this.element=this.createElement(a),this.context.addElement(c));return b};Xa.prototype=Object.create(Ye.prototype);Xa.prototype.addReference=function(a){this.context.addReference(a)};Xa.prototype.handleText=function(a){if(!this.element.$descriptor.bodyProperty)throw Error("unexpected body text <"+a+">");jd.prototype.handleText.call(this,a)};Xa.prototype.handleEnd=function(){var a=this.body,b=this.element,c=b.$descriptor.bodyProperty;
c&&void 0!==a&&(a=Ig(c.type,a),b.set(c.name,a))};Xa.prototype.createElement=function(a){a=a.attributes;var b=this.type,c=b.$descriptor,d=this.context,e=new b({}),f=this.model,g;O(a,function(h,k){var m=c.propertiesByName[k];if(m&&m.isReference)if(m.isMany){var l=h.split(" ");O(l,function(r){d.addReference({element:e,property:m.ns.name,id:r})})}else d.addReference({element:e,property:m.ns.name,id:h});else m?h=Ig(m.type,h):"xmlns"!==k&&(g=bb(k,c.ns.prefix),f.getPackage(g.prefix)&&d.addWarning({message:"unknown attribute <"+
k+">",element:e,property:k,value:h})),e.set(k,h)});return e};Xa.prototype.getPropertyForNode=function(a){var b=bb(a.name),c=this.model,d=this.type.$descriptor,e=d.propertiesByName[b.name];if(e){if("xsi:type"===(e.xml&&e.xml.serialize)&&(a=a.attributes["xsi:type"])){a=Pv(a,c);var f=c.getType(a);return R({},e,{effectiveType:f.$descriptor.name})}return e}if(e=c.getPackage(b.prefix)){if(a=en(b,e),f=c.getType(a),e=Ha(d.properties,function(g){return!g.isVirtual&&!g.isReference&&!g.isAttribute&&f.hasType(g.type)}))return R({},
e,{effectiveType:f.$descriptor.name})}else if(e=Ha(d.properties,function(g){return!g.isReference&&!g.isAttribute&&"Element"===g.type}))return e;throw Error("unrecognized element <"+b.name+">");};Xa.prototype.toString=function(){return"ElementDescriptor["+this.type.$descriptor.name+"]"};Xa.prototype.valueHandler=function(a,b){return new Lg(a,b)};Xa.prototype.referenceHandler=function(a){return new Yd(a,this.context)};Xa.prototype.handler=function(a){return"Element"===a?new kd(this.model,a,this.context):
new Xa(this.model,a,this.context)};Xa.prototype.handleChild=function(a){var b=this.getPropertyForNode(a);var c=this.element;var d=b.effectiveType||b.type;if(Jg[d])return this.valueHandler(b,c);a=b.isReference?this.referenceHandler(b).handleNode(a):this.handler(d).handleNode(a);d=a.element;void 0!==d&&(b.isMany?c.get(b.name).push(d):c.set(b.name,d),b.isReference?(R(d,{element:c}),this.context.addReference(d)):d.$parent=c);return a};Mg.prototype=Object.create(Xa.prototype);Mg.prototype.createElement=
function(a){var b=a.name,c=bb(b),d=this.type,e=this.model.getPackage(c.prefix);b=e&&en(c,e)||b;if(!d.hasType(b))throw Error("unexpected element <"+a.originalName+">");return Xa.prototype.createElement.call(this,a)};kd.prototype=Object.create(Ye.prototype);kd.prototype.createElement=function(a){var b=a.name,c=bb(b).prefix;return this.model.createAny(b,a.ns[c+"$uri"],a.attributes)};kd.prototype.handleChild=function(a){a=(new kd(this.model,"Element",this.context)).handleNode(a);var b=this.element,c=
a.element;if(void 0!==c){var d=b.$children=b.$children||[];d.push(c);c.$parent=b}return a};kd.prototype.handleEnd=function(){this.body&&(this.element.$body=this.body)};Ng.prototype.fromXML=function(a,b,c){function d(n,p,t){var x=p();p=x.line;var A=x.column;x=x.data;"<"===x.charAt(0)&&-1!==x.indexOf(" ")&&(x=x.slice(0,x.indexOf(" "))+">");p="unparsable content "+(x?x+" ":"")+"detected\n\tline: "+p+"\n\tcolumn: "+A+"\n\tnested error: "+n.message;if(t)return l.addWarning({message:p,error:n}),!0;throw Error(p);
}function e(n,p){return d(n,p,!0)}function f(n,p){var t=q.peek();try{q.push(t.handleNode(n))}catch(x){d(x,p,m)&&q.push(new Kg)}}function g(n,p){try{q.peek().handleText(n)}catch(t){e(t,p)}}var h=b.rootHandler;b instanceof Xa?(h=b,b={}):"string"===typeof b?(h=this.handler(b),b={}):"string"===typeof h&&(h=this.handler(h));var k=this.model,m=this.lax,l=new Qv(R({},b,{rootHandler:h})),r=new cn({proxy:!0}),q=Rv();h.context=l;q.push(h);var u=/^<\?xml /i,v=/ encoding="([^"]+)"/i,w=/^utf-8$/i;b=k.getPackages().reduce(function(n,
p){n[p.uri]=p.prefix;return n},{});r.ns(b).on("openTag",function(n,p,t,x){var A=n.attrs||{};t=Object.keys(A).reduce(function(z,y){var B=p(A[y]);z[y]=B;return z},{});f({name:n.name,originalName:n.originalName,attributes:t,ns:n.ns},x)}).on("question",function(n){u.test(n)&&(n=(n=v.exec(n))&&n[1])&&!w.test(n)&&l.addWarning({message:"unsupported document encoding <"+n+">, falling back to UTF-8"})}).on("closeTag",function(){q.pop().handleEnd()}).on("cdata",g).on("text",function(n,p,t){n=p(n);(n=n.trim())&&
g(n,t)}).on("error",d).on("warn",e);setTimeout(function(){try{r.parse(a);var n=l.elementsById,p=l.references,t,x;for(t=0;x=p[t];t++){var A=x.element,z=n[x.id],y=A.$descriptor.propertiesByName[x.property];z||l.addWarning({message:"unresolved reference <"+x.id+">",element:x.element,property:x.property,value:x.id});if(y.isMany){var B=A.get(y.name),D=B.indexOf(x);-1===D&&(D=B.length);z?B[D]=z:B.splice(D,1)}else A.set(y.name,z)}}catch(L){var H=L}n=h.element;H||n||(H=Error("failed to parse document as <"+
h.type.$descriptor.name+">"));c(H,H?void 0:n,l)},0)};Ng.prototype.handler=function(a){return new Mg(this.model,a)};var PC=/<|>|'|"|&|\n\r|\n/g,nt=/<|>|&/g,QC={"\n":"#10","\n\r":"#10",'"':"#34","'":"#39","<":"#60",">":"#62","&":"#38"},RC={"<":"lt",">":"gt","&":"amp"};Og.prototype.build=function(a){this.element=a;return this};Og.prototype.serializeTo=function(a){a.appendIndent().append("<"+this.tagName+">"+this.element.id+"</"+this.tagName+">").appendNewLine()};Mc.prototype.serializeValue=Mc.prototype.serializeTo=
function(a){a.append(this.escape?hn(this.value,nt,RC):this.value)};Mc.prototype.build=function(a,b){this.value=b;"String"===a.type&&-1!==b.search(nt)&&(this.escape=!0);return this};fn(Pg,Mc);Pg.prototype.serializeTo=function(a){a.appendIndent().append("<"+this.tagName+">");this.serializeValue(a);a.append("</"+this.tagName+">").appendNewLine()};Ca.prototype.build=function(a){this.element=a;var b=a.$descriptor,c=this.propertyDescriptor,d=b.isGeneric;var e=d?this.parseGeneric(a):this.parseNsAttributes(a);
this.ns=c?this.nsPropertyTagName(c):this.nsTagName(b);this.tagName=this.addTagName(this.ns);d||(b=Uv(a),this.parseAttributes(Vv(b)),this.parseContainments(Wv(b)));this.parseGenericAttributes(a,e);return this};Ca.prototype.nsTagName=function(a){var b=this.logNamespaceUsed(a.ns);if(a.isGeneric)b=R({localName:a.ns.localName},b);else{var c=a.ns.localName;a=dn(a.$pkg)?c.charAt(0).toLowerCase()+c.slice(1):c;b=R({localName:a},b)}return b};Ca.prototype.nsPropertyTagName=function(a){var b=this.logNamespaceUsed(a.ns);
return R({localName:a.ns.localName},b)};Ca.prototype.isLocalNs=function(a){return a.uri===this.ns.uri};Ca.prototype.nsAttributeName=function(a){var b=Sa(a)?bb(a):a.ns;if(a.inherited)return{localName:b.localName};a=this.logNamespaceUsed(b);this.getNamespaces().logUsed(a);return this.isLocalNs(a)?{localName:b.localName}:R({localName:b.localName},a)};Ca.prototype.parseGeneric=function(a){var b=this,c=this.body,d=[];O(a,function(e,f){var g;"$body"===f?c.push((new Mc).build({type:"String"},e)):"$children"===
f?O(e,function(h){c.push((new Ca(b)).build(h))}):0!==f.indexOf("$")&&(g=b.parseNsAttribute(a,f,e))&&d.push({name:f,value:e})});return d};Ca.prototype.parseNsAttribute=function(a,b,c){a=a.$model;var d=bb(b),e;"xmlns"===d.prefix&&(e={prefix:d.localName,uri:c});d.prefix||"xmlns"!==d.localName||(e={uri:c});if(!e)return{name:b,value:c};a&&a.getPackage(c)?this.logNamespace(e,!0,!0):(b=this.logNamespaceUsed(e,!0),this.getNamespaces().logUsed(b))};Ca.prototype.parseNsAttributes=function(a,b){var c=this,d=
[];O(a.$attrs,function(e,f){var g=c.parseNsAttribute(a,f,e);g&&d.push(g)});return d};Ca.prototype.parseGenericAttributes=function(a,b){var c=this;O(b,function(d){if("xsi:type"!==d.name)try{c.addAttribute(c.nsAttributeName(d.name),d.value)}catch(e){console.warn("missing namespace information for ",d.name,"=",d.value,"on",a,e)}})};Ca.prototype.parseContainments=function(a){var b=this,c=this.body,d=this.element;O(a,function(e){var f=d.get(e.name),g=e.isReference;e.isMany||(f=[f]);if(e.isBody)c.push((new Mc).build(e,
f[0]));else if(Jg[e.type])O(f,function(m){c.push((new Pg(b.addTagName(b.nsPropertyTagName(e)))).build(e,m))});else if(g)O(f,function(m){c.push((new Og(b.addTagName(b.nsPropertyTagName(e)))).build(m))});else{var h="xsi:type"===(e.xml&&e.xml.serialize),k="property"===(e.xml&&e.xml.serialize);O(f,function(m){var l=h?new Ze(b,e):k?new Ca(b,e):new Ca(b);c.push(l.build(m))})}})};Ca.prototype.getNamespaces=function(a){var b=this.namespaces,c=this.parent;b||(c=c&&c.getNamespaces(),a||!c?this.namespaces=b=
new Sv(c):b=c);return b};Ca.prototype.logNamespace=function(a,b,c){c=this.getNamespaces(c);var d=a.uri,e=a.prefix;c.byUri(d)||c.add(a,b);c.mapPrefix(e,d);return a};Ca.prototype.logNamespaceUsed=function(a,b){var c=this.element.$model,d=this.getNamespaces(b),e=a.prefix,f=a.uri,g;if(!e&&!f)return{localName:a.localName};var h=OC[e]||c&&(c.getPackage(e)||{}).uri;f=f||h||d.uriByPrefix(e);if(!f)throw Error("no namespace uri given for prefix <"+e+">");a=d.byUri(f);if(!a){c=e;for(g=1;d.uriByPrefix(c);)c=
e+"_"+g++;a=this.logNamespace({prefix:c,uri:f},h===f)}e&&d.mapPrefix(e,f);return a};Ca.prototype.parseAttributes=function(a){var b=this,c=this.element;O(a,function(d){var e=c.get(d.name);if(d.isReference)if(d.isMany){var f=[];O(e,function(g){f.push(g.id)});e=f.join(" ")}else e=e.id;b.addAttribute(b.nsAttributeName(d),e)})};Ca.prototype.addTagName=function(a){var b=this.logNamespaceUsed(a);this.getNamespaces().logUsed(b);return gn(a)};Ca.prototype.addAttribute=function(a,b){var c=this.attrs;Sa(b)&&
(b=hn(b,PC,QC));c.push({name:a,value:b})};Ca.prototype.serializeAttributes=function(a){var b=this.attrs,c=this.namespaces;c&&(b=Tv(c).concat(b));O(b,function(d){a.append(" ").append(gn(d.name)).append('="').append(d.value).append('"')})};Ca.prototype.serializeTo=function(a){var b=this.body[0],c=b&&b.constructor!==Mc;a.appendIndent().append("<"+this.tagName);this.serializeAttributes(a);a.append(b?">":" />");b&&(c&&a.appendNewLine().indent(),O(this.body,function(d){d.serializeTo(a)}),c&&a.unindent().appendIndent(),
a.append("</"+this.tagName+">"));a.appendNewLine()};fn(Ze,Ca);Ze.prototype.parseNsAttributes=function(a){var b=Ca.prototype.parseNsAttributes.call(this,a),c=a.$descriptor;if(c.name===this.propertyDescriptor.type)return b;var d=this.typeNs=this.nsTagName(c);this.getNamespaces().logUsed(this.typeNs);a=a.$model.getPackage(d.uri);a=a.xml&&a.xml.typePrefix||"";this.addAttribute(this.nsAttributeName("xsi:type"),(d.prefix?d.prefix+":":"")+a+c.ns.localName);return b};Ze.prototype.isLocalNs=function(a){return a.uri===
(this.typeNs||this.ns).uri};$e.prototype=Object.create(sb.prototype);$e.prototype.fromXML=function(a,b,c,d){Sa(b)||(d=c,c=b,b="dmn:Definitions");Na(c)&&(d=c,c={});c=new Ng(R({model:this,lax:!0},c));b=c.handler(b);c.fromXML(a,b,d)};$e.prototype.toXML=function(a,b,c){Na(b)&&(c=b,b={});b=new Zv(b);try{var d=b.toXML(a)}catch(f){var e=f}return c(e,d)};var aw={dmn:{name:"DMN",uri:"http://www.omg.org/spec/DMN/20151101/dmn.xsd",xml:{tagAlias:"lowerCase"},prefix:"dmn",types:[{name:"DMNElement",isAbstract:!0,
properties:[{name:"description",type:"String"},{name:"id",type:"String",isAttr:!0,isId:!0},{name:"label",type:"String",isAttr:!0},{name:"extensionElements",type:"ExtensionElements"}]},{name:"NamedElement",isAbstract:!0,superClass:["DMNElement"],properties:[{name:"name",type:"String",isAttr:!0}]},{name:"DMNElementReference",properties:[{name:"href",type:"String",isAttr:!0}]},{name:"ExtensionElements",properties:[{name:"values",type:"Element",isMany:!0}]},{name:"Definitions",superClass:["NamedElement"],
properties:[{name:"namespace",type:"String",isAttr:!0},{name:"typeLanguage",type:"String",isAttr:!0,"default":"http://www.omg.org/spec/FEEL/20140401"},{name:"expressionLanguage",type:"String",isAttr:!0,"default":"http://www.omg.org/spec/FEEL/20140401"},{name:"exporter",type:"String",isAttr:!0},{name:"exporterVersion",type:"String",isAttr:!0},{name:"itemDefinition",type:"ItemDefinition",isMany:!0,xml:{serialize:"property"}},{name:"drgElements",type:"DRGElement",isMany:!0},{name:"artifacts",type:"Artifact",
isMany:!0}]},{name:"Import",properties:[{name:"namespace",type:"String",isAttr:!0},{name:"locationURI",type:"String",isAttr:!0},{name:"importType",type:"String",isAttr:!0}]},{name:"DRGElement",isAbstract:!0,superClass:["NamedElement"]},{name:"Decision",superClass:["DRGElement"],properties:[{name:"question",type:"String"},{name:"allowedAnswers",type:"String"},{name:"variable",type:"InformationItem",xml:{serialize:"property"}},{name:"informationRequirement",type:"InformationRequirement",isMany:!0,xml:{serialize:"property"}},
{name:"knowledgeRequirement",type:"KnowledgeRequirement",isMany:!0,xml:{serialize:"property"}},{name:"authorityRequirement",type:"AuthorityRequirement",isMany:!0,xml:{serialize:"property"}},{name:"decisionTable",type:"DecisionTable",xml:{serialize:"property"}},{name:"literalExpression",type:"LiteralExpression",xml:{serialize:"property"}}]},{name:"BusinessKnowledgeModel",superClass:["DRGElement"],properties:[{name:"encapsulatedLogic",type:"FunctionDefinition"},{name:"variable",type:"InformationItem",
xml:{serialize:"property"}},{name:"knowledgeRequirement",type:"KnowledgeRequirement",isMany:!0,xml:{serialize:"property"}},{name:"authorityRequirement",type:"AuthorityRequirement",isMany:!0,xml:{serialize:"property"}}]},{name:"InputData",superClass:["DRGElement"],properties:[{name:"variable",type:"InformationItem",xml:{serialize:"property"}}]},{name:"KnowledgeSource",superClass:["DRGElement"],properties:[{name:"authorityRequirement",type:"AuthorityRequirement",isMany:!0,xml:{serialize:"property"}},
{name:"type",type:"String",isAttr:!0},{name:"owner",type:"DMNElementReference",isAttr:!0},{name:"locationURI",type:"String",isAttr:!0}]},{name:"InformationRequirement",properties:[{name:"requiredDecision",type:"DMNElementReference",xml:{serialize:"property"}},{name:"requiredInput",type:"DMNElementReference",xml:{serialize:"property"}}]},{name:"KnowledgeRequirement",properties:[{name:"requiredKnowledge",type:"DMNElementReference",isUnique:!0,xml:{serialize:"property"}}]},{name:"AuthorityRequirement",
properties:[{name:"requiredDecision",type:"DMNElementReference",xml:{serialize:"property"}},{name:"requiredInput",type:"DMNElementReference",xml:{serialize:"property"}},{name:"requiredAuthority",type:"DMNElementReference",xml:{serialize:"property"}}]},{name:"Expression",isAbstract:!0,superClass:["DMNElement"],properties:[{name:"typeRef",type:"String",isAttr:!0}]},{name:"ItemDefinition",superClass:["NamedElement"],properties:[{name:"typeLanguage",type:"String",isAttr:!0},{name:"isCollection",type:"Boolean",
isAttr:!0,"default":!1},{name:"typeRef",type:"String"},{name:"allowedValues",type:"UnaryTests",isMany:!0,xml:{serialize:"property"}}]},{name:"LiteralExpression",superClass:["Expression"],properties:[{name:"expressionLanguage",type:"String",isAttr:!0},{name:"importedValues",type:"ImportedValues"},{name:"text",type:"String"}]},{name:"InformationItem",superClass:["NamedElement"],properties:[{name:"typeRef",type:"String",isAttr:!0}]},{name:"DecisionTable",superClass:["Expression"],properties:[{name:"input",
type:"InputClause",isMany:!0,xml:{serialize:"property"}},{name:"output",type:"OutputClause",isMany:!0,xml:{serialize:"property"}},{name:"rule",type:"DecisionRule",isMany:!0,xml:{serialize:"property"}},{name:"hitPolicy",type:"HitPolicy",isAttr:!0,"default":"UNIQUE"},{name:"aggregation",type:"BuiltinAggregator",isAttr:!0},{name:"preferredOrientation",type:"DecisionTableOrientation",isAttr:!0,"default":"Rule-as-Row"},{name:"outputLabel",type:"String",isAttr:!0}]},{name:"DecisionRule",superClass:["DMNElement"],
properties:[{name:"inputEntry",type:"UnaryTests",isMany:!0,xml:{serialize:"property"}},{name:"outputEntry",type:"LiteralExpression",isMany:!0,xml:{serialize:"property"}}]},{name:"ImportedValues",superClass:["Import"],properties:[{name:"importedElement",type:"String",isMany:!0,xml:{serialize:"property"}},{name:"expressionLanguage",type:"String",isAttr:!0}]},{name:"Artifact",isAbstract:!0,superClass:["DMNElement"]},{name:"TextAnnotation",superClass:["Artifact"],properties:[{name:"text",type:"String",
xml:{serialize:"property"}},{name:"textFormat",type:"String",isAttr:!0}]},{name:"Association",superClass:["Artifact"],properties:[{name:"sourceRef",type:"DMNElementReference",xml:{serialize:"property"}},{name:"targetRef",type:"DMNElementReference",xml:{serialize:"property"}},{name:"associationDirection",type:"AssociationDirection",isAttr:!0,"default":"None"}]},{name:"InputClause",superClass:["DMNElement"],properties:[{name:"inputExpression",type:"LiteralExpression",xml:{serialize:"property"}},{name:"inputValues",
type:"UnaryTests",xml:{serialize:"property"}}]},{name:"OutputClause",superClass:["DMNElement"],properties:[{name:"outputValues",type:"UnaryTests",xml:{serialize:"property"}},{name:"defaultOutputEntry",type:"LiteralExpression",xml:{serialize:"property"}},{name:"name",type:"String",isAttr:!0},{name:"typeRef",type:"String",isAttr:!0}]},{name:"UnaryTests",superClass:["DMNElement"],properties:[{name:"text",type:"String"},{name:"expressionLanguage",type:"String",isAttr:!0}]},{name:"FunctionDefinition",
superClass:["Expression"],properties:[{name:"formalParameter",type:"InformationItem",isMany:!0,xml:{serialize:"property"}},{name:"expression",type:"String",isReference:!0,xml:{serialize:"property"}}]}],emumerations:[{name:"AssociationDirection",literalValues:[{name:"None"},{name:"One"},{name:"Both"}]},{name:"HitPolicy",literalValues:[{name:"UNIQUE"},{name:"FIRST"},{name:"PRIORITY"},{name:"ANY"},{name:"COLLECT"},{name:"RULE ORDER"},{name:"OUTPUT ORDER"}]},{name:"BuiltinAggregator",literalValues:[{name:"SUM"},
{name:"COUNT"},{name:"MIN"},{name:"MAX"}]},{name:"DecisionTableOrientation",literalValues:[{name:"Rule-as-Row"},{name:"Rule-as-Column"},{name:"CrossTable"}]}]},camunda:{name:"Camunda",uri:"http://camunda.org/schema/1.0/dmn",prefix:"camunda",xml:{tagAlias:"lowerCase"},types:[{name:"InputVariable","extends":["dmn:InputClause"],properties:[{name:"inputVariable",isAttr:!0,type:"String"}]}]},dc:{name:"DC",uri:"http://www.omg.org/spec/DD/20100524/DC",types:[{name:"Boolean"},{name:"Integer"},{name:"Real"},
{name:"String"},{name:"Font",properties:[{name:"name",type:"String",isAttr:!0},{name:"size",type:"Real",isAttr:!0},{name:"isBold",type:"Boolean",isAttr:!0},{name:"isItalic",type:"Boolean",isAttr:!0},{name:"isUnderline",type:"Boolean",isAttr:!0},{name:"isStrikeThrough",type:"Boolean",isAttr:!0}]},{name:"Point",properties:[{name:"x",type:"Real","default":"0",isAttr:!0},{name:"y",type:"Real","default":"0",isAttr:!0}]},{name:"Bounds",properties:[{name:"x",type:"Real","default":"0",isAttr:!0},{name:"y",
type:"Real","default":"0",isAttr:!0},{name:"width",type:"Real",isAttr:!0},{name:"height",type:"Real",isAttr:!0}]}],prefix:"dc",associations:[]},biodi:{name:"bpmn.io DI for DMN",uri:"http://bpmn.io/schema/dmn/biodi/1.0",prefix:"biodi",xml:{tagAlias:"lowerCase"},types:[{name:"Edge",superClass:["Element"],properties:[{name:"source",type:"String",isAttr:!0},{name:"waypoints",type:"Waypoint",isMany:!0,xml:{serialize:"property"}}]},{name:"Bounds",superClass:["dc:Bounds","Element"]},{name:"Waypoint",superClass:["dc:Point"]}]}},
SC=[].indexOf,Lm=function(a,b){if(SC)return a.indexOf(b);for(var c=0;c<a.length;++c)if(a[c]===b)return c;return-1},TC=/\s+/,UC=Object.prototype.toString;kc.prototype.add=function(a){if(this.list)return this.list.add(a),this;var b=this.array();~Lm(b,a)||b.push(a);this.el.className=b.join(" ");return this};kc.prototype.remove=function(a){if("[object RegExp]"==UC.call(a))return this.removeMatching(a);if(this.list)return this.list.remove(a),this;var b=this.array();a=Lm(b,a);~a&&b.splice(a,1);this.el.className=
b.join(" ");return this};kc.prototype.removeMatching=function(a){for(var b=this.array(),c=0;c<b.length;c++)a.test(b[c])&&this.remove(b[c]);return this};kc.prototype.toggle=function(a,b){if(this.list)return"undefined"!==typeof b?b!==this.list.toggle(a,b)&&this.list.toggle(a):this.list.toggle(a),this;"undefined"!==typeof b?b?this.add(a):this.remove(a):this.has(a)?this.remove(a):this.add(a);return this};kc.prototype.array=function(){var a=(this.el.getAttribute("class")||"").replace(/^\s+|\s+$/g,"").split(TC);
""===a[0]&&a.shift();return a};kc.prototype.has=kc.prototype.contains=function(a){return this.list?this.list.contains(a):!!~Lm(this.array(),a)};var Qe=Element.prototype,ot=Qe.matchesSelector||Qe.webkitMatchesSelector||Qe.mozMatchesSelector||Qe.msMatchesSelector||Qe.oMatchesSelector,Za=function(a,b,c){for(a=c?a:a.parentNode;a&&a!==document;){a:{c=a;var d=b;if(ot)c=ot.call(c,d);else{d=c.parentNode.querySelectorAll(d);for(var e=0;e<d.length;++e)if(d[e]==c){c=!0;break a}c=!1}}if(c)return a;a=a.parentNode}},
pt=window.addEventListener?"addEventListener":"attachEvent",VC=window.removeEventListener?"removeEventListener":"detachEvent",qt="addEventListener"!==pt?"on":"",U={bind:function(a,b,c,d){a[pt](qt+b,c,d||!1);return c},unbind:function(a,b,c,d){a[VC](qt+b,c,d||!1);return c}},rt=["focus","blur"],Mb={bind:function(a,b,c,d,e){-1!==rt.indexOf(c)&&(e=!0);return U.bind(a,c,function(f){f.delegateTarget=Za(f.target||f.srcElement,b,!0);f.delegateTarget&&d.call(a,f)},e)},unbind:function(a,b,c,d){-1!==rt.indexOf(b)&&
(d=!0);U.unbind(a,b,c,d)}},ta=function(a,b){if("string"!=typeof a)throw new TypeError("String expected");b||(b=document);var c=/<([\w:]+)/.exec(a);if(!c)return b.createTextNode(a);a=a.replace(/^\s+|\s+$/g,"");c=c[1];if("body"==c)return c=b.createElement("html"),c.innerHTML=a,c.removeChild(c.lastChild);c=Oa[c]||Oa._default;var d=c[0],e=c[1],f=c[2];c=b.createElement("div");for(c.innerHTML=e+a+f;d--;)c=c.lastChild;if(c.firstChild==c.lastChild)return c.removeChild(c.firstChild);for(d=b.createDocumentFragment();c.firstChild;)d.appendChild(c.removeChild(c.firstChild));
return d},st=!1;if("undefined"!==typeof document){var Mm=document.createElement("div");Mm.innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>';st=!Mm.getElementsByTagName("link").length;Mm=void 0}var Oa={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:st?[1,"X<div>","</div>"]:[0,"",""]};Oa.td=Oa.th=[3,"<table><tbody><tr>","</tr></tbody></table>"];Oa.option=Oa.optgroup=
[1,'<select multiple="multiple">',"</select>"];Oa.thead=Oa.tbody=Oa.colgroup=Oa.caption=Oa.tfoot=[1,"<table>","</table>"];Oa.polyline=Oa.ellipse=Oa.polygon=Oa.circle=Oa.text=Oa.line=Oa.path=Oa.rect=Oa.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];var Ld="undefined"!==typeof Element?Element.prototype:{},tt=Ld.matches||Ld.matchesSelector||Ld.webkitMatchesSelector||Ld.mozMatchesSelector||Ld.msMatchesSelector||Ld.oMatchesSelector,gj=function(a,b){if(!a||1!==a.nodeType)return!1;
if(tt)return tt.call(a,b);for(var c=a.parentNode.querySelectorAll(b),d=0;d<c.length;d++)if(c[d]==a)return!0;return!1},WC={width:"100%",height:"100%",position:"relative"},XC=function(){function a(){var b=this,c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");kn(this,"_viewsChanged",function(){b._emit("views.changed",{views:b._views,activeView:b._activeView})});this._eventBus=new Ta;this._viewsChanged=Td(this._viewsChanged,
0);this._views=[];this._viewers={};this._init(c)}cw(a,[{key:"importXML",value:function(b,c,d){var e=this;"object"!==Sg(c)&&(d=c,c={open:!0});"function"!==typeof d&&(d=Tg);b=this._emit("import.parse.start",{xml:b})||b;this._moddle.fromXML(b,"dmn:Definitions",function(f,g,h){g=e._emit("import.parse.complete",{error:f,definitions:g,context:h})||g;var k=h.warnings;e._setDefinitions(g);f&&(f=dw(f));if(f||!c.open)return e._emit("import.done",{error:f,warmings:k}),d(f,k);f=e._activeView||e._getInitialView(e._views);
if(!f)return d(Error("no displayable contents"));e.open(f,function(m,l){var r=[].concat(k,l||[]);e._emit("import.done",{error:m,warnings:r});d(m,r)})})}},{key:"getDefinitions",value:function(){return this._definitions}},{key:"getActiveView",value:function(){return this._activeView}},{key:"getActiveViewer",value:function(){var b=this.getActiveView();return b&&this._getViewer(b)}},{key:"getView",value:function(b){return this._views.filter(function(c){return c.element===b})[0]}},{key:"getViews",value:function(){return this._views}},
{key:"saveXML",value:function(b,c){var d=this;"function"===typeof b&&(c=b,b={});var e=this._definitions;if(!e)return c(Error("no definitions loaded"));e=this._emit("saveXML.start",{definitions:e})||e;this._moddle.toXML(e,b,function(f,g){try{g=d._emit("saveXML.serialized",{error:f,xml:g})||g,d._emit("saveXML.done",{error:f,xml:g})}catch(h){console.error("error in saveXML life-cycle listener",h)}c(f,g)})}},{key:"on",value:function(){var b;(b=this._eventBus).on.apply(b,arguments)}},{key:"off",value:function(){var b;
(b=this._eventBus).off.apply(b,arguments)}},{key:"once",value:function(){var b;(b=this._eventBus).once.apply(b,arguments)}},{key:"attachTo",value:function(b){b.get&&b.constructor.prototype.jquery&&(b=b.get(0));"string"===typeof b&&(b=xa(b));b.appendChild(this._container);this._emit("attach",{})}},{key:"detach",value:function(){this._emit("detach",{});kb(this._container)}},{key:"destroy",value:function(){var b=this;Object.keys(this._viewers).forEach(function(c){on(b._viewers[c],"destroy")});kb(this._container)}},
{key:"_init",value:function(b){this._options=b;this._moddle=this._createModdle(b);this._viewers={};this._views=[];var c=ta('<div class="dmn-js-parent"></div>'),d=R({},WC,b);R(c.style,{width:mn(d.width),height:mn(d.height),position:d.position});this._container=c;b.container&&this.attachTo(b.container)}},{key:"open",value:function(b){this._switchView(b,1<arguments.length&&void 0!==arguments[1]?arguments[1]:Tg)}},{key:"_setDefinitions",value:function(b){this._definitions=b;this._updateViews()}},{key:"_updateViews",
value:function(){var b=this._definitions;if(b){var c=this._getViewProviders();this._views=[b].concat(Rg(b.drgElements||[])).reduce(function(e,f){var g=Ug(c,function(h){return"string"===typeof h.opens?h.opens===f.$type:h.opens(f)});if(!g)return e;g={element:f,type:g.id};return[].concat(Rg(e),[g])},[]);var d=this._activeView;if(d)if(b=Ug(this._views,function(e){return nn(d,e)})||this._getInitialView(this._views),nn(d,b))this._activeView=b;else return this._switchView(null);this._viewsChanged()}else this._views=
[],this._switchView(null)}},{key:"_getInitialView",value:function(b){return b[0]}},{key:"_switchView",value:function(b){var c=this,d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Tg,e=this.getActiveView(),f=b&&this._getViewer(b),g=b&&b.element;if(e){var h=this._getViewer(e);h!==f&&(on(h,"clear"),h.detach())}this._activeView=b;if(f)return h!==f&&f.attachTo(this._container),this._emit("import.render.start",{view:b,element:g}),f.open(g,function(k,m){c._emit("import.render.complete",{view:b,
error:k,warnings:m});c._viewsChanged();d(k,m)});c._viewsChanged();d(void 0,void 0)}},{key:"_getViewer",value:function(b){var c=b.type,d=this._viewers[c];d||(d=this._viewers[c]=this._createViewer(b.type),this._emit("viewer.created",{type:c,viewer:d}));return d}},{key:"_createViewer",value:function(b){var c=Ug(this._getViewProviders(),function(e){return e.id===b});if(!c)throw Error("no provider for view type <"+b+">");var d=this._options[b]||{};return new c.constructor(bw({},this._options.common||{},
{},d,{additionalModules:[].concat(Rg(d.additionalModules||[]),[{_parent:["value",this],moddle:["value",this._moddle]}])}))}},{key:"_emit",value:function(){var b;(b=this._eventBus).fire.apply(b,arguments)}},{key:"_createModdle",value:function(b){return new $v(b.moddleExtensions||{})}},{key:"_getViewProviders",value:function(){return[]}}]);return a}(),YC="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},
ew=af(function(a){var b=a.exports=function(c,d){d||(d=16);void 0===c&&(c=128);if(0>=c)return"0";for(var e=Math.log(Math.pow(2,c))/Math.log(d),f=2;Infinity===e;f*=2)e=Math.log(Math.pow(2,c/f))/Math.log(d)*f;var g=e-Math.floor(e),h="";for(f=0;f<Math.floor(e);f++){var k=Math.floor(Math.random()*d).toString(d);h=k+h}g&&(k=Math.floor(Math.random()*Math.pow(d,g)).toString(d),h=k+h);e=parseInt(h,d);return Infinity!==e&&e>=Math.pow(2,c)?b(c,d):h};b.rack=function(c,d,e){var f=function(h){var k=0;do{if(10<
k++)if(e)c+=e;else throw Error("too many ID collisions, use more bits");var m=b(c,d)}while(Object.hasOwnProperty.call(g,m));g[m]=h;return m},g=f.hats={};f.get=function(h){return f.hats[h]};f.set=function(h,k){f.hats[h]=k;return f};f.bits=c||128;f.base=d||16;return f}});Yb.prototype.next=function(a){return this._seed(a||!0)};Yb.prototype.nextPrefixed=function(a,b){do var c=a+this.next(!0);while(this.assigned(c));this.claim(c,b);return c};Yb.prototype.claim=function(a,b){this._seed.set(a,b||!0)};Yb.prototype.assigned=
function(a){return this._seed.get(a)||!1};Yb.prototype.unclaim=function(a){delete this._seed.hats[a]};Yb.prototype.clear=function(){var a=this._seed.hats,b;for(b in a)this.unclaim(b)};var ZC=function(a){function b(){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");var c=md(b).apply(this,arguments);if(!c||"object"!==Vg(c)&&"function"!==typeof c){if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");c=this}return c}gw(b,
a);fw(b,[{key:"_init",value:function(c){var d=this;bf(md(b.prototype),"_init",this).call(this,c);this.on("import.parse.complete",function(e){e.error||d._collectIds(e.definitions,e.context)});this.on("destroy",function(){d._moddle.ids.clear()});this.on("viewer.created",function(e){e.viewer.on("elements.changed",function(f){f.elements.some(function(g){return Cb(g,["dmn:Decision","dmn:Definitions"])})&&d._updateViews()})})}},{key:"_collectIds",value:function(c,d){var e=c.$model.ids,f;e.clear();for(f in d.elementsById)e.claim(f,
d.elementsById[f])}},{key:"_createModdle",value:function(c){c=bf(md(b.prototype),"_createModdle",this).call(this,c);c.ids=new Yb([32,36,1]);return c}}]);return b}(XC),Ga=af(function(a){a.exports="function"===typeof Object.create?function(b,c){b.super_=c;b.prototype=Object.create(c.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}})}:function(b,c){b.super_=c;var d=function(){};d.prototype=c.prototype;b.prototype=new d;b.prototype.constructor=b}}),iw=/^class /,jw=/constructor\s*[^(]*\(\s*([^)]*)\)/m,
kw=/^function\s*[^(]*\(\s*([^)]*)\)/m,lw=/\/\*([^*]*)\*\//m,mw="function"===typeof Symbol&&"symbol"===G(Symbol.iterator)?function(a){return G(a)}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":G(a)};Db.prototype.canRender=function(){};Db.prototype.drawShape=function(){};Db.prototype.drawConnection=function(){};Db.prototype.getShapePath=function(){};Db.prototype.getConnectionPath=function(){};var sn={"alignment-baseline":1,"baseline-shift":1,
clip:1,"clip-path":1,"clip-rule":1,color:1,"color-interpolation":1,"color-interpolation-filters":1,"color-profile":1,"color-rendering":1,cursor:1,direction:1,display:1,"dominant-baseline":1,"enable-background":1,fill:1,"fill-opacity":1,"fill-rule":1,filter:1,"flood-color":1,"flood-opacity":1,font:1,"font-family":1,"font-size":2,"font-size-adjust":1,"font-stretch":1,"font-style":1,"font-variant":1,"font-weight":1,"glyph-orientation-horizontal":1,"glyph-orientation-vertical":1,"image-rendering":1,kerning:1,
"letter-spacing":1,"lighting-color":1,marker:1,"marker-end":1,"marker-mid":1,"marker-start":1,mask:1,opacity:1,overflow:1,"pointer-events":1,"shape-rendering":1,"stop-color":1,"stop-opacity":1,stroke:1,"stroke-dasharray":1,"stroke-dashoffset":1,"stroke-linecap":1,"stroke-linejoin":1,"stroke-miterlimit":1,"stroke-opacity":1,"stroke-width":2,"text-anchor":1,"text-decoration":1,"text-rendering":1,"unicode-bidi":1,visibility:1,"word-spacing":1,"writing-mode":1},$C=/\s+/,aD=Object.prototype.toString;lc.prototype.add=
function(a){if(this.list)return this.list.add(a),this;var b=this.array();~Yg(b,a)||b.push(a);Zg(this.el.className.baseVal)?this.el.className.baseVal=b.join(" "):this.el.className=b.join(" ");return this};lc.prototype.remove=function(a){if("[object RegExp]"===aD.call(a))return this.removeMatching(a);if(this.list)return this.list.remove(a),this;var b=this.array();a=Yg(b,a);~a&&b.splice(a,1);this.el.className.baseVal=b.join(" ");return this};lc.prototype.removeMatching=function(a){for(var b=this.array(),
c=0;c<b.length;c++)a.test(b[c])&&this.remove(b[c]);return this};lc.prototype.toggle=function(a,b){if(this.list)return Zg(b)?b!==this.list.toggle(a,b)&&this.list.toggle(a):this.list.toggle(a),this;Zg(b)?b?this.add(a):this.remove(a):this.has(a)?this.remove(a):this.add(a);return this};lc.prototype.array=function(){var a=(this.el.getAttribute("class")||"").replace(/^\s+|\s+$/g,"").split($C);""===a[0]&&a.shift();return a};lc.prototype.has=lc.prototype.contains=function(a){return this.list?this.list.contains(a):
!!~Yg(this.array(),a)};var $g={svg:"http://www.w3.org/2000/svg"},tn='<svg xmlns="'+$g.svg+'"',ah=ea("svg"),wn=/([&<>]{1})/g,qw=/([\n\r"]{1})/g,pw={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"'"};Ga(nc,Db);nc.prototype.canRender=function(){return!0};nc.prototype.drawShape=function(a,b){var c=ea("rect");W(c,{x:0,y:0,width:b.width||0,height:b.height||0});b&&b.isFrame?W(c,this.FRAME_STYLE):W(c,this.SHAPE_STYLE);ha(a,c);return c};nc.prototype.drawConnection=function(a,b){var c=ch(b.waypoints,this.CONNECTION_STYLE);
ha(a,c);return c};nc.prototype.getShapePath=function(a){var b=a.width;return[["M",a.x,a.y],["l",b,0],["l",0,a.height],["l",-b,0],["z"]].join().replace(/,?([A-z]),?/g,"$1")};nc.prototype.getConnectionPath=function(a){a=a.waypoints;var b,c,d=[];for(b=0;c=a[b];b++)c=c.original||c,d.push([0===b?"M":"L",c.x,c.y]);return d.join(",").replace(/,?([A-z]),?/g,"$1")};nc.$inject=["eventBus","styles"];var bD={__init__:["defaultRenderer"],defaultRenderer:["type",nc],styles:["type",function(){var a={"no-fill":{fill:"none"},
"no-border":{strokeOpacity:0},"no-events":{pointerEvents:"none"}},b=this;this.cls=function(c,d,e){d=this.style(d,e);return R(d,{"class":c})};this.style=function(c,d){ja(c)||d||(d=c,c=[]);var e=qb(c,function(f,g){return R(f,a[g]||{})},{});return d?R(e,d):e};this.computeStyle=function(c,d,e){ja(d)||(e=d,d=[]);return b.style(d||[],R({},e,c||{}))}}]},cD={shape:["x","y","width","height"],connection:["waypoints"]};la.$inject=["config.canvas","eventBus","graphicsFactory","elementRegistry"];la.prototype._init=
function(a){var b=this._eventBus,c=this._container=vw(a),d=this._svg=ea("svg");W(d,{width:"100%",height:"100%"});ha(c,d);var e=this._viewport=Cn(d,"viewport");this._layers={};!1!==a.deferUpdate&&(this._viewboxChanged=Td(this._viewboxChanged.bind(this),300));b.on("diagram.init",function(){b.fire("canvas.init",{svg:d,viewport:e})},this);b.on(["shape.added","connection.added","shape.removed","connection.removed","elements.changed"],function(){delete this._cachedViewbox},this);b.on("diagram.destroy",
500,this._destroy,this);b.on("diagram.clear",500,this._clear,this)};la.prototype._destroy=function(a){this._eventBus.fire("canvas.destroy",{svg:this._svg,viewport:this._viewport});(a=this._container.parentNode)&&a.removeChild(this._container);delete this._svg;delete this._container;delete this._layers;delete this._rootElement;delete this._viewport};la.prototype._clear=function(){var a=this;this._elementRegistry.getAll().forEach(function(b){var c=An(b);"root"===c?a.setRootElement(null,!0):a._removeElement(b,
c)});delete this._cachedViewbox};la.prototype.getDefaultLayer=function(){return this.getLayer("base",0)};la.prototype.getLayer=function(a,b){if(!a)throw Error("must specify a name");var c=this._layers[a];c||(c=this._layers[a]=this._createLayer(a,b));if("undefined"!==typeof b&&c.index!==b)throw Error("layer <"+a+"> already created at index <"+b+">");return c.group};la.prototype._createLayer=function(a,b){b||(b=0);var c=qb(this._layers,function(d,e){b>=e.index&&d++;return d},0);return{group:Cn(this._viewport,
"layer-"+a,c),index:b}};la.prototype.getContainer=function(){return this._container};la.prototype._updateMarker=function(a,b,c){var d;a.id||(a=this._elementRegistry.get(a));if(d=this._elementRegistry._elements[a.id])O([d.gfx,d.secondaryGfx],function(e){e&&(c?za(e).add(b):za(e).remove(b))}),this._eventBus.fire("element.marker.update",{element:a,gfx:d.gfx,marker:b,add:!!c})};la.prototype.addMarker=function(a,b){this._updateMarker(a,b,!0)};la.prototype.removeMarker=function(a,b){this._updateMarker(a,
b,!1)};la.prototype.hasMarker=function(a,b){a.id||(a=this._elementRegistry.get(a));var c=this.getGraphics(a);return za(c).has(b)};la.prototype.toggleMarker=function(a,b){this.hasMarker(a,b)?this.removeMarker(a,b):this.addMarker(a,b)};la.prototype.getRootElement=function(){this._rootElement||this.setRootElement({id:"__implicitroot",children:[]});return this._rootElement};la.prototype.setRootElement=function(a,b){a&&this._ensureValid("root",a);var c=this._rootElement,d=this._elementRegistry,e=this._eventBus;
if(c){if(!b)throw Error("rootElement already set, need to specify override");e.fire("root.remove",{element:c});e.fire("root.removed",{element:c});d.remove(c)}a&&(c=this.getDefaultLayer(),e.fire("root.add",{element:a}),d.add(a,c,this._svg),e.fire("root.added",{element:a,gfx:c}));return this._rootElement=a};la.prototype._ensureValid=function(a,b){if(!b.id)throw Error("element must have an id");if(this._elementRegistry.get(b.id))throw Error("element with id "+b.id+" already exists");var c=cD[a];if(!gc(c,
function(d){return"undefined"!==typeof b[d]}))throw Error("must supply { "+c.join(", ")+" } with "+a);};la.prototype._setParent=function(a,b,c){oc(b.children,a,c);a.parent=b};la.prototype._addElement=function(a,b,c,d){c=c||this.getRootElement();var e=this._eventBus,f=this._graphicsFactory;this._ensureValid(a,b);e.fire(a+".add",{element:b,parent:c});this._setParent(b,c,d);c=f.create(a,b,d);this._elementRegistry.add(b,c);f.update(a,b,c);e.fire(a+".added",{element:b,gfx:c});return b};la.prototype.addShape=
function(a,b,c){return this._addElement("shape",a,b,c)};la.prototype.addConnection=function(a,b,c){return this._addElement("connection",a,b,c)};la.prototype._removeElement=function(a,b){var c=this._elementRegistry,d=this._graphicsFactory,e=this._eventBus;if(a=c.get(a.id||a))return e.fire(b+".remove",{element:a}),d.remove(a),nd(a.parent&&a.parent.children,a),a.parent=null,e.fire(b+".removed",{element:a}),c.remove(a),a};la.prototype.removeShape=function(a){return this._removeElement(a,"shape")};la.prototype.removeConnection=
function(a){return this._removeElement(a,"connection")};la.prototype.getGraphics=function(a,b){return this._elementRegistry.getGraphics(a,b)};la.prototype._changeViewbox=function(a){this._eventBus.fire("canvas.viewbox.changing");a.apply(this);this._cachedViewbox=null;this._viewboxChanged()};la.prototype._viewboxChanged=function(){this._eventBus.fire("canvas.viewbox.changed",{viewbox:this.viewbox()})};la.prototype.viewbox=function(a){if(void 0===a&&this._cachedViewbox)return this._cachedViewbox;var b=
this._viewport,c=this.getSize(),d;if(a)this._changeViewbox(function(){g=Math.min(c.width/a.width,c.height/a.height);var h=this._svg.createSVGMatrix().scale(g).translate(-a.x,-a.y);df(b,h)});else{var e=this.getDefaultLayer().getBBox();var f=(d=df(b))?d.matrix:ow();var g=Math.round(1E3*f.a)/1E3;d=Math.round(1E3*(-f.e||0))/1E3;f=Math.round(1E3*(-f.f||0))/1E3;a=this._cachedViewbox={x:d?d/g:0,y:f?f/g:0,width:c.width/g,height:c.height/g,scale:g,inner:{width:e.width,height:e.height,x:e.x,y:e.y},outer:c}}return a};
la.prototype.scroll=function(a){var b=this._viewport,c=b.getCTM();a&&this._changeViewbox(function(){a=R({dx:0,dy:0},a||{});c=this._svg.createSVGMatrix().translate(a.dx,a.dy).multiply(c);Dn(b,c)});return{x:c.e,y:c.f}};la.prototype.zoom=function(a,b){if(!a)return this.viewbox(a).scale;if("fit-viewport"===a)return this._fitViewport(b);var c,d;this._changeViewbox(function(){"object"!==G(b)&&(c=this.viewbox().outer,b={x:c.width/2,y:c.height/2});d=this._setZoom(a,b)});return Math.round(1E3*d.a)/1E3};la.prototype._fitViewport=
function(a){var b=this.viewbox(),c=b.outer;b=b.inner;if(0<=b.x&&0<=b.y&&b.x+b.width<=c.width&&b.y+b.height<=c.height&&!a)a={x:0,y:0,width:Math.max(b.width+b.x,c.width),height:Math.max(b.height+b.y,c.height)};else{var d=Math.min(1,c.width/b.width,c.height/b.height);a={x:b.x+(a?b.width/2-c.width/d/2:0),y:b.y+(a?b.height/2-c.height/d/2:0),width:c.width/d,height:c.height/d}}this.viewbox(a);return this.viewbox(!1).scale};la.prototype._setZoom=function(a,b){var c=this._svg,d=this._viewport,e=c.createSVGMatrix(),
f=c.createSVGPoint();d=d.getCTM();c=d.a;b?(f=R(f,b),f=f.matrixTransform(d.inverse()),e=e.translate(f.x,f.y).scale(1/c*a).translate(-f.x,-f.y),e=d.multiply(e)):e=e.scale(a);Dn(this._viewport,e);return e};la.prototype.getSize=function(){return{width:this._container.clientWidth,height:this._container.clientHeight}};la.prototype.getAbsoluteBBox=function(a){var b=this.viewbox();a=a.waypoints?this.getGraphics(a).getBBox():a;return{x:a.x*b.scale-b.x*b.scale,y:a.y*b.scale-b.y*b.scale,width:a.width*b.scale,
height:a.height*b.scale}};la.prototype.resized=function(){delete this._cachedViewbox;this._eventBus.fire("canvas.resized")};Eb.$inject=["eventBus"];Eb.prototype.add=function(a,b,c){var d=a.id;this._validateId(d);W(b,"data-element-id",d);c&&W(c,"data-element-id",d);this._elements[d]={element:a,gfx:b,secondaryGfx:c}};Eb.prototype.remove=function(a){var b=this._elements,c=(a=a.id||a)&&b[a];c&&(W(c.gfx,"data-element-id",""),c.secondaryGfx&&W(c.secondaryGfx,"data-element-id",""),delete b[a])};Eb.prototype.updateId=
function(a,b){this._validateId(b);"string"===typeof a&&(a=this.get(a));this._eventBus.fire("element.updateId",{element:a,newId:b});var c=this.getGraphics(a),d=this.getGraphics(a,!0);this.remove(a);a.id=b;this.add(a,c,d)};Eb.prototype.get=function(a){a="string"===typeof a?a:a&&W(a,"data-element-id");return(a=this._elements[a])&&a.element};Eb.prototype.filter=function(a){var b=[];this.forEach(function(c,d){a(c,d)&&b.push(c)});return b};Eb.prototype.getAll=function(){return this.filter(function(a){return a})};
Eb.prototype.forEach=function(a){var b=this._elements;Object.keys(b).forEach(function(c){c=b[c];return a(c.element,c.gfx)})};Eb.prototype.getGraphics=function(a,b){var c=this._elements[a.id||a];return c&&(b?c.secondaryGfx:c.gfx)};Eb.prototype._validateId=function(a){if(!a)throw Error("element must have an id");if(this._elements[a])throw Error("element with id "+a+" already added");};var eh={extend:function(a,b,c,d){var e=c.inverse;Object.defineProperty(a,"remove",{value:function(f){var g=this.indexOf(f);
-1!==g&&(this.splice(g,1),b.unset(f,e,d));return f}});Object.defineProperty(a,"contains",{value:function(f){return-1!==this.indexOf(f)}});Object.defineProperty(a,"add",{value:function(f,g){var h=this.indexOf(f);if("undefined"===typeof g){if(-1!==h)return;g=this.length}-1!==h&&this.splice(h,1);this.splice(g,0,f);-1===h&&b.set(f,e,d)}});Object.defineProperty(a,"__refs_collection",{value:!0});return a},isExtended:function(a){return!0===a.__refs_collection}};nb.prototype.bind=function(a,b){if("string"===
typeof b){if(!this.props[b])throw Error("no property <"+b+"> in ref");b=this.props[b]}b.collection?En(this,b,a):ww(this,b,a)};nb.prototype.ensureRefsCollection=function(a,b){var c=a[b.name];eh.isExtended(c)||En(this,b,a);return c};nb.prototype.ensureBound=function(a,b){Object.prototype.hasOwnProperty.call(a,b.name||b)||this.bind(a,b)};nb.prototype.unset=function(a,b,c){a&&(this.ensureBound(a,b),b.collection?this.ensureRefsCollection(a,b).remove(c):a[b.name]=void 0)};nb.prototype.set=function(a,b,
c){a&&(this.ensureBound(a,b),b.collection?this.ensureRefsCollection(a,b).add(c):a[b.name]=c)};nb.Collection=eh;var Fn=new nb({name:"children",enumerable:!0,collection:!0},{name:"parent"}),Gn=new nb({name:"labels",enumerable:!0,collection:!0},{name:"labelTarget"}),Jn=new nb({name:"attachers",collection:!0},{name:"host"}),Hn=new nb({name:"outgoing",collection:!0},{name:"source"}),In=new nb({name:"incoming",collection:!0},{name:"target"});Ga(od,ae);Ga(Kn,od);Ga(Ln,od);Ga(Mn,ae);var dD={connection:Mn,
shape:od,label:Ln,root:Kn};pc.prototype.createRoot=function(a){return this.create("root",a)};pc.prototype.createLabel=function(a){return this.create("label",a)};pc.prototype.createShape=function(a){return this.create("shape",a)};pc.prototype.createConnection=function(a){return this.create("connection",a)};pc.prototype.create=function(a,b){b=R({},b||{});b.id||(b.id=a+"_"+this._uid++);var c=b,d=dD[a];if(!d)throw Error("unknown type: <"+a+">");return R(new d,c)};ob.$inject=["eventBus","elementRegistry"];
ob.prototype._getChildrenContainer=function(a){var b=this._elementRegistry.getGraphics(a);a.parent?(a=b.parentNode.childNodes[1],a||(a=ea("g"),za(a).add("djs-children"),ha(b.parentNode,a))):a=b;return a};ob.prototype._clear=function(a){a=a.childNodes[0];Qg(a);return a};ob.prototype._createContainer=function(a,b,c,d){var e=ea("g");za(e).add("djs-group");"undefined"!==typeof c?(c=b.childNodes[c]||b.firstChild,e!==c&&b.insertBefore(e,c)):ha(b,e);b=ea("g");za(b).add("djs-element");za(b).add("djs-"+a);
d&&za(b).add("djs-frame");ha(e,b);a=ea("g");za(a).add("djs-visual");ha(b,a);return b};ob.prototype.create=function(a,b,c){var d=this._getChildrenContainer(b.parent);return this._createContainer(a,d,c,!(!b||!b.isFrame))};ob.prototype.updateContainments=function(a){var b=this,c=this._elementRegistry;a=qb(a,function(d,e){e.parent&&(d[e.parent.id]=e.parent);return d},{});O(a,function(d){var e=d.children;if(e){var f=b._getChildrenContainer(d);O(e.slice().reverse(),function(g){g=c.getGraphics(g).parentNode;
var h=f.firstChild;g!==h&&f.insertBefore(g,h)})}})};ob.prototype.drawShape=function(a,b){return this._eventBus.fire("render.shape",{gfx:a,element:b})};ob.prototype.getShapePath=function(a){return this._eventBus.fire("render.getShapePath",a)};ob.prototype.drawConnection=function(a,b){return this._eventBus.fire("render.connection",{gfx:a,element:b})};ob.prototype.getConnectionPath=function(a){return this._eventBus.fire("render.getConnectionPath",a)};ob.prototype.update=function(a,b,c){if(b.parent){var d=
this._clear(c);if("shape"===a)this.drawShape(d,b),Lb(c,b.x,b.y);else if("connection"===a)this.drawConnection(d,b);else throw Error("unknown type: "+a);b.hidden?W(c,"display","none"):W(c,"display","block")}};ob.prototype.remove=function(a){a=this._elementRegistry.getGraphics(a);cb(a.parentNode)};var yw={__depends__:[bD],__init__:["canvas"],canvas:["type",la],elementRegistry:["type",Eb],elementFactory:["type",pc],eventBus:["type",Ta],graphicsFactory:["type",ob]};be.prototype.destroy=function(){this.get("eventBus").fire("diagram.destroy")};
be.prototype.clear=function(){this.get("eventBus").fire("diagram.clear")};var Fw={width:150,height:50};ef.prototype.createText=function(a,b){return this.layoutText(a,b).element};ef.prototype.getDimensions=function(a,b){return this.layoutText(a,b).dimensions};ef.prototype.layoutText=function(a,b){var c=R({},this._config.size,b.box),d=R({},this._config.style,b.style),e=Bw(b.align||this._config.align),f=Cw(void 0!==b.padding?b.padding:this._config.padding),g=b.fitBox||!1;var h="fontSize"in d&&"lineHeight"in
d?d.lineHeight*parseInt(d.fontSize,10):void 0;var k=a.split(/\r?\n/g),m=[],l=c.width-f.left-f.right,r=ea("text");W(r,{x:0,y:0});W(r,d);var q=Ew();for(ha(q,r);k.length;)m.push(Dw(k,l,r));"middle"===e.vertical&&(f.top=f.bottom=0);k=qb(m,function(n,p,t){return n+(h||p.height)},0)+f.top+f.bottom;var u=qb(m,function(n,p,t){return p.width>n?p.width:n},0),v=f.top;"middle"===e.vertical&&(v+=(c.height-k)/2);v-=(h||m[0].height)/4;var w=ea("text");W(w,d);O(m,function(n){v+=h||n.height;switch(e.horizontal){case "left":var p=
f.left;break;case "right":p=(g?u:l)-f.right-n.width;break;default:p=Math.max(((g?u:l)-n.width)/2+f.left,0)}var t=ea("tspan");W(t,{x:p,y:v});t.textContent=n.text;ha(w,t)});cb(r);return{dimensions:{width:u,height:k},element:w}};Ga(fh,Db);fh.$inject=["eventBus","pathMap","styles"];var Jw=/\{([^}]+)\}/g,Hw=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,eD={__init__:["drdRenderer"],drdRenderer:["type",fh],pathMap:["type",function(){this.pathMap={KNOWLEDGE_SOURCE:{d:"m {mx},{my} l 0,{e.y0} c {e.x0},{e.y1} {e.x1},-{e.y2} {e.x2},-{e.y3} c {e.x3},-{e.y4} {e.x4},{e.y5} {e.x5},{e.y6} l 0,-{e.y7}z",
width:100,height:65,widthElements:[29.8,48.4,67.2,12.2,19.8,30.8],heightElements:[55.3,19.7,4.2,6.7,2.3,1.6,6.2,54.6]},BUSINESS_KNOWLEDGE_MODEL:{d:"m {mx},{my} l {e.x0},-{e.y0} l {e.x1},0 l 0,{e.y1} l -{e.x2},{e.y2} l -{e.x3},0z",width:125,height:45,widthElements:[13.8,109.2,13.8,109.1],heightElements:[13.2,29.8,13.2]},TEXT_ANNOTATION:{d:"m {mx}, {my} m 10,0 l -10,0 l 0,{e.y0} l 10,0",width:10,height:30,widthElements:[10],heightElements:[30]}};this.getRawPath=function(a){return this.pathMap[a].d};
this.getScaledPath=function(a,b){var c=this.pathMap[a];if(b.abspos){var d=b.abspos.x;var e=b.abspos.y}else d=b.containerWidth*b.position.mx,e=b.containerHeight*b.position.my;var f={};if(b.position){for(var g=b.containerHeight/c.height*b.yScaleFactor,h=b.containerWidth/c.width*b.xScaleFactor,k=0;k<c.heightElements.length;k++)f["y"+k]=c.heightElements[k]*g;for(g=0;g<c.widthElements.length;g++)f["x"+g]=c.widthElements[g]*h}return Iw(c.d,{mx:d,my:e,e:f})}}]};ce.$inject=["eventBus","canvas","elementFactory",
"elementRegistry"];ce.prototype.root=function(a){a=this._elementFactory.createRoot(gh(a));this._canvas.setRootElement(a);return a};ce.prototype.add=function(a,b){var c=this._elementFactory,d=this._canvas,e=this._eventBus;if(b.$instanceOf("biodi:Bounds")){var f=gh(a,{x:Math.round(b.x),y:Math.round(b.y),width:Math.round(b.width),height:Math.round(b.height)});f=c.createShape(f);d.addShape(f);e.fire("drdElement.added",{element:f,di:b})}else if(b.$instanceOf("biodi:Edge")){var g=Kw(b);var h=b.source;var k=
a.$parent.id;P(a,"dmn:Association")&&(k=(k=a.targetRef)&&k.href.slice(1));h=this._getShape(h);k=this._getShape(k);h&&k&&(f=gh(a,{hidden:!1,source:h,target:k,waypoints:g}),f=c.createConnection(f),d.addConnection(f),e.fire("drdElement.added",{element:f,di:b}))}else throw Error("unknown di for element "+a.id);return f};ce.prototype._getShape=function(a){return this._elementRegistry.get(a)};var fD={__depends__:[eD,{drdImporter:["type",ce]}]},Md={translate:["value",function(a,b){b=b||{};return a.replace(/{([^}]+)}/g,
function(c,d){return b[d]||"{"+d+"}"})}]};On.$inject=["eventBus","elementRegistry","styles"];var Re={__init__:["interactionEvents"],interactionEvents:["type",On]};ff.prototype.updateShapeOutline=function(a,b){W(a,{x:-this.offset,y:-this.offset,width:b.width+2*this.offset,height:b.height+2*this.offset})};ff.prototype.updateConnectionOutline=function(a,b){var c=mc(b);W(a,{x:c.x-this.offset,y:c.y-this.offset,width:c.width+2*this.offset,height:c.height+2*this.offset})};ff.$inject=["eventBus","styles",
"elementRegistry"];var ut={__init__:["outline"],outline:["type",ff]};qd.$inject=["eventBus"];qd.prototype.deselect=function(a){var b=this._selectedElements;a=b.indexOf(a);if(-1!==a){var c=b.slice();b.splice(a,1);this._eventBus.fire("selection.changed",{oldSelection:c,newSelection:b})}};qd.prototype.get=function(){return this._selectedElements};qd.prototype.isSelected=function(a){return-1!==this._selectedElements.indexOf(a)};qd.prototype.select=function(a,b){var c=this._selectedElements,d=c.slice();
ja(a)||(a=a?[a]:[]);b?O(a,function(e){-1===c.indexOf(e)&&c.push(e)}):this._selectedElements=c=a.slice();this._eventBus.fire("selection.changed",{oldSelection:d,newSelection:c})};Pn.$inject=["eventBus","canvas","selection","styles"];Qn.$inject=["eventBus","selection","canvas","elementRegistry"];var fc={__init__:["selectionVisuals","selectionBehavior"],__depends__:[Re,ut],selection:["type",qd],selectionVisuals:["type",Pn],selectionBehavior:["type",Qn]};Rn.prototype.next=function(){return this._prefix+
++this._counter};var Mw=new Rn("ov");Qa.$inject=["config.overlays","eventBus","canvas","elementRegistry"];Qa.prototype.get=function(a){Sa(a)&&(a={id:a});Sa(a.element)&&(a.element=this._elementRegistry.get(a.element));if(a.element){var b=this._getOverlayContainer(a.element,!0);return b?a.type?hb(b.overlays,Sd({type:a.type})):b.overlays.slice():[]}return a.type?hb(this._overlays,Sd({type:a.type})):a.id?this._overlays[a.id]:null};Qa.prototype.add=function(a,b,c){gb(b)&&(c=b,b=null);a.id||(a=this._elementRegistry.get(a));
if(!c.position)throw Error("must specifiy overlay position");if(!c.html)throw Error("must specifiy overlay html");if(!a)throw Error("invalid element specified");var d=this._ids.next();c=R({},this._overlayDefaults,c,{id:d,type:b,element:a,html:c.html});this._addOverlay(c);return d};Qa.prototype.remove=function(a){a=this.get(a)||[];ja(a)||(a=[a]);var b=this;O(a,function(c){var d=b._getOverlayContainer(c.element,!0);c&&(kb(c.html),kb(c.htmlContainer),delete c.htmlContainer,delete c.element,delete b._overlays[c.id]);
d&&(c=d.overlays.indexOf(c),-1!==c&&d.overlays.splice(c,1))})};Qa.prototype.show=function(){ih(this._overlayRoot)};Qa.prototype.hide=function(){ih(this._overlayRoot,!1)};Qa.prototype.clear=function(){this._overlays={};this._overlayContainers=[];Qg(this._overlayRoot)};Qa.prototype._updateOverlayContainer=function(a){var b=a.element,c=a.html,d=b.x,e=b.y;b.waypoints&&(e=mc(b),d=e.x,e=e.y);R(c.style,{left:d+"px",top:e+"px"});Kb(a.html,"data-container-id",b.id)};Qa.prototype._updateOverlay=function(a){var b=
a.position,c=a.htmlContainer;a=a.element;var d=b.left,e=b.top;void 0!==b.right&&(d=a.waypoints?mc(a).width:a.width,d=-1*b.right+d);void 0!==b.bottom&&(a=a.waypoints?mc(a).height:a.height,e=-1*b.bottom+a);R(c.style,{left:(d||0)+"px",top:(e||0)+"px"})};Qa.prototype._createOverlayContainer=function(a){var b=ta('<div class="djs-overlays" style="position: absolute" />');this._overlayRoot.appendChild(b);a={html:b,element:a,overlays:[]};this._updateOverlayContainer(a);this._overlayContainers.push(a);return a};
Qa.prototype._updateRoot=function(a){var b=a.scale||1;a="matrix("+[b,0,0,b,-1*a.x*b,-1*a.y*b].join()+")";Sn(this._overlayRoot,a)};Qa.prototype._getOverlayContainer=function(a,b){var c=Ha(this._overlayContainers,function(d){return d.element===a});return c||b?c:this._createOverlayContainer(a)};Qa.prototype._addOverlay=function(a){var b=a.id,c=a.element,d=a.html;d.get&&d.constructor.prototype.jquery&&(d=d.get(0));Sa(d)&&(d=ta(d));var e=this._getOverlayContainer(c);c=ta('<div class="djs-overlay" data-overlay-id="'+
b+'" style="position: absolute">');c.appendChild(d);a.type&&wa(c).add("djs-overlay-"+a.type);a.htmlContainer=c;e.overlays.push(a);e.html.appendChild(c);this._overlays[b]=a;this._updateOverlay(a);this._updateOverlayVisibilty(a,this._canvas.viewbox())};Qa.prototype._updateOverlayVisibilty=function(a,b){var c=a.show,d=c&&c.minZoom,e=c&&c.maxZoom,f=a.htmlContainer,g=!0;if(c){if(void 0!==d&&d>b.scale||void 0!==e&&e<b.scale)g=!1;ih(f,g)}this._updateOverlayScale(a,b)};Qa.prototype._updateOverlayScale=function(a,
b){var c=a.scale,d,e=a.htmlContainer,f,g="";!0!==c&&(!1===c?c=d=1:(d=c.min,c=c.max),void 0!==d&&b.scale<d&&(f=(1/b.scale||1)*d),void 0!==c&&b.scale>c&&(f=(1/b.scale||1)*c));void 0!==f&&(g="scale("+f+","+f+")");Sn(e,g)};Qa.prototype._updateOverlaysVisibilty=function(a){var b=this;O(this._overlays,function(c){b._updateOverlayVisibilty(c,a)})};Qa.prototype._init=function(){var a=this._eventBus,b=this;a.on("canvas.viewbox.changing",function(c){b.hide()});a.on("canvas.viewbox.changed",function(c){c=c.viewbox;
b._updateRoot(c);b._updateOverlaysVisibilty(c);b.show()});a.on(["shape.remove","connection.remove"],function(c){c=c.element;var d=b.get({element:c});O(d,function(e){b.remove(e.id)});if(c=b._getOverlayContainer(c))kb(c.html),c=b._overlayContainers.indexOf(c),-1!==c&&b._overlayContainers.splice(c,1)});a.on("element.changed",500,function(c){if(c=b._getOverlayContainer(c.element,!0))O(c.overlays,function(d){b._updateOverlay(d)}),b._updateOverlayContainer(c)});a.on("element.marker.update",function(c){var d=
b._getOverlayContainer(c.element,!0);if(d)wa(d.html)[c.add?"add":"remove"](c.marker)});a.on("diagram.clear",this.clear,this)};var Nm={__init__:["overlays"],overlays:["type",Qa]};rd.$inject=["eventBus","canvas"];rd.prototype._init=function(){var a=this._eventBus,b=this._canvas.getContainer(),c=this._container=ta(rd.HTML_MARKUP);b.appendChild(c);this.nameElement=xa(".dmn-definitions-name",this._container);this.idElement=xa(".dmn-definitions-id",this._container);Mb.bind(c,".dmn-definitions-name, .dmn-definitions-id",
"mousedown",function(d){d.stopPropagation()});a.fire("definitionIdView.create",{html:c})};rd.prototype.update=function(a){a=this._canvas.getRootElement().businessObject;this.nameElement.textContent=a.name;this.idElement.textContent=a.id};rd.HTML_MARKUP='<div class="dmn-definitions"><div class="dmn-definitions-name" title="Definition Name"></div><div class="dmn-definitions-id" title="Definition ID"></div></div>';jh.$inject=["eventBus","canvas"];var vt={__init__:["definitionPropertiesView","definitionPropertiesPaletteAdapter"],
definitionPropertiesView:["type",rd],definitionPropertiesPaletteAdapter:["type",jh]},wt=[{className:"dmn-icon-decision-table",matches:function(a){a=a.businessObject;return P(a,"dmn:Decision")&&a.decisionTable}},{className:"dmn-icon-literal-expression",matches:function(a){a=a.businessObject;return P(a,"dmn:Decision")&&a.literalExpression}}],xt=function(){function a(b,c,d,e){var f=this;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this._injector=b;this._eventBus=c;
this._overlays=d;this._config=e||{enabled:!0};c.on(["shape.added"],function(g){g=g.element;for(var h=0;h<wt.length;h++){var k=wt[h],m=k.matches;k=k.className;m&&m(g)&&f.addOverlay(g,k)}})}Nw(a,[{key:"addOverlay",value:function(b,c){var d=ta('\n      <div class="drill-down-overlay">\n        <span class="'.concat(c,'"></span>\n      </div>\n    ')),e=this._overlays.add(b,{position:{top:2,left:2},html:d});!1!==this._config.enabled&&(wa(d).add("interactive"),this.bindEventListener(b,d,e))}},{key:"bindEventListener",
value:function(b,c,d){var e=this,f=this._eventBus;Mb.bind(this._overlays._overlayRoot,'[data-overlay-id="'+d+'"]',"click",function(){!1!==f.fire("drillDown.click",{element:b})&&e.drillDown(b)})}},{key:"drillDown",value:function(b){var c=this._injector.get("_parent",!1);if(!c)return!1;b=c.getView(b.businessObject);if(!b)return!1;c.open(b);return!0}}]);return a}();xt.$inject=["injector","eventBus","overlays","config.drillDown"];var gD={__depends__:[Nm],__init__:["drillDown"],drillDown:["type",xt]},
Xn='<img width="52" height="52" src="data:image/svg+xml,'+encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 960 960"><path fill="#fff" d="M960 60v839c0 33-27 61-60 61H60c-33 0-60-27-60-60V60C0 27 27 0 60 0h839c34 0 61 27 61 60z"/><path fill="#52b415" d="M217 548a205 205 0 0 0-144 58 202 202 0 0 0-4 286 202 202 0 0 0 285 3 200 200 0 0 0 48-219 203 203 0 0 0-185-128zM752 6a206 206 0 0 0-192 285 206 206 0 0 0 269 111 207 207 0 0 0 111-260A204 204 0 0 0 752 6zM62 0A62 62 0 0 0 0 62v398l60 46a259 259 0 0 1 89-36c5-28 10-57 14-85l99 2 12 85a246 246 0 0 1 88 38l70-52 69 71-52 68c17 30 29 58 35 90l86 14-2 100-86 12a240 240 0 0 1-38 89l43 58h413c37 0 60-27 60-61V407a220 220 0 0 1-44 40l21 85-93 39-45-76a258 258 0 0 1-98 1l-45 76-94-39 22-85a298 298 0 0 1-70-69l-86 22-38-94 76-45a258 258 0 0 1-1-98l-76-45 40-94 85 22a271 271 0 0 1 41-47z"/></svg>')+
'" />',Pw='<div class="bjs-powered-by-lightbox" style="z-index: 1001;position: fixed;top: 0;left: 0;right: 0;bottom: 0"><div class="backdrop" style="width: 100%;height: 100%;background: rgba(0,0,0,0.2)"></div><div class="notice" style="position: absolute;left: 50%;top: 40%;margin: 0 -130px;width: 260px;padding: 10px;background: white;border: solid 1px #AAA;border-radius: 3px;font-family: Helvetica, Arial, sans-serif;font-size: 14px;line-height: 1.2em"><a href="http://bpmn.io" target="_blank" style="float: left; margin-right: 10px">'+
Xn+'</a>Web-based tooling for BPMN, DMN and CMMN diagrams powered by <a href="http://bpmn.io" target="_blank">bpmn.io</a>.</div></div>',de;Ga(Ya,be);Ya.prototype.saveSVG=function(a,b){b||(b=a);var c=this.get("canvas"),d=c.getDefaultLayer();c=xa("defs",c._svg);var e=d.firstChild;for(var f=[];e;)vn(e,f),e=e.nextSibling;e=f.join("");c=c&&c.outerHTML||"";d=d.getBBox();b(null,'<?xml version="1.0" encoding="utf-8"?>\n\x3c!-- created with dmn-js / http://bpmn.io --\x3e\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="'+
d.width+'" height="'+d.height+'" viewBox="'+d.x+" "+d.y+" "+d.width+" "+d.height+'" version="1.1">'+c+e+"</svg>")};Ya.prototype.getModules=function(){return this._modules};Ya.prototype.destroy=function(){be.prototype.destroy.call(this);kb(this._container)};Ya.prototype.on=function(a,b,c,d){return this.get("eventBus").on(a,b,c,d)};Ya.prototype.off=function(a,b){this.get("eventBus").off(a,b)};Ya.prototype._init=function(a,b){var c=b.additionalModules,d=b.canvas;var e=["additionalModules","canvas"];
if(null==b)e={};else{if(null==b)var f={};else{f={};var g=Object.keys(b),h;for(h=0;h<g.length;h++){var k=g[h];0<=e.indexOf(k)||(f[k]=b[k])}}if(Object.getOwnPropertySymbols)for(h=Object.getOwnPropertySymbols(b),k=0;k<h.length;k++)g=h[k],0<=e.indexOf(g)||Object.prototype.propertyIsEnumerable.call(b,g)&&(f[g]=b[g]);e=f}f=b.modules||this.getModules();c=[].concat([{drd:["value",this]}],Wn(f),Wn(c||[]));d=Vn({},e,{canvas:Vn({},d,{container:a}),modules:c});be.call(this,d);b&&b.container&&this.attachTo(b.container)};
Ya.prototype._emit=function(a,b){return this.get("eventBus").fire(a,b)};Ya.prototype._createContainer=function(){return ta('<div class="dmn-drd-container"></div>')};Ya.prototype.open=function(a,b){try{return this._definitions&&this.clear(),this._definitions=a,Aw(this,a,b)}catch(d){var c=d}return b(c)};Ya.prototype.attachTo=function(a){if(!a)throw Error("parentNode required");this.detach();a.appendChild(this._container);this._emit("attach",{});this.get("canvas").resized()};Ya.prototype.detach=function(){var a=
this._container,b=a.parentNode;b&&(this._emit("detach",{}),b.removeChild(a))};Ya.prototype._modules=[fD,Md,fc,Nm,vt,gD];var hD=Math.sign||function(a){return 0<=a?1:-1},ug={min:.2,max:4};Nb.$inject=["config.zoomScroll","eventBus","canvas"];Nb.prototype.scroll=function(a){this._canvas.scroll(a)};Nb.prototype.reset=function(){this._canvas.zoom("fit-viewport")};Nb.prototype.zoom=function(a,b){var c=Yn(ug,20);this._totalDelta+=a;.1<Math.abs(this._totalDelta)&&(this._zoom(a,b,c),this._totalDelta=0)};Nb.prototype._handleWheel=
function(a){if(!Za(a.target,".djs-scrollable",!0)){var b=this._container;a.preventDefault();var c=a.ctrlKey,d=a.shiftKey,e=-1*this._scale;e=c?e*(0===a.deltaMode?.02:.32):e*(0===a.deltaMode?1:16);c?(b=b.getBoundingClientRect(),b={x:a.clientX-b.left,y:a.clientY-b.top},a=Math.sqrt(Math.pow(a.deltaY,2)+Math.pow(a.deltaX,2))*hD(a.deltaY)*e,this.zoom(a,b)):(a=d?{dx:e*a.deltaY,dy:0}:{dx:e*a.deltaX,dy:e*a.deltaY},this.scroll(a))}};Nb.prototype.stepZoom=function(a,b){var c=Yn(ug,10);this._zoom(a,b,c)};Nb.prototype._zoom=
function(a,b,c){var d=this._canvas;a=0<a?1:-1;var e=Math.log(d.zoom())/Math.log(10);d.zoom(Math.max(ug.min,Math.min(ug.max,Math.pow(10,Math.round(e/c)*c+c*a))),b)};Nb.prototype.toggle=function(a){var b=this._container,c=this._handleWheel,d=this._enabled;"undefined"===typeof a&&(a=!d);if(d!==a)U[a?"bind":"unbind"](b,"wheel",c,!1);return this._enabled=a};Nb.prototype._init=function(a){this.toggle(a)};var iD={__init__:["zoomScroll"],zoomScroll:["type",Nb]},Rw=/^djs-cursor-.*$/;$n.$inject=["eventBus",
"canvas"];var jD={__init__:["moveCanvas"],moveCanvas:["type",$n]},Nc=af(function(a){(function(b,c,d,e){function f(C,F,I){return setTimeout(l(C,I),F)}function g(C,F,I){return Array.isArray(C)?(h(C,I[F],I),!0):!1}function h(C,F,I){var M;if(C)if(C.forEach)C.forEach(F,I);else if(C.length!==e)for(M=0;M<C.length;)F.call(I,C[M],M,C),M++;else for(M in C)C.hasOwnProperty(M)&&F.call(I,C[M],M,C)}function k(C,F,I){var M="DEPRECATED METHOD: "+F+"\n"+I+" AT \n";return function(){var T=Error("get-stack-trace");
T=T&&T.stack?T.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace";var Y=b.console&&(b.console.warn||b.console.log);Y&&Y.call(b.console,M,T);return C.apply(this,arguments)}}function m(C,F,I){F=F.prototype;var M=C.prototype=Object.create(F);M.constructor=C;M._super=F;I&&Hc(M,I)}function l(C,F){return function(){return C.apply(F,arguments)}}function r(C,F){return"function"==G(C)?C.apply(F?F[0]||e:e,F):C}function q(C,
F,I){h(w(F),function(M){C.addEventListener(M,I,!1)})}function u(C,F,I){h(w(F),function(M){C.removeEventListener(M,I,!1)})}function v(C,F){for(;C;){if(C==F)return!0;C=C.parentNode}return!1}function w(C){return C.trim().split(/\s+/g)}function n(C,F,I){if(C.indexOf&&!I)return C.indexOf(F);for(var M=0;M<C.length;){if(I&&C[M][I]==F||!I&&C[M]===F)return M;M++}return-1}function p(C){return Array.prototype.slice.call(C,0)}function t(C,F,I){for(var M=[],T=[],Y=0;Y<C.length;){var da=F?C[Y][F]:C[Y];0>n(T,da)&&
M.push(C[Y]);T[Y]=da;Y++}I&&(M=F?M.sort(function(Ea,Ib){return Ea[F]>Ib[F]}):M.sort());return M}function x(C,F){for(var I,M=F[0].toUpperCase()+F.slice(1),T=0;T<ub.length;){I=(I=ub[T])?I+M:F;if(I in C)return I;T++}return e}function A(C){C=C.ownerDocument||C;return C.defaultView||C.parentWindow||b}function z(C,F){var I=this;this.manager=C;this.callback=F;this.element=C.element;this.target=C.options.inputTarget;this.domHandler=function(M){r(C.options.enable,[C])&&I.handler(M)};this.init()}function y(C){var F=
C.options.inputClass;return new (F?F:kD?Q:lD?ka:yt?oa:N)(C,B)}function B(C,F,I){var M=I.pointers.length,T=I.changedPointers.length;var Y=F&1&&0===M-T;I.isFirst=!!Y;I.isFinal=!!(F&12&&0===M-T);Y&&(C.session={});I.eventType=F;F=C.session;M=I.pointers;T=M.length;F.firstInput||(F.firstInput=D(I));1<T&&!F.firstMultiple?F.firstMultiple=D(I):1===T&&(F.firstMultiple=!1);Y=F.firstInput;var da=(T=F.firstMultiple)?T.center:Y.center;var Ea=I.center=H(M);I.timeStamp=Om();I.deltaTime=I.timeStamp-Y.timeStamp;I.angle=
K(da,Ea);I.distance=J(da,Ea);Y=I.center;da=F.offsetDelta||{};Ea=F.prevDelta||{};var Ib=F.prevInput||{};if(1===I.eventType||4===Ib.eventType)Ea=F.prevDelta={x:Ib.deltaX||0,y:Ib.deltaY||0},da=F.offsetDelta={x:Y.x,y:Y.y};I.deltaX=Ea.x+(Y.x-da.x);I.deltaY=Ea.y+(Y.y-da.y);I.offsetDirection=L(I.deltaX,I.deltaY);da=I.deltaTime;Y=I.deltaX/da||0;da=I.deltaY/da||0;I.overallVelocityX=Y;I.overallVelocityY=da;I.overallVelocity=Jb(Y)>Jb(da)?Y:da;T?(Y=T.pointers,Y=J(M[0],M[1],vg)/J(Y[0],Y[1],vg)):Y=1;I.scale=Y;
T?(T=T.pointers,M=K(M[1],M[0],vg)+K(T[1],T[0],vg)):M=0;I.rotation=M;I.maxPointers=F.prevInput?I.pointers.length>F.prevInput.maxPointers?I.pointers.length:F.prevInput.maxPointers:I.pointers.length;da=F.lastInterval||I;M=I.timeStamp-da.timeStamp;8!=I.eventType&&(25<M||da.velocity===e)?(Y=I.deltaX-da.deltaX,da=I.deltaY-da.deltaY,Ea=Y/M||0,Ib=da/M||0,M=Ea,T=Ib,Ea=Jb(Ea)>Jb(Ib)?Ea:Ib,Y=L(Y,da),F.lastInterval=I):(Ea=da.velocity,M=da.velocityX,T=da.velocityY,Y=da.direction);I.velocity=Ea;I.velocityX=M;I.velocityY=
T;I.direction=Y;F=C.element;v(I.srcEvent.target,F)&&(F=I.srcEvent.target);I.target=F;C.emit("hammer.input",I);C.recognize(I);C.session.prevInput=I}function D(C){for(var F=[],I=0;I<C.pointers.length;)F[I]={clientX:Wb(C.pointers[I].clientX),clientY:Wb(C.pointers[I].clientY)},I++;return{timeStamp:Om(),pointers:F,center:H(F),deltaX:C.deltaX,deltaY:C.deltaY}}function H(C){var F=C.length;if(1===F)return{x:Wb(C[0].clientX),y:Wb(C[0].clientY)};for(var I=0,M=0,T=0;T<F;)I+=C[T].clientX,M+=C[T].clientY,T++;
return{x:Wb(I/F),y:Wb(M/F)}}function L(C,F){return C===F?1:Jb(C)>=Jb(F)?0>C?2:4:0>F?8:16}function J(C,F,I){I||(I=zt);var M=F[I[0]]-C[I[0]];C=F[I[1]]-C[I[1]];return Math.sqrt(M*M+C*C)}function K(C,F,I){I||(I=zt);return 180*Math.atan2(F[I[1]]-C[I[1]],F[I[0]]-C[I[0]])/Math.PI}function N(){this.evEl=mD;this.evWin=nD;this.pressed=!1;z.apply(this,arguments)}function Q(){this.evEl=At;this.evWin=Bt;z.apply(this,arguments);this.store=this.manager.session.pointerEvents=[]}function S(){this.evTarget="touchstart";
this.evWin="touchstart touchmove touchend touchcancel";this.started=!1;z.apply(this,arguments)}function ka(){this.evTarget=oD;this.targetIds={};z.apply(this,arguments)}function fa(C,F){var I=p(C.touches),M=this.targetIds;if(F&3&&1===I.length)return M[I[0].identifier]=!0,[I,I];var T=p(C.changedTouches),Y=[],da=this.target;var Ea=I.filter(function(Ib){return v(Ib.target,da)});if(1===F)for(I=0;I<Ea.length;)M[Ea[I].identifier]=!0,I++;for(I=0;I<T.length;)M[T[I].identifier]&&Y.push(T[I]),F&12&&delete M[T[I].identifier],
I++;if(Y.length)return[t(Ea.concat(Y),"identifier",!0),Y]}function oa(){z.apply(this,arguments);var C=l(this.handler,this);this.touch=new ka(this.manager,C);this.mouse=new N(this.manager,C);this.primaryTouch=null;this.lastTouches=[]}function ca(C){C=C.changedPointers[0];if(C.identifier===this.primaryTouch){var F={x:C.clientX,y:C.clientY};this.lastTouches.push(F);var I=this.lastTouches;setTimeout(function(){var M=I.indexOf(F);-1<M&&I.splice(M,1)},2500)}}function Pa(C,F){this.manager=C;this.set(F)}
function Ja(C){if(-1<C.indexOf("none"))return"none";var F=-1<C.indexOf("pan-x"),I=-1<C.indexOf("pan-y");return F&&I?"none":F||I?F?"pan-x":"pan-y":-1<C.indexOf("manipulation")?"manipulation":"auto"}function ra(C){this.options=Hc({},this.defaults,C||{});this.id=pD++;this.manager=null;C=this.options.enable;this.options.enable=C===e?!0:C;this.state=1;this.simultaneous={};this.requireFail=[]}function jb(C){return C&16?"cancel":C&8?"end":C&4?"move":C&2?"start":""}function ib(C){return 16==C?"down":8==C?
"up":2==C?"left":4==C?"right":""}function Ia(C,F){var I=F.manager;return I?I.get(C):C}function va(){ra.apply(this,arguments)}function pa(){va.apply(this,arguments);this.pY=this.pX=null}function ya(){va.apply(this,arguments)}function Wa(){ra.apply(this,arguments);this._input=this._timer=null}function ba(){va.apply(this,arguments)}function Ba(){va.apply(this,arguments)}function Bb(){ra.apply(this,arguments);this.pCenter=this.pTime=!1;this._input=this._timer=null;this.count=0}function tb(C,F){F=F||{};
var I=F.recognizers;F.recognizers=I===e?tb.defaults.preset:I;return new na(C,F)}function na(C,F){this.options=Hc({},tb.defaults,F||{});this.options.inputTarget=this.options.inputTarget||C;this.handlers={};this.session={};this.recognizers=[];this.oldCssProps={};this.element=C;this.input=y(this);this.touchAction=new Pa(this,this.options.touchAction);V(this,!0);h(this.options.recognizers,function(I){var M=this.add(new I[0](I[1]));I[2]&&M.recognizeWith(I[2]);I[3]&&M.requireFailure(I[3])},this)}function V(C,
F){var I=C.element;if(I.style){var M;h(C.options.cssProps,function(T,Y){M=x(I.style,Y);F?(C.oldCssProps[M]=I.style[M],I.style[M]=T):I.style[M]=C.oldCssProps[M]||""});F||(C.oldCssProps={})}}function qa(C,F){var I=c.createEvent("Event");I.initEvent(C,!0,!0);I.gesture=F;F.target.dispatchEvent(I)}var ub=" webkit Moz MS ms o".split(" "),Lc=c.createElement("div"),Wb=Math.round,Jb=Math.abs,Om=Date.now;var Hc="function"!==typeof Object.assign?function(C){if(C===e||null===C)throw new TypeError("Cannot convert undefined or null to object");
for(var F=Object(C),I=1;I<arguments.length;I++){var M=arguments[I];if(M!==e&&null!==M)for(var T in M)M.hasOwnProperty(T)&&(F[T]=M[T])}return F}:Object.assign;var Ct=k(function(C,F,I){for(var M=Object.keys(F),T=0;T<M.length;){if(!I||I&&C[M[T]]===e)C[M[T]]=F[M[T]];T++}return C},"extend","Use `assign`."),qD=k(function(C,F){return Ct(C,F,!0)},"merge","Use `assign`."),pD=1,rD=/mobile|tablet|ip(ad|hone|od)|android/i,yt="ontouchstart"in b,kD=x(b,"PointerEvent")!==e,lD=yt&&rD.test(navigator.userAgent),zt=
["x","y"],vg=["clientX","clientY"];z.prototype={handler:function(){},init:function(){this.evEl&&q(this.element,this.evEl,this.domHandler);this.evTarget&&q(this.target,this.evTarget,this.domHandler);this.evWin&&q(A(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&u(this.element,this.evEl,this.domHandler);this.evTarget&&u(this.target,this.evTarget,this.domHandler);this.evWin&&u(A(this.element),this.evWin,this.domHandler)}};var sD={mousedown:1,mousemove:2,mouseup:4},mD="mousedown",
nD="mousemove mouseup";m(N,z,{handler:function(C){var F=sD[C.type];F&1&&0===C.button&&(this.pressed=!0);F&2&&1!==C.which&&(F=4);this.pressed&&(F&4&&(this.pressed=!1),this.callback(this.manager,F,{pointers:[C],changedPointers:[C],pointerType:"mouse",srcEvent:C}))}});var tD={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},uD={2:"touch",3:"pen",4:"mouse",5:"kinect"},At="pointerdown",Bt="pointermove pointerup pointercancel";b.MSPointerEvent&&!b.PointerEvent&&(At="MSPointerDown",
Bt="MSPointerMove MSPointerUp MSPointerCancel");m(Q,z,{handler:function(C){var F=this.store,I=!1,M=C.type.toLowerCase().replace("ms","");M=tD[M];var T=uD[C.pointerType]||C.pointerType,Y="touch"==T,da=n(F,C.pointerId,"pointerId");M&1&&(0===C.button||Y)?0>da&&(F.push(C),da=F.length-1):M&12&&(I=!0);0>da||(F[da]=C,this.callback(this.manager,M,{pointers:F,changedPointers:[C],pointerType:T,srcEvent:C}),I&&F.splice(da,1))}});var vD={touchstart:1,touchmove:2,touchend:4,touchcancel:8};m(S,z,{handler:function(C){var F=
vD[C.type];1===F&&(this.started=!0);if(this.started){var I=p(C.touches);var M=p(C.changedTouches);F&12&&(I=t(I.concat(M),"identifier",!0));I=[I,M];F&12&&0===I[0].length-I[1].length&&(this.started=!1);this.callback(this.manager,F,{pointers:I[0],changedPointers:I[1],pointerType:"touch",srcEvent:C})}}});var wD={touchstart:1,touchmove:2,touchend:4,touchcancel:8},oD="touchstart touchmove touchend touchcancel";m(ka,z,{handler:function(C){var F=wD[C.type],I=fa.call(this,C,F);I&&this.callback(this.manager,
F,{pointers:I[0],changedPointers:I[1],pointerType:"touch",srcEvent:C})}});m(oa,z,{handler:function(C,F,I){var M="mouse"==I.pointerType;if(!(M&&I.sourceCapabilities&&I.sourceCapabilities.firesTouchEvents)){if("touch"==I.pointerType)F&1?(this.primaryTouch=I.changedPointers[0].identifier,ca.call(this,I)):F&12&&ca.call(this,I);else{if(M)a:{M=I.srcEvent.clientX;for(var T=I.srcEvent.clientY,Y=0;Y<this.lastTouches.length;Y++){var da=this.lastTouches[Y],Ea=Math.abs(T-da.y);if(25>=Math.abs(M-da.x)&&25>=Ea){M=
!0;break a}}M=!1}if(M)return}this.callback(C,F,I)}},destroy:function(){this.touch.destroy();this.mouse.destroy()}});var Dt=x(Lc.style,"touchAction"),Et=Dt!==e,wg=function(){if(!Et)return!1;var C={},F=b.CSS&&b.CSS.supports;"auto;manipulation;pan-y;pan-x;pan-x pan-y;none".split(";").forEach(function(I){C[I]=F?b.CSS.supports("touch-action",I):!0});return C}();Pa.prototype={set:function(C){"compute"==C&&(C=this.compute());Et&&this.manager.element.style&&wg[C]&&(this.manager.element.style[Dt]=C);this.actions=
C.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var C=[];h(this.manager.recognizers,function(F){r(F.options.enable,[F])&&(C=C.concat(F.getTouchAction()))});return Ja(C.join(" "))},preventDefaults:function(C){var F=C.srcEvent,I=C.offsetDirection;if(this.manager.session.prevented)F.preventDefault();else{var M=this.actions,T=-1<M.indexOf("none")&&!wg.none,Y=-1<M.indexOf("pan-y")&&!wg["pan-y"];M=-1<M.indexOf("pan-x")&&!wg["pan-x"];if(T){var da=
2>C.distance,Ea=250>C.deltaTime;if(1===C.pointers.length&&da&&Ea)return}if(!M||!Y)if(T||Y&&I&6||M&&I&24)return this.preventSrc(F)}},preventSrc:function(C){this.manager.session.prevented=!0;C.preventDefault()}};ra.prototype={defaults:{},set:function(C){Hc(this.options,C);this.manager&&this.manager.touchAction.update();return this},recognizeWith:function(C){if(g(C,"recognizeWith",this))return this;var F=this.simultaneous;C=Ia(C,this);F[C.id]||(F[C.id]=C,C.recognizeWith(this));return this},dropRecognizeWith:function(C){if(g(C,
"dropRecognizeWith",this))return this;C=Ia(C,this);delete this.simultaneous[C.id];return this},requireFailure:function(C){if(g(C,"requireFailure",this))return this;var F=this.requireFail;C=Ia(C,this);-1===n(F,C)&&(F.push(C),C.requireFailure(this));return this},dropRequireFailure:function(C){if(g(C,"dropRequireFailure",this))return this;C=Ia(C,this);C=n(this.requireFail,C);-1<C&&this.requireFail.splice(C,1);return this},hasRequireFailures:function(){return 0<this.requireFail.length},canRecognizeWith:function(C){return!!this.simultaneous[C.id]},
emit:function(C){function F(T){I.manager.emit(T,C)}var I=this,M=this.state;8>M&&F(I.options.event+jb(M));F(I.options.event);C.additionalEvent&&F(C.additionalEvent);8<=M&&F(I.options.event+jb(M))},tryEmit:function(C){if(this.canEmit())return this.emit(C);this.state=32},canEmit:function(){for(var C=0;C<this.requireFail.length;){if(!(this.requireFail[C].state&33))return!1;C++}return!0},recognize:function(C){C=Hc({},C);r(this.options.enable,[this,C])?(this.state&56&&(this.state=1),this.state=this.process(C),
this.state&30&&this.tryEmit(C)):(this.reset(),this.state=32)},process:function(C){},getTouchAction:function(){},reset:function(){}};m(va,ra,{defaults:{pointers:1},attrTest:function(C){var F=this.options.pointers;return 0===F||C.pointers.length===F},process:function(C){var F=this.state,I=C.eventType,M=F&6;C=this.attrTest(C);return M&&(I&8||!C)?F|16:M||C?I&4?F|8:F&2?F|4:2:32}});m(pa,va,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var C=this.options.direction,
F=[];C&6&&F.push("pan-y");C&24&&F.push("pan-x");return F},directionTest:function(C){var F=this.options,I=!0,M=C.distance,T=C.direction,Y=C.deltaX,da=C.deltaY;T&F.direction||(F.direction&6?(T=0===Y?1:0>Y?2:4,I=Y!=this.pX,M=Math.abs(C.deltaX)):(T=0===da?1:0>da?8:16,I=da!=this.pY,M=Math.abs(C.deltaY)));C.direction=T;return I&&M>F.threshold&&T&F.direction},attrTest:function(C){return va.prototype.attrTest.call(this,C)&&(this.state&2||!(this.state&2)&&this.directionTest(C))},emit:function(C){this.pX=C.deltaX;
this.pY=C.deltaY;var F=ib(C.direction);F&&(C.additionalEvent=this.options.event+F);this._super.emit.call(this,C)}});m(ya,va,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return["none"]},attrTest:function(C){return this._super.attrTest.call(this,C)&&(Math.abs(C.scale-1)>this.options.threshold||this.state&2)},emit:function(C){1!==C.scale&&(C.additionalEvent=this.options.event+(1>C.scale?"in":"out"));this._super.emit.call(this,C)}});m(Wa,ra,{defaults:{event:"press",pointers:1,
time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(C){var F=this.options,I=C.pointers.length===F.pointers,M=C.distance<F.threshold,T=C.deltaTime>F.time;this._input=C;if(!M||!I||C.eventType&12&&!T)this.reset();else if(C.eventType&1)this.reset(),this._timer=f(function(){this.state=8;this.tryEmit()},F.time,this);else if(C.eventType&4)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(C){8===this.state&&(C&&C.eventType&4?this.manager.emit(this.options.event+
"up",C):(this._input.timeStamp=Om(),this.manager.emit(this.options.event,this._input)))}});m(ba,va,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return["none"]},attrTest:function(C){return this._super.attrTest.call(this,C)&&(Math.abs(C.rotation)>this.options.threshold||this.state&2)}});m(Ba,va,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return pa.prototype.getTouchAction.call(this)},attrTest:function(C){var F=this.options.direction;
if(F&30)var I=C.overallVelocity;else F&6?I=C.overallVelocityX:F&24&&(I=C.overallVelocityY);return this._super.attrTest.call(this,C)&&F&C.offsetDirection&&C.distance>this.options.threshold&&C.maxPointers==this.options.pointers&&Jb(I)>this.options.velocity&&C.eventType&4},emit:function(C){var F=ib(C.offsetDirection);F&&this.manager.emit(this.options.event+F,C);this.manager.emit(this.options.event,C)}});m(Bb,ra,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},
getTouchAction:function(){return["manipulation"]},process:function(C){var F=this.options,I=C.pointers.length===F.pointers,M=C.distance<F.threshold,T=C.deltaTime<F.time;this.reset();if(C.eventType&1&&0===this.count)return this.failTimeout();if(M&&T&&I){if(4!=C.eventType)return this.failTimeout();I=this.pTime?C.timeStamp-this.pTime<F.interval:!0;M=!this.pCenter||J(this.pCenter,C.center)<F.posThreshold;this.pTime=C.timeStamp;this.pCenter=C.center;this.count=M&&I?this.count+1:1;this._input=C;if(0===this.count%
F.taps)return this.hasRequireFailures()?(this._timer=f(function(){this.state=8;this.tryEmit()},F.interval,this),2):8}return 32},failTimeout:function(){this._timer=f(function(){this.state=32},this.options.interval,this);return 32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});tb.VERSION="2.0.7";tb.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,
preset:[[ba,{enable:!1}],[ya,{enable:!1},["rotate"]],[Ba,{direction:6}],[pa,{direction:6},["swipe"]],[Bb],[Bb,{event:"doubletap",taps:2},["tap"]],[Wa]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};na.prototype={set:function(C){Hc(this.options,C);C.touchAction&&this.touchAction.update();C.inputTarget&&(this.input.destroy(),this.input.target=C.inputTarget,this.input.init());return this},stop:function(C){this.session.stopped=
C?2:1},recognize:function(C){var F=this.session;if(!F.stopped){this.touchAction.preventDefaults(C);var I=this.recognizers,M=F.curRecognizer;if(!M||M&&M.state&8)M=F.curRecognizer=null;for(var T=0;T<I.length;){var Y=I[T];2===F.stopped||M&&Y!=M&&!Y.canRecognizeWith(M)?Y.reset():Y.recognize(C);!M&&Y.state&14&&(M=F.curRecognizer=Y);T++}}},get:function(C){if(C instanceof ra)return C;for(var F=this.recognizers,I=0;I<F.length;I++)if(F[I].options.event==C)return F[I];return null},add:function(C){if(g(C,"add",
this))return this;var F=this.get(C.options.event);F&&this.remove(F);this.recognizers.push(C);C.manager=this;this.touchAction.update();return C},remove:function(C){if(g(C,"remove",this))return this;if(C=this.get(C)){var F=this.recognizers;C=n(F,C);-1!==C&&(F.splice(C,1),this.touchAction.update())}return this},on:function(C,F){if(C!==e&&F!==e){var I=this.handlers;h(w(C),function(M){I[M]=I[M]||[];I[M].push(F)});return this}},off:function(C,F){if(C!==e){var I=this.handlers;h(w(C),function(M){F?I[M]&&
I[M].splice(n(I[M],F),1):delete I[M]});return this}},emit:function(C,F){this.options.domEvents&&qa(C,F);var I=this.handlers[C]&&this.handlers[C].slice();if(I&&I.length){F.type=C;F.preventDefault=function(){F.srcEvent.preventDefault()};for(var M=0;M<I.length;)I[M](F),M++}},destroy:function(){this.element&&V(this,!1);this.handlers={};this.session={};this.input.destroy();this.element=null}};Hc(tb,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,
STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:24,DIRECTION_ALL:30,Manager:na,Input:z,TouchAction:Pa,TouchInput:ka,MouseInput:N,PointerEventInput:Q,TouchMouseInput:oa,SingleTouchInput:S,Recognizer:ra,AttrRecognizer:va,Tap:Bb,Pan:pa,Swipe:Ba,Pinch:ya,Rotate:ba,Press:Wa,on:q,off:u,each:h,merge:qD,extend:Ct,assign:Hc,inherit:m,bindFn:l,prefixed:x});("undefined"!==typeof b?
b:"undefined"!==typeof self?self:{}).Hammer=tb;"function"===typeof e&&e.amd?e(function(){return tb}):a.exports?a.exports=tb:b[d]=tb})(window,document,"Hammer")}),ao="mousedown mouseup mouseover mouseout click dblclick".split(" ");bo.$inject="injector canvas eventBus elementRegistry interactionEvents touchFix".split(" ");mh.$inject=["canvas","eventBus"];mh.prototype.addBBoxMarker=function(a){var b={fill:"none","class":"outer-bound-marker"},c=ea("rect");W(c,{x:-1E4,y:1E4,width:10,height:10});W(c,b);
ha(a,c);c=ea("rect");W(c,{x:1E4,y:1E4,width:10,height:10});W(c,b);ha(a,c)};var xD={__depends__:[{__depends__:[Re],__init__:["touchInteractionEvents"],touchInteractionEvents:["type",bo],touchFix:["type",mh]}]};Ga(td,Ya);td.prototype._navigationModules=[iD,jD,xD];td.prototype._modules=[].concat(td.prototype._modules,td.prototype._navigationModules);var yD={left:eo,center:eo,right:function(a){return a.x+a.width},top:co,middle:co,bottom:function(a){return a.y+a.height}};ud.$inject=["modeling"];ud.prototype._getOrientationDetails=
function(a){var b="x",c="width";-1!==["top","bottom","middle"].indexOf(a)&&(b="y",c="height");return{axis:b,dimension:c}};ud.prototype._isType=function(a,b){return-1!==b.indexOf(a)};ud.prototype._alignmentPosition=function(a,b){var c=this._getOrientationDetails(a),d=c.axis,e=c.dimension;c={};var f={},g=!1;if(this._isType(a,["left","top"]))c[a]=b[0][d];else if(this._isType(a,["right","bottom"])){var h=b&&b[b.length-1];c[a]=h[d]+h[e]}else if(this._isType(a,["center","middle"])){O(b,function(m){var l=
m[d]+Math.round(m[e]/2);f[l]?f[l].elements.push(m):f[l]={elements:[m],center:l}});var k=hd(f,function(m){1<m.elements.length&&(g=!0);return m.elements.length});if(g)return c[a]=(k&&k[k.length-1]).center,c;k=b[0];h=(b=hd(b,function(m){return m[d]+m[e]}))&&b[b.length-1];c[a]=Math.round((k[d]+h[d]+h[e])/2)}return c};ud.prototype.trigger=function(a,b){var c=this._modeling,d=hb(a,function(f){return!(f.waypoints||f.host||f.labelTarget)});d=hd(d,yD[b]);var e=this._alignmentPosition(b,d);c.alignElements(d,
e)};var zD={__init__:["alignElements"],alignElements:["type",ud]},vd=Math.round;fo.$inject=["eventBus","canvas","selection","elementRegistry"];go.$inject=["eventBus","dragging","elementRegistry"];var Nd={__init__:["hoverFix"],__depends__:[fc],dragging:["type",fo],hoverFix:["type",go]};wd.$inject=["config.autoScroll","eventBus","canvas"];wd.prototype.startScroll=function(a){var b=this._canvas,c=this._opts,d=this,e=b.getContainer().getBoundingClientRect();e=[a.x,a.y,e.width-a.x,e.height-a.y];this.stopScroll();
for(var f=0,g=0,h=0;4>h;h++)Sw(e[h],c.scrollThresholdOut[h],c.scrollThresholdIn[h])&&(0===h?f=c.scrollStep:1==h?g=c.scrollStep:2==h?f=-c.scrollStep:3==h&&(g=-c.scrollStep));if(0!==f||0!==g)b.scroll({dx:f,dy:g}),this._scrolling=setTimeout(function(){d.startScroll(a)},c.scrollRepeatTimeout)};wd.prototype.stopScroll=function(){clearTimeout(this._scrolling)};wd.prototype.setOptions=function(a){this._opts=R({},this._opts,a)};wd.prototype._toBorderPoint=function(a){var b=this._canvas._container.getBoundingClientRect();
a=rc(a.originalEvent);return{x:a.x-b.left,y:a.y-b.top}};var AD={__depends__:[Nd],__init__:["autoScroll"],autoScroll:["type",wd]};nh.$inject=["injector"];nh.prototype.allowed=function(a,b){var c=!0,d=this._commandStack;d&&(c=d.canExecute(a,b));return void 0===c?!0:c};var Od={__init__:["rules"],rules:["type",nh]},Zw=/,?([a-z]),?/gi,ro=parseFloat,Fa=Math,tc=Fa.PI,Ob=Fa.min,Pb=Fa.max,ko=Fa.pow,uc=Fa.abs,Xw=/([a-z])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?[\s]*,?[\s]*)+)/ig,Yw=/(-?\d*\.?\d*(?:e[-+]?\\d+)?)[\s]*,?[\s]*/ig,
jf=Array.isArray||function(a){return a instanceof Array},so=function(a,b,c){a=qo(a);b=qo(b);for(var d,e,f,g,h,k,m,l,r,q,u=c?0:[],v=0,w=a.length;v<w;v++)if(r=a[v],"M"==r[0])d=h=r[1],e=k=r[2];else{"C"==r[0]?(r=[d,e].concat(r.slice(1)),d=r[6],e=r[7]):(r=[d,e,d,e,h,k,h,k],d=h,e=k);for(var n=0,p=b.length;n<p;n++)if(q=b[n],"M"==q[0])f=m=q[1],g=l=q[2];else{"C"==q[0]?(q=[f,g].concat(q.slice(1)),f=q[6],g=q[7]):(q=[f,g,f,g,m,l,m,l],f=m,g=l);var t=r,x=q;var A=c;var z=lo(t),y=lo(x);z=ph(z);y=ph(y);if(sc(y,z.x,
z.y)||sc(y,z.x2,z.y)||sc(y,z.x,z.y2)||sc(y,z.x2,z.y2)||sc(z,y.x,y.y)||sc(z,y.x2,y.y)||sc(z,y.x,y.y2)||sc(z,y.x2,y.y2)||(z.x<y.x2&&z.x>y.x||y.x<z.x2&&y.x>z.x)&&(z.y<y.y2&&z.y>y.y||y.y<z.y2&&y.y>z.y)){y=mo.apply(0,t);z=mo.apply(0,x);y=no(t)?1:~~(y/5)||1;z=no(x)?1:~~(z/5)||1;for(var B=[],D=[],H={},L=A?0:[],J=0;J<y+1;J++){var K=jo.apply(0,t.concat(J/y));B.push({x:K.x,y:K.y,t:J/y})}for(J=0;J<z+1;J++)K=jo.apply(0,x.concat(J/z)),D.push({x:K.x,y:K.y,t:J/z});for(J=0;J<y;J++)for(t=0;t<z;t++){var N=B[J],Q=B[J+
1];x=D[t];K=D[t+1];var S=.01>uc(Q.x-N.x)?"y":"x",ka=.01>uc(K.x-x.x)?"y":"x";b:{var fa=N.x;var oa=N.y,ca=Q.x,Pa=Q.y,Ja=x.x,ra=x.y,jb=K.x,ib=K.y;if(!(Pb(fa,ca)<Ob(Ja,jb)||Ob(fa,ca)>Pb(Ja,jb)||Pb(oa,Pa)<Ob(ra,ib)||Ob(oa,Pa)>Pb(ra,ib))){var Ia=(fa*Pa-oa*ca)*(ra-ib)-(oa-Pa)*(Ja*ib-ra*jb),va=(fa-ca)*(ra-ib)-(oa-Pa)*(Ja-jb);if(va){var pa=Math.round(((fa*Pa-oa*ca)*(Ja-jb)-(fa-ca)*(Ja*ib-ra*jb))/va*1E11)/1E11;Ia=Math.round(Ia/va*1E11)/1E11;va=+pa.toFixed(2);var ya=+Ia.toFixed(2);if(!(va<+Ob(fa,ca).toFixed(2)||
va>+Pb(fa,ca).toFixed(2)||va<+Ob(Ja,jb).toFixed(2)||va>+Pb(Ja,jb).toFixed(2)||ya<+Ob(oa,Pa).toFixed(2)||ya>+Pb(oa,Pa).toFixed(2)||ya<+Ob(ra,ib).toFixed(2)||ya>+Pb(ra,ib).toFixed(2))){fa={x:pa,y:Ia};break b}}}fa=void 0}fa&&(oa=fa.x.toFixed(9)+"#"+fa.y.toFixed(9),H[oa]||(H[oa]=!0,N=N.t+uc((fa[S]-N[S])/(Q[S]-N[S]))*(Q.t-N.t),x=x.t+uc((fa[ka]-x[ka])/(K[ka]-x[ka]))*(K.t-x.t),0<=N&&1>=N&&0<=x&&1>=x&&(A?L++:L.push({x:fa.x,y:fa.y,t1:N,t2:x}))))}A=L}else A=A?0:[];if(c)u+=A;else{y=0;for(z=A.length;y<z;y++)A[y].segment1=
v,A[y].segment2=n,A[y].bez1=r,A[y].bez2=q;u=u.concat(A)}}}return u},mf=Math.round,dx=Math.max,sh=af(function(a,b){(function(c,d){a.exports=d(c)})(YC,function(c){if(c.CSS&&c.CSS.escape)return c.CSS.escape;var d=function(e){if(0==arguments.length)throw new TypeError("`CSS.escape` requires an argument.");for(var f=String(e),g=f.length,h=-1,k,m="",l=f.charCodeAt(0);++h<g;)k=f.charCodeAt(h),m=0==k?m+"\ufffd":1<=k&&31>=k||127==k||0==h&&48<=k&&57>=k||1==h&&48<=k&&57>=k&&45==l?m+("\\"+k.toString(16)+" "):
0==h&&1==g&&45==k?m+("\\"+f.charAt(h)):128<=k||45==k||95==k||48<=k&&57>=k||65<=k&&90>=k||97<=k&&122>=k?m+f.charAt(h):m+("\\"+f.charAt(h));return m};c.CSS||(c.CSS={});return c.CSS.escape=d})});uo.$inject=["eventBus","canvas","interactionEvents","bendpointMove","connectionSegmentMove"];var wo=Math.round;vh.$inject="injector eventBus canvas dragging rules modeling".split(" ");vh.prototype.cropWaypoints=function(a,b){var c=this._injector.get("connectionDocking",!1);if(!c)return b;var d=a.waypoints;a.waypoints=
b;a.waypoints=c.getCroppedWaypoints(a);b=a.waypoints;a.waypoints=d;return b};xo.$inject=["bendpointMove","injector","eventBus","canvas"];zo.$inject="injector eventBus canvas dragging graphicsFactory modeling".split(" ");var BD=Math.abs,Ao=Math.round,ex=Math.abs,Co=Math.round;Bo.$inject=["eventBus"];var CD={__depends__:[Nd,Od],__init__:["bendpoints","bendpointSnapping","bendpointMovePreview"],bendpoints:["type",uo],bendpointMove:["type",vh],bendpointMovePreview:["type",xo],connectionSegmentMove:["type",
zo],bendpointSnapping:["type",Bo]};wb.$inject=["config.contextPad","eventBus","overlays"];wb.prototype._init=function(){var a=this._eventBus,b=this;a.on("selection.changed",function(c){c=c.newSelection;1===c.length?b.open(c[0]):b.close()});a.on("elements.delete",function(c){O(c.elements,function(d){b.isOpen(d)&&b.close()})});a.on("element.changed",function(c){c=c.element;var d=b._current;d&&d.element===c&&b.open(c,!0)})};wb.prototype.registerProvider=function(a,b){b||(b=a,a=1E3);this._eventBus.on("contextPad.getProviders",
a,function(c){c.providers.push(b)})};wb.prototype.getEntries=function(a){var b=this._getProviders(),c={};O(b,function(d){d=d.getContextPadEntries(a);Na(d)?c=d(c):O(d,function(e,f){c[f]=e})});return c};wb.prototype.trigger=function(a,b,c){var d=this._current.element,e=this._current.entries;var f=b.delegateTarget||b.target;if(!f)return b.preventDefault();e=e[Kb(f,"data-action")].action;f=b.originalEvent||b;if(Na(e)){if("click"===a)return e(f,d,c)}else if(e[a])return e[a](f,d,c);b.preventDefault()};
wb.prototype.open=function(a,b){if(b||!this.isOpen(a))this.close(),this._updateAndOpen(a)};wb.prototype._getProviders=function(a){a=this._eventBus.createEvent({type:"contextPad.getProviders",providers:[]});this._eventBus.fire(a);return a.providers};wb.prototype._updateAndOpen=function(a){var b=this.getEntries(a),c=this.getPad(a),d=c.html;O(b,function(e,f){var g=e.group||"default",h=ta(e.html||'<div class="entry" draggable="true"></div>');Kb(h,"data-action",f);var k=xa("[data-group="+g+"]",d);k||(k=
ta('<div class="group" data-group="'+g+'"></div>'),d.appendChild(k));k.appendChild(h);e.className&&fx(h,e.className);e.title&&Kb(h,"title",e.title);e.imageUrl&&h.appendChild(ta('<img src="'+e.imageUrl+'">'))});wa(d).add("open");this._current={element:a,pad:c,entries:b};this._eventBus.fire("contextPad.open",{current:this._current})};wb.prototype.getPad=function(a){if(this.isOpen())return this._current.pad;var b=this,c=this._overlays,d=ta('<div class="djs-context-pad"></div>'),e=R({html:d},this._overlaysConfig);
Mb.bind(d,".entry","click",function(f){b.trigger("click",f)});Mb.bind(d,".entry","dragstart",function(f){b.trigger("dragstart",f)});U.bind(d,"mousedown",function(f){f.stopPropagation()});this._overlayId=c.add(a,"context-pad",e);c=c.get(this._overlayId);this._eventBus.fire("contextPad.create",{element:a,pad:c});return c};wb.prototype.close=function(){this.isOpen()&&(this._overlays.remove(this._overlayId),this._overlayId=null,this._eventBus.fire("contextPad.close",{current:this._current}),this._current=
null)};wb.prototype.isOpen=function(a){return!!this._current&&(a?this._current.element===a:!0)};var DD={__depends__:[Re,Nm],contextPad:["type",wb]};Do.$inject=["eventBus","dragging","modeling","rules"];Eo.$inject=["injector","eventBus","canvas"];var ED={__depends__:[fc,Od,Nd],__init__:["connectPreview"],connect:["type",Do],connectPreview:["type",Eo]},FD=["marker-start","marker-mid","marker-end"],GD="circle ellipse line path polygon polyline rect".split(" ");Pc.$inject=["elementRegistry","eventBus",
"canvas","styles"];Pc.prototype.getGfx=function(a){return this._elementRegistry.getGraphics(a)};Pc.prototype.addDragger=function(a,b,c){c=c||this.getGfx(a);a=c.cloneNode(!0);c=c.getBoundingClientRect();this._cloneMarkers(a.childNodes[0]);W(a,this._styles.cls("djs-dragger",[],{x:c.top,y:c.left}));ha(b,a);return a};Pc.prototype.addFrame=function(a,b){var c=ea("rect",{"class":"djs-resize-overlay",width:a.width,height:a.height,x:a.x,y:a.y});ha(b,c);return c};Pc.prototype._cloneMarkers=function(a){var b=
this;if(a.childNodes)for(var c=0;c<a.childNodes.length;c++)b._cloneMarkers(a.childNodes[c]);-1!==GD.indexOf(a.nodeName)&&FD.forEach(function(d){if(W(a,d)){var e=b._canvas.getContainer();var f=W(a,d).match(/url\(['"]?#([^'"]*)['"]?\)/)[1];e=xa("marker#"+f,e||document);b._cloneMarker(a,e,d)}})};Pc.prototype._cloneMarker=function(a,b,c){var d=b.id,e=this._clonedMarkers[d];e||(e=b.cloneNode(!0),e.id=d+"-clone",za(e).add("djs-dragger").add("djs-dragger-marker"),this._clonedMarkers[d]=e,b=xa("defs",this._canvas._svg),
b||(b=ea("defs"),ha(this._canvas._svg,b)),ha(b,e));W(a,c,"url(#"+this._clonedMarkers[d].id+")")};var Ft={__init__:["previewSupport"],previewSupport:["type",Pc]};Fo.$inject=["canvas","dragging","eventBus","modeling","rules"];Ho.$inject=["canvas","eventBus","graphicsFactory","previewSupport","styles"];var Gt={__depends__:[Nd,Ft,Od,fc],__init__:["create","createPreview"],create:["type",Fo],createPreview:["type",Ho]},Ht=["contextPad.close","canvas.viewbox.changing","commandStack.changed"];Ka.$inject=
["config.popupMenu","eventBus","canvas"];Ka.prototype.registerProvider=function(a,b,c){c||(c=b,b=1E3);this._eventBus.on("popupMenu.getProviders."+a,b,function(d){d.providers.push(c)})};Ka.prototype.isEmpty=function(a,b){if(!a)throw Error("element parameter is missing");if(!b)throw Error("providerId parameter is missing");var c=this._getProviders(b);if(!c)return!0;var d=this._getEntries(a,c);c=this._getHeaderEntries(a,c);d=0<ic(d).length;c=c&&0<ic(c).length;return!d&&!c};Ka.prototype.open=function(a,
b,c){var d=this._getProviders(b);if(!a)throw Error("Element is missing");if(!d||!d.length)throw Error("No registered providers for: "+b);if(!c)throw Error("the position argument is missing");this.isOpen()&&this.close();this._emit("open");b=this._current={className:b,element:a,position:c};var e=this._getEntries(a,d);a=this._getHeaderEntries(a,d);b.entries=R({},e,a);b.container=this._createContainer();ic(a).length&&b.container.appendChild(this._createEntries(a,"djs-popup-header"));ic(e).length&&b.container.appendChild(this._createEntries(e,
"djs-popup-body"));a=this._canvas.getContainer();this._attachContainer(b.container,a,c.cursor);this._bindAutoClose()};Ka.prototype.close=function(){this.isOpen()&&(this._emit("close"),this._unbindAutoClose(),kb(this._current.container),this._current.container=null)};Ka.prototype.isOpen=function(){return!!this._current.container};Ka.prototype.trigger=function(a){a.preventDefault();var b=Kb(a.delegateTarget||a.target,"data-id");b=this._getEntry(b);if(b.action)return b.action.call(null,a,b)};Ka.prototype._getProviders=
function(a){a=this._eventBus.createEvent({type:"popupMenu.getProviders."+a,providers:[]});this._eventBus.fire(a);return a.providers};Ka.prototype._getEntries=function(a,b){var c={};O(b,function(d){d.getPopupMenuEntries?(d=d.getPopupMenuEntries(a),Na(d)?c=d(c):O(d,function(e,f){c[f]=e})):O(d.getEntries(a),function(e){var f=e.id;if(!f)throw Error("every entry must have the id property set");c[f]=Wm(e,["id"])})});return c};Ka.prototype._getHeaderEntries=function(a,b){var c={};O(b,function(d){d.getPopupMenuHeaderEntries?
(d=d.getPopupMenuHeaderEntries(a),Na(d)?c=d(c):O(d,function(e,f){c[f]=e})):d.getHeaderEntries&&O(d.getHeaderEntries(a),function(e){var f=e.id;if(!f)throw Error("every entry must have the id property set");c[f]=Wm(e,["id"])})});return c};Ka.prototype._getEntry=function(a){a=this._current.entries[a];if(!a)throw Error("entry not found");return a};Ka.prototype._emit=function(a){this._eventBus.fire("popupMenu."+a)};Ka.prototype._createContainer=function(){var a=ta('<div class="djs-popup">'),b=this._current.position,
c=this._current.className;R(a.style,{position:"absolute",left:b.x+"px",top:b.y+"px",visibility:"hidden"});wa(a).add(c);return a};Ka.prototype._attachContainer=function(a,b,c){var d=this;Mb.bind(a,".entry","click",function(e){d.trigger(e)});this._updateScale(a);b.appendChild(a);c&&this._assureIsInbounds(a,c)};Ka.prototype._updateScale=function(a){var b=this._canvas.zoom(),c=this._config.scale,d,e=b;!0!==c&&(!1===c?c=d=1:(d=c.min,c=c.max),void 0!==d&&b<d&&(e=d),void 0!==c&&b>c&&(e=c));gx(a,"scale("+
e+")")};Ka.prototype._assureIsInbounds=function(a,b){var c=this._canvas._container.getBoundingClientRect(),d=a.offsetTop,e=a.scrollWidth,f=a.scrollHeight,g,h,k=b.x-c.left,m=b.y-c.top;a.offsetLeft+e>c.width&&(g=!0);d+f>c.height&&(h=!0);if(g&&h){var l=k-e+"px";var r=m-f+"px"}else g?(l=k-e+"px",r=m+"px"):h&&m<f?(l=k+"px",r="10px"):h&&(l=k+"px",r=m-f+"px");R(a.style,{left:l,top:r},{visibility:"visible","z-index":1E3})};Ka.prototype._createEntries=function(a,b){var c=ta("<div>"),d=this;wa(c).add(b);O(a,
function(e,f){var g=d._createEntry(e,f);c.appendChild(g)});return c};Ka.prototype._createEntry=function(a,b){var c=ta("<div>"),d=wa(c);d.add("entry");a.className&&a.className.split(" ").forEach(function(f){d.add(f)});Kb(c,"data-id",b);if(a.label){var e=ta("<span>");e.textContent=a.label;c.appendChild(e)}a.imageUrl&&c.appendChild(ta('<img src="'+a.imageUrl+'" />'));!0===a.active&&d.add("active");!0===a.disabled&&d.add("disabled");a.title&&(c.title=a.title);return c};Ka.prototype._bindAutoClose=function(){this._eventBus.once(Ht,
this.close,this)};Ka.prototype._unbindAutoClose=function(){this._eventBus.off(Ht,this.close,this)};var HD={__init__:["popupMenu"],popupMenu:["type",Ka]},It=Math.round;wh.$inject=["modeling"];wh.prototype.replaceElement=function(a,b,c){if(a.waypoints)return null;var d=this._modeling,e=b.width||a.width,f=b.height||a.height,g=b.y||a.y,h=It((b.x||a.x)+e/2);g=It(g+f/2);return d.replaceShape(a,R({},b,{x:h,y:g,width:e,height:f}),c)};var ID={__init__:["replace"],replace:["type",wh]};Io.$inject=["drdFactory",
"replace","selection","modeling"];var JD={__depends__:[ID,fc],drdReplace:["type",Io]},KD=[{label:"Empty",actionName:"replace-with-empty-decision",className:"dmn-icon-clear",target:{type:"dmn:Decision",table:!1,expression:!1}},{label:"Decision Table",actionName:"replace-with-decision-table",className:"dmn-icon-decision-table",target:{type:"dmn:Decision",table:!0,expression:!1}},{label:"Literal Expression",actionName:"replace-with-literal-expression",className:"dmn-icon-literal-expression",target:{type:"dmn:Decision",
table:!1,expression:!0}}];Qc.$inject="popupMenu modeling moddle drdReplace rules translate".split(" ");Qc.prototype.register=function(){this._popupMenu.registerProvider("dmn-replace",this)};Qc.prototype.getEntries=function(a){var b=a.businessObject;if(!this._rules.allowed("shape.replace",{element:a}))return[];if(P(b,"dmn:Decision")){var c=hb(KD,function(d){var e="replace-with-decision-table"===d.actionName&&!b.decisionTable,f="replace-with-literal-expression"===d.actionName&&!b.literalExpression;
return"replace-with-empty-decision"===d.actionName&&(b.decisionTable||b.literalExpression)||e||f});return this._createEntries(a,c)}return[]};Qc.prototype._createEntries=function(a,b){var c=[],d=this;O(b,function(e){e=d._createMenuEntry(e,a);c.push(e)});return c};Qc.prototype._createMenuEntry=function(a,b,c){var d=this._drdReplace.replaceElement,e=this._translate;c=c||function(){return d(b,a.target)};return{label:e(a.label),className:a.className,id:a.actionName,action:c}};Qc.prototype.getHeaderEntries=
function(a){return[]};var LD={__depends__:[Md,HD,JD],__init__:["replaceMenuProvider"],replaceMenuProvider:["type",Qc]};xh.$inject="eventBus contextPad modeling elementFactory connect create rules popupMenu canvas translate".split(" ");xh.prototype.getContextPadEntries=function(a){function b(w,n,p){g.start(w,n,p)}function c(w){e.removeElements([a])}function d(w,n,p,t){function x(A,z){var y=f.createShape(R({type:w},t));h.start(A,y,{source:z})}"string"!==typeof p&&(t=p,p=q("Append {type}",{type:w.replace(/^dmn:/,
"")}));return{group:"model",className:n,title:p,action:{dragstart:x,click:x}}}var e=this._modeling,f=this._elementFactory,g=this._connect,h=this._create,k=this._popupMenu,m=this._canvas,l=this._contextPad,r=this._rules,q=this._translate,u={};if("label"===a.type)return u;var v=a.businessObject;Cb(v,["dmn:InputData","dmn:BusinessKnowledgeModel","dmn:KnowledgeSource","dmn:Decision"])&&R(u,{"append.decision":d("dmn:Decision","dmn-icon-decision")});Cb(v,["dmn:InputData","dmn:Decision","dmn:KnowledgeSource"])&&
R(u,{"append.knowledge-source":d("dmn:KnowledgeSource","dmn-icon-knowledge-source")});Cb(v,["dmn:BusinessKnowledgeModel","dmn:KnowledgeSource"])&&R(u,{"append.business-knowledge-model":d("dmn:BusinessKnowledgeModel","dmn-icon-business-knowledge")});Cb(v,["dmn:Decision"])&&R(u,{"append.input-data":d("dmn:InputData","dmn-icon-input-data")});P(v,"dmn:DRGElement")&&R(u,{"append.text-annotation":d("dmn:TextAnnotation","dmn-icon-text-annotation"),connect:{group:"connect",className:"dmn-icon-connection-multi",
title:q("Connect using Information/Knowledge/Authority Requirement or Association"),action:{click:b,dragstart:b}}});k.isEmpty(a,"dmn-replace")||R(u,{replace:{group:"edit",className:"dmn-icon-screw-wrench",title:q("Change type"),action:{click:function(w,n){var p=m.getContainer(),t=l.getPad(n).html;p=p.getBoundingClientRect();t=t.getBoundingClientRect();t=R({x:t.left-p.left,y:t.top-p.top+t.height+5},{cursor:{x:w.x,y:w.y}});k.open(n,"dmn-replace",t)}}}});r=r.allowed("elements.delete",{elements:[a]});
ja(r)&&(r=r[0]===a);r&&R(u,{"delete":{group:"edit",className:"dmn-icon-trash",title:q("Remove"),action:{click:c}}});return u};var MD={__depends__:[Md,DD,fc,ED,Gt,LD],__init__:["contextPadProvider"],contextPadProvider:["type",xh]};Zb.$inject=["injector","canvas","graphicsFactory","elementFactory"];Zb.prototype.drawPreview=function(a,b,c){c=c||{};var d=a.connectionPreviewGfx,e=a.getConnection,f=c.source,g=c.target,h=c.waypoints,k=c.connectionStart,m=c.connectionEnd,l=c.noLayout,r=c.noCropping,q=c.noNoop,
u,v=this;d||(d=a.connectionPreviewGfx=this.createConnectionPreviewGfx());nw(d);e||(e=a.getConnection=hx(function(w,n,p){return v.getConnection(w,n,p)}));b&&(u=e(b,f,g));u?(u.waypoints=h||[],this._layouter&&!l&&(u.waypoints=this._layouter.layoutConnection(u,{source:f,target:g,connectionStart:k,connectionEnd:m,waypoints:c.waypoints||u.waypoints})),u.waypoints&&u.waypoints.length||(u.waypoints=[f?pb(f):k,g?pb(g):m]),this._connectionDocking&&(f||g)&&!r&&(u.waypoints=this._connectionDocking.getCroppedWaypoints(u,
f,g)),this._graphicsFactory.drawConnection(d,u)):!q&&this.drawNoopPreview(d,c)};Zb.prototype.drawNoopPreview=function(a,b){var c=b.source,d=b.target,e=b.connectionStart||pb(c),f=b.connectionEnd||pb(d);c=this.cropWaypoints(e,f,c,d);c=this.createNoopConnection(c[0],c[1]);ha(a,c)};Zb.prototype.cropWaypoints=function(a,b,c,d){var e=this._graphicsFactory,f=c&&e.getShapePath(c),g=d&&e.getShapePath(d);e=e.getConnectionPath({waypoints:[a,b]});a=c&&uh(f,e,!0)||a;b=d&&uh(g,e,!1)||b;return[a,b]};Zb.prototype.cleanUp=
function(a){a&&a.connectionPreviewGfx&&cb(a.connectionPreviewGfx)};Zb.prototype.getConnection=function(a){a=gb(a)?a:{};return this._elementFactory.createConnection(a)};Zb.prototype.createConnectionPreviewGfx=function(){var a=ea("g");W(a,{pointerEvents:"none"});za(a).add("djs-connection-preview");ha(this._canvas.getDefaultLayer(),a);return a};Zb.prototype.createNoopConnection=function(a,b){var c=ea("polyline");W(c,{stroke:"#333",strokeDasharray:[1],strokeWidth:2,"pointer-events":"none"});W(c,{points:[a.x,
a.y,b.x,b.y]});return c};var ND={__init__:["connectionPreview"],connectionPreview:["type",Zb]};rf.$inject=["eventBus","modeling","canvas"];rf.prototype.update=function(a,b){var c={};c[a]=b;this._modeling.updateProperties(this._canvas.getRootElement(),c)};rf.prototype._setup=function(a,b){var c=this;a.setAttribute("contenteditable",!0);a.addEventListener("input",Td(function(d){c.update(b,(d.target.value||d.target.textContent).trim())},300));a.addEventListener("keydown",function(d){13===d.keyCode&&
(a.blur(),window.getSelection().removeAllRanges())})};var OD={__init__:["definitionPropertiesEdit","definitionPropertiesPaletteAdapter"],definitionPropertiesEdit:["type",rf],definitionPropertiesPaletteAdapter:["type",jh]},PD={horizontal:["x","width"],vertical:["y","height"]};$b.$inject=["modeling"];$b.prototype.registerFilter=function(a){if("function"!==typeof a)throw Error("the filter has to be a function");this._filters.push(a)};$b.prototype.trigger=function(a,b){var c=this._modeling;if(!(3>a.length)){this._setOrientation(b);
var d=this._filterElements(a);d=this._createGroups(d);if(!(2>=d.length))return c.distributeElements(d,this._axis,this._dimension),d}};$b.prototype._filterElements=function(a){var b=this._filters,c=this._axis,d=this._dimension,e=[].concat(a);if(!b.length)return a;O(b,function(f){e=f(e,c,d)});return e};$b.prototype._createGroups=function(a){var b=[],c=this,d=this._axis,e=this._dimension;if(!d)throw Error('must have a defined "axis" and "dimension"');a=hd(a,d);O(a,function(f,g){var h=c._findRange(f,
d,e),k=b[b.length-1];k&&c._hasIntersection(k.range,h)?b[b.length-1].elements.push(f):(h={range:h,elements:[f]},b.push(h))});return b};$b.prototype._setOrientation=function(a){a=PD[a];this._axis=a[0];this._dimension=a[1]};$b.prototype._hasIntersection=function(a,b){return Math.max(a.min,a.max)>=Math.min(b.min,b.max)&&Math.min(a.min,a.max)<=Math.max(b.min,b.max)};$b.prototype._findRange=function(a){var b=a[this._axis];return{min:b+5,max:b+a[this._dimension]-5}};var QD={__init__:["distributeElements"],
distributeElements:["type",$b]};Jo.$inject=["distributeElements"];var RD={__depends__:[QD],__init__:["drdDistributeElements"],drdDistributeElements:["type",Jo]};xb.$inject=["eventBus","injector"];xb.prototype._registerDefaultActions=function(a){var b=a.get("commandStack",!1),c=a.get("modeling",!1),d=a.get("selection",!1),e=a.get("zoomScroll",!1),f=a.get("copyPaste",!1),g=a.get("canvas",!1),h=a.get("rules",!1),k=a.get("keyboardMove",!1),m=a.get("keyboardMoveSelection",!1);b&&(this.register("undo",
function(){b.undo()}),this.register("redo",function(){b.redo()}));f&&d&&this.register("copy",function(){var l=d.get();f.copy(l)});f&&this.register("paste",function(){f.paste()});e&&this.register("stepZoom",function(l){e.stepZoom(l.value)});g&&this.register("zoom",function(l){g.zoom(l.value)});c&&d&&h&&this.register("removeSelection",function(){var l=d.get();if(l.length){var r=h.allowed("elements.delete",{elements:l});!1!==r&&(l=ja(r)?r:l,l.length&&c.removeElements(l.slice()))}});k&&this.register("moveCanvas",
function(l){k.moveCanvas(l)});m&&this.register("moveSelection",function(l){m.moveSelection(l.direction,l.accelerated)})};xb.prototype.trigger=function(a,b){if(!this._actions[a])throw Error(a+" is not a registered action");return this._actions[a](b)};xb.prototype.register=function(a,b){var c=this;if("string"===typeof a)return this._registerAction(a,b);O(a,function(d,e){c._registerAction(e,d)})};xb.prototype._registerAction=function(a,b){if(this.isRegistered(a))throw Error(a+" is already registered");
this._actions[a]=b};xb.prototype.unregister=function(a){if(!this.isRegistered(a))throw Error(a+" is not a registered action");this._actions[a]=void 0};xb.prototype.getActions=function(){return Object.keys(this._actions)};xb.prototype.isRegistered=function(a){return!!this._actions[a]};var SD={__init__:["editorActions"],editorActions:["type",xb]};Ga(sf,xb);sf.$inject=["injector"];sf.prototype._registerDefaultActions=function(a){xb.prototype._registerDefaultActions.call(this,a);var b=a.get("canvas",
!1),c=a.get("elementRegistry",!1),d=a.get("selection",!1),e=a.get("lassoTool",!1),f=a.get("directEditing",!1),g=a.get("distributeElements",!1),h=a.get("alignElements",!1);b&&c&&d&&this._registerAction("selectElements",function(){var k=b.getRootElement(),m=c.filter(function(l){return l!==k});d.select(m);return m});d&&g&&this._registerAction("distributeElements",function(k){var m=d.get();k=k.type;2<m.length&&g.trigger(m,k)});d&&h&&this._registerAction("alignElements",function(k){var m=d.get();k=k.type;
1<m.length&&h.trigger(m,k)});e&&this._registerAction("lassoTool",function(){e.toggle()});d&&f&&this._registerAction("directEditing",function(){var k=d.get();k.length&&f.activate(k[0])})};var TD={__depends__:[SD],editorActions:["type",sf]};Lo.$inject=["drdFactory","elementFactory","eventBus"];var UD={__init__:["diGenerator"],diGenerator:["type",Lo]};wc.prototype.snapEvent=function(a,b,c){c=this.snapValue(a[b],c);vc(a,b,c)};wc.prototype.getGridSpacing=function(){return 10};wc.prototype.snapValue=function(a,
b){var c=0;b&&b.offset&&(c=b.offset);a=yh(a+c,10);if(b&&b.min){var d=b.min;ua(d)&&(d=yh(d+c,10,"ceil"),a=Math.max(a,d))}b&&b.max&&(d=b.max,ua(d)&&(d=yh(d+c,10,"floor"),a=Math.min(a,d)));return a-c};wc.prototype.isActive=function(){return this.active};wc.prototype.setActive=function(a){this.active=a;this._eventBus.fire("gridSnapping.toggle",{active:a})};wc.prototype.toggleActive=function(){this.setActive(!this.active)};wc.$inject=["elementRegistry","eventBus","config.gridSnapping"];Ua.$inject=["eventBus"];
Ua.prototype.on=function(a,b,c,d,e,f){if(Na(b)||ua(b))f=e,e=d,d=c,c=b,b=null;Na(c)&&(f=e,e=d,d=c,c=1E3);gb(e)&&(f=e,e=!1);if(!Na(d))throw Error("handlerFn must be a function");ja(a)||(a=[a]);var g=this._eventBus;O(a,function(h){h=["commandStack",h,b].filter(function(k){return k}).join(".");g.on(h,c,e?ix(d,f):d,f)})};O("canExecute preExecute preExecuted execute executed postExecute postExecuted revert reverted".split(" "),function(a){Ua.prototype[a]=function(b,c,d,e,f){if(Na(b)||ua(b))f=e,e=d,d=c,
c=b,b=null;this.on(b,a,c,d,e,f)}});Rc.$inject=["eventBus","gridSnapping","modeling"];Ga(Rc,Ua);Rc.prototype.snapSimple=function(a,b){var c=this._gridSnapping;b.width=c.snapValue(b.width,{min:b.width});b.height=c.snapValue(b.height,{min:b.height});b.x=a.x+a.width/2-b.width/2;b.y=a.y+a.height/2-b.height/2;return b};Rc.prototype.snapComplex=function(a,b){/w|e/.test(b)&&(a=this.snapHorizontally(a,b));/n|s/.test(b)&&(a=this.snapVertically(a,b));return a};Rc.prototype.snapHorizontally=function(a,b){var c=
this._gridSnapping,d=/w/.test(b),e=/e/.test(b),f={};f.width=c.snapValue(a.width,{min:a.width});e&&(d?(f.x=c.snapValue(a.x,{max:a.x}),f.width+=c.snapValue(a.x-f.x,{min:a.x-f.x})):a.x=a.x+a.width-f.width);R(a,f);return a};Rc.prototype.snapVertically=function(a,b){var c=this._gridSnapping,d=/n/.test(b),e=/s/.test(b),f={};f.height=c.snapValue(a.height,{min:a.height});d&&(e?(f.y=c.snapValue(a.y,{max:a.y}),f.height+=c.snapValue(a.y-f.y,{min:a.y-f.y})):a.y=a.y+a.height-f.height);R(a,f);return a};Mo.$inject=
["eventBus","gridSnapping"];var VD={__depends__:[{__init__:["gridSnappingResizeBehavior","gridSnappingSpaceToolBehavior"],gridSnappingResizeBehavior:["type",Rc],gridSnappingSpaceToolBehavior:["type",Mo]}],__init__:["gridSnapping"],gridSnapping:["type",wc]};db.$inject=["config.keyboard","eventBus"];db.prototype._keydownHandler=function(a){this._keyHandler(a,"keyboard.keydown")};db.prototype._keyupHandler=function(a){this._keyHandler(a,"keyboard.keyup")};db.prototype._keyHandler=function(a,b){var c=
a.target;(!c||!gj(c,"input, textarea")&&"true"!==c.contentEditable)&&this._eventBus.fire(b||"keyboard.keydown",{keyEvent:a})&&a.preventDefault()};db.prototype.bind=function(a){this.unbind();this._node=a;U.bind(a,"keydown",this._keydownHandler,!0);U.bind(a,"keyup",this._keyupHandler,!0);this._fire("bind")};db.prototype.getBinding=function(){return this._node};db.prototype.unbind=function(){var a=this._node;a&&(this._fire("unbind"),U.unbind(a,"keydown",this._keydownHandler,!0),U.unbind(a,"keyup",this._keyupHandler,
!0));this._node=null};db.prototype._fire=function(a){this._eventBus.fire("keyboard."+a,{node:this._node})};db.prototype.addListener=function(a,b,c){Na(a)&&(c=b,b=a,a=1E3);this._eventBus.on(c||"keyboard.keydown",a,b)};db.prototype.removeListener=function(a,b){this._eventBus.off(b||"keyboard.keydown",a)};db.prototype.hasModifier=function(a){return a.ctrlKey||a.metaKey||a.shiftKey||a.altKey};db.prototype.isCmd=Fb;db.prototype.isShift=function(a){return a.shiftKey};db.prototype.isKey=Qb;Ad.$inject=["eventBus",
"keyboard"];Ad.prototype.registerBindings=function(a,b){function c(d,e){b.isRegistered(d)&&a.addListener(e)}c("undo",function(d){d=d.keyEvent;if(Fb(d)&&!d.shiftKey&&Qb(["z","Z"],d))return b.trigger("undo"),!0});c("redo",function(d){d=d.keyEvent;if(Fb(d)&&(Qb(["y","Y"],d)||Qb(["z","Z"],d)&&d.shiftKey))return b.trigger("redo"),!0});c("copy",function(d){d=d.keyEvent;if(Fb(d)&&Qb(["c","C"],d))return b.trigger("copy"),!0});c("paste",function(d){d=d.keyEvent;if(Fb(d)&&Qb(["v","V"],d))return b.trigger("paste"),
!0});c("stepZoom",function(d){d=d.keyEvent;if(Qb(["+","Add"],d)&&Fb(d))return b.trigger("stepZoom",{value:1}),!0});c("stepZoom",function(d){d=d.keyEvent;if(Qb(["-","Subtract"],d)&&Fb(d))return b.trigger("stepZoom",{value:-1}),!0});c("zoom",function(d){d=d.keyEvent;if(Qb("0",d)&&Fb(d))return b.trigger("zoom",{value:1}),!0});c("removeSelection",function(d){if(Qb(["Delete","Del"],d.keyEvent))return b.trigger("removeSelection"),!0})};var Pm={__init__:["keyboard","keyboardBindings"],keyboard:["type",db],
keyboardBindings:["type",Ad]};Ga(tf,Ad);tf.$inject=["injector"];tf.prototype.registerBindings=function(a,b){function c(d,e){b.isRegistered(d)&&a.addListener(e)}Ad.prototype.registerBindings.call(this,a,b);c("selectElements",function(d){d=d.keyEvent;if(a.isKey(["a","A"],d)&&a.isCmd(d))return b.trigger("selectElements"),!0});c("lassoTool",function(d){d=d.keyEvent;if(!a.hasModifier(d)&&a.isKey(["l","L"],d))return b.trigger("lassoTool"),!0});c("directEditing",function(d){d=d.keyEvent;if(!a.hasModifier(d)&&
a.isKey(["e","E"],d))return b.trigger("directEditing"),!0})};var WD={__depends__:[Pm],__init__:["keyboardBindings"],keyboardBindings:["type",tf]},jx={moveSpeed:50,moveSpeedAccelerated:200};No.$inject=["config.keyboardMove","keyboard","canvas"];var XD={__depends__:[Pm],__init__:["keyboardMove"],keyboardMove:["type",No]},kx={moveSpeed:1,moveSpeedAccelerated:10},lx={ArrowLeft:"left",Left:"left",ArrowUp:"up",Up:"up",ArrowRight:"right",Right:"right",ArrowDown:"down",Down:"down"},mx={left:function(a){return{x:-a,
y:0}},up:function(a){return{x:0,y:-a}},right:function(a){return{x:a,y:0}},down:function(a){return{x:0,y:a}}};Oo.$inject=["config.keyboardMoveSelection","keyboard","modeling","rules","selection"];var YD={__depends__:[Pm,fc],__init__:["keyboardMoveSelection"],keyboardMoveSelection:["type",Oo]};Aa.$inject=["eventBus","injector"];Aa.prototype.execute=function(a,b){if(!a)throw Error("command required");var c={command:a,context:b};this._pushAction(c);this._internalExecute(c);this._popAction(c)};Aa.prototype.canExecute=
function(a,b){var c={command:a,context:b},d=this._getHandler(a);c=this._fire(a,"canExecute",c);if(void 0===c){if(!d)return!1;d.canExecute&&(c=d.canExecute(b))}return c};Aa.prototype.clear=function(a){this._stack.length=0;this._stackIdx=-1;!1!==a&&this._fire("changed")};Aa.prototype.undo=function(){var a=this._getUndoAction();if(a){for(this._pushAction(a);a;){this._internalUndo(a);var b=this._getUndoAction();if(!b||b.id!==a.id)break;a=b}this._popAction()}};Aa.prototype.redo=function(){var a=this._getRedoAction();
if(a){for(this._pushAction(a);a;){this._internalExecute(a,!0);var b=this._getRedoAction();if(!b||b.id!==a.id)break;a=b}this._popAction()}};Aa.prototype.register=function(a,b){this._setHandler(a,b)};Aa.prototype.registerHandler=function(a,b){if(!a||!b)throw Error("command and handlerCls must be defined");var c=this._injector.instantiate(b);this.register(a,c)};Aa.prototype.canUndo=function(){return!!this._getUndoAction()};Aa.prototype.canRedo=function(){return!!this._getRedoAction()};Aa.prototype._getRedoAction=
function(){return this._stack[this._stackIdx+1]};Aa.prototype._getUndoAction=function(){return this._stack[this._stackIdx]};Aa.prototype._internalUndo=function(a){var b=this,c=a.command,d=a.context,e=this._getHandler(c);this._atomicDo(function(){b._fire(c,"revert",a);e.revert&&b._markDirty(e.revert(d));b._revertedAction(a);b._fire(c,"reverted",a)})};Aa.prototype._fire=function(a,b,c){3>arguments.length&&(c=b,b=null);var d=b?[a+"."+b,b]:[a],e,f;c=this._eventBus.createEvent(c);for(e=0;f=d[e];e++){var g=
this._eventBus.fire("commandStack."+f,c);if(c.cancelBubble)break}return g};Aa.prototype._createId=function(){return this._uid++};Aa.prototype._atomicDo=function(a){var b=this._currentExecution;b.atomic=!0;try{a()}finally{b.atomic=!1}};Aa.prototype._internalExecute=function(a,b){var c=this,d=a.command,e=a.context,f=this._getHandler(d);if(!f)throw Error("no command handler registered for <"+d+">");this._pushAction(a);b||(this._fire(d,"preExecute",a),f.preExecute&&f.preExecute(e),this._fire(d,"preExecuted",
a));this._atomicDo(function(){c._fire(d,"execute",a);f.execute&&c._markDirty(f.execute(e));c._executedAction(a,b);c._fire(d,"executed",a)});b||(this._fire(d,"postExecute",a),f.postExecute&&f.postExecute(e),this._fire(d,"postExecuted",a));this._popAction(a)};Aa.prototype._pushAction=function(a){var b=this._currentExecution,c=b.actions,d=c[0];if(b.atomic)throw Error("illegal invocation in <execute> or <revert> phase (action: "+a.command+")");a.id||(a.id=d&&d.id||this._createId());c.push(a)};Aa.prototype._popAction=
function(){var a=this._currentExecution,b=a.actions;a=a.dirty;b.pop();b.length||(this._eventBus.fire("elements.changed",{elements:Jv("id",a.reverse())}),a.length=0,this._fire("changed"))};Aa.prototype._markDirty=function(a){var b=this._currentExecution;a&&(a=ja(a)?a:[a],b.dirty=b.dirty.concat(a))};Aa.prototype._executedAction=function(a,b){var c=++this._stackIdx;b||this._stack.splice(c,this._stack.length,a)};Aa.prototype._revertedAction=function(a){this._stackIdx--};Aa.prototype._getHandler=function(a){return this._handlerMap[a]};
Aa.prototype._setHandler=function(a,b){if(!a||!b)throw Error("command and handler required");if(this._handlerMap[a])throw Error("overriding handler for command <"+a+">");this._handlerMap[a]=b};var Qm={commandStack:["type",Aa]};Po.$inject=["eventBus","canvas","elementRegistry","graphicsFactory"];var Jt={__init__:["changeSupport"],changeSupport:["type",Po]},Kt=Math.min,Lt=Math.max;Gb.prototype.create=function(a,b,c,d){var e=this.parent,f=this.content,g=this.container;d=this.options=d||{};b=this.style=
b||{};var h=Jc(b,"width height maxWidth maxHeight minWidth minHeight left top backgroundColor position overflow border wordWrap textAlign outline transform".split(" "));R(e.style,{width:a.width+"px",height:a.height+"px",maxWidth:a.maxWidth+"px",maxHeight:a.maxHeight+"px",minWidth:a.minWidth+"px",minHeight:a.minHeight+"px",left:a.x+"px",top:a.y+"px",backgroundColor:"#ffffff",position:"absolute",overflow:"visible",border:"1px solid #ccc",boxSizing:"border-box",wordWrap:"normal",textAlign:"center",outline:"none"},
h);a=Jc(b,"fontFamily fontSize fontWeight lineHeight padding paddingTop paddingRight paddingBottom paddingLeft".split(" "));R(f.style,{boxSizing:"border-box",width:"100%",outline:"none",wordWrap:"break-word"},a);d.centerVertically&&R(f.style,{position:"absolute",top:"50%",transform:"translate(0, -50%)"},a);f.innerText=c;U.bind(f,"keydown",this.keyHandler);U.bind(f,"mousedown",ge);U.bind(f,"paste",this.handlePaste);d.autoResize&&U.bind(f,"input",this.autoResize);d.resizable&&this.resizable(b);g.appendChild(e);
this.setSelection(f.lastChild,f.lastChild&&f.lastChild.length);return e};Gb.prototype.handlePaste=function(a){var b=this.options,c=this.style;a.preventDefault();a=a.clipboardData?a.clipboardData.getData("text/plain"):window.clipboardData.getData("Text");this.insertText(a);b.autoResize&&(b=this.autoResize(c))&&this.resizeHandler(b)};Gb.prototype.insertText=function(a){document.execCommand("insertText",!1,a)||this._insertTextIE(a)};Gb.prototype._insertTextIE=function(a){var b=this.getSelection(),c=
b.startContainer,d=b.endContainer,e=b.startOffset,f=b.endOffset,g=b.commonAncestorContainer;b=[].slice.call(g.childNodes);if(g.nodeType===Node.TEXT_NODE){b=c.textContent;c.textContent=b.substring(0,e)+a+b.substring(f);var h=c;var k=e+a.length}else if(c===this.content&&d===this.content)g=document.createTextNode(a),this.content.insertBefore(g,b[e]),h=g,k=g.textContent.length;else{var m=b.indexOf(c),l=b.indexOf(d);b.forEach(function(r,q){q===m?r.textContent=c.textContent.substring(0,e)+a+d.textContent.substring(f):
q>m&&q<=l&&kb(r)});h=c;k=e+a.length}h&&void 0!==k&&setTimeout(function(){self.setSelection(h,k)})};Gb.prototype.autoResize=function(){var a=this.parent,b=this.content,c=parseInt(this.style.fontSize)||12;if(b.scrollHeight>a.offsetHeight||b.scrollHeight<a.offsetHeight-c)c=a.getBoundingClientRect(),b=b.scrollHeight,a.style.height=b+"px",this.resizeHandler({width:c.width,height:c.height,dx:0,dy:b-c.height})};Gb.prototype.resizable=function(){var a=this,b=this.parent,c=this.resizeHandle,d=parseInt(this.style.minWidth)||
0,e=parseInt(this.style.minHeight)||0,f=parseInt(this.style.maxWidth)||Infinity,g=parseInt(this.style.maxHeight)||Infinity;if(!c){c=this.resizeHandle=ta('<div class="djs-direct-editing-resize-handle"></div>');var h,k,m,l,r=function(u){u.preventDefault();ge(u);var v=Kt(Lt(m+u.clientX-h,d),f),w=Kt(Lt(l+u.clientY-k,e),g);b.style.width=v+"px";b.style.height=w+"px";a.resizeHandler({width:m,height:l,dx:u.clientX-h,dy:u.clientY-k})},q=function w(v){v.preventDefault();ge(v);U.unbind(document,"mousemove",
r,!1);U.unbind(document,"mouseup",w,!1)};U.bind(c,"mousedown",function(v){v.preventDefault();ge(v);h=v.clientX;k=v.clientY;v=b.getBoundingClientRect();m=v.width;l=v.height;U.bind(document,"mousemove",r);U.bind(document,"mouseup",q)})}R(c.style,{position:"absolute",bottom:"0px",right:"0px",cursor:"nwse-resize",width:"0",height:"0",borderTop:(parseInt(this.style.fontSize)/4||3)+"px solid transparent",borderRight:(parseInt(this.style.fontSize)/4||3)+"px solid #ccc",borderBottom:(parseInt(this.style.fontSize)/
4||3)+"px solid #ccc",borderLeft:(parseInt(this.style.fontSize)/4||3)+"px solid transparent"});b.appendChild(c)};Gb.prototype.destroy=function(){var a=this.parent,b=this.content,c=this.resizeHandle;b.innerText="";a.removeAttribute("style");b.removeAttribute("style");U.unbind(b,"keydown",this.keyHandler);U.unbind(b,"mousedown",ge);U.unbind(b,"input",this.autoResize);U.unbind(b,"paste",this.handlePaste);c&&(c.removeAttribute("style"),kb(c));kb(a)};Gb.prototype.getValue=function(){return this.content.innerText.trim()};
Gb.prototype.getSelection=function(){return window.getSelection().getRangeAt(0)};Gb.prototype.setSelection=function(a,b){var c=document.createRange();null===a?c.selectNodeContents(this.content):(c.setStart(a,b),c.setEnd(a,b));var d=window.getSelection();d.removeAllRanges();d.addRange(c)};yb.$inject=["eventBus","canvas"];yb.prototype.registerProvider=function(a){this._providers.push(a)};yb.prototype.isActive=function(){return!!this._active};yb.prototype.cancel=function(){this._active&&(this._fire("cancel"),
this.close())};yb.prototype._fire=function(a,b){this._eventBus.fire("directEditing."+a,b||{active:this._active})};yb.prototype.close=function(){this._textbox.destroy();this._fire("deactivate");this._active=null;this.resizable=void 0};yb.prototype.complete=function(){var a=this._active;if(a){var b=a.context.bounds;var c=this.$textbox.getBoundingClientRect(),d=this.getValue();if(d!==a.context.text||c.height!==b.height||c.width!==b.width)b=this._textbox.container.getBoundingClientRect(),a.provider.update(a.element,
d,a.context.text,{x:c.left-b.left,y:c.top-b.top,width:c.width,height:c.height});this._fire("complete");this.close()}};yb.prototype.getValue=function(){return this._textbox.getValue()};yb.prototype._handleKey=function(a){a.stopPropagation();var b=a.keyCode||a.charCode;if(27===b)return a.preventDefault(),this.cancel();if(13===b&&!a.shiftKey)return a.preventDefault(),this.complete()};yb.prototype._handleResize=function(a){this._fire("resize",a)};yb.prototype.activate=function(a){this.isActive()&&this.cancel();
var b,c=Ha(this._providers,function(d){return(b=d.activate(a))?d:null});b&&(this.$textbox=this._textbox.create(b.bounds,b.style,b.text,b.options),this._active={element:a,context:b,provider:c},b.options&&b.options.resizable&&(this.resizable=!0),this._fire("activate"));return!!b};var ZD={__depends__:[Re],__init__:["directEditing"],directEditing:["type",yb]};he.$inject=["eventBus","canvas","directEditing","commandStack"];he.prototype.activate=function(a){var b=Ro(a);if(void 0!==b)return a=this.getEditingBBox(a),
a.text=b,a};he.prototype.getEditingBBox=function(a){var b=this._canvas,c=b.getAbsoluteBBox(a.label||a),d={x:c.x,y:c.y},e={};b=b.zoom();1<b?(d.width=c.width,d.height=c.height):(d.width=c.width/b,d.height=c.height/b);1>b&&(d.x=c.x-(d.width/2-c.width/2),d.y=c.y-(d.height/2-c.height/2));P(a,"dmn:TextAnnotation")&&(d.minWidth=100,d.height=a.height,e.textAlign="left");return{bounds:d,style:e}};he.prototype.update=function(a,b){this._commandStack.execute("element.updateLabel",{element:a,newLabel:b})};var $D=
{__depends__:[Qm,Jt,ZD],__init__:["labelEditingProvider"],labelEditingProvider:["type",he]};zh.$inject=["drdFactory","injector"];Ga(zh,Ua);Ga(Ah,Ua);Ah.$inject=["injector","modeling","rules"];Ga(Bh,Ua);Bh.$inject=["eventBus","modeling"];var xg=function(a){function b(c){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");c=Dh(b).call(this,c);c=!c||"object"!==Ch(c)&&"function"!==typeof c?To(this):c;c.executed(["element.updateProperties","updateProperties"],c.updateIds.bind(To(c)));
return c}qx(b,a);px(b,[{key:"updateIds",value:function(c){c=c.context;var d=c.oldProperties,e=c.properties;c=ld(c.element);P(c,"dmn:DRGElement")&&"id"in d&&"id"in e&&rx(c).forEach(function(f){sx(f,d.id,e.id);tx(f,d.id,e.id)})}}]);return b}(Ua);xg.$inject=["eventBus"];var aE={__init__:["createConnectionBehavior","idChangeBehavior","replaceConnectionBehavior","replaceElementBehavior"],createConnectionBehavior:["type",zh],idChangeBehavior:["type",xg],replaceConnectionBehavior:["type",Ah],replaceElementBehavior:["type",
Bh]};Sc.$inject=["eventBus"];Ga(Sc,Ua);Sc.prototype.addRule=function(a,b,c){var d=this;"string"===typeof a&&(a=[a]);a.forEach(function(e){d.canExecute(e,b,function(f,g,h){return c(f)},!0)})};Sc.prototype.init=function(){};Ga(Tc,Sc);Tc.$inject=["injector"];Tc.prototype.init=function(){this.addRule("connection.create",function(a){return Fh(a.source,a.target)});this.addRule("connection.reconnect",function(a){return Fh(a.source,a.target)});this.addRule("connection.updateWaypoints",function(a){a=a.connection;
return{type:a.type,businessObject:a.businessObject}});this.addRule("elements.move",function(a){return Vo(a.shapes,a.target)});this.addRule("shape.create",function(a){return Uo(a.shape,a.target)})};Tc.prototype.canConnect=Fh;Tc.prototype.canCreate=Uo;Tc.prototype.canMove=Vo;var bE={__depends__:[Od],__init__:["drdRules"],drdRules:["type",Tc]};Rb.$inject=["moddle"];Rb.prototype._needsId=function(a){return Cb(a,["dmn:Artifact","dmn:DMNElement","dmn:DRGElement"])};Rb.prototype._ensureId=function(a){var b=
(a.$type||"").replace(/^[^:]*:/g,"")+"_";!a.id&&this._needsId(a)&&(a.id=this._model.ids.nextPrefixed(b,a))};Rb.prototype.create=function(a,b){var c=this._model.create(a,b||{});this._ensureId(c);return c};Rb.prototype.createDiBounds=function(a){return this.create("biodi:Bounds",a)};Rb.prototype.createDiEdge=function(a,b){return this.create("biodi:Edge",{source:a.id,waypoints:this.createDiWaypoints(b)})};Rb.prototype.createDiWaypoints=function(a){var b=this;return a.map(function(c){return b.createDiWaypoint(c)})};
Rb.prototype.createDiWaypoint=function(a){return this.create("biodi:Waypoint",Jc(a,["x","y"]))};Rb.prototype.createExtensionElements=function(){return this.create("dmn:ExtensionElements",{values:[]})};Ga(Uc,Ua);Uc.$inject=["connectionDocking","definitionPropertiesView","drdFactory","drdRules","injector"];Uc.prototype.updateBounds=function(a){var b=this._drdFactory,c=a.businessObject.get("extensionElements"),d;c&&((d=Ha(c.get("values"),function(e){return P(e,"biodi:Bounds")}))?R(d,{x:a.x,y:a.y,width:a.width,
height:a.height}):c.get("values").push(b.createDiBounds({x:a.x,y:a.y,width:a.width,height:a.height})))};Uc.prototype.updateConnectionWaypoints=function(a){var b=this._drdFactory;a=a.connection;var c=a.businessObject,d=a.source,e=a.target.businessObject;c=P(a,"dmn:Association")?c.get("extensionElements"):e.get("extensionElements");var f=Ha(c.get("values"),function(g){return P(g,"biodi:Edge")&&g.source===d.id});f&&(f.waypoints=b.createDiWaypoints(a.waypoints).map(function(g){g.$parent=f;return g}))};
Uc.prototype.updateParent=function(a,b){var c=a.parent;P(a,"dmn:DRGElement")||P(a,"dmn:Artifact")||(c=b);this.updateSemanticParent(a.businessObject,c&&c.businessObject)};Uc.prototype.updateSemanticParent=function(a,b){var c;if(a.$parent!==b){P(a,"dmn:DRGElement")?c="drgElements":P(a,"dmn:Artifact")?c="artifacts":P(a,"dmn:InformationRequirement")?c="informationRequirement":P(a,"dmn:AuthorityRequirement")?c="authorityRequirement":P(a,"dmn:KnowledgeRequirement")&&(c="knowledgeRequirement");if(a.$parent){var d=
a.$parent.get(c);ie(d,a)}if(b){if(d=b.get(c))d.push(a),a.$parent=b}else a.$parent=null}};Ga(Vc,pc);Vc.$inject=["drdFactory"];Vc.prototype.baseCreate=pc.prototype.create;Vc.prototype.create=function(a,b){return this.createDrdElement(a,b)};Vc.prototype.createDrdElement=function(a,b){var c=this._drdFactory;b=b||{};var d=b.businessObject;if(!d){if(!b.type)throw Error("no shape type specified");d=c.create(b.type)}"root"===a||"connection"===a||d.extensionElements||(c=d.extensionElements=c.createExtensionElements(),
c.$parent=d);c=this._getDefaultSize(d);b=R({businessObject:d,id:d.id},c,b);return this.baseCreate(a,b)};Vc.prototype._getDefaultSize=function(a){return P(a,"dmn:Decision")?{width:180,height:80}:P(a,"dmn:InputData")?{width:125,height:45}:P(a,"dmn:KnowledgeSource")?{width:100,height:63}:P(a,"dmn:BusinessKnowledgeModel")?{width:135,height:46}:{width:100,height:80}};uf.$inject=["modeling","canvas"];uf.prototype.preExecute=function(a){var b=this._modeling,c=a.alignment;O(a.elements,function(d){var e={x:0,
y:0};c.left?e.x=c.left-d.x:c.right?e.x=c.right-d.width-d.x:c.center?e.x=c.center-Math.round(d.width/2)-d.x:c.top?e.y=c.top-d.y:c.bottom?e.y=c.bottom-d.height-d.y:c.middle&&(e.y=c.middle-Math.round(d.height/2)-d.y);b.moveElements([d],e,d.parent)})};uf.prototype.postExecute=function(a){};vf.$inject=["modeling"];vf.prototype.preExecute=function(a){var b=a.source;if(!b)throw Error("source required");var c=a.shape;c=a.shape=this._modeling.createShape(c,a.position,a.target||b.parent,{attach:a.attach});
a.shape=c};vf.prototype.postExecute=function(a){var b=a.connectionParent||a.shape.parent;ux(a.source,a.shape)||this._modeling.connect(a.source,a.shape,a.connection,b)};wf.$inject=["canvas","layouter"];wf.prototype.execute=function(a){var b=a.connection,c=a.source,d=a.target,e=a.parent,f=a.parentIndex;a=a.hints;if(!c||!d)throw Error("source and target required");if(!e)throw Error("parent required");b.source=c;b.target=d;b.waypoints||(b.waypoints=this._layouter.layoutConnection(b,a));this._canvas.addConnection(b,
e,f);return b};wf.prototype.revert=function(a){a=a.connection;this._canvas.removeConnection(a);a.source=null;a.target=null;return a};var yg=Math.round;Gh.$inject=["modeling"];Gh.prototype.preExecute=function(a){var b=a.elements,c=a.parent,d=a.parentIndex,e=a.position,f=a.hints,g=this._modeling;O(b,function(l){ua(l.x)||(l.x=0);ua(l.y)||(l.y=0)});var h=mc(b);O(b,function(l){l.waypoints&&(l.waypoints=hc(l.waypoints,function(r){return{x:yg(r.x-h.x-h.width/2+e.x),y:yg(r.y-h.y-h.height/2+e.y)}}));R(l,{x:yg(l.x-
h.x-h.width/2+e.x),y:yg(l.y-h.y-h.height/2+e.y)})});var k=rw(b),m={};O(b,function(l){if(l.waypoints)m[l.id]=ua(d)?g.createConnection(m[l.source.id],m[l.target.id],d,l,l.parent||c,f):g.createConnection(m[l.source.id],m[l.target.id],l,l.parent||c,f);else{var r=R({},f);-1===k.indexOf(l)&&(r.autoResize=!1);m[l.id]=ua(d)?g.createShape(l,Jc(l,["x","y","width","height"]),l.parent||c,d,r):g.createShape(l,Jc(l,["x","y","width","height"]),l.parent||c,r)}});a.elements=Vm(m)};var Mt=Math.round;Wc.$inject=["canvas"];
Wc.prototype.execute=function(a){var b=a.shape,c=a.position,d=a.parent;a=a.parentIndex;if(!d)throw Error("parent required");if(!c)throw Error("position required");void 0!==c.width?R(b,c):R(b,{x:c.x-Mt(b.width/2),y:c.y-Mt(b.height/2)});this._canvas.addShape(b,d,a);return b};Wc.prototype.revert=function(a){a=a.shape;this._canvas.removeShape(a);return a};Ga(je,Wc);je.$inject=["canvas"];var cE=Wc.prototype.execute;je.prototype.execute=function(a){var b=a.shape;vx(b);b.labelTarget=a.labelTarget;return cE.call(this,
a)};var dE=Wc.prototype.revert;je.prototype.revert=function(a){a.shape.labelTarget=null;return dE.call(this,a)};xf.$inject=["canvas","modeling"];xf.prototype.execute=function(a){var b=a.connection,c=b.parent;a.parent=c;c=(c=c.children)&&b?c.indexOf(b):-1;a.parentIndex=c;a.source=b.source;a.target=b.target;this._canvas.removeConnection(b);b.source=null;b.target=null;return b};xf.prototype.revert=function(a){var b=a.connection,c=a.parent,d=a.parentIndex;b.source=a.source;b.target=a.target;oc(c.children,
b,d);this._canvas.addConnection(b,c);return b};Hh.$inject=["modeling","elementRegistry"];Hh.prototype.postExecute=function(a){var b=this._modeling,c=this._elementRegistry;O(a.elements,function(d){c.get(d.id)&&(d.waypoints?b.removeConnection(d):b.removeShape(d))})};ke.$inject=["canvas","modeling"];ke.prototype.preExecute=function(a){var b=this._modeling;a=a.shape;Ih(a.incoming,function(c){b.removeConnection(c,{nested:!0})});Ih(a.outgoing,function(c){b.removeConnection(c,{nested:!0})});Ih(a.children,
function(c){c.waypoints?b.removeConnection(c,{nested:!0}):b.removeShape(c,{nested:!0})})};ke.prototype.execute=function(a){var b=this._canvas,c=a.shape,d=c.parent;a.oldParent=d;d=(d=d.children)&&c?d.indexOf(c):-1;a.oldParentIndex=d;b.removeShape(c);return c};ke.prototype.revert=function(a){var b=this._canvas,c=a.shape,d=a.oldParent;oc(d.children,c,a.oldParentIndex);b.addShape(c,d);return c};yf.$inject=["modeling"];var Nt={x:"y",y:"x"};yf.prototype.preExecute=function(a){function b(q,u){q.range.min=
Math.min(u[f],q.range.min);q.range.max=Math.max(u[f]+u[g],q.range.max)}function c(q){return q.max-q.min}var d=this._modeling,e=a.groups,f=a.axis,g=a.dimension,h=e[0],k=e.length-1,m=e[k],l=0;O(e,function(q,u){if(2>q.elements.length)u&&u!==e.length-1&&(b(q,q.elements[0]),l+=c(q.range));else{var v=hd(q.elements,f);var w=v[0];u===k&&(w=v[v.length-1]);var n=w[f]+w[g]/2;q.range=null;O(v,function(p){var t={y:0};t[f]=n-(p[f]+p[g]/2);t[f]&&(t[Nt[f]]=0,d.moveElements([p],t,p.parent));null===q.range?q.range=
{min:p[f],max:p[f]+p[g]}:b(q,p)});u&&u!==e.length-1&&(l+=c(q.range))}});var r=Math.round((Math.abs(m.range.min-h.range.max)-l)/(e.length-1));r<e.length-1||O(e,function(q,u){var v={};if(q!==h&&q!==m){var w=e[u-1];q.range.max=0;O(q.elements,function(n,p){v[Nt[f]]=0;v[f]=w.range.max-n[f]+r;q.range.min!==n[f]&&(v[f]+=n[f]-q.range.min);v[f]&&d.moveElements([n],v,n.parent);q.range.max=Math.max(n[f]+n[g],p?q.range.max:0)})}})};yf.prototype.postExecute=function(a){};zf.$inject=["layouter","canvas"];zf.prototype.execute=
function(a){var b=a.connection;R(a,{oldWaypoints:b.waypoints});b.waypoints=this._layouter.layoutConnection(b,a.hints);return b};zf.prototype.revert=function(a){var b=a.connection;b.waypoints=a.oldWaypoints;return b};Jh.prototype.execute=function(a){var b=a.connection,c=a.delta,d=a.newParent||b.parent,e=a.newParentIndex,f=b.parent;a.oldParent=f;a.oldParentIndex=nd(f.children,b);oc(d.children,b,e);b.parent=d;O(b.waypoints,function(g){g.x+=c.x;g.y+=c.y;g.original&&(g.original.x+=c.x,g.original.y+=c.y)});
return b};Jh.prototype.revert=function(a){var b=a.connection,c=a.oldParent,d=a.oldParentIndex,e=a.delta;nd(b.parent.children,b);oc(c.children,b,d);b.parent=c;O(b.waypoints,function(f){f.x-=e.x;f.y-=e.y;f.original&&(f.original.x-=e.x,f.original.y-=e.y)});return b};Kh.prototype.add=function(a,b){return this.addAll([a],b)};Kh.prototype.addAll=function(a,b){var c=tw(a,!!b,this);R(this,c);return this};le.prototype.moveRecursive=function(a,b,c){return a?this.moveClosure(this.getClosure(a),b,c):[]};le.prototype.moveClosure=
function(a,b,c,d,e){var f=this._modeling,g=a.allShapes;d=a.allConnections;var h=a.enclosedConnections,k=a.topLevel,m=!1;e&&e.parent===c&&(m=!0);O(g,function(l){f.moveShape(l,b,k[l.id]&&!m&&c,{recurse:!1,layout:!1})});O(d,function(l){var r=!!g[l.source.id],q=!!g[l.target.id];if(h[l.id]&&r&&q)f.moveConnection(l,b,k[l.id]&&!m&&c);else{var u=f.layoutConnection;r&&(r=l.source,r=Af(l,r,Cf(r,b)));q&&(q=l.target,q=Bf(l,q,Cf(q,b)));u.call(f,l,{connectionStart:r,connectionEnd:q})}})};le.prototype.getClosure=
function(a){return(new Kh).addAll(a,!0)};Df.$inject=["modeling"];Df.prototype.preExecute=function(a){a.closure=this._helper.getClosure(a.shapes)};Df.prototype.postExecute=function(a){var b=a.hints;if(b&&b.primaryShape){var c=b.primaryShape;b.oldParent=c.parent}this._helper.moveClosure(a.closure,a.delta,a.newParent,a.newHost,c)};Xc.$inject=["modeling"];Xc.prototype.execute=function(a){var b=a.shape,c=a.delta,d=a.newParent||b.parent,e=a.newParentIndex,f=b.parent;a.oldBounds=Jc(b,["x","y","width","height"]);
a.oldParent=f;a.oldParentIndex=nd(f.children,b);oc(d.children,b,e);R(b,{parent:d,x:b.x+c.x,y:b.y+c.y});return b};Xc.prototype.postExecute=function(a){var b=a.shape,c=a.delta,d=a.hints,e=this._modeling;!1!==d.layout&&(O(b.incoming,function(f){e.layoutConnection(f,{connectionEnd:Bf(f,b,Cf(b,c))})}),O(b.outgoing,function(f){e.layoutConnection(f,{connectionStart:Af(f,b,Cf(b,c))})}));!1!==d.recurse&&this.moveChildren(a)};Xc.prototype.revert=function(a){var b=a.shape,c=a.oldParent,d=a.delta;oc(c.children,
b,a.oldParentIndex);R(b,{parent:c,x:b.x-d.x,y:b.y-d.y});return b};Xc.prototype.moveChildren=function(a){this._helper.moveRecursive(a.shape.children,a.delta,null)};Xc.prototype.getNewParent=function(a){return a.newParent||a.shape.parent};me.$inject=["modeling"];me.prototype.execute=function(a){var b=a.newSource,c=a.newTarget,d=a.connection,e=a.dockingOrPoints;if(!b&&!c)throw Error("newSource or newTarget required");ja(e)&&(a.oldWaypoints=d.waypoints,d.waypoints=e);b&&(a.oldSource=d.source,d.source=
b);c&&(a.oldTarget=d.target,d.target=c);return d};me.prototype.postExecute=function(a){var b=a.connection,c=a.newSource,d=a.newTarget,e=a.dockingOrPoints;a=a.hints||{};if(!1!==a.layoutConnection){var f={};if(c&&(!d||"source"===a.docking)){var g=ja(e)?e[0]:e;f.connectionStart=g.original||g}!d||c&&"target"!==a.docking||(c=ja(e)?e[e.length-1]:e,f.connectionEnd=c.original||c);a.newWaypoints&&(f.waypoints=a.newWaypoints);this._modeling.layoutConnection(b,f)}};me.prototype.revert=function(a){var b=a.oldSource,
c=a.oldTarget,d=a.oldWaypoints;a=a.connection;b&&(a.source=b);c&&(a.target=c);d&&(a.waypoints=d);return a};ac.$inject=["modeling","rules"];ac.prototype.preExecute=function(a){function b(r,q,u){return e.allowed("connection.reconnect",{connection:u,source:r,target:q})}var c=this,d=this._modeling,e=this._rules,f=a.oldShape,g=a.newData,h=a.hints||{},k={x:g.x,y:g.y},m={x:f.x,y:f.y,width:f.width,height:f.height};var l=a.newShape=a.newShape||c.createShape(g,k,f.parent,h);f.host&&d.updateAttachment(l,f.host);
!1!==h.moveChildren&&(a=f.children.slice(),d.moveElements(a,{x:0,y:0},l,h));d=f.incoming.slice();f=f.outgoing.slice();O(d,function(r){b(r.source,l,r)&&c.reconnectEnd(r,l,Bf(r,l,m),h)});O(f,function(r){b(l,r.target,r)&&c.reconnectStart(r,l,Af(r,l,m),h)})};ac.prototype.postExecute=function(a){this._modeling.removeShape(a.oldShape)};ac.prototype.execute=function(a){};ac.prototype.revert=function(a){};ac.prototype.createShape=function(a,b,c,d){return this._modeling.createShape(a,b,c,d)};ac.prototype.reconnectStart=
function(a,b,c,d){this._modeling.reconnectStart(a,b,c,d)};ac.prototype.reconnectEnd=function(a,b,c,d){this._modeling.reconnectEnd(a,b,c,d)};ne.$inject=["modeling"];ne.prototype.execute=function(a){var b=a.shape,c=a.newBounds,d=a.minBounds;if(void 0===c.x||void 0===c.y||void 0===c.width||void 0===c.height)throw Error("newBounds must have {x, y, width, height} properties");if(d&&(c.width<d.width||c.height<d.height))throw Error("width and height cannot be less than minimum height and width");if(!d&&
10>c.width||10>c.height)throw Error("width and height cannot be less than 10px");a.oldBounds={width:b.width,height:b.height,x:b.x,y:b.y};R(b,{width:c.width,height:c.height,x:c.x,y:c.y});return b};ne.prototype.postExecute=function(a){var b=a.shape,c=a.oldBounds,d=this._modeling;O(b.incoming,function(e){d.layoutConnection(e,{connectionEnd:Bf(e,b,c)})});O(b.outgoing,function(e){d.layoutConnection(e,{connectionStart:Af(e,b,c)})})};ne.prototype.revert=function(a){var b=a.shape;a=a.oldBounds;R(b,{width:a.width,
height:a.height,x:a.x,y:a.y});return b};Bd.$inject=["modeling"];Bd.prototype.preExecute=function(a){var b=this._modeling,c=a.delta,d=a.direction;O(a.resizingShapes,function(e){a:{var f=c.x;var g=c.y;switch(d){case "n":f={x:e.x,y:e.y+g,width:e.width,height:e.height-g};break a;case "s":f={x:e.x,y:e.y,width:e.width,height:e.height+g};break a;case "w":f={x:e.x+f,y:e.y,width:e.width-f,height:e.height};break a;case "e":f={x:e.x,y:e.y,width:e.width+f,height:e.height};break a;default:throw Error("unrecognized direction: "+
d);}}b.resizeShape(e,f)})};Bd.prototype.postExecute=function(a){this._modeling.moveElements(a.movingShapes,a.delta,void 0,{autoResize:!1,attach:!1})};Bd.prototype.execute=function(a){};Bd.prototype.revert=function(a){};Ef.$inject=["modeling"];Ef.prototype.execute=function(a){var b=a.shape,c=b.children;a.oldChildrenVisibility=Yo(c);b.collapsed=!b.collapsed;a=Zo(c,b.collapsed);return[b].concat(a)};Ef.prototype.revert=function(a){var b=a.shape;a=$o(b.children,a.oldChildrenVisibility);b.collapsed=!b.collapsed;
return[b].concat(a)};Ff.$inject=["modeling"];Ff.prototype.execute=function(a){var b=a.shape,c=a.newHost,d=b.host;a.oldHost=d;a.attacherIdx=nd(d&&d.attachers,b);ap(c,b);b.host=c;return b};Ff.prototype.revert=function(a){var b=a.shape,c=a.newHost,d=a.oldHost;a=a.attacherIdx;b.host=d;nd(c&&c.attachers,b);ap(d,b,a);return b};Lh.prototype.execute=function(a){var b=a.connection,c=a.newWaypoints;a.oldWaypoints=b.waypoints;b.waypoints=c;return b};Lh.prototype.revert=function(a){var b=a.connection;b.waypoints=
a.oldWaypoints;return b};sa.$inject=["eventBus","elementFactory","commandStack"];sa.prototype.getHandlers=function(){return{"shape.append":vf,"shape.create":Wc,"shape.delete":ke,"shape.move":Xc,"shape.resize":ne,"shape.replace":ac,"shape.toggleCollapse":Ef,spaceTool:Bd,"label.create":je,"connection.create":wf,"connection.delete":xf,"connection.move":Jh,"connection.layout":zf,"connection.updateWaypoints":Lh,"connection.reconnect":me,"elements.create":Gh,"elements.move":Df,"elements.delete":Hh,"elements.distribute":yf,
"elements.align":uf,"element.updateAttachment":Ff}};sa.prototype.registerHandlers=function(a){O(this.getHandlers(),function(b,c){a.registerHandler(c,b)})};sa.prototype.moveShape=function(a,b,c,d,e){"object"===G(d)&&(e=d,d=null);this._commandStack.execute("shape.move",{shape:a,delta:b,newParent:c,newParentIndex:d,hints:e||{}})};sa.prototype.updateAttachment=function(a,b){this._commandStack.execute("element.updateAttachment",{shape:a,newHost:b})};sa.prototype.moveElements=function(a,b,c,d){d=d||{};
var e=d.attach,f=c;if(!0===e){var g=c;f=c.parent}else!1===e&&(g=null);this._commandStack.execute("elements.move",{shapes:a,delta:b,newParent:f,newHost:g,hints:d})};sa.prototype.moveConnection=function(a,b,c,d,e){"object"===G(d)&&(e=d,d=void 0);this._commandStack.execute("connection.move",{connection:a,delta:b,newParent:c,newParentIndex:d,hints:e||{}})};sa.prototype.layoutConnection=function(a,b){this._commandStack.execute("connection.layout",{connection:a,hints:b||{}})};sa.prototype.createConnection=
function(a,b,c,d,e,f){"object"===G(c)&&(f=e,e=d,d=c,c=void 0);d=this._create("connection",d);a={source:a,target:b,parent:e,parentIndex:c,connection:d,hints:f};this._commandStack.execute("connection.create",a);return a.connection};sa.prototype.createShape=function(a,b,c,d,e){"number"!==typeof d&&(e=d,d=void 0);e=e||{};var f=e.attach;a=this._create("shape",a);if(f){f=c.parent;var g=c}else f=c;a={position:b,shape:a,parent:f,parentIndex:d,host:g,hints:e};this._commandStack.execute("shape.create",a);return a.shape};
sa.prototype.createElements=function(a,b,c,d,e){ja(a)||(a=[a]);"number"!==typeof d&&(e=d,d=void 0);e=e||{};a={position:b,elements:a,parent:c,parentIndex:d,hints:e};this._commandStack.execute("elements.create",a);return a.elements};sa.prototype.createLabel=function(a,b,c,d){c=this._create("label",c);a={labelTarget:a,position:b,parent:d||a.parent,shape:c};this._commandStack.execute("label.create",a);return a.shape};sa.prototype.appendShape=function(a,b,c,d,e){e=e||{};b=this._create("shape",b);a={source:a,
position:c,target:d,shape:b,connection:e.connection,connectionParent:e.connectionParent,attach:e.attach};this._commandStack.execute("shape.append",a);return a.shape};sa.prototype.removeElements=function(a){this._commandStack.execute("elements.delete",{elements:a})};sa.prototype.distributeElements=function(a,b,c){this._commandStack.execute("elements.distribute",{groups:a,axis:b,dimension:c})};sa.prototype.removeShape=function(a,b){this._commandStack.execute("shape.delete",{shape:a,hints:b||{}})};sa.prototype.removeConnection=
function(a,b){this._commandStack.execute("connection.delete",{connection:a,hints:b||{}})};sa.prototype.replaceShape=function(a,b,c){a={oldShape:a,newData:b,hints:c||{}};this._commandStack.execute("shape.replace",a);return a.newShape};sa.prototype.alignElements=function(a,b){this._commandStack.execute("elements.align",{elements:a,alignment:b})};sa.prototype.resizeShape=function(a,b,c,d){this._commandStack.execute("shape.resize",{shape:a,newBounds:b,minBounds:c,hints:d})};sa.prototype.createSpace=function(a,
b,c,d){this._commandStack.execute("spaceTool",{movingShapes:a,resizingShapes:b,delta:c,direction:d})};sa.prototype.updateWaypoints=function(a,b,c){this._commandStack.execute("connection.updateWaypoints",{connection:a,newWaypoints:b,hints:c||{}})};sa.prototype.reconnect=function(a,b,c,d,e){this._commandStack.execute("connection.reconnect",{connection:a,newSource:b,newTarget:c,dockingOrPoints:d,hints:e||{}})};sa.prototype.reconnectStart=function(a,b,c,d){d||(d={});this.reconnect(a,b,a.target,c,R(d,
{docking:"source"}))};sa.prototype.reconnectEnd=function(a,b,c,d){d||(d={});this.reconnect(a,a.source,b,c,R(d,{docking:"target"}))};sa.prototype.connect=function(a,b,c,d){return this.createConnection(a,b,c||{},a.parent,d)};sa.prototype._create=function(a,b){return b instanceof ae?b:this._elementFactory.create(a,b)};sa.prototype.toggleCollapse=function(a,b){this._commandStack.execute("shape.toggleCollapse",{shape:a,hints:b||{}})};Gf.$inject=["elementRegistry","moddle"];Gf.prototype.execute=function(a){var b=
a.element,c=[b];if(!b)throw Error("element required");var d=this._elementRegistry,e=this._moddle.ids,f=b.businessObject,g=a.properties,h=a.oldProperties||wx(f,ic(g));"id"in g&&g.id!==f.id&&(e.unclaim(f.id),d.updateId(b,g.id),e.claim(g.id,f));"name"in g&&b.label&&c.push(b.label);bp(f,g);a.oldProperties=h;return a.changed=c};Gf.prototype.revert=function(a){var b=a.element,c=a.properties,d=a.oldProperties,e=b.businessObject,f=this._elementRegistry,g=this._moddle.ids;bp(e,d);"id"in c&&c.id!==e.id&&(g.unclaim(c.id),
f.updateId(b,d.id),g.claim(d.id,e));return a.changed};Hf.$inject=["moddle"];Hf.prototype.execute=function(a){var b=this._moddle.ids,c=a.id,d=a.element;a.claiming?b.claim(c,d):b.unclaim(c)};Hf.prototype.revert=function(a){var b=this._moddle.ids,c=a.id,d=a.element;a.claiming?b.unclaim(c):b.claim(c,d)};Ga(xc,sa);xc.$inject=["canvas","drdRules","injector"];xc.prototype.claimId=function(a,b){this._commandStack.execute("id.updateClaim",{id:a,element:b,claiming:!0})};xc.prototype.connect=function(a,b,c,
d){var e=this._drdRules,f=this._canvas.getRootElement();c||(c=e.canConnect(a,b)||{type:"dmn:Association"});return this.createConnection(a,b,c,f,d)};xc.prototype.getHandlers=function(){var a=sa.prototype.getHandlers.call(this);a["element.updateProperties"]=Gf;a["id.updateClaim"]=Hf;return a};xc.prototype.unclaimId=function(a,b){this._commandStack.execute("id.updateClaim",{id:a,element:b})};xc.prototype.updateProperties=function(a,b){this._commandStack.execute("element.updateProperties",{element:a,
properties:b})};cp.prototype.layoutConnection=function(a,b){b=b||{};return[b.connectionStart||pb(b.source||a.source),b.connectionEnd||pb(b.target||a.target)]};Ga(Mh,cp);Mh.prototype.layoutConnection=function(a,b){b=b||{};var c=b.source||a.source,d=b.target||a.target,e=b.waypoints||a.waypoints,f=b.connectionStart,g=b.connectionEnd;e=e||[];var h=e.slice(1,e.length-1);f||(f=(f=e&&e[0])?f.original||f:pb(c));g||(g=(c=e&&e[e.length-1])?c.original||c:pb(d));return[f].concat(h,[g])};yc.$inject=["elementRegistry",
"graphicsFactory"];yc.prototype.getCroppedWaypoints=function(a,b,c){b=b||a.source;c=c||a.target;b=this.getDockingPoint(a,b,!0);c=this.getDockingPoint(a,c);a=a.waypoints.slice(b.idx+1,c.idx);a.unshift(R({original:b.point.original||b.point},b.actual));a.push(R({original:c.point.original||c.point},c.actual));return a};yc.prototype.getDockingPoint=function(a,b,c){var d=a.waypoints;var e=c?0:d.length-1;d=d[e];a=this._getIntersection(b,a,c);return{point:d,actual:a||d,idx:e}};yc.prototype._getIntersection=
function(a,b,c){a=this._getShapePath(a);b=this._getConnectionPath(b);return uh(a,b,c)};yc.prototype._getConnectionPath=function(a){return this._graphicsFactory.getConnectionPath(a)};yc.prototype._getShapePath=function(a){return this._graphicsFactory.getShapePath(a)};yc.prototype._getGfx=function(a){return this._elementRegistry.getGraphics(a)};var eE={__init__:["modeling","drdUpdater"],__depends__:[aE,bE,vt,Qm,fc,Jt],drdFactory:["type",Rb],drdUpdater:["type",Uc],elementFactory:["type",Vc],modeling:["type",
xc],layouter:["type",Mh],connectionDocking:["type",yc]},If=Math.round;dp.$inject=["eventBus","dragging","modeling","selection","rules"];ep.$inject=["eventBus","canvas","styles","previewSupport"];var fE={__depends__:[Re,fc,ut,Od,Nd,Ft],__init__:["move","movePreview"],move:["type",dp],movePreview:["type",ep]};La.$inject=["eventBus","canvas"];La.prototype.registerProvider=function(a,b){b||(b=a,a=1E3);this._eventBus.on("palette.getProviders",a,function(c){c.providers.push(b)});this._rebuild()};La.prototype.getEntries=
function(){return this._getProviders().reduce(Bx,{})};La.prototype._rebuild=function(){this._diagramInitialized&&this._getProviders().length&&(this._container||this._init(),this._update())};La.prototype._init=function(){var a=this,b=this._eventBus,c=this._getParentContainer(),d=this._container=ta(La.HTML_MARKUP);c.appendChild(d);Mb.bind(d,".djs-palette-toggle, .entry","click",function(e){if(gj(e.delegateTarget,".djs-palette-toggle"))return a.toggle();a.trigger("click",e)});U.bind(d,"mousedown",function(e){e.stopPropagation()});
Mb.bind(d,".entry","dragstart",function(e){a.trigger("dragstart",e)});b.on("canvas.resized",this._layoutChanged,this);b.fire("palette.create",{container:d})};La.prototype._getProviders=function(a){a=this._eventBus.createEvent({type:"palette.getProviders",providers:[]});this._eventBus.fire(a);return a.providers};La.prototype._toggleState=function(a){a=a||{};var b=this._getParentContainer(),c=this._eventBus,d=wa(this._container);b="twoColumn"in a?a.twoColumn:this._needsCollapse(b.clientHeight,this._entries||
{});d.toggle("two-column",b);"open"in a&&d.toggle("open",a.open);c.fire("palette.changed",{twoColumn:b,open:this.isOpen()})};La.prototype._update=function(){var a=xa(".djs-palette-entries",this._container),b=this._entries=this.getEntries();Qg(a);O(b,function(c,d){var e=c.group||"default",f=xa("[data-group="+e+"]",a);f||(f=ta('<div class="group" data-group="'+e+'"></div>'),a.appendChild(f));e=ta(c.html||(c.separator?'<hr class="separator" />':'<div class="entry" draggable="true"></div>'));f.appendChild(e);
c.separator||(Kb(e,"data-action",d),c.title&&Kb(e,"title",c.title),c.className&&Ax(e,c.className),c.imageUrl&&e.appendChild(ta('<img src="'+c.imageUrl+'">')))});this.open()};La.prototype.trigger=function(a,b,c){var d=this._entries;var e=b.delegateTarget||b.target;if(!e)return b.preventDefault();if(d=d[Kb(e,"data-action")]){d=d.action;e=b.originalEvent||b;if(Na(d))"click"===a&&d(e,c);else if(d[a])d[a](e,c);b.preventDefault()}};La.prototype._layoutChanged=function(){this._toggleState({})};La.prototype._needsCollapse=
function(a,b){var c=46*Object.keys(b).length;return a<c+50};La.prototype.close=function(){this._toggleState({open:!1,twoColumn:!1})};La.prototype.open=function(){this._toggleState({open:!0})};La.prototype.toggle=function(a){this.isOpen()?this.close():this.open()};La.prototype.isActiveTool=function(a){return a&&this._activeTool===a};La.prototype.updateToolHighlight=function(a){if(!this._toolsContainer){var b=xa(".djs-palette-entries",this._container);this._toolsContainer=xa("[data-group=tools]",b)}O(this._toolsContainer.children,
function(c){var d=c.getAttribute("data-action");d&&(c=wa(c),d=d.replace("-tool",""),c.contains("entry")&&d===a?c.add("highlighted-entry"):c.remove("highlighted-entry"))})};La.prototype.isOpen=function(){return wa(this._container).has("open")};La.prototype._getParentContainer=function(){return this._canvas.getContainer()};La.HTML_MARKUP='<div class="djs-palette"><div class="djs-palette-entries"></div><div class="djs-palette-toggle"></div></div>';var gE={__init__:["palette"],palette:["type",La]};Yc.$inject=
["eventBus","dragging"];Yc.prototype.registerTool=function(a,b){var c=this._tools;if(!b)throw Error('A tool has to be registered with it\'s "events"');c.push(a);this.bindEvents(a,b)};Yc.prototype.isActive=function(a){return a&&this._active===a};Yc.prototype.length=function(a){return this._tools.length};Yc.prototype.setActive=function(a){var b=this._eventBus;this._active!==a&&(this._active=a,b.fire("tool-manager.update",{tool:a}))};Yc.prototype.bindEvents=function(a,b){var c=this._eventBus,d=this._dragging,
e=[];c.on(b.tool+".init",function(f){!f.context.reactivate&&this.isActive(a)?(this.setActive(null),d.cancel()):this.setActive(a)},this);O(b,function(f){e.push(f+".ended");e.push(f+".canceled")});c.on(e,250,function(f){f=f.originalEvent;this._active&&(f&&Za(f.target,'.group[data-group="tools"]')||this.setActive(null))},this)};var hE={__depends__:[Nd],__init__:["toolManager"],toolManager:["type",Yc]};Zc.$inject="eventBus canvas dragging elementRegistry selection toolManager".split(" ");Zc.prototype.activateLasso=
function(a,b){this._dragging.init(a,"lasso",{autoActivate:b,cursor:"crosshair",data:{context:{}}})};Zc.prototype.activateSelection=function(a){this._dragging.init(a,"lasso.selection",{trapClick:!1,cursor:"crosshair",data:{context:{}}})};Zc.prototype.select=function(a,b){var c=uw(a,b);this._selection.select(Vm(c))};Zc.prototype.toggle=function(){this.isActive()?this._dragging.cancel():this.activateSelection()};Zc.prototype.isActive=function(){var a=this._dragging.context();return a&&/^lasso/.test(a.prefix)};
var iE={__depends__:[hE],__init__:["lassoTool"],lassoTool:["type",Zc]};Oh.$inject=["palette","create","elementFactory","lassoTool","translate"];Oh.prototype.getPaletteEntries=function(a){function b(g,h,k,m,l){function r(q){var u=d.createShape(R({type:g},l));c.start(q,u)}return{group:h,className:k,title:m,action:{dragstart:r,click:r}}}a={};var c=this._create,d=this._elementFactory,e=this._lassoTool,f=this._translate;R(a,{"lasso-tool":{group:"tools",className:"dmn-icon-lasso-tool",title:f("Activate the lasso tool"),
action:{click:function(g){e.activateSelection(g)}}},"tool-separator":{group:"tools",separator:!0},"create.decision":b("dmn:Decision","drd","dmn-icon-decision",f("Create Decision")),"create.input-data":b("dmn:InputData","drd","dmn-icon-input-data",f("Create Input Data")),"create.knowledge-source":b("dmn:KnowledgeSource","drd","dmn-icon-knowledge-source",f("Create Knowledge Source")),"create.business-knowledge-model":b("dmn:BusinessKnowledgeModel","drd","dmn-icon-business-knowledge",f("Create Knowledge Model"))});
return a};var jE={__depends__:[Md,gE,Gt,iE],__init__:["paletteProvider"],paletteProvider:["type",Oh]};zc.prototype.getSnapOrigin=function(a){return this._snapOrigins[a]};zc.prototype.setSnapOrigin=function(a,b){this._snapOrigins[a]=b;-1===this._snapLocations.indexOf(a)&&this._snapLocations.push(a)};zc.prototype.addDefaultSnap=function(a,b){var c=this._defaultSnaps[a];c||(c=this._defaultSnaps[a]=[]);c.push(b)};zc.prototype.getSnapLocations=function(){return this._snapLocations};zc.prototype.setSnapLocations=
function(a){this._snapLocations=a};zc.prototype.pointsForTarget=function(a){a=a.id||a;var b=this._targets[a];b||(b=this._targets[a]=new Jf,b.initDefaults(this._defaultSnaps));return b};Jf.prototype.add=function(a,b){var c=this._snapValues[a];c||(c=this._snapValues[a]={x:[],y:[]});-1===c.x.indexOf(b.x)&&c.x.push(b.x);-1===c.y.indexOf(b.y)&&c.y.push(b.y)};Jf.prototype.snap=function(a,b,c,d){b=this._snapValues[b];var e;if(e=b)a:{a=a[c];c=b[c];d=void 0===d?10:d;for(b=0;b<c.length;b++)if(e=c[b],BD(e-a)<=
d)break a;e=void 0}return e};Jf.prototype.initDefaults=function(a){var b=this;O(a||{},function(c,d){O(c,function(e){b.add(d,e)})})};oe.$inject=["elementRegistry","eventBus","snapping"];oe.prototype.initSnap=function(a){var b=this._elementRegistry,c=a.context,d=c.shape,e=c.snapContext;e||(e=c.snapContext=new zc);b=b.get(d.id)?zd(d,a):{x:a.x+zd(d).x,y:a.y+zd(d).y};c=b.x-d.width/2;var f=b.y-d.height/2,g=b.x+d.width/2,h=b.y+d.height/2;e.setSnapOrigin("mid",{x:b.x-a.x,y:b.y-a.y});if(d.labelTarget)return e;
e.setSnapOrigin("top-left",{x:c-a.x,y:f-a.y});e.setSnapOrigin("bottom-right",{x:g-a.x,y:h-a.y});return e};oe.prototype.addSnapTargetPoints=function(a,b,c){c=this.getSnapTargets(b,c);O(c,function(d){d.labelTarget?b.labelTarget&&a.add("mid",zd(d)):d.waypoints?3>d.waypoints.length||(d=d.waypoints.slice(1,-1),O(d,function(e){a.add("mid",e)})):a.add("mid",zd(d))});if(!ua(b.x)||!ua(b.y))return a;this._elementRegistry.get(b.id)&&a.add("mid",zd(b));return a};oe.prototype.getSnapTargets=function(a,b){return(b.children||
[]).filter(function(c){return!c.hidden})};pe.prototype.initSnap=function(a){var b=a.context,c=b.shape,d=b.direction,e=b.snapContext;e||(e=b.snapContext=new zc);b=fp(c,d);e.setSnapOrigin("corner",{x:b.x-a.x,y:b.y-a.y});return e};pe.prototype.addSnapTargetPoints=function(a,b,c,d){c=this.getSnapTargets(b,c);O(c,function(e){a.add("corner",{x:e.x+e.width,y:e.y+e.height});a.add("corner",{x:e.x,y:e.y})});a.add("corner",fp(b,d));return a};pe.$inject=["eventBus","snapping"];pe.prototype.getSnapTargets=function(a,
b){return(b.children||[]).filter(function(c){return c.host!==a&&!c.waypoints&&!c.hidden&&!c.labelTarget})};Ac.$inject=["canvas"];Ac.prototype.snap=function(a,b){var c=a.context.snapContext,d=c.getSnapLocations(),e={x:fe(a,"x"),y:fe(a,"y")};O(d,function(f){var g=c.getSnapOrigin(f),h={x:a.x+g.x,y:a.y+g.y};O(["x","y"],function(k){if(!e[k]){var m=b.snap(h,f,k,7);void 0!==m&&(e[k]={value:m,originValue:m-g[k]})}});if(e.x&&e.y)return!1});this.showSnapLine("vertical",e.x&&e.x.value);this.showSnapLine("horizontal",
e.y&&e.y.value);O(["x","y"],function(f){var g=e[f];gb(g)&&vc(a,f,g.originValue)})};Ac.prototype._createLine=function(a){var b=this._canvas.getLayer("snap"),c=ea("path");W(c,{d:"M0,0 L0,0"});za(c).add("djs-snap-line");ha(b,c);return{update:function(d){ua(d)?"horizontal"===a?W(c,{d:"M-100000,"+d+" L+100000,"+d,display:""}):W(c,{d:"M "+d+",-100000 L "+d+", +100000",display:""}):W(c,{display:"none"})}}};Ac.prototype._createSnapLines=function(){this._snapLines={horizontal:this._createLine("horizontal"),
vertical:this._createLine("vertical")}};Ac.prototype.showSnapLine=function(a,b){var c=this.getSnapLine(a);c&&c.update(b);this._asyncHide()};Ac.prototype.getSnapLine=function(a){this._snapLines||this._createSnapLines();return this._snapLines[a]};Ac.prototype.hide=function(){O(this._snapLines,function(a){a.update()})};var kE={__init__:["createMoveSnapping","resizeSnapping","snapping"],createMoveSnapping:["type",oe],resizeSnapping:["type",pe],snapping:["type",Ac]};Ga(Cd,td);Cd.prototype._modelingModules=
[zD,AD,CD,MD,ND,OD,RD,TD,UD,VD,WD,XD,YD,$D,eE,fE,jE,kE];Cd.prototype._modules=[].concat(Cd.prototype._modules,Cd.prototype._modelingModules);var Se=function c(b){qe(this,c);R(this,b);Object.defineProperty(this,"businessObject",{writable:!0})},lE=function(b){function c(d){qe(this,c);d=Kf(this,Dd(c).call(this,d));var e=bc(d);Object.defineProperty(e,"rows",{enumerable:!0,value:d.rows||[]});e=bc(d);Object.defineProperty(e,"cols",{enumerable:!0,value:d.cols||[]});return d}Lf(c,b);return c}(Se),lb=function(b){function c(d){qe(this,
c);d=Kf(this,Dd(c).call(this,d));var e=bc(d);Object.defineProperty(e,"root",{writable:!0});e=bc(d);Object.defineProperty(e,"cells",{enumerable:!0,value:d.cells||[]});return d}Lf(c,b);return c}(Se),mb=function(b){function c(d){qe(this,c);d=Kf(this,Dd(c).call(this,d));var e=bc(d);Object.defineProperty(e,"root",{writable:!0});e=bc(d);Object.defineProperty(e,"cells",{enumerable:!0,value:d.cells||[]});return d}Lf(c,b);return c}(Se),zg=function(b){function c(d){qe(this,c);d=Kf(this,Dd(c).call(this,d));
var e=bc(d);Object.defineProperty(e,"row",{writable:!0});e=bc(d);Object.defineProperty(e,"col",{writable:!0});return d}Lf(c,b);return c}(Se),mE={root:lE,row:lb,col:mb,cell:zg},Ot=function(){function b(){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this._uid=12}Cx(b,[{key:"create",value:function(c){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};d.id||(d.id=c+"_"+this._uid++);var e=mE[c];if(!e)throw Error("unknown type "+c);return new e(d)}},{key:"createRoot",
value:function(c){return this.create("root",c)}},{key:"createRow",value:function(c){return this.create("row",c)}},{key:"createCol",value:function(c){return this.create("col",c)}},{key:"createCell",value:function(c){return this.create("cell",c)}}]);return b}(),Pt=function(){function b(c){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this._eventBus=c;this._elements={};c.on("table.clear",this.clear.bind(this))}Dx(b,[{key:"add",value:function(c,d){this._elements[c.id]=
c}},{key:"remove",value:function(c){delete this._elements[c.id||c]}},{key:"get",value:function(c){return this._elements[c]}},{key:"getAll",value:function(){return Rh(this._elements)}},{key:"forEach",value:function(c){Rh(this._elements).forEach(function(d){return c(d)})}},{key:"filter",value:function(c){return Rh(this._elements).filter(function(d){return c(d)})}},{key:"clear",value:function(){this._elements={}}},{key:"updateId",value:function(c,d){this._validateId(d);"string"===typeof c&&(c=this.get(c));
this._eventBus.fire("element.updateId",{element:c,newId:d});this.remove(c);c.id=d;this.add(c)}},{key:"_validateId",value:function(c){if(!c)throw Error("element must have an id");if(this._elements[c])throw Error("element with id "+c+" already added");}}]);return b}();Pt.$inject=["eventBus"];var Qt=function(){function b(c){var d=this;if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this._listeners={};c.on("elements.changed",function(e){d.elementsChanged(e.elements)});
c.on("root.remove",function(e){var f=e.root.id;if(d._listeners[f])c.once("root.add",function(g){d.updateId(f,g.root.id)})});c.on("element.updateId",function(e){d.updateId(e.element.id,e.newId)})}Ex(b,[{key:"elementsChanged",value:function(c){for(var d={},e=c.length,f=0;f<e;f++){var g=c[f].id;if(d[g])break;d[g]=!0;var h=this._listeners[g]&&this._listeners[g].length;if(h)for(var k=0;k<h;k++)this._listeners[g][k]&&this._listeners[g][k]()}}},{key:"onElementsChanged",value:function(c,d){this._listeners[c]||
(this._listeners[c]=[]);this._listeners[c][this._listeners[c].length]=d}},{key:"offElementsChanged",value:function(c,d){if(this._listeners[c])if(d){var e=this._listeners[c].indexOf(d);-1!==e&&this._listeners[c].splice(e,1)}else this._listeners[c].length=0}},{key:"updateId",value:function(c,d){this._listeners[c]&&(this._listeners[d]=this._listeners[c],delete this._listeners[c])}}]);return b}();Qt.$inject=["eventBus"];var nE=function(){function b(){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");
this._listeners={}}Fx(b,[{key:"getComponent",value:function(c,d){var e=this._listeners[c];if(e){for(var f,g=0;g<e.length&&!(f=e[g].callback(d));g++);return f}}},{key:"getComponents",value:function(c,d){var e=this._listeners[c],f=[];if(!e)return f;for(var g=0;g<e.length;g++){var h=e[g].callback(d);h&&f.push(h)}return f}},{key:"onGetComponent",value:function(c,d,e){Na(d)&&(e=d,d=1E3);if(!ua(d))throw Error("priority must be a number");c=this._getListeners(c);var f,g={priority:d,callback:e};for(f=0;e=
c[f];f++)if(e.priority<d){c.splice(f,0,g);return}c.push(g)}},{key:"offGetComponent",value:function(c,d){var e=this._getListeners(c),f,g;if(d)for(g=e.length-1;f=e[g];g--)f=f.callback,f===d&&e.splice(g,1);else e.length=0}},{key:"_getListeners",value:function(c){var d=this._listeners[c];d||(this._listeners[c]=d=[]);return d}}]);return b}(),Mf=Array.isArray,$a={afterMount:null,afterRender:null,afterUpdate:null,beforeRender:null,beforeUnmount:null,createVNode:null,roots:[]},tp={"xlink:actuate":"http://www.w3.org/1999/xlink",
"xlink:arcrole":"http://www.w3.org/1999/xlink","xlink:href":"http://www.w3.org/1999/xlink","xlink:role":"http://www.w3.org/1999/xlink","xlink:show":"http://www.w3.org/1999/xlink","xlink:title":"http://www.w3.org/1999/xlink","xlink:type":"http://www.w3.org/1999/xlink","xml:base":"http://www.w3.org/XML/1998/namespace","xml:lang":"http://www.w3.org/XML/1998/namespace","xml:space":"http://www.w3.org/XML/1998/namespace"},Ra={},Hb=[],Of={},Wh={},Lx=te("onInput",Pf),Kx=te(["onClick","onChange"],Pf);pp.wrapped=
!0;var Mx=te("onChange",Zh),Nx=te("onInput",$h),Ox=te("onChange"),Rf=$a.roots,Rt="undefined"===typeof Promise?null:Promise.resolve(),oE="undefined"===typeof requestAnimationFrame?setTimeout:requestAnimationFrame.bind(window),Z=function(b,c){this.state=null;this.$BR=!1;this.$BS=!0;this.$PSS=!1;this.$V=this.$LI=this.$PS=null;this.$UN=!1;this.$CX=null;this.$UPD=!0;this.$QU=null;this.props=b||Ra;this.context=c||Ra};Z.prototype.forceUpdate=function(b){this.$UN||di(this,!0,b)};Z.prototype.setState=function(b,
c){if(!this.$UN&&!this.$BS){var d=b;ia(d)&&(d=d(this.state,this.props,this.context));var e=this.$PS;if(ma(e))this.$PS=d;else for(var f in d)e[f]=d[f];this.$PSS||this.$BR?(this.$PSS=!0,this.$BR&&ia(c)&&Hb.push(c.bind(this))):this.$UPD?(d=this.$QU,null===d&&(d=this.$QU=[],e=Sx(this,d),Rt?Rt.then(e):oE(e)),ia(c)&&d.push(c)):(this.$UPD=this.$PSS=!0,di(this,!1,c),this.$UPD=!1)}};Z.prototype.render=function(b,c,d){};Z.defaultProps=null;var pE=function(b){function c(d){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");
var e=fi(c).call(this,d);e=!e||"object"!==ei(e)&&"function"!==typeof e?Cp(this):e;d=e._injector=d.injector;e._sheet=d.get("sheet");e._changeSupport=d.get("changeSupport");e._components=d.get("components");e.onElementsChanged=e.onElementsChanged.bind(Cp(e));return e}Ux(c,b);Tx(c,[{key:"onElementsChanged",value:function(){this.forceUpdate()}},{key:"getChildContext",value:function(){return{changeSupport:this._changeSupport,components:this._components,injector:this._injector}}},{key:"componentWillMount",
value:function(){var d=this._sheet.getRoot().id;this._changeSupport.onElementsChanged(d,this.onElementsChanged)}},{key:"componentWillUnmount",value:function(){var d=this._sheet.getRoot().id;this._changeSupport.offElementsChanged(d,this.onElementsChanged)}},{key:"render",value:function(){var d=this._sheet.getRoot(),e=d.rows;d=d.cols;var f=this._components.getComponents("table.before"),g=this._components.getComponents("table.after"),h=this._components.getComponent("table.head"),k=this._components.getComponent("table.body"),
m=this._components.getComponent("table.foot");return E(1,"div","tjs-container",[f&&f.map(function(l,r){return X(2,l,null,r)}),E(1,"table","tjs-table",[h&&X(2,h,{rows:e,cols:d}),k&&X(2,k,{rows:e,cols:d}),m&&X(2,m,{rows:e,cols:d})],0),g&&g.map(function(l,r){return X(2,l,null,r)})],0)}}]);return c}(Z),St=function(){function b(c,d,e,f,g){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");var h=e.container;this._container=h;f.on("root.added",function(){Qf(X(2,pE,{injector:g}),
h)});f.on("root.remove",function(){Qf(null,h)})}Vx(b,[{key:"getContainer",value:function(){return this._container}}]);return b}();St.$inject=["changeSupport","components","config.renderer","eventBus","injector"];var Tt={__init__:["changeSupport","components","renderer"],changeSupport:["type",Qt],components:["type",nE],renderer:["type",St]},Ut=function(){function b(c,d){var e=this;if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this._elementRegistry=c;this._eventBus=
d;this._root=null;d.on("table.clear",function(){e.setRoot(null)})}Wx(b,[{key:"setRoot",value:function(c){if(this._root){var d=this._root;this._eventBus.fire("root.remove",{root:d});this._root=null;this._eventBus.fire("root.removed",{root:d})}c&&this._eventBus.fire("root.add",{root:c});(this._root=c)&&this._eventBus.fire("root.added",{root:c})}},{key:"getRoot",value:function(){this._root||this.setRoot({id:"__implicitroot",rows:[],cols:[]});return this._root}},{key:"addRow",value:function(c,d){var e=
this,f=this.getRoot();if(f.cols.length!=c.cells.length)throw Error("number of cells is not equal to number of cols");"undefined"===typeof d&&(d=f.rows.length);f.rows.splice(d,0,c);c.root=f;this._elementRegistry.add(c);c.cells.forEach(function(g,h){e._elementRegistry.add(g);g.row=c;g.col=f.cols[h];f.cols[h].cells.splice(d,0,g)});this._eventBus.fire("row.add",{row:c});return c}},{key:"removeRow",value:function(c){var d=this,e=this.getRoot();"string"===typeof c&&(c=this._elementRegistry.get(c));var f=
e.rows.indexOf(c);-1!==f&&(e.rows.splice(f,1),c.root=void 0,this._elementRegistry.remove(c),c.cells.forEach(function(g,h){d._elementRegistry.remove(g);g.col=void 0;e.cols[h].cells.splice(f,1)}),this._eventBus.fire("row.remove",{row:c}))}},{key:"addCol",value:function(c,d){var e=this,f=this.getRoot();this._elementRegistry.add(c);if(f.rows.length!=c.cells.length)throw Error("number of cells is not equal to number of rows");"undefined"===typeof d&&(d=f.cols.length);f.cols.splice(d,0,c);c.root=f;c.cells.forEach(function(g,
h){e._elementRegistry.add(g);g.col=c;g.row=f.rows[h];f.rows[h].cells.splice(d,0,g)});this._eventBus.fire("col.add",{col:c});return c}},{key:"removeCol",value:function(c){var d=this,e=this.getRoot();"string"===typeof c&&(c=this._elementRegistry.get(c));var f=e.cols.indexOf(c);-1!==f&&(e.cols.splice(f,1),c.root=void 0,this._elementRegistry.remove(c),c.cells.forEach(function(g,h){d._elementRegistry.remove(g);g.row=void 0;e.rows[h].cells.splice(f,1)}),this._eventBus.fire("col.remove",{col:c}))}},{key:"resized",
value:function(){this._eventBus.fire("sheet.resized")}}]);return b}();Ut.$inject=["elementRegistry","eventBus"];var qE={__depends__:[Tt],__init__:["elementFactory","sheet"],elementFactory:["type",Ot],elementRegistry:["type",Pt],eventBus:["type",Ta],sheet:["type",Ut]},rE=function(){function b(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");var d=c.injector;d||(c=this._init(c),c=[{config:["value",c.config]},
qE].concat(c.modules||[]),d=Yx(c));this.get=d.get;this.invoke=d.invoke;this.get("eventBus").fire("table.init");this.get("eventBus").fire("diagram.init")}Xx(b,[{key:"_init",value:function(c){var d=c.modules;var e=["modules"];if(null==c)c={};else{if(null==c)var f={};else{f={};var g=Object.keys(c),h;for(h=0;h<g.length;h++){var k=g[h];0<=e.indexOf(k)||(f[k]=c[k])}}if(Object.getOwnPropertySymbols)for(h=Object.getOwnPropertySymbols(c),k=0;k<h.length;k++)g=h[k],0<=e.indexOf(g)||Object.prototype.propertyIsEnumerable.call(c,
g)&&(f[g]=c[g]);c=f}return{modules:d,config:c}}},{key:"destroy",value:function(){var c=this.get("eventBus");c.fire("table.destroy");c.fire("diagram.destroy")}},{key:"clear",value:function(){var c=this.get("eventBus");c.fire("table.clear");c.fire("diagram.clear")}}]);return b}(),Rm={getSelectionClasses:function(){var b=this.state;return Sf({selected:b.selected,"selected-secondary":b.selectedSecondary,focussed:b.focussed})},selectionChanged:function(b){this.setState(b)},componentWillUpdate:function(b){b.elementId!==
this.props.elementId&&this.updateSelectionSubscription(!1)},componentDidUpdate:function(b){b.elementId!==this.props.elementId&&this.updateSelectionSubscription(!0)},componentDidMount:function(){this.updateSelectionSubscription(!0)},componentWillUnmount:function(){this.updateSelectionSubscription(!1)},updateSelectionSubscription:function(b){var c=this.props.elementId;if(c&&c)this.eventBus[b?"on":"off"]("selection.".concat(c,".changed"),this.selectionChanged)},$inject:["eventBus"]},xe=function(b){function c(d,
e){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");var f=oi(c).call(this,d,e);if(!f||"object"!==ni(f)&&"function"!==typeof f){if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");f=this}f.state={};return f}iy(c,b);hy(c,[{key:"render",value:function(){var d=this.props.children,e=this.getRenderProps("cell");return Uh(E(1,"td",null,d,0,gy({},e)))}}]);return c}(function(b){function c(d,e){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");
var f=ki(c).call(this,d,e);f=!f||"object"!==ji(f)&&"function"!==typeof f?li(this):f;$c(li(f),Rm);Ab(li(f));return f}fy(c,b);ey(c,[{key:"getRenderProps",value:function(){var d=this.props,e=d.className,f=d.elementId,g=d.coords;var h=["className","elementId","coords"];if(null==d)d={};else{if(null==d)var k={};else{k={};var m=Object.keys(d),l;for(l=0;l<m.length;l++){var r=m[l];0<=h.indexOf(r)||(k[r]=d[r])}}if(Object.getOwnPropertySymbols)for(l=Object.getOwnPropertySymbols(d),r=0;r<l.length;r++)m=l[r],
0<=h.indexOf(m)||Object.prototype.propertyIsEnumerable.call(d,m)&&(k[m]=d[m]);d=k}h=arguments.length;k=Array(h);for(m=0;m<h;m++)k[m]=arguments[m];e={className:Sf.apply(void 0,k.concat([this.getSelectionClasses(),e]))};f&&(e["data-element-id"]=f);g&&(e["data-coords"]=g);return dy({},e,{},d)}}]);return c}(Z));Pp.$inject=["components"];var sE={__init__:["annotationsProvider"],annotationsProvider:["type",Pp]},Vt=function(){function b(c,d,e){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");
this._elementFactory=c;this._eventBus=d;this._sheet=e}ky(b,[{key:"add",value:function(c){var d=this;if(P(c,"dmn:DecisionTable")){var e=this._elementFactory.createRoot(ye(c));this._sheet.setRoot(e)}else P(c,"dmn:InputClause")?(e=this._elementFactory.createCol(ye(c)),this._sheet.addCol(e)):P(c,"dmn:OutputClause")?(e=this._elementFactory.createCol(ye(c)),this._sheet.addCol(e)):P(c,"dmn:DecisionRule")&&(c.inputEntry||(c.inputEntry=[]),c.outputEntry||(c.outputEntry=[]),e=[].concat(Qp(c.inputEntry),Qp(c.outputEntry)).map(function(f){return d._elementFactory.createCell(ye(f))}),
e=this._elementFactory.createRow(R(ye(c),{cells:e})),this._sheet.addRow(e));this._eventBus.fire("dmnElement.added",{element:e});return e}}]);return b}();Vt.$inject=["elementFactory","eventBus","sheet"];var tE={__depends__:[{__depends__:[Md],tableImporter:["type",Vt]},Tt]},Ag={slotFill:function(b,c){var d=b.type,e=b.context,f=Up(b,["type","context"]);return(d=this.components.getComponent(d,e)||c)?Uh(X(2,d,Tp({},e,{},f))):null},slotFills:function(b){var c=b.type,d=b.context,e=Up(b,["type","context"]);
return this.components.getComponents(c,d).map(function(f){return Uh(X(2,f,Tp({},d,{},e)))})},$inject:["components"]},oy=function(b){function c(d,e){ri(this,c);var f=ti(this,ze(c).call(this,d,e));ly(ui(f),"onElementsChanged",function(){f.forceUpdate()});$c(ui(f),Ag);f._sheet=e.injector.get("sheet");f._changeSupport=e.changeSupport;return f}vi(c,b);si(c,[{key:"componentWillMount",value:function(){var d=this._sheet.getRoot();this._changeSupport.onElementsChanged(d.id,this.onElementsChanged)}},{key:"componentWillUnmout",
value:function(){var d=this._sheet.getRoot();this._changeSupport.offElementsChanged(d.id,this.onElementsChanged)}},{key:"render",value:function(d){var e=this;d=this._sheet.getRoot();if(!P(d,"dmn:DMNElement"))return null;var f=ld(d);d=f.input;f=f.output;return E(1,"thead",null,[E(1,"tr",null,[this.slotFills({type:"cell",context:{cellType:"before-label-cells"}}),this.slotFill({type:"cell",context:{cellType:"input-label"}},uE),this.slotFill({type:"cell",context:{cellType:"output-label"}},vE),this.slotFills({type:"cell",
context:{cellType:"after-label-cells"}})],0),E(1,"tr",null,[d&&d.map(function(g){return e.slotFill({type:"cell",context:{cellType:"input-header",input:g},key:g.id},my)}),f.map(function(g){return e.slotFill({type:"cell",context:{cellType:"output-header",output:g},key:g.id},ny)})],0),E(1,"tr",null,[d&&d.map(function(g,h){return e.slotFill({type:"cell",context:{cellType:"input-header-type-ref",element:g.inputExpression},className:"input-cell",key:g.id},Wp)}),f.map(function(g){return e.slotFill({type:"cell",
context:{cellType:"output-header-type-ref",element:g},className:"output-cell",key:g.id},Wp)})],0)],4)}}]);return c}(Z),uE=function(b){function c(d,e){ri(this,c);var f=ti(this,ze(c).call(this,d,e));f._sheet=e.injector.get("sheet");return f}vi(c,b);si(c,[{key:"render",value:function(){var d=this._sheet.getRoot().businessObject,e=d.input;if(!e||!e.length)return null;d=d.input.length;return E(1,"th","input-cell inputs-label header",aa("Input"),2,{colspan:d})}}]);return c}(Z),vE=function(b){function c(d,
e){ri(this,c);var f=ti(this,ze(c).call(this,d,e));f._sheet=e.injector.get("sheet");return f}vi(c,b);si(c,[{key:"render",value:function(){var d=this._sheet.getRoot().businessObject.output.length;return E(1,"th","output-cell outputs-label header",aa("Output"),2,{colspan:d})}}]);return c}(Z);Xp.$inject=["components"];var wE={__init__:["decisionTableHeadProvider"],decisionTableHeadProvider:["type",Xp]},xE=function(b){function c(){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");
var d=yi(c).apply(this,arguments);if(!d||"object"!==xi(d)&&"function"!==typeof d){if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");d=this}return d}qy(c,b);py(c,[{key:"componentWillMount",value:function(){this._sheet=this.context.injector.get("sheet")}},{key:"render",value:function(){var d=this._sheet.getRoot();if(!P(d,"dmn:DMNElement"))return null;d=d.businessObject.$parent;var e=d.id;return E(1,"header","decision-table-properties",[E(1,"h3","decision-table-name",
d.name,0,{title:"Decision Name"}),E(1,"h5","decision-table-id",e,0,{title:"Decision Id"})],4)}}]);return c}(Z),Wt=function d(c){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");c.onGetComponent("table.before",function(){return xE})};Wt.$inject=["components"];var yE={__init__:["decisionTableProperties"],decisionTableProperties:["type",Wt]},zE=function(c){function d(){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");var e=Bi(d).apply(this,
arguments);if(!e||"object"!==Ai(e)&&"function"!==typeof e){if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");e=this}return e}sy(d,c);ry(d,[{key:"render",value:function(){var e=this.props,f=e.row,g=e.rowIndex;e=this.context.components.getComponents("cell-inner",{cellType:"rule-index",row:f,rowIndex:g});return E(1,"td","rule-index",[e&&e.map(function(h){return X(2,h,{row:f,rowIndex:g})}),g+1],0,{"data-row-id":f.id})}}]);return d}(Z),Xt=function e(d){if(!(this instanceof
e))throw new TypeError("Cannot call a class as a function");d.onGetComponent("cell",function(f){if("before-rule-cells"===f.cellType)return zE})};Xt.$inject=["components"];var AE={__init__:["decisionRuleIndices"],decisionRuleIndices:["type",Xt]},BE=[{label:"FEEL",value:"feel"},{label:"JUEL",value:"juel"},{label:"JavaScript",value:"javascript"},{label:"Groovy",value:"groovy"},{label:"Python",value:"python"},{label:"JRuby",value:"jruby"}],Yt=function(){function d(e){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");
this._injector=e;e=e.get("config.expressionLanguages")||{};this._config={options:BE,defaults:{editor:"juel",inputCell:"feel"}};e.options&&(this._config.options=e.options);var f=this._getLegacyDefaults();R(this._config.defaults,f,e.defaults)}ty(d,[{key:"getDefault",value:function(e){var f=this._config.defaults;return this._getLanguageByValue(f[e]||f.editor)||this.getAll()[0]}},{key:"getLabel",value:function(e){var f=this._getLanguageByValue(e);return f?f.label:e}},{key:"getAll",value:function(){return this._config.options}},
{key:"_getLegacyDefaults",value:function(){var e={},f=this._injector,g=f.get("config.defaultInputExpressionLanguage");f=f.get("config.defaultOutputExpressionLanguage");g&&(e.inputCell=g);f&&(e.outputCell=f);return e}},{key:"_getLanguageByValue",value:function(e){return this.getAll().find(function(f){return e===f.value})}}]);return d}();Yt.$inject=["injector"];var dd={__init__:["expressionLanguages"],expressionLanguages:["type",Yt]},CE=function(d){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");
var f=Ei(e).apply(this,arguments);if(!f||"object"!==Di(f)&&"function"!==typeof f){if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");f=this}return f}vy(e,d);uy(e,[{key:"render",value:function(f){var g=f.cols,h=this.context.components;return E(1,"tbody",null,f.rows.map(function(k,m){var l=h.getComponent("row",{rowType:"rule"});return l&&X(2,l,{row:k,rowIndex:m,cols:g},k.id)}),0)}}]);return e}(Z),DE=function(d){function e(f,g){if(!(this instanceof
e))throw new TypeError("Cannot call a class as a function");var h=Hi(e).call(this,f,g);h=!h||"object"!==Gi(h)&&"function"!==typeof h?cq(this):h;$c(cq(h),Ag);return h}xy(e,d);wy(e,[{key:"render",value:function(){var f=this,g=this.props,h=g.row,k=g.rowIndex,m=g.cols;g=h.cells;return E(1,"tr",null,[this.slotFills({type:"cell",context:{cellType:"before-rule-cells",row:h,rowIndex:k}}),g.map(function(l,r){return f.slotFill({type:"cell",context:{cellType:"rule",cell:l,rowIndex:k,colIndex:r},key:l.id,row:h,
col:m[r]})}),this.slotFills({type:"cell",context:{cellType:"after-rule-cells",row:h,rowIndex:k}})],0)}}]);return e}(Z),EE=function(d){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");var f=Ki(e).apply(this,arguments);if(!f||"object"!==Ji(f)&&"function"!==typeof f){if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");f=this}return f}zy(e,d);yy(e,[{key:"render",value:function(){var f=this.props,g=f.cell,h=
f.row;f=f.col;return P(g,"dmn:UnaryTests")?X(2,xe,{className:"input-cell",elementId:g.id,"data-row-id":h.id,"data-col-id":f.id,children:g.businessObject.text}):X(2,xe,{className:"output-cell",elementId:g.id,"data-row-id":h.id,"data-col-id":f.id,children:g.businessObject.text})}}]);return e}(Z),Zt=function f(e){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");e.onGetComponent("table.body",function(){return CE});e.onGetComponent("row",function(g){if("rule"===g.rowType)return DE});
e.onGetComponent("cell",function(g){if("rule"===g.cellType)return EE})};Zt.$inject=["components"];var $t={__depends__:[dd],__init__:["decisionRules"],decisionRules:["type",Zt]},Dy=function(e){function f(){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");var g=Ni(f).apply(this,arguments);if(!g||"object"!==Mi(g)&&"function"!==typeof g){if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");g=this}return g}By(f,e);Ay(f,[{key:"componentWillMount",
value:function(){this._sheet=this.context.injector.get("sheet")}},{key:"render",value:function(){var g=this._sheet.getRoot().businessObject,h=g.hitPolicy,k=h.charAt(0);g=Cy(g.aggregation);return E(1,"th","hit-policy header",[k,g],0,{rowspan:"3",title:"Hit Policy = "+h})}}]);return f}(Z);fq.$inject=["components"];var FE={__init__:["hitPolicyProvider"],hitPolicyProvider:["type",fq]},GE=function(e){function f(g,h){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");var k=
Fy(this,Qi(f).call(this,g,h));Hy(hq(k),"onClick",function(){k._eventBus.fire("showDrd")});k._eventBus=h.injector.get("eventBus");return k}Gy(f,e);Ey(f,[{key:"render",value:function(){var g=this;return E(1,"div","view-drd",E(1,"button","view-drd-button",aa("View DRD"),2,{onClick:this.onClick}),2,null,null,function(h){return g.node=h})}}]);return f}(Z),au=function(){function e(f,g,h,k){var m=this;if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this._injector=h;this._sheet=
k;f.onGetComponent("table.before",function(){if(m.canViewDrd())return GE});g.on("showDrd",function(){var l=h.get("_parent",!1),r=k.getRoot();if(r=jq(r))r=l.getView(r),l.open(r)})}Iy(e,[{key:"canViewDrd",value:function(){var f=this._injector.get("_parent",!1);if(!f)return!1;var g=this._sheet.getRoot();g=jq(g);return!!f.getView(g)}}]);return e}();au.$inject=["components","eventBus","injector","sheet"];var HE={__init__:["viewDrd"],viewDrd:["type",au]},IE=function(e){function f(g,h){if(!(this instanceof
f))throw new TypeError("Cannot call a class as a function");var k=Ky(this,Ti(f).call(this,g,h));My(lq(k),"onClick",function(){k._eventBus.fire("poweredBy.show")});k._eventBus=h.injector.get("eventBus");return k}Ly(f,e);Jy(f,[{key:"render",value:function(){var g=this;return E(1,"div","powered-by-logo",E(1,"img","logo",null,1,{src:"data:image/png;base64,".concat("iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAMAAADypuvZAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAADBQTFRFiMte9PrwldFwfcZPqtqN0+zEyOe1XLgjvuKncsJAZ70y6fXh3vDT////UrQV////G2zN+AAAABB0Uk5T////////////////////AOAjXRkAAAHDSURBVHjavJZJkoUgDEBJmAX8979tM8u3E6x20VlYJfFFMoL4vBDxATxZcakIOJTWSmxvKWVIkJ8jHvlRv1F2LFrVISCZI+tCtQx+XfewgVTfyY3plPiQEAzI3zWy+kR6NBhFBYeBuscJLOUuA2WVLpCjVIaFzrNQZArxAZKUQm6gsj37L9Cb7dnIBUKxENaaMJQqMpDXvSL+ktxdGRm2IsKgJGGPg7atwUG5CcFUEuSv+CwQqizTrvDTNXdMU2bMiDWZd8d7QIySWVRsb2vBBioxOFt4OinPBapL+neAb5KL5IJ8szOza2/DYoipUCx+CjO0Bpsv0V6mktNZ+k8rlABlWG0FrOpKYVo8DT3dBeLEjUBAj7moDogVii7nSS9QzZnFcOVBp1g2PyBQ3Vr5aIapN91VJy33HTJLC1iX2FY6F8gRdaAeIEfVONgtFCzZTmoLEdOjBDfsIOA6128gw3eu1shAajdZNAORxuQDJN5A5PbEG6gNIu24QJD5iNyRMZIr6bsHbCtCU/OaOaSvgkUyDMdDa1BXGf5HJ1To+/Ym6mCKT02Y+/Sa126ZKyd3jxhzpc1r8zVL6YM1Qy/kR4ABAFJ6iQUnivhAAAAAAElFTkSuQmCC")}),
2,{onClick:this.onClick,title:"Powered by bpmn.io"},null,function(h){return g.node=h})}}]);return f}(Z),JE=function(e){function f(g){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");g=Wi(f).call(this,g);g=!g||"object"!==Vi(g)&&"function"!==typeof g?Xi(this):g;g.state={show:!1};g.onClick=g.onClick.bind(Xi(g));g.onShow=g.onShow.bind(Xi(g));return g}Oy(f,e);Ny(f,[{key:"onClick",value:function(){this.setState({show:!1})}},{key:"onShow",value:function(){this.setState({show:!0})}},
{key:"componentWillMount",value:function(){(this._eventBus=this.context.injector.get("eventBus")).on("poweredBy.show",this.onShow)}},{key:"componentWillUnmount",value:function(){this._eventBus.off("poweredBy.show",this.onShow)}},{key:"render",value:function(){return this.state.show&&E(1,"div","powered-by-overlay",E(1,"div","powered-by-overlay-content",[E(1,"div",null,E(1,"img","logo",null,1,{src:"data:image/png;base64,".concat("iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAMAAADypuvZAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAADBQTFRFiMte9PrwldFwfcZPqtqN0+zEyOe1XLgjvuKncsJAZ70y6fXh3vDT////UrQV////G2zN+AAAABB0Uk5T////////////////////AOAjXRkAAAHDSURBVHjavJZJkoUgDEBJmAX8979tM8u3E6x20VlYJfFFMoL4vBDxATxZcakIOJTWSmxvKWVIkJ8jHvlRv1F2LFrVISCZI+tCtQx+XfewgVTfyY3plPiQEAzI3zWy+kR6NBhFBYeBuscJLOUuA2WVLpCjVIaFzrNQZArxAZKUQm6gsj37L9Cb7dnIBUKxENaaMJQqMpDXvSL+ktxdGRm2IsKgJGGPg7atwUG5CcFUEuSv+CwQqizTrvDTNXdMU2bMiDWZd8d7QIySWVRsb2vBBioxOFt4OinPBapL+neAb5KL5IJ8szOza2/DYoipUCx+CjO0Bpsv0V6mktNZ+k8rlABlWG0FrOpKYVo8DT3dBeLEjUBAj7moDogVii7nSS9QzZnFcOVBp1g2PyBQ3Vr5aIapN91VJy33HTJLC1iX2FY6F8gRdaAeIEfVONgtFCzZTmoLEdOjBDfsIOA6128gw3eu1shAajdZNAORxuQDJN5A5PbEG6gNIu24QJD5iNyRMZIr6bsHbCtCU/OaOaSvgkUyDMdDa1BXGf5HJ1To+/Ym6mCKT02Y+/Sa126ZKyd3jxhzpc1r8zVL6YM1Qy/kR4ABAFJ6iQUnivhAAAAAAElFTkSuQmCC")}),
2),E(1,"div",null,[aa("Web-based tooling for BPMN, DMN and CMMN diagrams powered by "),E(1,"a",null,aa("bpmn.io"),2,{href:"http://bpmn.io",target:"_blank"}),aa(".")],4)],4,{onClick:function(g){return g.stopPropagation()}}),2,{onClick:this.onClick})}}]);return f}(Z),bu=function h(f,g){if(!(this instanceof h))throw new TypeError("Cannot call a class as a function");f.onGetComponent("table.before",function(){return IE});f.onGetComponent("table.before",function(){return JE})};bu.$inject=["components",
"eventBus"];var KE={__init__:["poweredBy"],poweredBy:["type",bu]},cu=function(f){function g(){var h=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(!(this instanceof g))throw new TypeError("Cannot call a class as a function");var k=g._createContainer();h=Ae(g).call(this,R(h,{renderer:{container:k}}));if(!h||"object"!==Zi(h)&&"function"!==typeof h){if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");h=this}h._container=k;return h}Qy(g,
f);Py(g,[{key:"open",value:function(h,k){try{return this._decision&&this.clear(),this._decision=h,$x(this,h,k)}catch(l){var m=l}return k(m)}},{key:"_init",value:function(h){var k=h.modules,m=h.additionalModules;var l=["modules","additionalModules"];if(null==h)h={};else{if(null==h)var r={};else{r={};var q=Object.keys(h),u;for(u=0;u<q.length;u++){var v=q[u];0<=l.indexOf(v)||(r[v]=h[v])}}if(Object.getOwnPropertySymbols)for(u=Object.getOwnPropertySymbols(h),v=0;v<u.length;v++)q=u[v],0<=l.indexOf(q)||
Object.prototype.propertyIsEnumerable.call(h,q)&&(r[q]=h[q]);h=r}k=k||this.getModules();m=m||[];l=[{decisionTable:["value",this]}];return{modules:[KE].concat(nq(k),nq(m),l),config:h}}},{key:"on",value:function(h,k,m,l){return this.get("eventBus").on(h,k,m,l)}},{key:"off",value:function(h,k){this.get("eventBus").off(h,k)}},{key:"_emit",value:function(h,k){return this.get("eventBus").fire(h,k)}},{key:"attachTo",value:function(h){if(!h)throw Error("parentNode required");this.detach();h.appendChild(this._container);
this._emit("attach",{})}},{key:"detach",value:function(){var h=this._container;h.parentNode&&(this._emit("detach",{}),kb(h))}},{key:"destroy",value:function(){$i(Ae(g.prototype),"destroy",this).call(this);this.detach()}},{key:"getModules",value:function(){return g._getModules()}}],[{key:"_getModules",value:function(){return[sE,tE,Md,wE,yE,AE,$t,FE,HE]}},{key:"_createContainer",value:function(){return ta('<div class="dmn-decision-table-container"></div>')}}]);return g}(rE),du=function(f){function g(h,
k){if(!(this instanceof g))throw new TypeError("Cannot call a class as a function");var m=Sy(this,cj(g).call(this,h,k));Uy(Tf(m),"handleClick",function(l){l.stopPropagation();m.addRule()});Ab(Tf(m));m.addRule=m.addRule.bind(Tf(m));return m}Ty(g,f);Ry(g,[{key:"componentWillMount",value:function(){this._eventBus=this.context.injector.get("eventBus")}},{key:"addRule",value:function(){this._eventBus.fire("addRule")}},{key:"render",value:function(){var h=this.props.cols,k=[E(1,"td","add-rule-add",E(1,
"span","dmn-icon-plus action-icon",null,1,{title:"Add Rule"}),2)],m=this.sheet.getRoot().businessObject;m.input&&m.input.length||k.push(E(1,"td","input-cell",aa("-"),2));for(m=0;m<h.length+1;m++){var l="add-rule",r=h[m]&&h[m].businessObject,q="";r&&(r.$instanceOf("dmn:InputClause")&&(l+=" input-cell",q="-"),r.$instanceOf("dmn:OutputClause")&&(l+=" output-cell"));k.push(E(1,"td",l,q,0))}return E(1,"tfoot","actionable add-rule",E(1,"tr",null,k,0),2,{onClick:this.handleClick})}}]);return g}(Z);du.$inject=
["sheet"];var eu=function m(g,h,k){if(!(this instanceof m))throw new TypeError("Cannot call a class as a function");g.onGetComponent("table.foot",function(){return du});k.on("addRule",function(){h.trigger("addRule")})};eu.$inject=["components","editorActions","eventBus"];var fu=function(){function g(h,k,m){var l=this;if(!(this instanceof g))throw new TypeError("Cannot call a class as a function");this._elementRegistry=h;this._eventBus=k;this._renderer=m;this._selection=void 0;k.on("diagram.clear",
function(){l._selection=void 0})}Vy(g,[{key:"select",value:function(h){Sa(h)&&(h=this._elementRegistry.get(h));var k=this._selection;k!==h&&(this._selection=h,this._eventBus.fire("selection.changed",{oldSelection:k,selection:h}))}},{key:"deselect",value:function(){var h=this._selection;this._selection=void 0;this._eventBus.fire("selection.changed",{oldSelection:h,selection:this._selection})}},{key:"get",value:function(){return this._selection}},{key:"hasSelection",value:function(){return!!this._selection}}]);
return g}();fu.$inject=["elementRegistry","eventBus","renderer"];var gu=function r(h,k,m,l){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");this._elementRegistry=h;this._renderer=m;this._selection=l;k.on(["cell.click","cell.contextmenu"],function(q){(q=h.get(q.id))&&l.select(q)});k.on("row.remove",function(q){q=q.row;var u=l.get();u&&q===u.row&&l.deselect()});k.on("col.remove",function(q){q=q.col;var u=l.get();u&&q===u.col&&l.deselect()})};gu.$inject=["elementRegistry",
"eventBus","renderer","selection"];var Bg={__init__:["selection","selectionBehavior"],selection:["type",fu],selectionBehavior:["type",gu]},hu="click dblclick contextmenu mousedown mouseup mouseenter mouseleave mouseout mouseover mousemove focusin focusout drag dragstart dragend dragover dragenter dragleave drop".split(" "),iu=function(){function h(k,m){var l=this;if(!(this instanceof h))throw new TypeError("Cannot call a class as a function");Xy(this,"_handleEvent",function(r){var q=r.type,u=Za(r.target,
"[data-element-id]",!0);if(u){var v=u.getAttribute("data-element-id");v&&(u=l._eventBus.createEvent({id:v,event:r,node:u,target:u}),l._eventBus.fire("cell.".concat(q),u),u.defaultPrevented&&r.preventDefault(),u.cancelBubble&&r.stopPropagation())}});this._eventBus=m;this._container=k.container;m.on("table.init",function(){l._addEventListeners(hu)});m.on("table.destroy",function(){l._removeEventListeners(hu)})}Wy(h,[{key:"_addEventListeners",value:function(k){var m=this,l=this._container;k.forEach(function(r){l.addEventListener(r,
m._handleEvent)})}},{key:"_removeEventListeners",value:function(k){var m=this,l=this._container;k.forEach(function(r){l.removeEventListener(r,m._handleEvent)})}}]);return h}();iu.$inject=["config.renderer","eventBus"];var Sm={__init__:["interactionEvents"],interactionEvents:["type",iu]},LE=/\b(Array|Date|Object|Math|JSON)\b/g,ME=function(h,k){for(var m=h.replace(/\.\w+|\w+ *\(|"[^"]*"|'[^']*'|\/([^/]+)\//g,"").replace(LE,"").match(/[a-zA-Z_]\w*/g)||[],l=[],r=0;r<m.length;r++)~l.indexOf(m[r])||l.push(m[r]);
k&&"string"==typeof k&&(k=Zy(k));return k?Yy(h,l,k):l},tq=Ma;Ma.prototype.reset=function(h){this.node=h||this.start;return this};Ma.prototype.revisit=function(h){this._revisit=void 0==h?!0:h;return this};Ma.prototype.opening=function(){1==this.node.nodeType&&(this.closingTag=!1);return this};Ma.prototype.atOpening=function(){return!this.closingTag};Ma.prototype.closing=function(){1==this.node.nodeType&&(this.closingTag=!0);return this};Ma.prototype.atClosing=function(){return this.closingTag};Ma.prototype.next=
sq("nextSibling","firstChild");Ma.prototype.previous=Ma.prototype.prev=sq("previousSibling","lastChild");Ma.prototype.select=function(h){h=this.compile(h);this._selects.push(h);return this};Ma.prototype.selects=function(h,k){var m=this._selects,l=m.length;if(!l)return!0;for(var r=0;r<l;r++)if(m[r].call(this,h,k))return!0;return!1};Ma.prototype.reject=function(h){h=this.compile(h);this._rejects.push(h);return this};Ma.prototype.rejects=function(h,k){var m=this._rejects,l=m.length;if(!l)return!0;for(var r=
0;r<l;r++)if(m[r].call(this,h,k))return!1;return!0};Ma.prototype.higher=function(h){var k=this.root;if(!k)return!1;for(h=h.parentNode;h&&h!=k;)h=h.parentNode;return h!=k};Ma.prototype.compile=function(h){switch(G(h)){case "number":return function(k){return h==k.nodeType};case "string":return new Function("node","return "+ME(h,"node."));case "function":return h;default:return function(){return!0}}};Ma.prototype.peak=Ma.prototype.peek=function(h,k){1==arguments.length&&(k=h,h=!0);return(k=void 0==k?
1:k)?0<k?this.next(h,k,!0):this.prev(h,Math.abs(k),!0):this.node};Ma.prototype.use=function(h){h(this);return this};var Fd=window.getSelection(),az={above:!0,below:!0,right:!0,left:!0};vq.$inject=["config.renderer","eventBus","sheet","selection","elementRegistry"];var Cg={__depends__:[Sm,Bg],__init__:["cellSelection"],cellSelection:["type",vq]};Be.prototype.get=function(){return this._data};Be.prototype.set=function(h){this._data=h};Be.prototype.clear=function(){var h=this._data;delete this._data;
return h};Be.prototype.isEmpty=function(){return!this._data};var ju={clipboard:["type",Be]},ku=function(h){function k(m,l){if(!(this instanceof k))throw new TypeError("Cannot call a class as a function");var r=ij(k).call(this,m);if(!r||"object"!==hj(r)&&"function"!==typeof r){if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");r=this}r._sheet=l;return r}cz(k,h);bz(k,[{key:"init",value:function(){var m=this;this.addRule("col.move",2E3,function(l){var r=
l.col;l=l.index;var q=m._sheet.getRoot().businessObject.input;return Da(r)?l<q.length:l>=q.length});this.addRule("col.remove",2E3,function(l){l=l.col;var r=m._sheet.getRoot().cols;return vb(l)?1<r.filter(function(q){return vb(q)}).length:!0});this.addRule("paste",2E3,function(l){var r=l.data;l=l.target;if(!r||!l)return!1;r=r.root;return l instanceof lb?m.canPasteRows(r):l instanceof mb?m.canPasteCols(r,l):!1})}},{key:"canPasteRows",value:function(m){var l=this._sheet.getRoot().cols;return gc(m,function(r){return"row"!==
r.type||r.cells.length!==l.length?!1:gc(r.cells,function(q,u){return Da(l[u])?"dmn:UnaryTests"===q.businessObject.$type:"dmn:LiteralExpression"===q.businessObject.$type})})}},{key:"canPasteCols",value:function(m,l){var r=this._sheet.getRoot().rows;return gc(m,function(q){return"col"!==q.type||q.cells.length!==r.length?!1:Da(l)?"dmn:InputClause"===q.businessObject.$type:"dmn:OutputClause"===q.businessObject.$type})}}]);return k}(Sc);ku.$inject=["eventBus","sheet"];var Tm={__depends__:[{__depends__:[Od]}],
__init__:["decisionTableModelingRules"],decisionTableModelingRules:["type",ku]},lu=function(){function h(k,m,l){if(!(this instanceof h))throw new TypeError("Cannot call a class as a function");this._clipboard=k;this._modeling=m;this._sheet=l}dz(h,[{key:"execute",value:function(k){var m=k.data;k.oldData=this._clipboard.get();this._clipboard.set(m);return this._sheet.getRoot()}},{key:"postExecute",value:function(k){var m=this;k.elements.forEach(function(l){l instanceof lb?m._modeling.removeRow(l):l instanceof
mb&&m._modeling.removeCol(l)})}},{key:"revert",value:function(k){this._clipboard.set(k.oldData);return this._sheet.getRoot()}}]);return h}();lu.$inject=["clipboard","modeling","sheet"];var ez=[function(h,k,m,l){if(h instanceof lb)var r="row";else if(h instanceof mb)r="col";else if(h instanceof zg)r="cell";else throw Error("cannot deduce element type: #"+h.id);k=eb({},k,{type:r});if(h instanceof lb||h instanceof mb)h=l(h.cells,m),k.cells=h.root,m=h.descriptorCache;return{root:k,descriptorCache:m}},
function(h,k,m){h=h.businessObject;if(!h)return{root:k,descriptorCache:m};m=lj(h,m);return{root:eb({},k,{businessObject:m.root}),descriptorCache:m.descriptorCache}}],hz=[function(h,k,m){var l=h.root.businessObject;if(!l)return{root:k,reviveCache:m};h=mj({root:l,descriptorCache:h.descriptorCache},m);return{root:eb({},k,{businessObject:h.root}),reviveCache:h.reviveCache}},function(h,k,m,l){var r=h.root,q=h.descriptorCache;h=eb({},k);k.businessObject&&k.businessObject.id&&(h.id=k.businessObject.id);
if("row"===r.type||"col"===r.type)m=l({root:r.cells,descriptorCache:q},m),h.cells=m.root,m=m.reviveCache;a:switch(r.type){case "row":r=lb;break a;case "cell":r=zg;break a;case "col":r=mb;break a;default:throw Error("unknown element type: #"+r.type);}var u=new r(h);u instanceof lb?u.cells.forEach(function(v){v.row=u}):u instanceof mb&&u.cells.forEach(function(v){v.col=u});return{root:u,reviveCache:m}}],mu=function(){function h(k,m,l,r,q,u,v,w){if(!(this instanceof h))throw new TypeError("Cannot call a class as a function");
this._clipboard=k;this._dmnFactory=m;this._elementFactory=l;this._elementRegistry=r;this._eventBus=q;this._model=u;this._modeling=v;this._sheet=w}kz(h,[{key:"postExecute",value:function(k){var m=this,l=k.element,r=k.after,q=this._clipboard.get();if(!q)throw Error("missing clipboard data");var u=this._sheet.getRoot();q=Bq(q.elements,{_dmnFactory:this._dmnFactory,_keepIds:q.keepIds,_model:this._model}).root;if(l instanceof lb){var v=u.rows.indexOf(l);if(-1===v)return;q.forEach(function(n){r&&v++;m._modeling.addRow(n,
v)})}else if(l instanceof mb){var w=u.cols.indexOf(l);if(-1===w)return;q.forEach(function(n){r&&w++;m._modeling.addCol(n,w)})}k.oldElements=this._clipboard.get();return this._sheet.getRoot()}},{key:"revert",value:function(k){}}]);return h}();mu.$inject="clipboard dmnFactory elementFactory elementRegistry eventBus moddle modeling sheet".split(" ");var nu=function(){function h(k,m,l,r,q,u){if(!(this instanceof h))throw new TypeError("Cannot call a class as a function");this._clipboard=k;this._commandStack=
m;this._eventBus=l;this._modeling=r;this._sheet=q;this._rules=u;m.registerHandler("cut",lu);m.registerHandler("paste",mu)}mz(h,[{key:"copy",value:function(k){ja(k)||(k=[k]);k={elements:kj(k)};this._eventBus.fire("copyCutPaste.copy",{data:k});this._clipboard.set(k)}},{key:"cut",value:function(k){ja(k)||(k=[k]);var m={elements:kj(k),keepIds:!0};k={elements:k,data:m};this._eventBus.fire("copyCutPaste.cut",{data:m});this._commandStack.execute("cut",k)}},{key:"pasteBefore",value:function(k){return this._paste(k,
{before:!0})}},{key:"pasteAfter",value:function(k){return this._paste(k,{after:!0})}},{key:"_paste",value:function(k,m){var l=this._clipboard.get();if(l){if(!this._rules.allowed("paste",{data:l.elements,target:k}))return!1;this._commandStack.execute("paste",lz({element:k},m));return!0}}},{key:"pasteAt",value:function(k){}}]);return h}();nu.$inject="clipboard commandStack eventBus modeling sheet rules".split(" ");var ou={__depends__:[ju,Tm],__init__:["copyCutPaste"],copyCutPaste:["type",nu]},pu=function v(k,
m,l,r,q,u){if(!(this instanceof v))throw new TypeError("Cannot call a class as a function");var w={addRule:function(){return l.addRow({type:"dmn:DecisionRule"})},addRuleAbove:function(n){if((n=n&&n.rule)||r.hasSelection())if(n=n||r.get().row,n=u.getRoot().rows.indexOf(n),-1!==n)return l.addRow({type:"dmn:DecisionRule"},n)},addRuleBelow:function(n){if((n=n&&n.rule)||r.hasSelection())if(n=n||r.get().row,n=u.getRoot().rows.indexOf(n),-1!==n)return l.addRow({type:"dmn:DecisionRule"},n+1)},removeRule:function(n){if((n=
n&&n.rule)||r.hasSelection())n=n||r.get().row,l.removeRow(n)},addInput:function(){var n=u.getRoot().businessObject.input;return l.addCol({type:"dmn:InputClause"},n?n.length:0)},addInputLeft:function(n){if((n=n&&n.input)||r.hasSelection())if(n=n||r.get().col,n=u.getRoot().cols.indexOf(n),-1!==n)return l.addCol({type:"dmn:InputClause"},n)},addInputRight:function(n){if((n=n&&n.input)||r.hasSelection())if(n=n||r.get().col,n=u.getRoot().cols.indexOf(n),-1!==n)return l.addCol({type:"dmn:InputClause"},n+
1)},removeInput:function(n){if((n=n&&n.input)||r.hasSelection())n=n||r.get().col,l.removeCol(n)},addOutput:function(){var n=u.getRoot().businessObject;return l.addCol({type:"dmn:OutputClause"},n.input.length+n.output.length)},addOutputLeft:function(n){if((n=n&&n.output)||r.hasSelection())if(n=n||r.get().col,n=u.getRoot().cols.indexOf(n),-1!==n)return l.addCol({type:"dmn:OutputClause"},n)},addOutputRight:function(n){if((n=n&&n.output)||r.hasSelection())if(n=n||r.get().col,n=u.getRoot().cols.indexOf(n),
-1!==n)return l.addCol({type:"dmn:OutputClause"},n+1)},removeOutput:function(n){if((n=n&&n.output)||r.hasSelection())n=n||r.get().col,l.removeCol(n)},addClause:function(){if(r.hasSelection()){var n=r.get().col;if(P(n,"dmn:InputClause"))return w.addInput({input:n});if(P(n,"dmn:OutputClause"))return w.addOutput({output:n})}},addClauseLeft:function(){if(r.hasSelection()){var n=r.get().col;if(P(n,"dmn:InputClause"))return w.addInputLeft({input:n});if(P(n,"dmn:OutputClause"))return w.addOutputLeft({output:n})}},
addClauseRight:function(){if(r.hasSelection()){var n=r.get().col;if(P(n,"dmn:InputClause"))return w.addInputRight({input:n});if(P(n,"dmn:OutputClause"))return w.addOutputRight({output:n})}},removeClause:function(){if(r.hasSelection()){var n=r.get().col;if(P(n,"dmn:InputClause"))return w.removeInput({input:n});if(P(n,"dmn:OutputClause"))return w.removeOutput({output:n})}},selectCellAbove:function(){return q.selectCell("above")},selectCellBelow:function(){return q.selectCell("below")},copy:function(n){k.copy(n.element)},
cut:function(n){k.cut(n.element)},pasteBefore:function(n){return k.pasteBefore(n.element)},pasteAfter:function(n){return k.pasteAfter(n.element)}};m.register(w)};pu.$inject="copyCutPaste editorActions modeling selection cellSelection sheet".split(" ");var qu=function(){function k(m,l,r,q){if(!(this instanceof k))throw new TypeError("Cannot call a class as a function");this._actions={undo:function(){m.undo()},redo:function(){m.redo()},select:function(u){q.select(u.cell)},deselect:function(){q.deselect()},
addRow:function(u){r.addRow(u.attrs,u.index)},removeRow:function(u){r.removeRow(u.row)},moveRow:function(u){r.moveRow(u.row,u.index)},addCol:function(u){r.addCol(u.attrs,u.index)},removeCol:function(u){r.removeCol(u.col)},moveCol:function(u){r.moveCol(u.col,u.index)}}}nz(k,[{key:"trigger",value:function(m,l){if(!this._actions[m])throw Error(m+" is not a registered action");return this._actions[m](l)}},{key:"register",value:function(m,l){var r=this;if("string"===typeof m)return this._registerAction(m,
l);O(m,function(q,u){r._registerAction(u,q)})}},{key:"_registerAction",value:function(m,l){if(this.isRegistered(m))throw Error(m+" is already registered");this._actions[m]=l}},{key:"unregister",value:function(m){if(!this.isRegistered(m))throw Error(m+" is not a registered action");this._actions[m]=void 0}},{key:"isRegistered",value:function(m){return!!this._actions[m]}}]);return k}();qu.$inject=["commandStack","eventBus","modeling","selection"];var ru={__depends__:[Bg],__init__:["editorActions"],
editorActions:["type",qu]},Pd={__depends__:[Cg,ou,ru,Bg],__init__:["decisionTableEditorActions"],decisionTableEditorActions:["type",pu]},NE={__depends__:[Pd],__init__:["addRule"],addRule:["type",eu]},OE=/["'&<>]/,PE=function(k){k=""+k;var m=OE.exec(k);if(!m)return k;var l="",r,q=0;for(r=m.index;r<k.length;r++){switch(k.charCodeAt(r)){case 34:m="&quot;";break;case 38:m="&amp;";break;case 39:m="&#39;";break;case 60:m="&lt;";break;case 62:m="&gt;";break;default:continue}q!==r&&(l+=k.substring(q,r));
q=r+1;l+=m}return q!==r?l+k.substring(q,r):l},su=function(k,m,l){var r=k.start;k=r;var q;r=m.substring(r);l.lastIndexOf(r)===l.length-r.length&&(m=m.substring(0,m.length-r.length),l=l.substring(0,l.length-r.length));var u=0,v=0;if(l.length>m.length){r=l;var w=m}else r=m,w=l;for(;u<r.length;){var n=r.charAt(u);var p=w.charAt(v);n!==p?q||(q={l_start:u,s_start:v}):(q&&!q.complete&&(q.l_end=u,q.s_end=v,q.complete=!0),v++);u++}q&&!q.complete&&(q.complete=!0,q.s_end=w.length,q.l_end=r.length);q=q?l.length>
m.length?{newStart:q.l_start,newEnd:q.l_end,type:"add"}:{newStart:q.s_start,newEnd:q.s_end,type:l.length<m.length?"remove":"replace"}:void 0;q&&(k="remove"===q.type?q.newStart:q.newEnd);return Hq(k)};su.range=Hq;var tu=function(k){function m(l,r){if(!(this instanceof m))throw new TypeError("Cannot call a class as a function");var q=pz(this,oj(m).call(this,l,r));Hd(ad(q),"onFocus",function(){var u=q.props.onFocus;q.setState({focussed:!0});"function"===typeof u&&u()});Hd(ad(q),"onBlur",function(){var u=
q.props.onBlur;q.setState({focussed:!1});"function"===typeof u&&u()});Hd(ad(q),"onKeydown",function(u){if(13===u.which&&(u.preventDefault(),!q.props.ctrlForNewline||u.metaKey||u.ctrlKey)){u.stopPropagation();var v=Fd.getRangeAt(0);if(v){v=v.cloneRange();var w=document.createElement("br");v.deleteContents();v.insertNode(w);v.setStartAfter(w);v.setEndAfter(w);Uf(v)}q.onInput(u)}});Hd(ad(q),"onInput",function(u){u=q.props.onInput;if("function"===typeof u){var v=q.node.innerText.replace(/\n$/,"");u(v)}});
Hd(ad(q),"onPaste",Jq);Hd(ad(q),"onKeypress",Jq);q.state={};rz()&&(q.onPaste=q.onKeypress=function(u){var v=q.node.innerHTML;setTimeout(function(){if(v!==q.node.innerHTML)q.onInput(u)},0)});return q}qz(m,k);oz(m,[{key:"componentWillUpdate",value:function(l,r){var q=this.node,u=r.focussed&&ej(q);this.selected=u&&{range:u,text:q.innerText.replace(/\n$/,"")}}},{key:"componentDidUpdate",value:function(){var l=this.selected;if(l){var r=l.range,q=l.text;l=this.node;var u=l.innerText.replace(/\n$/,"");r=
u!==q?su(r,q,u):r;r=fj(l,r);Uf(r)}}},{key:"render",value:function(l){var r=this,q=l.value;l=l.className;q=PE(q).replace(/\r?\n/g,"<br/>")+"<br/>";return E(1,"div",[l||"","content-editable"].join(" "),null,1,{contentEditable:"true",spellcheck:"false",onInput:this.onInput,onKeypress:this.onKeypress,onPaste:this.onPaste,onFocus:this.onFocus,onBlur:this.onBlur,onKeydown:this.onKeydown,dangerouslySetInnerHTML:{__html:q}},null,function(u){return r.node=u})}}]);return m}(Z),Ic=function(k){function m(l,r){if(!(this instanceof
m))throw new TypeError("Cannot call a class as a function");var q=tz(this,sj(m).call(this,l,r));Lq(rj(q),"onFocus",function(){q.setState({focussed:!0});var v=q.props.onFocus;"function"===typeof v&&v()});Lq(rj(q),"onBlur",function(v){q.setState({focussed:!1});q.state.invalid&&q.setState({changing:!1,invalid:!1});v=q.props.onBlur;"function"===typeof v&&v()});q.state={changing:!1,focussed:!1};var u=r.injector.get("debounceInput");q.inputChanged=u(function(v){var w=q.props.onChange;"function"===typeof w&&
w(v);w=q.state.changing;q.setState({changing:w===v?!1:w})});q.onInput=function(v){var w=(q.props.validate||function(){})(v);q.setState({changing:v,invalid:w});w||q.inputChanged(v)};return q}uz(m,k);sz(m,[{key:"getClassName",value:function(){var l=this.props.className,r=this.state,q=r.focussed;r=r.invalid;l+=" editable";q&&(l+=" focussed");r&&(l+=" invalid");return l}},{key:"getDisplayValue",value:function(){var l=this.props,r=l.value;l=l.placeholder;var q=this.state,u=q.focussed;q=q.changing;"string"===
typeof q&&(r=q);r||(r=u?"":l||"");return r}},{key:"getEditor",value:function(){var l=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return X(2,tu,{className:l.className,ctrlForNewline:l.ctrlForNewline,onFocus:this.onFocus,onBlur:this.onBlur,onInput:this.onInput,value:this.getDisplayValue()})}}]);return m}(Z),Tq=function(k){function m(l,r){Mq(this,m);var q=Pq(this,Xf(m).call(this,l,r));Rq(Wf(q),"onElementsChanged",function(){q.forceUpdate()});Rq(Wf(q),"setAnnotationValue",function(u){q.modeling.editAnnotation(q.props.row.businessObject,
u)});Ab(Wf(q));return q}Qq(m,k);Oq(m,[{key:"componentWillMount",value:function(){this.changeSupport.onElementsChanged(this.props.row.id,this.onElementsChanged)}},{key:"componentWillUnmount",value:function(){this.changeSupport.offElementsChanged(this.props.row.id,this.onElementsChanged)}},{key:"render",value:function(){var l=this.props,r=l.row,q=r.businessObject,u=q.description;q=q.id;return X(2,xe,{className:"annotation",onChange:this.setAnnotationValue,coords:"".concat(l.rowIndex,":annotation"),
value:u,elementId:q+"__annotation","data-row-id":r.id,children:X(2,QE,{ctrlForNewline:!0,className:"annotation-editor",onChange:this.setAnnotationValue,value:u})})}}]);return m}(Z);Tq.$inject=["changeSupport","modeling"];var QE=function(k){function m(){Mq(this,m);return Pq(this,Xf(m).apply(this,arguments))}Qq(m,k);Oq(m,[{key:"render",value:function(){return E(1,"div",this.getClassName(),this.getEditor(),0)}}]);return m}(Ic);Sq.$inject=["components"];Uq.$inject=["config.debounceInput"];var ed={debounceInput:["factory",
Uq]},RE={__depends__:[ed],__init__:["annotationsProvider"],annotationsProvider:["type",Sq]},vu=function(k){function m(l,r){Vq(this,m);var q=Yq(this,Yf(m).call(this,l,r));bd(Sb(q),"open",function(u){var v=u.position;u=u.context;q.close();q.setState({isOpen:!0,position:v||{x:0,y:0},context:u||{}})});bd(Sb(q),"close",function(){q.state.isOpen&&q.setState({context:void 0,isOpen:!1,position:{x:0,y:0}})});bd(Sb(q),"triggerClose",function(){q.eventBus.fire("contextMenu.close")});q.state={isOpen:!1,position:{x:0,
y:0}};Ab(Sb(q));return q}Zq(m,k);Xq(m,[{key:"componentDidMount",value:function(){this.eventBus.on("contextMenu.open",this.open);this.eventBus.on("contextMenu.close",this.close)}},{key:"componentWillUnmount",value:function(){this.eventBus.off("contextMenu.open",this.open);this.eventBus.off("contextMenu.close",this.close)}},{key:"render",value:function(){var l=this.state,r=l.context,q=l.position;if(!l.isOpen)return null;l=this.components.getComponents("context-menu",r);return l.length?X(2,uu,{className:"context-menu no-deselect",
context:r,position:q,offset:r.offset||{x:0,y:0},autoFocus:!1!==r.autoFocus,autoClose:!1!==r.autoClose,components:l,onClose:this.triggerClose}):null}}]);return m}(Z);vu.$inject=["eventBus","components"];var uu=function(k){function m(l,r){Vq(this,m);var q=Yq(this,Yf(m).call(this,l,r));bd(Sb(q),"onGlobalMouseDown",function(u){q.checkClose(u.target)});bd(Sb(q),"onGlobalKey",function(u){var v=u.which;if(13===v||27===v)u.stopPropagation(),u.preventDefault(),q.close()});bd(Sb(q),"onFocusChanged",function(u){q.checkClose(u.target)});
bd(Sb(q),"setNode",function(u){q.node=u;var v=q.props.autoFocus;u&&(q.updatePosition(),v&&(u=xa(SE,u)))&&(u.focus(),u.selectionStart&&"text"===u.type?u.selectionStart=1E5:"contentEditable"in u&&(u=fj(u,{start:1E5,end:1E5}),Uf(u)))});Ab(Sb(q));return q}Zq(m,k);Xq(m,[{key:"close",value:function(){var l=this.props.onClose;Na(l)&&l()}},{key:"checkClose",value:function(l){if(this.props.autoClose){var r=this.node;r&&r!==l&&(r.contains(l)||this.close())}}},{key:"componentDidMount",value:function(){document.addEventListener("focusin",
this.onFocusChanged);document.addEventListener("keydown",this.onGlobalKey);document.addEventListener("mousedown",this.onGlobalMouseDown)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("focusin",this.onFocusChanged);document.removeEventListener("keydown",this.onGlobalKey);document.removeEventListener("mousedown",this.onGlobalMouseDown)}},{key:"updatePosition",value:function(){var l=this.props,r=l.position,q=l.offset;l=this.node.getBoundingClientRect();r.width||(r.width=
0);r.height||(r.height=0);var u=this.renderer.getContainer(),v=u.getBoundingClientRect();v.width>v.height?(this.node.classList.add("horizontal"),this.node.classList.remove("vertical")):(this.node.classList.add("vertical"),this.node.classList.remove("horizontal"));var w=u.scrollLeft;u=u.scrollTop;var n={};if(r.x+r.width/2>v.width/2){var p=r.x-v.left-l.width+q.x+w;p=Math.max(0+w,Math.min(v.width-l.width+w,p));n.left=p+"px"}else p=window.scrollX-v.left+r.x+r.width-q.x+w,p=Math.max(0+w,Math.min(v.width-
l.width+w,p)),n.left=p+"px";r=r.y+r.height/2>v.height/2?r.y-v.top-l.height+q.y+u:window.scrollY-v.top+r.y-q.y+u;r=Math.max(0+u,Math.min(v.height-l.height+u,r));n.top=r+"px";n.overflowY="auto";n.maxHeight=v.height-r+u+"px";R(this.node.style,n)}},{key:"render",value:function(){var l=this.props,r=l.context;return E(1,"div",l.className,l.components.map(function(q,u){return X(2,q,{context:r},u)}),0,{onContextMenu:function(q){return q.preventDefault()}},null,this.setNode)}}]);return m}(Z);uu.$inject=["renderer"];
var SE="\n  input[type=text],\n  input[type=number],\n  input[type=button],\n  input[type=submit],\n  [contenteditable],\n  [tabindex],\n  a[href],\n  textarea,\n  button\n",wu=function(){function k(m,l,r){if(!(this instanceof k))throw new TypeError("Cannot call a class as a function");this._eventBus=l;m.onGetComponent("table.before",function(){return vu})}vz(k,[{key:"open",value:function(m,l){this._eventBus.fire("contextMenu.open",{position:m,context:l})}},{key:"close",value:function(){this._eventBus.fire("contextMenu.close")}}]);
return k}();wu.$inject=["components","eventBus","renderer"];var fd={__init__:["contextMenu"],contextMenu:["type",wu]},xu=function(){function k(m,l,r,q,u,v,w){var n=this;if(!(this instanceof k))throw new TypeError("Cannot call a class as a function");br(this,"_clearClipboard",function(){n._clipboard.clear()});br(this,"_registerBindings",function(){[function(p,t){if(Id(t)&&67===p){var x=n._getSelectedCell();if(x)return t.shiftKey?n._editorActions.trigger("copy",{element:x.col}):n._editorActions.trigger("copy",
{element:x.row}),!0}},function(p,t){if(Id(t)&&88===p){var x=n._getSelectedCell();if(x)return t.shiftKey?n._editorActions.trigger("cut",{element:x.col}):n._editorActions.trigger("cut",{element:x.row}),!0}},function(p,t){if(Id(t)&&86===p){var x=n._getSelectedCell();if(!x)return;t.shiftKey?(x=n._editorActions.trigger("pasteAfter",{element:x.col}))&&n._cellSelection.selectCell("right"):(x=n._editorActions.trigger("pasteAfter",{element:x.row}))&&n._cellSelection.selectCell("below")}return"undefined"!==
typeof x}].forEach(function(p){n._keyboard.addListener(p)})});this._clipboard=r;this._cellSelection=q;this._elementRegistry=u;this._editorActions=v;this._keyboard=m.get("keyboard",!1);this._renderer=w;this._keyboard&&(l.on("keyboard.init",this._registerBindings),l.on("keyboard.bind",function(){U.bind(document,"copy",n._clearClipboard,!0);U.bind(document,"cut",n._clearClipboard,!0)}),l.on("keyboard.unbind",function(){U.unbind(document,"copy",n._clearClipboard,!0);U.unbind(document,"cut",n._clearClipboard,
!0)}))}wz(k,[{key:"_getSelectedCell",value:function(){var m=this._cellSelection.getCellSelection();if(m){var l=this._elementRegistry.get(m);if(l){var r=this._renderer.getContainer();m=Gd(m,r);r=uq(m);if(document.activeElement===r&&(m=ej(m),!m||m.start===m.end))return l}}}}]);return k}();xu.$inject="injector eventBus clipboard cellSelection elementRegistry editorActions renderer".split(" ");var TE={__depends__:[ju,Cg],__init__:["copyCutPasteKeyBindings"],copyCutPasteKeyBindings:["type",xu]},yu=function(k){function m(l,
r){if(!(this instanceof m))throw new TypeError("Cannot call a class as a function");var q=yz(this,Aj(m).call(this,l,r));Az(zj(q),"onClick",function(u){q.editorActions.trigger("addInput")});Ab(zj(q));return q}zz(m,k);xz(m,[{key:"render",value:function(){return E(1,"th","input-cell create-inputs header actionable",[this.translate("Input"),aa(" "),E(1,"span","add-input dmn-icon-plus action-icon",null,1,{title:this.translate("Add Input")})],0,{onClick:this.onClick,rowspan:"3",title:this.translate("Add Input")})}}]);
return m}(Z);yu.$inject=["editorActions","translate"];var zu=function(k){function m(l,r){if(!(this instanceof m))throw new TypeError("Cannot call a class as a function");var q=Cz(this,Ej(m).call(this,l,r));Ez(Dj(q),"onClick",function(u){q.editorActions.trigger("addInput")});Ab(Dj(q));return q}Dz(m,k);Bz(m,[{key:"render",value:function(){return E(1,"td","input-cell create-inputs",aa("-"),2,{onClick:this.onClick,title:this.translate("Add Input")})}}]);return m}(Z);zu.$inject=["editorActions","translate"];
var Au=function r(m,l){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");m.onGetComponent("cell",500,function(q){q=q.cellType;var u=l.getRoot().businessObject;if(!u.input||!u.input.length){if("before-label-cells"===q)return yu;if("before-rule-cells"===q)return zu}})};Au.$inject=["components","sheet"];var UE={__depends__:[Pd],__init__:["createInputsProvider"],createInputsProvider:["type",Au]},Bu=function(){function m(l,r,q,u,v,w,n,p,t,x){var A=this;if(!(this instanceof
m))throw new TypeError("Cannot call a class as a function");this._contextMenu=r;this._clipboard=q;this._editorActions=u;this._elementRegistry=w;this._eventBus=v;this._modeling=n;this._sheet=p;this._rules=t;this._translate=x;this._getEntries=this._getEntries.bind(this);l.onGetComponent("context-menu",function(){var z=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(z.contextMenuType&&"context-menu"===z.contextMenuType){var y=A._getEntries(z);if((z=A._elementRegistry.get(z.id)instanceof
zg&&l.getComponents("context-menu-cell-additional",z))&&z.length){var B=E(1,"div","context-menu-group context-menu-group-cell",[E(1,"h4","context-menu-group-title",A._translate("Cell"),0),z],0);return function(){return E(1,"div","context-menu-flex",(y||[]).concat([B]),0)}}return function(){return E(1,"div","context-menu-flex",y||[],0)}}});v.on("cell.contextmenu",function(z){var y=z.event;z=z.id;y.preventDefault();r.open({x:y.pageX,y:y.pageY},{contextMenuType:"context-menu",id:z})})}Fz(m,[{key:"_getEntries",
value:function(l){var r=this,q={addRuleAbove:function(t){r._editorActions.trigger("addRuleAbove",{rule:t});r._contextMenu.close()},addRuleBelow:function(t){r._editorActions.trigger("addRuleBelow",{rule:t});r._contextMenu.close()},removeRule:function(t){r._editorActions.trigger("removeRule",{rule:t});r._contextMenu.close()},addInputLeft:function(t){r._editorActions.trigger("addInputLeft",{input:t});r._contextMenu.close()},addInputRight:function(t){r._editorActions.trigger("addInputRight",{input:t});
r._contextMenu.close()},removeInput:function(t){r._editorActions.trigger("removeInput",{input:t});r._contextMenu.close()},addOutputLeft:function(t){r._editorActions.trigger("addOutputLeft",{output:t});r._contextMenu.close()},addOutputRight:function(t){r._editorActions.trigger("addOutputRight",{output:t});r._contextMenu.close()},removeOutput:function(t){r._editorActions.trigger("removeOutput",{output:t});r._contextMenu.close()},copy:function(t){r._editorActions.trigger("copy",{element:t});r._contextMenu.close()},
cut:function(t){r._editorActions.trigger("cut",{element:t});r._contextMenu.close()},pasteBefore:function(t){r._editorActions.trigger("pasteBefore",{element:t});r._contextMenu.close()},pasteAfter:function(t){r._editorActions.trigger("pasteAfter",{element:t});r._contextMenu.close()}};l=l&&l.id;if(!l)return null;var u=this._elementRegistry.get(l);if(!u)return null;var v=this._clipboard.get()||{};l=[];if(P(u.row,"dmn:DecisionRule")){var w=this._rules.allowed("paste",{data:v.elements,target:u.row});l.push(E(1,
"div","context-menu-group context-menu-group-rule",[E(1,"h4","context-menu-group-title",this._translate("Rule"),0),E(1,"div","context-menu-group-entry context-menu-entry-add-rule-above",[E(1,"span","context-menu-group-entry-icon dmn-icon-up"),this._translate("Add Above")],0,{onClick:function(){return q.addRuleAbove(u.row)}}),E(1,"div","context-menu-group-entry context-menu-entry-add-rule-below",[E(1,"span","context-menu-group-entry-icon dmn-icon-down"),this._translate("Add Below")],0,{onClick:function(){return q.addRuleBelow(u.row)}}),
E(1,"div","context-menu-group-entry context-menu-entry-remove-rule",[E(1,"span","context-menu-group-entry-icon dmn-icon-clear"),this._translate("Remove")],0,{onClick:function(){return q.removeRule(u.row)}}),E(1,"div","context-menu-group-entry context-menu-entry-copy-rule",[E(1,"span","context-menu-group-entry-icon dmn-icon-copy"),this._translate("Copy")],0,{onClick:function(){return q.copy(u.row)}}),E(1,"div","context-menu-group-entry context-menu-entry-cut-rule",[E(1,"span","context-menu-group-entry-icon dmn-icon-cut"),
this._translate("Cut")],0,{onClick:function(){return q.cut(u.row)}}),E(1,"div","context-menu-group-entry ".concat(w?"":"disabled"," context-menu-entry-paste-rule-above"),[E(1,"span","context-menu-group-entry-icon dmn-icon-paste"),this._translate("Paste Above")],0,{onClick:function(){return q.pasteBefore(u.row)}}),E(1,"div","context-menu-group-entry ".concat(w?"":"disabled"," context-menu-entry-paste-rule-below"),[E(1,"span","context-menu-group-entry-icon dmn-icon-paste"),this._translate("Paste Below")],
0,{onClick:function(){return q.pasteAfter(u.row)}})],4))}if(P(u,"dmn:InputClause")||P(u.col,"dmn:InputClause")){var n=P(u,"dmn:InputClause")?u:u.col;w=this._rules.allowed("col.remove",{col:u.col||u});v=this._rules.allowed("paste",{data:v.elements,target:u.col||u});l.push(E(1,"div","context-menu-group context-menu-group-input",[E(1,"h4","context-menu-group-title",this._translate("Input"),0),E(1,"div","context-menu-group-entry context-menu-entry-add-input-left",[E(1,"span","context-menu-group-entry-icon dmn-icon-left"),
this._translate("Add Left")],0,{onClick:function(){return q.addInputLeft(n)}}),E(1,"div","context-menu-group-entry context-menu-entry-add-input-right",[E(1,"span","context-menu-group-entry-icon dmn-icon-right"),this._translate("Add Right")],0,{onClick:function(){return q.addInputRight(n)}}),E(1,"div","context-menu-group-entry ".concat(w?"":"disabled"," context-menu-entry-remove-input"),[E(1,"span","context-menu-group-entry-icon dmn-icon-clear"),this._translate("Remove")],0,{onClick:function(){return q.removeInput(n)}}),
E(1,"div","context-menu-group-entry context-menu-entry-copy-input",[E(1,"span","context-menu-group-entry-icon dmn-icon-copy"),this._translate("Copy")],0,{onClick:function(){return q.copy(n)}}),E(1,"div","context-menu-group-entry ".concat(w?"":"disabled"," context-menu-entry-cut-input"),[E(1,"span","context-menu-group-entry-icon dmn-icon-cut"),this._translate("Cut")],0,{onClick:function(){return q.cut(n)}}),E(1,"div","context-menu-group-entry ".concat(v?"":"disabled"," context-menu-entry-paste-input-left"),
[E(1,"span","context-menu-group-entry-icon dmn-icon-paste"),this._translate("Paste Left")],0,{onClick:function(){return q.pasteBefore(n)}}),E(1,"div","context-menu-group-entry ".concat(v?"":"disabled"," context-menu-entry-paste-input-right"),[E(1,"span","context-menu-group-entry-icon dmn-icon-paste"),this._translate("Paste Right")],0,{onClick:function(){return q.pasteAfter(n)}})],4))}else if(P(u,"dmn:OutputClause")||P(u.col,"dmn:OutputClause")){var p=P(u,"dmn:OutputClause")?u:u.col;w=this._rules.allowed("col.remove",
{col:u.col||u});v=this._rules.allowed("paste",{data:v.elements,target:u.col||u});l.push(E(1,"div","context-menu-group context-menu-group-output",[E(1,"h4","context-menu-group-title",this._translate("Output"),0),E(1,"div","context-menu-group-entry context-menu-entry-add-output-left",[E(1,"span","context-menu-group-entry-icon dmn-icon-left"),this._translate("Add Left")],0,{onClick:function(){return q.addOutputLeft(p)}}),E(1,"div","context-menu-group-entry context-menu-entry-add-output-right",[E(1,"span",
"context-menu-group-entry-icon dmn-icon-right"),this._translate("Add Right")],0,{onClick:function(){return q.addOutputRight(p)}}),E(1,"div","context-menu-group-entry ".concat(w?"":"disabled"," context-menu-entry-remove-output"),[E(1,"span","context-menu-group-entry-icon dmn-icon-clear"),this._translate("Remove")],0,{onClick:function(){return q.removeOutput(p)}}),E(1,"div","context-menu-group-entry context-menu-entry-copy-output",[E(1,"span","context-menu-group-entry-icon dmn-icon-copy"),this._translate("Copy")],
0,{onClick:function(){return q.copy(p)}}),E(1,"div","context-menu-group-entry ".concat(w?"":"disabled"," context-menu-entry-cut-output"),[E(1,"span","context-menu-group-entry-icon dmn-icon-cut"),this._translate("Cut")],0,{onClick:function(){return q.cut(p)}}),E(1,"div","context-menu-group-entry ".concat(v?"":"disabled"," context-menu-entry-paste-output-left"),[E(1,"span","context-menu-group-entry-icon dmn-icon-paste"),this._translate("Paste Left")],0,{onClick:function(){return q.pasteBefore(p)}}),
E(1,"div","context-menu-group-entry ".concat(v?"":"disabled"," context-menu-entry-paste-output-right"),[E(1,"span","context-menu-group-entry-icon dmn-icon-paste"),this._translate("Paste Right")],0,{onClick:function(){return q.pasteAfter(p)}})],4))}return l}}]);return m}();Bu.$inject="components contextMenu clipboard editorActions eventBus elementRegistry modeling sheet rules translate".split(" ");var VE=["row.add","row.remove","col.add","col.remove"],Cu=function q(l,r){if(!(this instanceof q))throw new TypeError("Cannot call a class as a function");
r.on("commandStack.executed",function(u){-1!==VE.indexOf(u.command)&&l.close()});r.on("commandStack.reverted",function(){l.close()})};Cu.$inject=["contextMenu","eventBus"];var WE={__depends__:[Pd,fd,Tm],__init__:["decisionTableContextMenu","contextMenuCloseBehavior"],decisionTableContextMenu:["type",Bu],contextMenuCloseBehavior:["type",Cu]},XE=function(l){function r(q,u){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");var v=Hz(this,Hj(r).call(this,q,u));Jj(De(v),"onClick",
function(w){v._eventBus.fire("output.edit",{event:w,output:v.props.output})});Jj(De(v),"onContextmenu",function(w){v._eventBus.fire("cell.contextmenu",{event:w,id:v.props.output.id})});Jj(De(v),"onElementsChanged",function(){v.forceUpdate()});$c(De(v),Ag);v._translate=u.injector.get("translate");return v}Iz(r,l);Gz(r,[{key:"componentWillMount",value:function(){var q=this.context.injector;this._changeSupport=this.context.changeSupport;this._eventBus=q.get("eventBus");this._elementRegistry=q.get("elementRegistry");
this._changeSupport.onElementsChanged(this.props.output.id,this.onElementsChanged)}},{key:"componentWillUnmount",value:function(){this._changeSupport.offElementsChanged(this.props.output.id,this.onElementsChanged)}},{key:"render",value:function(){var q=this.props.output,u=q.get("label"),v=q.get("name");return E(1,"th","output-cell output-editor",[this.slotFills({type:"cell-inner",context:{cellType:"output-cell",col:this._elementRegistry.get(q.id)},col:q}),u?E(1,"span","output-label",u,0,{title:this._translate("Output Label")}):
E(1,"span","output-name",v||"-",0,{title:this._translate("Output Expression")})],0,{"data-col-id":q.id,onClick:this.onClick,onContextmenu:this.onContextmenu})}}]);return r}(Z),Vb=function(l){function r(q,u){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");var v=Kz(this,Lj(r).call(this,q,u));Nj(Zf(v),"onInput",function(w){var n=v.props.onInput;"function"===typeof n&&n(w.target.value)});Nj(Zf(v),"onKeyDown",function(w){var n=v.props.onKeyDown;"function"===typeof n&&n(w)});
Nj(Zf(v),"onKeyUp",function(w){var n=v.props.onKeyUp;"function"===typeof n&&n(w)});return v}Lz(r,l);Jz(r,[{key:"render",value:function(){var q=this.props,u=q.placeholder,v=q.type,w=q.value;return E(64,"input",[q.className||"","dms-input"].join(" "),null,1,{placeholder:u||"",onInput:this.onInput,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,spellcheck:"false",type:v||"text",value:w})}}]);return r}(Z),YE=function(l){function r(q,u){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");
var v=Nz(this,Pj(r).call(this,q,u));v.translate=u.injector?u.injector.get("translate"):Pz;v.setName=function(w){v.handleChange({name:w||void 0})};v.setLabel=function(w){v.handleChange({label:w||void 0})};return v}Oz(r,l);Mz(r,[{key:"handleChange",value:function(q){var u=this.props.onChange;"function"===typeof u&&u(q)}},{key:"render",value:function(){var q=this.props,u=q.name;q=q.label;return E(1,"div","dms-container ref-output-editor",[E(1,"p","dms-fill-row",[E(1,"label","dms-label",this.translate("Output Label"),
0),X(2,Vb,{className:"ref-output-label",value:q||"",onInput:this.setLabel})],4),E(1,"p","dms-fill-row",[E(1,"label","dms-label",this.translate("Output Name"),0),X(2,Vb,{className:"ref-output-name",value:u||"",onInput:this.setName})],4)],4)}}]);return r}(Z),Du=function(l){function r(q,u){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");var v=Sz(this,Tj(r).call(this,q,u));Sj($f(v),"persistChanges",function(){var w=v.state.unsaved;w&&(v.modeling.updateProperties(v.props.context.output,
w),v.setState({unsaved:!1}))});Sj($f(v),"handleChange",function(w){v.setState({unsaved:Qz({},v.state.unsaved,{},w)},v.persistChanges)});v.state={};Ab($f(v));v.persistChanges=v.debounceInput(v.persistChanges);return v}Tz(r,l);Rz(r,[{key:"getValue",value:function(q){var u=this.props.context.output,v=this.state.unsaved;return v&&q in v?v[q]:u.get(q)}},{key:"render",value:function(){return E(1,"div","context-menu-container output-edit",X(2,YE,{name:this.getValue("name"),label:this.getValue("label"),onChange:this.handleChange}),
2)}}]);return r}(Z);Du.$inject=["debounceInput","modeling"];var Eu=function w(r,q,u,v){if(!(this instanceof w))throw new TypeError("Cannot call a class as a function");r.onGetComponent("cell",function(n){if("output-header"===n.cellType)return XE});r.onGetComponent("context-menu",function(){if("output-edit"===(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).contextMenuType)return Du});u.on("output.edit",function(n){var p=n.output,t=Za(n.event.target,"th",!0).getBoundingClientRect();n=t.left;
var x=t.top,A=t.width;t=t.height;var z=v.getContainer();q.open({x:n+z.parentNode.scrollLeft,y:x+z.parentNode.scrollTop,width:A,height:t},{contextMenuType:"output-edit",output:p,offset:{x:4,y:4}})})};Eu.$inject=["components","contextMenu","eventBus","renderer"];var ZE=function(r){function q(u,v){if(!(this instanceof q))throw new TypeError("Cannot call a class as a function");var w=Vz(this,Wj(q).call(this,u,v));Yj(Ee(w),"onClick",function(n){w._eventBus.fire("input.edit",{event:n,input:w.props.input})});
Yj(Ee(w),"onContextmenu",function(n){w._eventBus.fire("cell.contextmenu",{event:n,id:w.props.input.id})});Yj(Ee(w),"onElementsChanged",function(){w.forceUpdate()});$c(Ee(w),Ag);w._translate=v.injector.get("translate");return w}Wz(q,r);Uz(q,[{key:"isDefaultExpressionLanguage",value:function(u){var v=this.context.injector.get("expressionLanguages").getDefault("inputCell").value;return u===v}},{key:"componentWillMount",value:function(){var u=this.context.injector;this._changeSupport=this.context.changeSupport;
this._sheet=u.get("sheet");this._eventBus=u.get("eventBus");this._elementRegistry=u.get("elementRegistry");u=this._sheet.getRoot();var v=this.props.input;this._changeSupport.onElementsChanged(u.id,this.onElementsChanged);this._changeSupport.onElementsChanged(v.id,this.onElementsChanged)}},{key:"componentWillUnmount",value:function(){var u=this._sheet.getRoot(),v=this.props.input;this._changeSupport.offElementsChanged(u.id,this.onElementsChanged);this._changeSupport.offElementsChanged(v.id,this.onElementsChanged)}},
{key:"render",value:function(){var u=this.props.input,v=u.inputExpression,w=u.get("label"),n=u.get("inputVariable"),p=v.get("expressionLanguage"),t=!w&&p&&this.isDefaultExpressionLanguage(p);return E(1,"th","input-cell input-editor",[this.slotFills({type:"cell-inner",context:{cellType:"input-cell",col:this._elementRegistry.get(u.id)},col:u}),w?E(1,"span","input-label",w,0,{title:this._translate("Input Label")}):E(1,"span","input-expression",v.text||"-",0,{title:this._translate("Input Expression")}),
n&&E(1,"span","dms-badge dmn-variable-name input-variable",n,0,{title:"Input Variable"}),t&&E(1,"span","dms-badge dmn-expression-language input-expression-language",[E(1,"span","dms-badge-icon dmn-icon-file-code"),E(1,"span","dms-badge-label",p,0)],4,{title:this._translate("Input Expression Language = {expressionLanguage}",{expressionLanguage:p})})],0,{"data-col-id":u.id,onClick:this.onClick,onContextmenu:this.onContextmenu})}}]);return q}(Z),fb=function(r){function q(u,v){if(!(this instanceof q))throw new TypeError("Cannot call a class as a function");
var w=Yz(this,ak(q).call(this,u,v));Cc(Tb(w),"onChange",function(n){w.setState({value:n});var p=w.props.onChange;"function"===typeof p&&p(n)});Cc(Tb(w),"onInputClick",function(n){n.preventDefault();n.stopPropagation();w.setOptionsVisible(!w.state.optionsVisible);w.focusInput()});Cc(Tb(w),"onInput",function(n){w.onChange(n.target.value)});Cc(Tb(w),"onOptionClick",function(n,p){p.preventDefault();p.stopPropagation();w.setOptionsVisible(!1);w.onChange(n);w.focusInput()});Cc(Tb(w),"onFocusChanged",function(n){w.checkClose(n.target)});
Cc(Tb(w),"onGlobalClick",function(n){w.checkClose(n.target)});Cc(Tb(w),"onKeyDown",function(n){var p=w.state.optionsVisible,t=n.which;if(40===t||38===t)n.stopPropagation(),n.preventDefault(),p?w.select(40===t?1:-1):w.setOptionsVisible(!0);!p||13!==t&&27!==t||(n.stopPropagation(),n.preventDefault(),w.setOptionsVisible(!1))});Cc(Tb(w),"onKeyboard",function(n){if(w.state.optionsVisible&&27===n)return w.setOptionsVisible(!1),!0});Ab(Tb(w));w.state={value:u.value,optionsVisible:!1};w._portalEl=null;return w}
Zz(q,r);Xz(q,[{key:"componentDidMount",value:function(){document.addEventListener("click",this.onGlobalClick);document.addEventListener("focusin",this.onFocusChanged);this.keyboard.addListener(this.onKeyboard)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("focusin",this.onFocusChanged);document.removeEventListener("click",this.onGlobalClick);this.keyboard.removeListener(this.onKeyboard);this.removePortalEl()}},{key:"componentWillReceiveProps",value:function(u){this.setState({value:u.value})}},
{key:"componentWillUpdate",value:function(u,v){v.optionsVisible?this._portalEl||this.addPortalEl():this._portalEl&&this.removePortalEl()}},{key:"componentDidUpdate",value:function(){if(this.state.optionsVisible&&this.inputNode){var u=this.inputNode.getBoundingClientRect(),v=u.left,w=u.width;R(this._portalEl.style,{top:"".concat(u.top+u.height,"px"),left:"".concat(v,"px"),width:"".concat(w,"px")})}}},{key:"addPortalEl",value:function(){this._portalEl=ta('<div class="dms-select-options"></div>');this.renderer.getContainer().appendChild(this._portalEl);
this._portalEl.addEventListener("mousedown",mr)}},{key:"removePortalEl",value:function(){this._portalEl&&(this._portalEl.removeEventListener("mousedown",mr),kb(this._portalEl),this._portalEl=null)}},{key:"focusInput",value:function(){var u=this.inputNode;u.focus();"selectionStart"in u&&(u.selectionStart=1E5)}},{key:"checkClose",value:function(u){!this._portalEl||this._portalEl.contains(u)||this.parentNode.contains(u)||this.setOptionsVisible(!1)}},{key:"select",value:function(u){var v=this.props.options,
w=this.state.value;if(v){var n=v.filter(function(p){return p.value===w})[0];n=n?v.indexOf(n):-1;u=-1===n?1===u?0:v.length-1:(n+u)%v.length;this.onChange(v[0>u?v.length+u:u].value)}}},{key:"setOptionsVisible",value:function(u){this.setState({optionsVisible:u})}},{key:"renderOptions",value:function(u,v){var w=this;return E(1,"div","options",u.map(function(n){return E(1,"div",["option",v===n?"active":""].join(" "),n.label,0,{"data-value":n.value,onClick:function(p){return w.onOptionClick(n.value,p)}})}),
0)}},{key:"render",value:function(){var u=this,v=this.props,w=v.className,n=v.options;v=v.noInput;var p=this.state,t=p.optionsVisible,x=p.value,A=(p=n?n.filter(function(z){return z.value===x})[0]:!1)?p.label:x;return E(1,"div",[w||"","dms-input-select"].join(" "),[v?E(1,"div","dms-input",A,0,{tabindex:"0",onKeyDown:this.onKeyDown},null,function(z){return u.inputNode=z}):E(64,"input","dms-input",null,1,{onInput:this.onInput,onKeyDown:this.onKeyDown,spellcheck:"false",type:"text",value:x},null,function(z){return u.inputNode=
z}),E(1,"span",["dms-input-select-icon",t?"dmn-icon-up":"dmn-icon-down"].join(" ")),t&&Rx(this.renderOptions(n,p),this._portalEl)],0,{onClick:this.onInputClick},null,function(z){return u.parentNode=z})}}]);return q}(Z);fb.$inject=["keyboard","renderer"];var $E=function(r){function q(u,v){if(!(this instanceof q))throw new TypeError("Cannot call a class as a function");var w=aA(this,dk(q).call(this,u,v));w.translate=v.injector?v.injector.get("translate"):cA;var n=u.defaultExpressionLanguage.value;w.setExpressionLanguage=
function(p){w.handleChange({expressionLanguage:p})};w.makeScript=function(p){p.preventDefault();p.stopPropagation();w.setExpressionLanguage(n)};w.handleValue=function(p){var t=w.props.expressionLanguage,x={text:p};p&&1<p.split(/\n/).length&&!t&&(x.expressionLanguage=n);p&&1<p.split(/\n/).length||t!==n||(x.expressionLanguage=void 0);w.handleChange(x)};w.handleLanguageChange=function(p){w.setExpressionLanguage(p)};w.handleLabelChange=function(p){w.handleChange({label:p||void 0})};w.handleInputVariableChange=
function(p){w.handleChange({inputVariable:p||void 0})};return w}bA(q,r);$z(q,[{key:"handleChange",value:function(u){var v=this.props.onChange;"function"===typeof v&&v(u)}},{key:"render",value:function(){var u=this.props,v=u.defaultExpressionLanguage,w=u.expressionLanguage,n=u.expressionLanguages,p=u.inputVariable,t=u.label;u=u.text;var x=w||u&&1<u.split(/\n/).length;return E(1,"div","dms-container ref-input-editor",[E(1,"p","dms-fill-row",[E(1,"label","dms-label",this.translate("Input Label"),0),
X(2,Vb,{className:"ref-input-label",value:t||"",onInput:this.handleLabelChange})],4),E(1,"hr","dms-hrule"),E(1,"h4","dms-heading",this.translate("Input Expression"),0),X(2,tu,{placeholder:"enter expression",ctrlForNewline:!0,className:["ref-text dms-input",x?"dms-script-input script-editor":"","dms-fit-row"].join(" "),onInput:this.handleValue,value:u||""}),!x&&E(1,"p","dms-hint",[this.translate("Enter simple"),E(1,"code",null,v.label,0),this.translate("expression or"),E(1,"button","ref-make-script",
this.translate("change to script."),0,{type:"button",onClick:this.makeScript}),aa(".")],0),x&&E(1,"p","dms-hint",this.translate("Enter script."),0),x&&E(1,"p",null,[E(1,"label","dms-label",this.translate("Expression Language"),0),X(2,fb,{className:"ref-language",value:w||"",onChange:this.handleLanguageChange,options:n})],4),E(1,"p","dms-fill-row",[E(1,"label","dms-label",this.translate("Input Variable"),0),X(2,Vb,{className:"ref-input-variable",value:p||"",onInput:this.handleInputVariableChange,placeholder:this.translate("cellInput")})],
4)],0)}}]);return q}(Z),Fu=function(r){function q(u,v){if(!(this instanceof q))throw new TypeError("Cannot call a class as a function");var w=fA(this,hk(q).call(this,u,v));gk(ag(w),"persistChanges",function(){var n=w.props.context.input,p=w.state.unsaved;if(p){var t=p.inputVariable,x=p.label;var A=["inputVariable","label"];if(null==p)A={};else{if(null==p)var z={};else{z={};var y=Object.keys(p),B;for(B=0;B<y.length;B++){var D=y[B];0<=A.indexOf(D)||(z[D]=p[D])}}if(Object.getOwnPropertySymbols)for(B=
Object.getOwnPropertySymbols(p),D=0;D<B.length;D++)y=B[D],0<=A.indexOf(y)||Object.prototype.propertyIsEnumerable.call(p,y)&&(z[y]=p[y]);A=z}z={};"inputVariable"in p&&(z.inputVariable=t);"label"in p&&(z.label=x);Object.keys(A).length&&(z.inputExpression=A);w.modeling.updateProperties(n,z);w.setState({unsaved:!1})}});gk(ag(w),"handleChange",function(n){w.setState({unsaved:dA({},w.state.unsaved,{},n)},w.persistChanges)});w.state={};Ab(ag(w));w.persistChanges=w.debounceInput(w.persistChanges);w._expressionLanguages=
v.injector.get("expressionLanguages");return w}gA(q,r);eA(q,[{key:"getValue",value:function(u){var v=this.state.unsaved,w=this.props.context.input;if("expressionLanguage"===u||"text"===u)w=w.inputExpression;return v&&u in v?v[u]:w.get(u)}},{key:"render",value:function(){var u=this._expressionLanguages.getDefault("inputHeadCell"),v=this._expressionLanguages.getAll();return E(1,"div","context-menu-container input-edit",X(2,$E,{expressionLanguage:this.getValue("expressionLanguage"),expressionLanguages:v,
defaultExpressionLanguage:u,inputVariable:this.getValue("inputVariable"),label:this.getValue("label"),text:this.getValue("text"),onChange:this.handleChange}),2)}}]);return q}(Z);Fu.$inject=["debounceInput","modeling","injector"];var Gu=function n(q,u,v,w){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");q.onGetComponent("cell",function(p){if("input-header"===p.cellType)return ZE});q.onGetComponent("context-menu",function(){if("input-edit"===(0<arguments.length&&void 0!==
arguments[0]?arguments[0]:{}).contextMenuType)return Fu});v.on("input.edit",function(p){var t=p.input,x=Za(p.event.target,"th",!0).getBoundingClientRect();p=x.left;var A=x.top,z=x.width;x=x.height;var y=w.getContainer();u.open({x:p+y.parentNode.scrollLeft,y:A+y.parentNode.scrollTop,width:z,height:x},{contextMenuType:"input-edit",input:t,offset:{x:4,y:4}})})};Gu.$inject=["components","contextMenu","eventBus","renderer"];var aF=function(q){function u(v,w){if(!(this instanceof u))throw new TypeError("Cannot call a class as a function");
var n=iA(this,kk(u).call(this,v));mk(bg(n),"onClick",function(p){var t=n.getTypeRefTarget();n._eventBus.fire("typeRef.edit",{event:p,element:t})});mk(bg(n),"onContextmenu",function(p){var t=n.props.element,x=t;P(t,"dmn:LiteralExpression")&&(x=t.$parent);n._eventBus.fire("cell.contextmenu",{event:p,node:p.node,id:x.id})});mk(bg(n),"onElementsChanged",function(){n.forceUpdate()});n._translate=w.injector.get("translate");return n}jA(u,q);hA(u,[{key:"componentWillMount",value:function(){var v=this.context.injector;
this._changeSupport=this.context.changeSupport;this._sheet=v.get("sheet");this._eventBus=v.get("eventBus");v=this.getTypeRefTarget();this._changeSupport.onElementsChanged(v.id,this.onElementsChanged)}},{key:"componentWillUnmount",value:function(){var v=this.getTypeRefTarget();this._changeSupport.offElementsChanged(v.id,this.onElementsChanged)}},{key:"getTypeRefTarget",value:function(){var v=this.props.element;return P(v,"dmn:InputClause")?v.inputExpression:v}},{key:"render",value:function(){var v=
this.props,w=v.element;v=(v.className||"")+" type-ref";var n=P(w,"dmn:LiteralExpression")?w.$parent.id:w.id;return E(1,"th",v,w.typeRef,0,{title:this._translate("Data Type"),"data-col-id":n,onClick:this.onClick,onContextmenu:this.onContextmenu})}}]);return u}(Z),bF="string boolean integer long double date".split(" "),cF=function(q){function u(v,w){if(!(this instanceof u))throw new TypeError("Cannot call a class as a function");var n=lA(this,ok(u).call(this,v));nA(sr(n),"onTypeChange",function(p){var t=
n.props.context.element;t=P(t,"dmn:LiteralExpression")?t.$parent:t;var x;Da(t)?x={inputExpression:{typeRef:p}}:vb(t)&&(x={typeRef:p});n._modeling.updateProperties(t,x)});n._translate=w.injector.get("translate");n._modeling=w.injector.get("modeling");return n}mA(u,q);kA(u,[{key:"render",value:function(){var v=this.props.context.element;v=(P(v,"dmn:InputClause")?v.inputExpression:v).typeRef;var w=bF.map(function(n){return{label:n,value:n}});return E(1,"div","type-ref-edit context-menu-container",[E(1,
"label","dms-label",[this._translate("Type"),aa(":")],0),X(2,fb,{className:"type-ref-edit-select",onChange:this.onTypeChange,options:w,value:v})],4)}}]);return u}(Z),Hu=function p(u,v,w,n){if(!(this instanceof p))throw new TypeError("Cannot call a class as a function");u.onGetComponent("cell",function(t){t=t.cellType;if("input-header-type-ref"===t||"output-header-type-ref"===t)return aF});u.onGetComponent("context-menu",function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(t.contextMenuType&&
"type-ref-edit"===t.contextMenuType)return cF});w.on("typeRef.edit",function(t){var x=t.element,A=Za(t.event.target,"th",!0).getBoundingClientRect();t=A.left;var z=A.top,y=A.width;A=A.height;var B=n.getContainer();v.open({x:t+B.parentNode.scrollLeft,y:z+B.parentNode.scrollTop,width:y,height:A},{contextMenuType:"type-ref-edit",element:x,offset:{x:4,y:4}})})};Hu.$inject=["components","contextMenu","eventBus","renderer"];var dF={__depends__:[fd],__init__:["typeRefEditingProvider"],typeRefEditingProvider:["type",
Hu]},Iu=function(u){function v(w,n){if(!(this instanceof v))throw new TypeError("Cannot call a class as a function");var p=oA(this,rk(v).call(this,w));p.postExecuted("updateProperties",function(t){var x=t.context;t=x.element;x=x.properties;(x=Da(t)?x.inputExpression:x)&&x.typeRef&&"string"!==x.typeRef&&(t=P(t,"dmn:LiteralExpression")?t.$parent:t,n.editAllowedValues(t,null))});return p}pA(v,u);return v}(Ua);Iu.$inject=["eventBus","modeling"];var Ju=function(u){function v(w,n){if(!(this instanceof v))throw new TypeError("Cannot call a class as a function");
var p=rA(this,uk(v).call(this,w,n));cg(Fe(p),"getRemoveClickHandler",function(t){return function(x){x.stopPropagation();p.removeItem(t)}});cg(Fe(p),"getToggleClickHandler",function(t){return function(x){x.stopPropagation();p.toggleItem(t)}});cg(Fe(p),"removeItem",function(t){var x=p.props.onChange,A=p.state.items.filter(function(z){return z!==t});p.setState({items:A});x&&x(A)});cg(Fe(p),"toggleItem",function(t){var x=p.props,A=x.onChange,z=x.type;x=p.state.items.map(function(y){y===t?y.isChecked=
!y.isChecked:"radio"===z&&(y.isChecked=!1);return y});p.setState({items:x});A&&A(x)});p.state={items:w.items};return p}sA(v,u);qA(v,[{key:"componentWillReceiveProps",value:function(w){this.setState({items:w.items})}},{key:"render",value:function(){var w=this,n=this.props,p=n.className,t=n.items,x=n.type;n=["dms-list-component"];p&&n.push(p);p=Rd(t,"group");p=tA(p);return E(1,"div",n.join(" "),p.map(function(A){var z=A[1];return E(1,"div","group",[E(1,"h4","dms-heading",A[0],0),E(1,"ul","items no-wrap",
z.map(function(y){return E(1,"li","item",[x&&E(64,"input","item-toggle",null,1,{type:x,checked:y.isChecked,onClick:w.getToggleClickHandler(y)}),aa("\u00a0"),y.value,y.isRemovable&&E(1,"span","remove dmn-icon-clear",null,1,{title:"Remove item",onClick:w.getRemoveClickHandler(y)})],0)}),0)],4)}),0)}}]);return v}(Z),Te=function(u){function v(w,n){if(!(this instanceof v))throw new TypeError("Cannot call a class as a function");var p=xk(v).call(this,w,n);p=!p||"object"!==wk(p)&&"function"!==typeof p?dg(this):
p;var t=w.validate,x=w.value;t=t?t(x||""):void 0;p.state={validationWarning:t,value:x};p.onInput=p.onInput.bind(dg(p));p.onKeyDown=p.onKeyDown.bind(dg(p));p.onKeyUp=p.onKeyUp.bind(dg(p));return p}vA(v,u);uA(v,[{key:"componentWillReceiveProps",value:function(w){var n=w.validate;w=w.value;n=n?n(w||""):void 0;this.setState({validationWarning:n,value:w})}},{key:"onInput",value:function(w){var n=this.props,p=n.onInput;n=(n=n.validate)?n(w):void 0;this.setState({validationWarning:n,value:w});"function"===
typeof p&&p&&p({isValid:!n,value:w})}},{key:"onKeyDown",value:function(w){var n=w.target.value,p=this.props,t=p.onKeyDown;p=(p=p.validate)?p(n):void 0;"function"===typeof t&&t({isValid:!p,value:n,event:w})}},{key:"onKeyUp",value:function(w){var n=w.target.value,p=this.props,t=p.onKeyUp;p=(p=p.validate)?p(n):void 0;"function"===typeof t&&t({isValid:!p,value:n,event:w})}},{key:"render",value:function(){var w=this.props,n=w.placeholder,p=w.type,t=this.state,x=t.validationWarning;t=t.value;w=["dms-validated-input",
w.className].join(" ");var A=[];x&&A.push("invalid");return E(1,"div",w,[X(2,Vb,{className:A,onInput:this.onInput,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,placeholder:n||"",type:p,value:t||""}),x&&E(1,"p","dms-hint dms-validation-warning",x,0)],0)}}]);return v}(Z),eF=function(u){function v(w,n){if(!(this instanceof v))throw new TypeError("Cannot call a class as a function");var p=yA(this,Bk(v).call(this,w,n));cd(Dc(p),"onElementsChanged",function(){p.forceUpdate()});cd(Dc(p),"setPredefinedValues",
function(x){var A=p.getAllowedValuesTarget();p.setState({values:x});p._modeling.editAllowedValues(A,x&&wA(x))});cd(Dc(p),"onListChange",function(x){p.setPredefinedValues(x)});cd(Dc(p),"onInput",function(x){p.setState({inputValue:x.value})});cd(Dc(p),"onKeyDown",function(x){var A=x.isValid;x=x.event;13===x.keyCode&&(x.stopPropagation(),x.preventDefault(),A&&(x=p.state,A=x.values,x=zk(x.inputValue),p.onListChange((A||[]).concat(x.values.map(function(z){return{value:z,isCheckable:!1,isRemovable:!0,group:"Predefined Values"}}))),
p.setState({inputValue:""})))});cd(Dc(p),"handleRemovePredifinedValuesClick",function(x){x.stopPropagation();p.removePredefinedValues()});cd(Dc(p),"removePredefinedValues",function(){p.setPredefinedValues(null)});p._translate=n.injector.get("translate");p._modeling=n.injector.get("modeling");p._changeSupport=n.changeSupport;var t=p.getAllowedValuesTarget();t=zk(t.inputValues&&t.inputValues.text||t.outputValues&&t.outputValues.text||"");p.state=t?{values:t.values.map(function(x){return{value:x,isCheckable:!1,
isRemovable:!0,group:"Predefined Values"}}),inputValue:""}:{values:null,inputValue:""};return p}zA(v,u);xA(v,[{key:"componentWillMount",value:function(){var w=this.getAllowedValuesTarget();this._changeSupport.onElementsChanged(w.id,this.onElementsChanged)}},{key:"componentWillUnmount",value:function(){var w=this.getAllowedValuesTarget();this._changeSupport.offElementsChanged(w.id,this.onElementsChanged)}},{key:"getAllowedValuesTarget",value:function(){var w=this.props.context.element;return P(w,"dmn:LiteralExpression")?
w.$parent:w}},{key:"render",value:function(){var w=this,n=this.state,p=n.inputValue;n=n.values;return"string"===this.props.context.element.typeRef?E(1,"div","context-menu-container allowed-values-edit",[E(1,"hr","dms-hrule"),null!==n&&0<n.length&&X(2,Ju,{items:n,onChange:this.onListChange}),null!==n&&!n.length&&E(1,"div",null,[E(1,"h4","dms-heading",this._translate("Predefined Values"),0),E(1,"span","placeholder",this._translate("No values"),0)],4),null!==n&&E(1,"p","dms-hint",E(1,"button","del-values",
this._translate("Clear predefined values."),0,{type:"button",onClick:this.handleRemovePredifinedValuesClick}),2),E(1,"h4","dms-heading",this._translate("Add Predefined Values"),0),X(2,Te,{onInput:this.onInput,onKeyDown:this.onKeyDown,placeholder:'"value", "value", ...',type:"text",validate:function(t){if(!zk(t))return w._translate("Strings must be in double quotes.")},value:p})],0):null}}]);return v}(Z),Ku=function w(v){if(!(this instanceof w))throw new TypeError("Cannot call a class as a function");
v.onGetComponent("context-menu",500,function(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(n.contextMenuType&&"type-ref-edit"===n.contextMenuType)return eF})};Ku.$inject=["components"];var fF={__init__:["allowedValuesUpdateBehavior","allowedValuesEditingProvider"],allowedValuesUpdateBehavior:["type",Iu],allowedValuesEditingProvider:["type",Ku]},GA=function(v){function w(n,p){if(!(this instanceof w))throw new TypeError("Cannot call a class as a function");var t=BA(this,Ek(w).call(this,
n,p));Gk(eg(t),"onElementsChanged",function(){t.forceUpdate()});Gk(eg(t),"handleClick",function(x){x.stopPropagation();t.add()});Gk(eg(t),"add",function(){t._eventBus.fire("addInput")});t._sheet=p.injector.get("sheet");t._eventBus=p.injector.get("eventBus");t._changeSupport=p.changeSupport;t._translate=p.injector.get("translate");return t}CA(w,v);AA(w,[{key:"componentWillMount",value:function(){var n=this.getRoot();this._changeSupport.onElementsChanged(n.id,this.onElementsChanged)}},{key:"componentWillUnmount",
value:function(){var n=this.getRoot();this._changeSupport.offElementsChanged(n.id,this.onElementsChanged)}},{key:"getRoot",value:function(){return this._sheet.getRoot()}},{key:"render",value:function(){var n=this.getRoot().businessObject.input;if(!n||!n.length)return null;n=n.length;return E(1,"th","input-cell inputs-label actionable add-input header",[this._translate("Input"),aa(" "),E(1,"span","add-input dmn-icon-plus action-icon",null,1,{title:this._translate("Add Input")})],0,{onClick:this.handleClick,
colspan:n})}}]);return w}(Z),HA=function(v){function w(n,p){if(!(this instanceof w))throw new TypeError("Cannot call a class as a function");var t=EA(this,Ik(w).call(this,n,p));Kk(fg(t),"onElementsChanged",function(){t.forceUpdate()});Kk(fg(t),"handleClick",function(x){x.stopPropagation();t.add()});Kk(fg(t),"add",function(){t._eventBus.fire("addOutput")});t._sheet=p.injector.get("sheet");t._eventBus=p.injector.get("eventBus");t._changeSupport=p.changeSupport;t._translate=p.injector.get("translate");
return t}FA(w,v);DA(w,[{key:"componentWillMount",value:function(){var n=this.getRoot();this._changeSupport.onElementsChanged(n.id,this.onElementsChanged)}},{key:"componentWillUnmount",value:function(){var n=this.getRoot();this._changeSupport.offElementsChanged(n.id,this.onElementsChanged)}},{key:"getRoot",value:function(){return this._sheet.getRoot()}},{key:"render",value:function(){var n=this.getRoot().businessObject.output.length;return E(1,"th","output-cell outputs-label add-output actionable header",
[this._translate("Output"),aa(" "),E(1,"span","add-output dmn-icon-plus action-icon",null,1,{title:this._translate("Add Output")})],0,{onClick:this.handleClick,colspan:n})}}]);return w}(Z);yr.$inject=["components","editorActions","eventBus"];var Lu={__depends__:[{__depends__:[Pd],__init__:["addInputOutputProvider"],addInputOutputProvider:["type",yr]},fF,fd,ed,dd,dF],__init__:["inputEditingProvider","outputEditingProvider"],inputEditingProvider:["type",Gu],outputEditingProvider:["type",Eu]},Mu=function(){function v(w,
n,p,t){var x=this;if(!(this instanceof v))throw new TypeError("Cannot call a class as a function");Lk(this,"handleDragOver",function(A){gg(A);var z=Za(A.target,".dmn-decision-table-container td,\n   .dmn-decision-table-container th",!0),y=!!z,B=x._dragContext.hoverEl;B&&B!==z&&(x._emit("dragAndDrop.dragLeave",A),x._dragContext.targetEl=null,x._dragContext.hoverEl=null);z&&(z!==B&&(x._dragContext.hoverEl=z,y=x._emit("dragAndDrop.dragEnter",A),!1!==y&&(x._dragContext.targetEl=z)),y=x._emit("dragAndDrop.dragOver",
A));A.dataTransfer.dropEffect=!1!==y?"move":"none"});Lk(this,"handleDrop",function(A){gg(A);var z=x._emit("dragAndDrop.drop",A);if(z){var y=x._dragContext.draggedElement;y instanceof lb?(z=x._sheet.getRoot().rows.indexOf(z),x._modeling.moveRow(y,z)):y instanceof mb&&(z=x._sheet.getRoot().cols.indexOf(z),x._modeling.moveCol(y,z))}x.handleDragEnd(A)});Lk(this,"handleDragEnd",function(A){gg(A);x._unbindListeners();x._emit("dragAndDrop.dragEnd",A);x._dragContext=null});this._eventBus=w;this._renderer=
n;this._modeling=p;this._sheet=t;this._dragContext=null;w.on("table.destroy",function(){x._unbindListeners()})}IA(v,[{key:"_bindListeners",value:function(){U.bind(document,"dragover",this.handleDragOver);U.bind(document,"drop",this.handleDrop);U.bind(document,"dragend",this.handleDragEnd)}},{key:"_unbindListeners",value:function(){U.unbind(document,"dragover",this.handleDragOver);U.unbind(document,"drop",this.handleDrop);U.unbind(document,"dragend",this.handleDragEnd)}},{key:"_emit",value:function(w,
n){return this._eventBus.fire(w,{dragContext:this._dragContext,originalEvent:n})}},{key:"startDrag",value:function(w,n){gg(n,!0);n.dataTransfer.effectAllowed="move";n.dataTransfer.setData&&n.dataTransfer.setData("text","__DUMMY");this._dragContext={draggedElement:w};this._bindListeners();this._emit("dragAndDrop.dragStart",n)}}]);return v}();Mu.$inject=["eventBus","renderer","modeling","sheet"];var gF={__init__:["dragAndDrop"],dragAndDrop:["type",Mu]},Nu=function(){function v(w,n,p,t,x,A,z){var y=
this;if(!(this instanceof v))throw new TypeError("Cannot call a class as a function");KA(this,"_cleanup",function(){var B=y._renderer.getContainer();Mk(B);NA(B);y._dragImage&&(kb(y._dragImage),y._dragImage=null)});this._elementRegistry=n;this._dragAndDrop=t;this._renderer=x;this._rules=A;this._sheet=z;w.onGetComponent("cell-inner",function(B){var D=B.cellType,H=B.col,L=B.row;if("rule-index"===D)return function(){return E(1,"span","dmn-icon-drag vertical",aa("\u00a0"),2,{draggable:"true",onDragStart:function(K){return y.startDrag(L,
K)},title:"Move rule"})};if("input-cell"===D||"output-cell"===D){var J="Move ".concat(Da(H)?"Input":"Output");return function(){return E(1,"span","dmn-icon-drag horizontal",null,1,{draggable:"true",onDragStart:function(K){return y.startDrag(H,K)},title:J})}}});p.on("dragAndDrop.dragEnter",function(B){var D=B.dragContext;B=D.draggedElement;var H=D.hoverEl;return B instanceof lb?!0:B instanceof mb?(D=y._sheet,D=(H=y._elementRegistry.get(H.dataset.colId))?D.getRoot().cols.indexOf(H):-1,-1===D?!1:y._rules.allowed("col.move",
{col:B,index:D})):!1});p.on("dragAndDrop.dragLeave",function(B){B.dragContext.targetEl&&(B=y._renderer.getContainer(),Mk(B))});p.on("dragAndDrop.dragOver",function(B){var D=B.dragContext;B=B.originalEvent;var H=D.draggedElement,L=D.lastPosition,J=D.targetEl,K=y._renderer.getContainer();if(!J)return!1;var N;H instanceof lb&&(N=Er(B,J));H instanceof mb&&(N=Dr(B,J));if(L===N)return!0;Mk(K);H instanceof lb&&("top"===N?Br(J,K,"top"):Br(J,K,"bottom"));H instanceof mb&&("left"===N?Cr(J,K,"left"):Cr(J,K,
"right"));D.lastPosition=N;return!0});p.on("dragAndDrop.drop",function(B){var D=B.dragContext,H=B.originalEvent;B=D.draggedElement;var L=D.targetEl;if(!L)return!1;if(B instanceof lb){D=Er(H,L);L=y._elementRegistry.get(L.dataset.rowId);if(!L||L===B)return;H=L;L=y._sheet.getRoot().rows;L.indexOf(B)>L.indexOf(H)&&(H=L.indexOf(H),H=L[Math.min(L.length-1,H+1)]);"top"===D?(D=L.indexOf(H),D=L[Math.max(0,D-1)]):D=H;return D===B?void 0:D}if(B instanceof mb&&(D=Dr(H,L),(L=y._elementRegistry.get(L.dataset.colId))&&
L!==B))return H=y._sheet.getRoot().cols,H.indexOf(B)>H.indexOf(L)&&(L=PA(L,H)),D="left"===D?OA(L,H):L,D===B?void 0:D});p.on("dragAndDrop.dragEnd",this._cleanup)}JA(v,[{key:"startDrag",value:function(w,n){var p=this._renderer.getContainer();this._dragImage=ta('<span style="\n          visibility: hidden;\n          position: fixed;\n          top: -10000px\n      "></span>');document.body.appendChild(this._dragImage);n.dataTransfer.setDragImage&&n.dataTransfer.setDragImage(this._dragImage,0,0);w instanceof
lb?LA(w,p):w instanceof mb&&MA(w,p);this._dragAndDrop.startDrag(w,n)}}]);return v}();Nu.$inject="components elementRegistry eventBus dragAndDrop renderer rules sheet".split(" ");var hF={__depends__:[gF,Tm],__init__:["dmnDragAndDrop"],dmnDragAndDrop:["type",Nu]},jF=function(v){function w(n,p){Fr(this,w);var t=Ir(this,hg(w).call(this,n,p));Kr(Ok(t),"onElementsChanged",function(){t.forceUpdate()});Kr(Ok(t),"changeDescription",function(x){t._modeling.updateProperties(t._element,{description:x})});t._elementRegistry=
p.injector.get("elementRegistry");t._modeling=p.injector.get("modeling");t._changeSupport=t.context.changeSupport;t._element=t._elementRegistry.get(t.props.context.id);return t}Jr(w,v);Hr(w,[{key:"componentWillMount",value:function(){if(this._element)this._changeSupport.onElementsChanged(this._element.id,this.onElementsChanged)}},{key:"componentDidMount",value:function(){this.props.context.autoFocus&&this.node&&xa(".content-editable",this.node).focus()}},{key:"componentWillUnmount",value:function(){if(this._element){this._changeSupport.offElementsChanged(this._element.id,
this.onElementsChanged);var n=this._element.businessObject.description;Sa(n)&&!n.length&&this.changeDescription(null)}}},{key:"render",value:function(){var n=this;if(this._element){var p=this._element.businessObject.description;if(Sa(p))return E(1,"div","context-menu-container description-editor",X(2,iF,{className:"dms-input",onChange:this.changeDescription,value:p}),2,null,null,function(t){return n.node=t})}}}]);return w}(Z),iF=function(v){function w(){Fr(this,w);return Ir(this,hg(w).apply(this,
arguments))}Jr(w,v);Hr(w,[{key:"render",value:function(){return E(1,"div",this.getClassName(),this.getEditor(),0)}}]);return w}(Ic),Ou=function y(w,n,p,t,x,A,z){var B=this;if(!(this instanceof y))throw new TypeError("Cannot call a class as a function");Lr(this,"addDescription",function(D){B._modeling.updateProperties(D,{description:""});var H=B._renderer.getContainer(),L=Gd(D.id,H).getBoundingClientRect();H=Mr(H,L);B._contextMenu.open(H,{contextMenuType:"cell-description",id:D.id,autoFocus:!0,offset:{x:4,
y:4}})});Lr(this,"removeDescription",function(D){B._modeling.updateProperties(D,{description:null});B._contextMenu.close()});this._contextMenu=n;this._modeling=x;this._renderer=A;this._translate=z;t.on("cell.click",750,function(D){if(!D.defaultPrevented){var H=D.target,L=D.id,J=p.get(L);J&&(J&&J.businessObject&&J.businessObject.description||D.preventDefault(),D=A.getContainer(),H=H.getBoundingClientRect(),H=Mr(D,H),n.open(H,{contextMenuType:"cell-description",autoFocus:!1,id:L,offset:{x:4,y:4}}))}});
w.onGetComponent("context-menu",function(){var D=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(D.contextMenuType&&"cell-description"===D.contextMenuType&&(D=p.get(D.id),Sa(D&&D.businessObject&&D.businessObject.description)))return jF});w.onGetComponent("context-menu-cell-additional",500,function(){var D=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(D.contextMenuType&&"context-menu"===D.contextMenuType&&(D=D.id)){var H=p.get(D);if(H){D=H.businessObject.description;var L=
Sa(D),J=L?function(){return B.removeDescription(H)}:function(){return B.addDescription(H)},K=L?"dmn-icon-clear":"dmn-icon-plus";return E(1,"div","context-menu-group-entry ".concat(L?"remove-description":"add-description"),[E(1,"span","context-menu-group-entry-icon ".concat(K)),Sa(D)?B._translate("Remove"):B._translate("Add"),B._translate("Description")],0,{onClick:J})}}})};Ou.$inject="components contextMenu elementRegistry eventBus modeling renderer translate".split(" ");var kF={__depends__:[fd,Sm],
__init__:["description"],description:["type",Ou]},Pu=function(){function w(n,p,t,x,A){var z=this;if(!(this instanceof w))throw new TypeError("Cannot call a class as a function");this._modeling=t;this._translate=A;n.onGetComponent("context-menu-cell-additional",function(){var y=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(y.contextMenuType&&"context-menu"===y.contextMenuType&&(y=y.id)){var B=p.get(y);if(B){y=B.businessObject.expressionLanguage||x.getDefault(Da(B.col)?"inputCell":"outputCell").value;
var D=x.getAll();return E(1,"div","context-menu-group-entry context-menu-entry-set-expression-language",[E(1,"div",null,[E(1,"span","context-menu-group-entry-icon dmn-icon-file-code"),z._translate("Expression Language")],0),X(2,fb,{className:"expression-language",onChange:function(H){return z.onChange(B,H)},options:D,value:y})],4)}}})}QA(w,[{key:"onChange",value:function(n,p){this._modeling.editExpressionLanguage(n.businessObject,p)}}]);return w}();Pu.$inject=["components","elementRegistry","modeling",
"expressionLanguages","translate"];var lF={__depends__:[dd],__init__:["expressionLanguage"],expressionLanguage:["type",Pu]},SA=/\s/,UA=/^([a-z][\w-.]*:)?[a-z_][\w-.]*$/i,TA=/^[a-z_][\w-.]*$/i,RA=/\$\{([^}]*)\}/g,Qu=function(w){function n(p,t){Rk(this,n);var x=Tk(this,Ge(n).call(this,p,t));ig(Ec(x),"onElementsChanged",function(){x.forceUpdate()});ig(Ec(x),"setDecisionTableName",function(A){x.modeling.editDecisionTableName(A)});ig(Ec(x),"setDecisionTableId",function(A){x.getBusinessObject().id!==A&&
x.modeling.editDecisionTableId(A)});ig(Ec(x),"validateId",function(A){var z=x.getBusinessObject();return Or(z,A)});Ab(Ec(x));return x}Uk(n,w);Sk(n,[{key:"componentWillMount",value:function(){var p=this.context.injector;this.sheet=p.get("sheet");this.modeling=p.get("modeling");this.setupChangeListeners({bind:this.getBusinessObject().id})}},{key:"componentWillUnmount",value:function(){this.setupChangeListeners({unbind:this.getBusinessObject().id})}},{key:"setupChangeListeners",value:function(p){var t=
p.bind;p=p.unbind;"string"===typeof p&&this.changeSupport.offElementsChanged(p,this.onElementsChanged);if("string"===typeof t)this.changeSupport.onElementsChanged(t,this.onElementsChanged)}},{key:"getBusinessObject",value:function(){return this.sheet.getRoot().businessObject.$parent}},{key:"render",value:function(){var p=this.getBusinessObject(),t=p.id;return E(1,"header","decision-table-properties",[X(2,mF,{className:"decision-table-name",value:p.name,ctrlForNewline:!0,onChange:this.setDecisionTableName,
elementId:"__decisionProperties_name",coords:"0:__decisionProperties"}),X(2,nF,{className:"decision-table-id",value:t,ctrlForNewline:!0,validate:this.validateId,onChange:this.setDecisionTableId,elementId:"__decisionProperties_id",coords:"1:__decisionProperties"})],4)}}]);return n}(Z);Qu.$inject=["sheet","modeling","changeSupport"];var mF=function(w){function n(p,t){Rk(this,n);var x=Tk(this,Ge(n).call(this,p,t));$c(Ec(x),Rm);return x}Uk(n,w);Sk(n,[{key:"render",value:function(){var p=Sf(this.getSelectionClasses(),
this.getClassName());return E(1,"h3",p,this.getEditor(),0,{"data-element-id":this.props.elementId,"data-coords":this.props.coords,title:"Decision Name"})}}]);return n}(Ic),nF=function(w){function n(p,t){Rk(this,n);var x=Tk(this,Ge(n).call(this,p,t));$c(Ec(x),Rm);return x}Uk(n,w);Sk(n,[{key:"render",value:function(){var p=Sf(this.getSelectionClasses(),this.getClassName());return E(1,"h5",p,this.getEditor(),0,{title:"Decision Id","data-element-id":this.props.elementId,"data-coords":this.props.coords})}}]);
return n}(Ic),Ru=function p(n){if(!(this instanceof p))throw new TypeError("Cannot call a class as a function");n.onGetComponent("table.before",function(){return Qu})};Ru.$inject=["components"];var oF={__depends__:[ed],__init__:["decisionTableProperties"],decisionTableProperties:["type",Ru]},Ur=function(n){function p(t,x){if(!(this instanceof p))throw new TypeError("Cannot call a class as a function");var A=WA(this,Xk(p).call(this,t,x));Rr(jg(A),"onClick",function(z){A.eventBus.fire("hitPolicy.edit",
{event:z})});Rr(jg(A),"onElementsChanged",function(){A.forceUpdate()});Ab(jg(A));return A}XA(p,n);VA(p,[{key:"getRoot",value:function(){return this.sheet.getRoot()}},{key:"componentWillMount",value:function(){this.changeSupport.onElementsChanged(this.getRoot().id,this.onElementsChanged)}},{key:"componentWillUnmount",value:function(){this.changeSupport.offElementsChanged(this.getRoot().id,this.onElementsChanged)}},{key:"render",value:function(){var t=this.getRoot().businessObject,x=t.hitPolicy,A=x.charAt(0);
t=YA(t.aggregation);return E(1,"th","hit-policy header",[A,t],0,{"data-hit-policy":"true",title:"Hit Policy = "+x,onClick:this.onClick,rowspan:"3"})}}]);return p}(Z);Ur.$inject=["changeSupport","sheet","eventBus"];var pF="UNIQUE;FIRST;PRIORITY;ANY;COLLECT;RULE ORDER;OUTPUT ORDER".split(";"),qF=["NO LIST AGGREGATION","SUM","MIN","MAX","COUNT"],aB=function(n){function p(t,x){if(!(this instanceof p))throw new TypeError("Cannot call a class as a function");var A=$k(p).call(this,t,x);A=!A||"object"!==
Zk(A)&&"function"!==typeof A?kg(this):A;A.onHitPolicyChange=A.onHitPolicyChange.bind(kg(A));A.onAggregationChange=A.onAggregationChange.bind(kg(A));A.onElementsChanged=A.onElementsChanged.bind(kg(A));return A}$A(p,n);ZA(p,[{key:"onHitPolicyChange",value:function(t){var x=this._sheet.getRoot().businessObject;this._modeling.editHitPolicy(t,"COLLECT"===t?x.aggregation:void 0)}},{key:"onAggregationChange",value:function(t){this._modeling.editHitPolicy("COLLECT",t)}},{key:"onElementsChanged",value:function(){this.forceUpdate()}},
{key:"componentWillMount",value:function(){var t=this.context.injector,x=this._changeSupport=this.context.changeSupport;this._sheet=t.get("sheet");this._modeling=t.get("modeling");t=this._sheet.getRoot();var A=t.businessObject,z=A.hitPolicy;A=A.aggregation;x.onElementsChanged(t.id,this.onElementsChanged);this.state={hitPolicy:z,aggregation:A}}},{key:"componentWillUnmount",value:function(){var t=this._sheet.getRoot();this._changeSupport.offElementsChanged(t.id,this.onElementsChanged)}},{key:"render",
value:function(){var t=this._sheet.getRoot().businessObject,x=t.hitPolicy;t=t.aggregation;var A=pF.map(function(y){return{label:y,value:y}}),z=qF.map(function(y){return{label:y,value:"NO LIST AGGREGATION"===y?void 0:y}});return E(1,"div","context-menu-container hit-policy-edit",[E(1,"p","hit-policy-edit-policy",[E(1,"label","dms-label",aa("Hit Policy:"),2),X(2,fb,{noInput:!0,className:"hit-policy-edit-policy-select",onChange:this.onHitPolicyChange,options:A,value:x})],4),"COLLECT"===x&&E(1,"p","hit-policy-edit-operator",
[E(1,"label","dms-label",aa("Aggregation:"),2),X(2,fb,{noInput:!0,className:"hit-policy-edit-operator-select",onChange:this.onAggregationChange,options:z,value:t})],4)],0)}}]);return p}(Z);Tr.$inject=["components","contextMenu","eventBus","renderer"];var rF={__depends__:[fd],__init__:["hitPolicyProvider"],hitPolicyProvider:["type",Tr]},Su=function(){function n(p,t,x){var A=this;if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");lg(this,"_init",function(){A._registerDefaultBindings();
A._fire("init")});lg(this,"_destroy",function(){A._fire("destroy");A.unbind();A._listeners=null});lg(this,"_keyHandler",function(z){var y,B,D=A._listeners,H=z.keyCode||z.charCode||-1;for(y=0;B=D[y];y++)if(B(H,z)){z.preventDefault();z.stopPropagation();break}});lg(this,"unbind",function(){var z=A._node;z&&(A._fire("unbind"),U.unbind(z,"keydown",A._keyHandler,!0));A._node=null});this._config=p||{};this._editorActions=x;this._eventBus=t;this._listeners=[];t.on("table.destroy",this._destroy);t.on("table.init",
this._init);t.on("attach",function(){A._config.bindTo&&A.bind(p.bindTo)});t.on("detach",this.unbind)}bB(n,[{key:"bind",value:function(p){this.unbind();this._node=p;U.bind(p,"keydown",this._keyHandler,!0);this._fire("bind")}},{key:"getBinding",value:function(){return this._node}},{key:"_fire",value:function(p){this._eventBus.fire("keyboard."+p,{node:this._node,listeners:this._listeners})}},{key:"_registerDefaultBindings",value:function(){var p=this._listeners,t=this._editorActions;p.push(function(x,
A){if(Id(A)&&!A.shiftKey&&90===x)return t.trigger("undo"),!0});p.push(function(x,A){if(Id(A)&&(89===x||90===x&&A.shiftKey))return t.trigger("redo"),!0});p.push(function(x,A){if(13===x&&!Id(A)&&Za(A.target,"[data-element-id]",!0))return t.trigger(A.shiftKey?"selectCellAbove":"selectCellBelow"),!0})}},{key:"addListener",value:function(p){this._listeners.unshift(p)}},{key:"removeListener",value:function(p){this._listeners=this._listeners.filter(function(t){return t!==p})}}]);return n}();Su.$inject=["config.keyboard",
"eventBus","editorActions"];var Ue={__depends__:[Pd],__init__:["keyboard"],keyboard:["type",Su]},Tu=function(n){function p(t,x){if(!(this instanceof p))throw new TypeError("Cannot call a class as a function");var A=dB(this,cl(p).call(this,t));A.executed(["row.add","row.remove","col.add","col.remove"],Xr(function(z){z=z.context;A.updateRoot(z.row||z.col,z.oldRoot)}));A.reverted(["row.add","row.remove","col.add","col.remove"],Xr(function(z){z=z.context;A.updateRoot(z.row||z.col,z.newRoot)}));return A}
eB(p,n);cB(p,[{key:"updateRoot",value:function(t,x){var A=this,z=t.root,y=t.businessObject;if(P(t,"dmn:DecisionRule")){if(x){var B=x.businessObject.get("rule"),D=B.indexOf(y);B.splice(D,1);y.$parent=null}z&&(B=z.businessObject,D=z.rows.indexOf(t),B.get("rule").splice(D,0,y),y.$parent=B,t.cells.forEach(function(Q,S){A.wireCell(Q,t,S)}))}if(P(t,"dmn:InputClause")||P(t,"dmn:OutputClause")){if(x){D=x.businessObject;B=D.get("input");D=D.get("output");if(P(t,"dmn:InputClause")){var H=B;var L=B.indexOf(y)}P(t,
"dmn:OutputClause")&&(H=D,L=D.indexOf(y));if(-1===L)throw Error("inconsistent model: clause not in table");H.splice(L,1);y.$parent=null;t.cells.forEach(function(Q,S){A.unwireCell(Q,x.rows[S])})}if(z){H=z.businessObject;L=H.get("input");B=H.get("output");var J=z.cols.indexOf(t);if(P(t,"dmn:InputClause")){var K=L;var N=J}P(t,"dmn:OutputClause")&&(K=B,N=J-L.length);K.splice(N,0,y);y.$parent=H;t.cells.forEach(function(Q,S){A.wireCell(Q,z.rows[S],J)})}}}},{key:"unwireCell",value:function(t,x){var A=t.businessObject,
z=x.businessObject,y=z.get("inputEntry");z=z.get("outputEntry");var B;P(t,"dmn:UnaryTests")&&(B=y);P(t,"dmn:LiteralExpression")&&(B=z);y=B.indexOf(A);if(-1===y)throw Error("cell not in row");B.splice(y,1);A.$parent=null}},{key:"wireCell",value:function(t,x,A){var z=t.businessObject;x=x.businessObject;var y=x.get("inputEntry"),B=x.get("outputEntry");if(z.$parent!==x){if(P(t,"dmn:UnaryTests")){var D=y;var H=A}P(t,"dmn:LiteralExpression")&&(D=B,H=A-y.length);D.splice(H,0,z);z.$parent=x}}}]);return p}(Ua);
Tu.$inject=["eventBus","sheet"];var Uu=function(){function n(p){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");this._model=p}fB(n,[{key:"create",value:function(p){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},x=this._model.create(p,t||{});P(x,"dmn:InputClause")&&(t.inputExpression?x.inputExpression=t.inputExpression:(x.inputExpression=this.create("dmn:LiteralExpression",{typeRef:"string"}),x.inputExpression.$parent=x));P(x,"dmn:OutputClause")&&(x.typeRef=
t.typeRef||"string");if(P(x,"dmn:UnaryTests")||P(x,"dmn:LiteralExpression"))x.text=t.text||"";this._ensureId(x);return x}},{key:"_needsId",value:function(p){return P(p,"dmn:DMNElement")}},{key:"_ensureId",value:function(p){var t=(p.$type||"").replace(/^[^:]*:/g,"")+"_";!p.id&&this._needsId(p)&&(p.id=this._model.ids.nextPrefixed(t,p))}}]);return n}();Uu.$inject=["moddle"];var Vu=function(n){function p(t){if(!(this instanceof p))throw new TypeError("Cannot call a class as a function");var x=He(p).call(this);
if(!x||"object"!==el(x)&&"function"!==typeof x){if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");x=this}x._dmnFactory=t;return x}iB(p,n);hB(p,[{key:"create",value:function(t,x){var A=this._dmnFactory,z=x.businessObject,y=x.type;var B=["businessObject","type"];if(null==x)B={};else{if(null==x)var D={};else{D={};var H=Object.keys(x),L;for(L=0;L<H.length;L++){var J=H[L];0<=B.indexOf(J)||(D[J]=x[J])}}if(Object.getOwnPropertySymbols)for(L=Object.getOwnPropertySymbols(x),
J=0;J<L.length;J++)H=L[J],0<=B.indexOf(H)||Object.prototype.propertyIsEnumerable.call(x,H)&&(D[H]=x[H]);B=D}if(!z){if(!y&&("root"===t?y="dmn:DecisionTable":"cell"===t&&(z=B.col,P(z,"dmn:OutputClause")&&(y="dmn:LiteralExpression"),P(z,"dmn:InputClause")&&(y="dmn:UnaryTests")),!y))throw Error("cannot guess <type>");z=A.create(y)}return fl(He(p.prototype),"create",this).call(this,t,gB({businessObject:z,id:z.id},B))}}]);return p}(Ot);Vu.$inject=["dmnFactory"];var Wu=function(){function n(p,t){if(!(this instanceof
n))throw new TypeError("Cannot call a class as a function");this._sheet=p;this._elementFactory=t}jB(n,[{key:"execute",value:function(p){var t=this._sheet,x=this._elementFactory,A=t.getRoot(),z=p.row,y=p.index;"undefined"===typeof y&&(y=p.index=A.rows.length);p.newRoot=A;z.cells.length||A.cols.forEach(function(B,D){var H=x.create("cell",{row:z,col:B});z.cells[D]=H});t.addRow(z,y);return t.getRoot()}},{key:"revert",value:function(p){var t=this._sheet;t.removeRow(p.row);return t.getRoot()}}]);return n}();
Wu.$inject=["sheet","elementFactory"];var Xu=function(){function n(p){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");this._sheet=p}kB(n,[{key:"execute",value:function(p){var t=this._sheet,x=t.getRoot(),A=p.row;x=p.oldIndex=x.rows.indexOf(A);p.oldRoot=A.root;if(-1===x)throw Error("row#".concat(A.id," not in sheet"));t.removeRow(A);return t.getRoot()}},{key:"revert",value:function(p){var t=this._sheet;t.addRow(p.row,p.oldIndex);return t.getRoot()}}]);return n}();Xu.$inject=
["sheet"];var Yu=function(){function n(p){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");this._modeling=p}lB(n,[{key:"preExecute",value:function(p){this._modeling.removeRow(p.row)}},{key:"postExecute",value:function(p){this._modeling.addRow(p.row,p.index)}}]);return n}();Yu.$inject=["modeling"];var Zu=function(){function n(p,t){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");this._sheet=p;this._elementFactory=t}mB(n,[{key:"execute",
value:function(p){var t=this._sheet,x=this._elementFactory,A=t.getRoot(),z=p.col,y=p.index;"undefined"===typeof y&&(y=p.index=A.cols.length);p.newRoot=A;z.cells.length||A.rows.forEach(function(B,D){var H=x.create("cell",{row:B,col:z});z.cells[D]=H});t.addCol(z,y);return t.getRoot()}},{key:"revert",value:function(p){var t=this._sheet;t.removeCol(p.col);return t.getRoot()}}]);return n}();Zu.$inject=["sheet","elementFactory"];var $u=function(){function n(p,t){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");
this._sheet=p;this._elementFactory=t}nB(n,[{key:"execute",value:function(p){var t=this._sheet,x=p.col,A=p.oldRoot=x.root;if(-1===(p.oldIndex=A.cols.indexOf(x)))throw Error("col#".concat(x.id," not in sheet"));t.removeCol(x);return t.getRoot()}},{key:"revert",value:function(p){var t=this._sheet;t.addCol(p.col,p.oldIndex);return t.getRoot()}}]);return n}();$u.$inject=["sheet","elementFactory"];var av=function(){function n(p){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");
this._modeling=p}oB(n,[{key:"preExecute",value:function(p){this._modeling.removeCol(p.col)}},{key:"postExecute",value:function(p){this._modeling.addCol(p.col,p.index)}}]);return n}();av.$inject=["modeling"];var sF=function(){function n(){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");}pB(n,[{key:"execute",value:function(p){return p.cell}},{key:"revert",value:function(p){return p.cell}}]);return n}(),bv=function(){function n(p,t,x){var A=this;if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");
this._eventBus=p;this._elementFactory=t;this._commandStack=x;p.on("table.init",function(){sB(A.getHandlers(),x)})}rB(n,[{key:"getHandlers",value:function(){return n._getHandlers()}},{key:"_create",value:function(p,t){return t instanceof Se?t:this._elementFactory.create(p,t)}},{key:"addRow",value:function(p,t){var x=this._create("row",p);this._commandStack.execute("row.add",{row:x,index:t});return x}},{key:"removeRow",value:function(p){this._commandStack.execute("row.remove",{row:p})}},{key:"moveRow",
value:function(p,t){this._commandStack.execute("row.move",{row:p,index:t})}},{key:"addCol",value:function(p,t){var x=this._create("col",p);this._commandStack.execute("col.add",{col:x,index:t});return x}},{key:"removeCol",value:function(p){this._commandStack.execute("col.remove",{col:p})}},{key:"moveCol",value:function(p,t){this._commandStack.execute("col.move",{col:p,index:t})}},{key:"editCell",value:function(p,t){var x=qB({cell:p},t);this._commandStack.execute("cell.edit",x)}}],[{key:"_getHandlers",
value:function(){return{"row.add":Wu,"row.remove":Xu,"row.move":Yu,"col.add":Zu,"col.remove":$u,"col.move":av,"cell.edit":sF}}}]);return n}();bv.$inject=["eventBus","elementFactory","commandStack"];var cv=function(){function n(p,t,x){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");this._dmnFactory=p;this._moddle=t;this._modeling=x}tB(n,[{key:"execute",value:function(p){var t=p.element,x=p.allowedValues;P(t,"dmn:InputClause")?(t.inputValues?p.oldAllowedValues=t.inputValues.text:
null!==x&&(t.inputValues=this._dmnFactory.create("dmn:UnaryTests",{text:""})),null===x?t.inputValues&&delete t.inputValues:t.inputValues.text=x.join(",")):(t.outputValues&&t?p.oldAllowedValues=t.outputValues.text:null!==x&&(t.outputValues=this._dmnFactory.create("dmn:UnaryTests",{text:""})),null===x?t.outputValues&&delete t.outputValues:t.outputValues.text=x.join(","));return t}},{key:"revert",value:function(p){var t=p.element;p=p.oldAllowedValues;P(t,"dmn:InputClause")?p?(t.inputValues||(t.inputValues=
this._dmnFactory.create("dmn:UnaryTests",{text:""})),t.inputValues.text=p):delete t.inputValues:p?(t.outputValues||(t.outputValues=this._dmnFactory.create("dmn:UnaryTests",{text:""})),t.outputValues.text=p):delete t.outputValues;return t}}]);return n}();cv.$inject=["dmnFactory","moddle","modeling"];var Um=function(){function n(p,t){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");this._elementRegistry=p;this._moddle=t}uB(n,[{key:"execute",value:function(p){var t=p.element,
x=p.properties,A=ld(t);x=this.updateProperties(A,x);A=x.changed;p.oldProperties=x.oldProperties;return[].concat(mg(A),[t])}},{key:"revert",value:function(p){var t=p.element;p=p.oldProperties;var x=ld(t);p=this.updateProperties(x,p).changed;return[].concat(mg(p),[t])}},{key:"updateProperties",value:function(p,t){var x=this,A=this._moddle.ids;return qb(t,function(z,y,B){var D=p.get(B);if(void 0!==y&&gb(y)){if(void 0===D||!gb(D))throw Error("non-existing property <".concat(B,">: cannot update values"));
var H=x.updateProperties(D,y);y=H.changed;H=H.oldProperties;return{changed:[].concat(mg(z.changed),mg(y),[D]),oldProperties:ls({},z.oldProperties,hl({},B,H))}}"id"===B&&p.id!==y&&(A.unclaim(p.id),x._elementRegistry.updateId(p,y),A.claim(y,p));p.set(B,y);return{changed:z.changed,oldProperties:ls({},z.oldProperties,hl({},B,D))}},{changed:[],oldProperties:{}})}}]);return n}();Um.$inject=["elementRegistry","moddle"];var dv=function(){function n(p){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");
this._moddle=p}vB(n,[{key:"execute",value:function(p){var t=this._moddle.ids,x=p.id,A=p.element;p.claiming?t.claim(x,A):t.unclaim(x)}},{key:"revert",value:function(p){var t=this._moddle.ids,x=p.id,A=p.element;p.claiming?t.unclaim(x):t.claim(x,A)}}]);return n}();dv.$inject=["moddle"];var ev=function(n){function p(t,x,A,z){if(!(this instanceof p))throw new TypeError("Cannot call a class as a function");var y=Ie(p).call(this,t,x,A);if(!y||"object"!==il(y)&&"function"!==typeof y){if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
y=this}y._eventBus=t;y._elementFactory=x;y._commandStack=A;y._sheet=z;return y}xB(p,n);wB(p,[{key:"getHandlers",value:function(){return p._getHandlers()}},{key:"editDecisionTableName",value:function(t){t={element:this._sheet.getRoot().businessObject.$parent,properties:{name:t}};this._commandStack.execute("updateProperties",t)}},{key:"editDecisionTableId",value:function(t){t={element:this._sheet.getRoot().businessObject.$parent,properties:{id:t}};this._commandStack.execute("updateProperties",t)}},
{key:"editHitPolicy",value:function(t,x){var A={element:this._sheet.getRoot().businessObject,properties:{hitPolicy:t,aggregation:x}};this._commandStack.execute("updateProperties",A)}},{key:"updateProperties",value:function(t,x){this._commandStack.execute("updateProperties",{element:t,properties:x})}},{key:"editInputExpression",value:function(t,x){this._commandStack.execute("updateProperties",{element:t,properties:x})}},{key:"editOutputName",value:function(t,x){this._commandStack.execute("updateProperties",
{element:t,properties:{name:x}})}},{key:"editInputExpressionTypeRef",value:function(t,x){this._commandStack.execute("updateProperties",{element:t,properties:{typeRef:x}})}},{key:"editOutputTypeRef",value:function(t,x){this._commandStack.execute("updateProperties",{element:t,properties:{typeRef:x}})}},{key:"editCell",value:function(t,x){this._commandStack.execute("updateProperties",{element:t,properties:{text:x}})}},{key:"editAnnotation",value:function(t,x){this._commandStack.execute("updateProperties",
{element:t,properties:{description:x}})}},{key:"editAllowedValues",value:function(t,x){this._commandStack.execute("editAllowedValues",{element:t,allowedValues:x})}},{key:"editExpressionLanguage",value:function(t,x){this._commandStack.execute("updateProperties",{element:t,properties:{expressionLanguage:x}})}},{key:"claimId",value:function(t,x){this._commandStack.execute("id.updateClaim",{id:t,element:x,claiming:!0})}},{key:"unclaimId",value:function(t,x){this._commandStack.execute("id.updateClaim",
{id:t,element:x})}}],[{key:"_getHandlers",value:function(){return R({},jl(Ie(p),"_getHandlers",this).call(this),{editAllowedValues:cv,updateProperties:Um,"id.updateClaim":dv})}}]);return p}(bv);ev.$inject=["eventBus","elementFactory","commandStack","sheet"];var fv=function(n){function p(t,x,A){if(!(this instanceof p))throw new TypeError("Cannot call a class as a function");var z=zB(this,ml(p).call(this,t));z._ids=x.ids;z._modeling=A;z.preExecute(["row.add","col.add"],function(y){y=y.context;y=y.row||
y.col;z.claimId(y.businessObject);y.cells&&y.cells.forEach(function(B){return z.claimId(B.businessObject)})});return z}AB(p,n);yB(p,[{key:"claimId",value:function(t){var x=this;t.id&&!this._ids.assigned(t.id)&&this._modeling.claimId(t.id,t);t.$descriptor.properties.forEach(function(A){if(A=t[A.name])ja(A)&&A.forEach(function(z){return x.claimId(z)}),A.$type&&x.claimId(A)})}}]);return p}(Ua);fv.$inject=["eventBus","moddle","modeling"];var gv=function(n){function p(t,x){if(!(this instanceof p))throw new TypeError("Cannot call a class as a function");
var A=CB(this,pl(p).call(this,t));A._modeling=x;A.preExecute(["row.remove","col.remove"],function(z){z=z.context;z=z.row||z.col;A.unclaimId(z.businessObject);z.cells&&z.cells.forEach(function(y){return A.unclaimId(y.businessObject)})});return A}DB(p,n);BB(p,[{key:"unclaimId",value:function(t){var x=this;t.id&&this._modeling.unclaimId(t.id,t);t.$descriptor.properties.forEach(function(A){if(A=t[A.name])ja(A)&&A.forEach(function(z){return x.unclaimId(z)}),A.$type&&x.unclaimId(A)})}}]);return p}(Ua);
gv.$inject=["eventBus","modeling"];var tF={__init__:["dmnUpdater","idChangeBehavior","modeling"],__depends__:[{__init__:["idClaimBehavior","idUnclaimBehavior"],idClaimBehavior:["type",fv],idUnclaimBehavior:["type",gv]},Qm],dmnUpdater:["type",Tu],dmnFactory:["type",Uu],elementFactory:["type",Vu],idChangeBehavior:["type",xg],modeling:["type",ev]},vF=function(n){function p(t,x){rs(this,p);var A=us(this,ng(p).call(this,t,x));A.state={isFocussed:!1};A.changeCellValue=A.changeCellValue.bind(Je(A));A.onFocus=
A.onFocus.bind(Je(A));A.onBlur=A.onBlur.bind(Je(A));A.onElementsChanged=A.onElementsChanged.bind(Je(A));return A}vs(p,n);ts(p,[{key:"onElementsChanged",value:function(){this.forceUpdate()}},{key:"componentWillMount",value:function(){var t=this.context.injector,x=this.props.cell,A=this._changeSupport=this.context.changeSupport;this._modeling=t.get("modeling");A.onElementsChanged(x.id,this.onElementsChanged)}},{key:"componentWillUnmount",value:function(){this._changeSupport.offElementsChanged(this.props.cell.id,
this.onElementsChanged)}},{key:"changeCellValue",value:function(t){this._modeling.editCell(this.props.cell.businessObject,t)}},{key:"onFocus",value:function(){this.setState({isFocussed:!0})}},{key:"onBlur",value:function(){this.setState({isFocussed:!1})}},{key:"render",value:function(){var t=this.props,x=t.cell,A=t.rowIndex,z=t.row,y=t.col;t=t.colIndex;var B=this.state.isFocussed,D=P(x,"dmn:UnaryTests"),H=x.businessObject;return X(2,xe,{className:D?"input-cell":"output-cell",elementId:x.id,coords:"".concat(A,
":").concat(t),"data-row-id":z.id,"data-col-id":y.id,children:X(2,uF,{className:"cell-editor",placeholder:D?"-":"",ctrlForNewline:!0,onFocus:this.onFocus,onBlur:this.onBlur,isFocussed:B,onChange:this.changeCellValue,value:H.text,businessObject:H})})}}]);return p}(Z),uF=function(n){function p(t,x){rs(this,p);var A=us(this,ng(p).call(this,t,x));A._expressionLanguages=x.injector.get("expressionLanguages");A._translate=x.injector.get("translate");return A}vs(p,n);ts(p,[{key:"isDefaultExpressionLanguage",
value:function(t){var x=t.expressionLanguage;t=this.getDefaultExpressionLanguage(t).value;return!x||x===t}},{key:"getDescription",value:function(t){return t.description}},{key:"getExpressionLanguageLabel",value:function(t){var x=t.expressionLanguage;t=this.getDefaultExpressionLanguage(t);return this._expressionLanguages.getLabel(x)||t.label}},{key:"isScript",value:function(t){var x=this.getDefaultExpressionLanguage(t);return P(t,"dmn:UnaryTests")?-1!==t.text.indexOf("\n")?!0:t.expressionLanguage&&
t.expressionLanguage!==x:!1}},{key:"getDefaultExpressionLanguage",value:function(t){t=P(t,"dmn:UnaryTests")?"inputCell":"outputCell";return this._expressionLanguages.getDefault(t)}},{key:"render",value:function(){var t=this.props,x=t.businessObject;t=t.isFocussed;var A=this.getDescription(x),z=this.isDefaultExpressionLanguage(x),y=this.getExpressionLanguageLabel(x);x=this.isScript(x);return E(1,"div",this.getClassName(),[Sa(A)&&!t&&E(1,"div","description-indicator"),this.getEditor({className:x?"script-editor":
null}),!z&&!t&&E(1,"span","dms-badge dmn-expression-language",[E(1,"span","dms-badge-icon dmn-icon-file-code"),E(1,"span","dms-badge-label",y,0)],4,{title:this._translate("Expression Language = {expressionLanguageLabel}",{expressionLanguageLabel:y})})],0)}}]);return p}(Ic),hv=function t(p){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");p.onGetComponent("cell",1500,function(x){if("rule"===x.cellType)return vF})};hv.$inject=["components"];var wF={__depends__:[ed,$t],
__init__:["decisionRulesEditor"],decisionRulesEditor:["type",hv]},xF=function(p){function t(x,A){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");var z=FB(this,vl(t).call(this,x,A));z.state={top:0,left:0,isVisible:!1,isDisabled:!0};var y=A.injector,B=z._eventBus=y.get("eventBus"),D=y.get("simpleMode"),H=A.injector.get("elementRegistry"),L=A.injector.get("expressionLanguages");z._renderer=y.get("renderer");z._selection=A.injector.get("selection");z.updatePosition=z.updatePosition.bind(ul(z));
B.on("cellSelection.changed",function(J){if((J=H.get(J.elementId))&&D.canSimpleEdit(J)){z.setState({isVisible:!0,selection:J},z.updatePosition);var K=J.businessObject.expressionLanguage,N;(N=!K)||(N=Da(J.col)?L.getDefault("inputCell").value:vb(J.col)?L.getDefault("outputCell").value:void 0,N=K===N);z.setState({isVisible:!0,selection:J,isDisabled:!N},z.updatePosition)}else z.setState({isVisible:!1})});z.onClick=z.onClick.bind(ul(z));return z}GB(t,p);EB(t,[{key:"updatePosition",value:function(){var x=
this.state.selection;if(x&&this.node){var A=this._container=this._renderer.getContainer();x=Gd(x.id,A).getBoundingClientRect();var z=this.node.getBoundingClientRect(),y=A.getBoundingClientRect(),B=A.scrollLeft;A=A.scrollTop;var D={};D.left=x.left+x.width/2>y.width/2?window.scrollX-y.left+x.left-z.width+4+B+"px":window.scrollX-y.left+x.left+x.width-4+B+"px";D.top=x.top+x.height/2>y.height/2?window.scrollY-y.top+x.top-z.height+4+A+"px":window.scrollY-y.top+x.top-4+A+"px";R(this.node.style,D)}}},{key:"onClick",
value:function(){if(!this.state.isDisabled){var x=this._selection.get();x&&(this._eventBus.fire("simpleMode.open",{element:x,node:Gd(x.id,this._container)}),this.setState({isVisible:!1}))}}},{key:"render",value:function(){var x=this,A=this.state,z=A.isDisabled,y=A.isVisible,B=A.top;A=A.left;var D=["simple-mode-button","no-deselect"];z&&D.push("disabled");return y?E(1,"div",D.join(" "),E(1,"span","dmn-icon-edit"),2,{onClick:this.onClick,style:{top:B,left:A},title:z?"Editing not supported for set expression language":
"Edit"},null,function(H){return x.node=H}):null}}]);return t}(Z),iv=function(){function p(t,x,A,z,y){if(!(this instanceof p))throw new TypeError("Cannot call a class as a function");this._providers=[];t.onGetComponent("table.before",function(){return xF});z.on("simpleMode.open",function(B){var D=B.element,H=B.node.getBoundingClientRect();B=H.left;var L=H.top,J=H.width;H=H.height;var K=y.getContainer();x.open({x:B+K.parentNode.scrollLeft,y:L+K.parentNode.scrollTop,width:J,height:H},{contextMenuType:"simple-mode-edit",
element:D,offset:{x:4,y:4}})});z.on("cell.click",function(B){var D=B.event,H=B.node,L=B.id;D=D.altKey?!1:D.ctrlKey||D.metaKey;D&&((L=A.get(L))&&z.fire("simpleMode.open",{node:H,element:L}),B.preventDefault())})}HB(p,[{key:"registerProvider",value:function(t){this._providers.push(t)}},{key:"canSimpleEdit",value:function(t){return this._providers.reduce(function(x,A){return x||A(t)},!1)}}]);return p}();iv.$inject=["components","contextMenu","elementRegistry","eventBus","renderer"];var Ve={__depends__:[fd,
Cg,dd],__init__:["simpleMode"],simpleMode:["type",iv]},yF=function(p){function t(x,A){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");var z=yl(t).call(this,x,A);z=!z||"object"!==xl(z)&&"function"!==typeof z?zl(this):z;z._modeling=A.injector.get("modeling");var y=(y=z.props.context.element.businessObject.text)&&""!==y?"true"===y.trim()?"true":"false"===y.trim()?"false":void 0:"none";z.state={value:y||"none"};z.editCell=z.editCell.bind(zl(z));z.onChange=z.onChange.bind(zl(z));
return z}JB(t,p);IB(t,[{key:"editCell",value:function(x,A){this._modeling.editCell(x,A)}},{key:"onChange",value:function(x){this.editCell(this.props.context.element.businessObject,"none"===x?"":x);this.setState({value:x})}},{key:"render",value:function(){var x=this.state.value;return E(1,"div","simple-boolean-edit context-menu-container",[E(1,"h3","dms-heading",aa("Edit Boolean"),2),E(1,"h4","dms-heading",aa("Set Value"),2),X(2,fb,{noInput:!0,className:"dms-block",onChange:this.onChange,options:[{label:"-",
value:"none"},{label:"Yes",value:"true"},{label:"No",value:"false"}],value:x})],4)}}]);return t}(Z),jv=function A(t,x){if(!(this instanceof A))throw new TypeError("Cannot call a class as a function");x.registerProvider(function(z){return(Da(z.col)||vb(z.col))&&"boolean"===zs(z)});t.onGetComponent("context-menu",function(){var z=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(z.contextMenuType&&"simple-mode-edit"===z.contextMenuType&&z.element&&"boolean"===zs(z.element))return yF})};jv.$inject=
["components","simpleMode"];var zF={__depends__:[Ue,Ve],__init__:["simpleBooleanEdit"],simpleBooleanEdit:["type",jv]},KB=/^\d{4}(?:-\d\d){2}T(?:\d\d:){2}\d\d$/,LB=/^\[date and time\("(\d{4}(?:-\d\d){2}T(?:\d\d:){2}\d\d)"\)..date and time\("(\d{4}(?:-\d\d){2}T(?:\d\d:){2}\d\d)"/,MB=/^(<|>)\s*date and time\("(\d{4}(?:-\d\d){2}T(?:\d\d:){2}\d\d)"\)/,NB=/^date and time\("(\d{4}(?:-\d\d){2}T(?:\d\d:){2}\d\d)"\)$/,AF=function(t){function x(A,z){if(!(this instanceof x))throw new TypeError("Cannot call a class as a function");
var y=Dl(x).call(this,A,z);y=!y||"object"!==Cl(y)&&"function"!==typeof y?Gc(this):y;y._modeling=z.injector.get("modeling");var B=Ke(y.props.context.element.businessObject.text);y.state=B?{type:B.type,dates:B.date?[B.date,""]:B.dates?B.dates:["",""]}:{type:"exact",dates:["",""]};B=z.injector.get("debounceInput");y.debouncedEditCell=B(y.editCell.bind(Gc(y)));y.editCell=y.editCell.bind(Gc(y));y.onTypeChange=y.onTypeChange.bind(Gc(y));y.onSetStartDateTodayClick=y.onSetStartDateTodayClick.bind(Gc(y));
y.onSetEndDateTodayClick=y.onSetEndDateTodayClick.bind(Gc(y));y.onStartDateInput=y.onStartDateInput.bind(Gc(y));y.onEndDateInput=y.onEndDateInput.bind(Gc(y));return y}PB(x,t);OB(x,[{key:"editCell",value:function(A,z){this._modeling.editCell(A,z)}},{key:"onTypeChange",value:function(A){var z=this.props.context.element,y=this.state.dates;this.setState({type:A});Ke(Fc(A,y))&&this.editCell(z.businessObject,Fc(A,y))}},{key:"onSetStartDateTodayClick",value:function(){var A=this.props.context.element,z=
this.state,y=z.dates;z=z.type;var B=Kd();this.setState({dates:[B,y[1]]});Ke(Fc(z,[B,y[1]]))&&this.editCell(A.businessObject,Fc(z,[B,y[1]]))}},{key:"onSetEndDateTodayClick",value:function(){var A=this.props.context.element,z=this.state,y=z.dates;z=z.type;var B=Kd();this.setState({dates:[y[0],B]});Ke(Fc(z,[y[0],B]))&&this.editCell(A.businessObject,Fc(z,[y[0],B]))}},{key:"onStartDateInput",value:function(A){var z=A.value;if(A.isValid){A=this.props.context.element;var y=this.state,B=y.dates;y=y.type;
this.setState({dates:[z,B[1]]});this.debouncedEditCell(A.businessObject,Fc(y,[z,B[1]]))}}},{key:"onEndDateInput",value:function(A){var z=A.value;if(A.isValid){A=this.props.context.element;var y=this.state,B=y.dates;y=y.type;this.setState({dates:[B[0],z]});this.debouncedEditCell(A.businessObject,Fc(y,[B[0],z]))}}},{key:"render",value:function(){var A=this.state,z=A.dates;A=A.type;return E(1,"div","context-menu-container simple-date-edit",[E(1,"h3","dms-heading",aa("Edit Date"),2),E(1,"div","dms-fill-row",
X(2,fb,{noInput:!0,onChange:this.onTypeChange,options:[{label:"Exactly",value:"exact"},{label:"Before",value:"before"},{label:"After",value:"after"},{label:"Between",value:"between"}],value:A}),2),E(1,"h4","dms-heading","between"===A?"Edit Start Date":"Set Date",0),E(1,"div",null,[X(2,Te,{className:"start-date-input dms-block",onInput:this.onStartDateInput,placeholder:"e.g. ".concat(Kd()),validate:Bl,value:z[0]}),E(1,"p","dms-hint",[E(1,"button","use-today",aa("Use today"),2,{type:"button",onClick:this.onSetStartDateTodayClick}),
aa(".")],4)],4),"between"===A&&E(1,"h4","dms-heading",aa("Edit End Date"),2),"between"===A&&E(1,"div",null,[X(2,Te,{className:"end-date-input dms-block",onInput:this.onEndDateInput,placeholder:"e.g. ".concat(Kd()),validate:Bl,value:z[1]}),E(1,"p","dms-hint",[E(1,"button","use-today",aa("Use today"),2,{type:"button",onClick:this.onSetEndDateTodayClick}),aa(".")],4)],4)],0)}}]);return x}(Z),BF=function(t){function x(A,z){if(!(this instanceof x))throw new TypeError("Cannot call a class as a function");
var y=Gl(x).call(this,A,z);y=!y||"object"!==Fl(y)&&"function"!==typeof y?Le(this):y;y._modeling=z.injector.get("modeling");var B=Ke(y.props.context.element.businessObject.text);y.state={date:B?B.date:""};B=z.injector.get("debounceInput");y.debouncedEditCell=B(y.editCell.bind(Le(y)));y.editCell=y.editCell.bind(Le(y));y.onClick=y.onClick.bind(Le(y));y.onInput=y.onInput.bind(Le(y));return y}RB(x,t);QB(x,[{key:"editCell",value:function(A,z){this._modeling.editCell(A,z)}},{key:"onClick",value:function(){var A=
this.props.context.element,z=Kd();this.setState({date:z});this.editCell(A.businessObject,'date and time("'.concat(z,'")'))}},{key:"onInput",value:function(A){var z=A.value;A.isValid&&(A=this.props.context.element,this.setState({date:z}),this.debouncedEditCell(A.businessObject,'date and time("'.concat(z,'")')))}},{key:"render",value:function(){var A=this.state.date;return E(1,"div","context-menu-container simple-date-edit",[E(1,"h3","dms-heading",aa("Edit Date"),2),E(1,"h4","dms-heading",aa("Set Date"),
2),E(1,"div",null,[X(2,Te,{onInput:this.onInput,placeholder:"e.g. ".concat(Kd()),validate:Bl,value:A,className:"dms-block"}),E(1,"p","dms-hint",[aa("Set date "),E(1,"button","use-today",aa("to today"),2,{type:"button",onClick:this.onClick}),aa(".")],4)],4)],4)}}]);return x}(Z),kv=function z(x,A){if(!(this instanceof z))throw new TypeError("Cannot call a class as a function");A.registerProvider(function(y){var B=Cs(y);return(Da(y.col)||vb(y.col))&&"date"===B});x.onGetComponent("context-menu",function(){var y=
0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(y.contextMenuType&&"simple-mode-edit"===y.contextMenuType&&y.element&&"date"===Cs(y.element)){if(Da(y.element.col))return AF;if(vb(y.element.col))return BF}})};kv.$inject=["components","simpleMode"];var CF={__depends__:[Ue,Ve],__init__:["simpleDateEdit"],simpleDateEdit:["type",kv]},TB=/^(-?(?:[0-9]|\.[0-9])+)$|^((?:<|>|=){0,2})\s*(-?(?:[0-9]|\.[0-9])+)$/,UB=/^(\[|\]){1}(-?(?:[0-9]|\.[0-9])+){1,}\.\.(-?(?:[0-9]|\.[0-9])+){1,}(\[|\]){1}$/,
Il={equals:"=",less:"<",lessEquals:"<=",greater:">",greaterEquals:">="},DF=function(x){function A(z,y){if(!(this instanceof A))throw new TypeError("Cannot call a class as a function");var B=Ll(A).call(this,z,y);B=!B||"object"!==Kl(B)&&"function"!==typeof B?Ub(this):B;B._modeling=y.injector.get("modeling");var D=Ds(B.props.context.element.businessObject.text);B.state=D?{type:D.type,comparisonOperator:D.operator||"equals",comparisonValue:D.value||0,rangeStartValue:D.values?D.values[0]:0,rangeEndValue:D.values?
D.values[1]:0,rangeStartType:D.start||"include",rangeEndType:D.end||"include"}:{type:"comparison",comparisonOperator:"equals",comparisonValue:0,rangeStartValue:0,rangeEndValue:0,rangeStartType:"include",rangeEndType:"include"};D=y.injector.get("debounceInput");B.debouncedEditCell=D(B.editCell.bind(Ub(B)));B.editCell=B.editCell.bind(Ub(B));B.onComparisonOperatorChange=B.onComparisonOperatorChange.bind(Ub(B));B.onComparisonValueChange=B.onComparisonValueChange.bind(Ub(B));B.onTypeChange=B.onTypeChange.bind(Ub(B));
B.onRangeStartTypeChange=B.onRangeStartTypeChange.bind(Ub(B));B.onRangeStartValueChange=B.onRangeStartValueChange.bind(Ub(B));B.onRangeEndTypeChange=B.onRangeEndTypeChange.bind(Ub(B));B.onRangeEndValueChange=B.onRangeEndValueChange.bind(Ub(B));return B}WB(A,x);VB(A,[{key:"editCell",value:function(z,y){this._modeling.editCell(z,y)}},{key:"onTypeChange",value:function(z){var y=this.props.context.element,B=this.state,D=B.comparisonOperator,H=B.comparisonValue,L=B.rangeStartValue,J=B.rangeEndValue,K=
B.rangeStartType;B=B.rangeEndType;"comparison"===z?this.editCell(y.businessObject,Jl(D,H)):this.editCell(y.businessObject,Me(L,J,K,B));this.setState({type:z})}},{key:"onComparisonOperatorChange",value:function(z){var y=this.props.context.element,B=this.state,D=B.comparisonValue;"comparison"===B.type&&(this.editCell(y.businessObject,Jl(z,D)),this.setState({comparisonOperator:z}))}},{key:"onComparisonValueChange",value:function(z){var y=this.props.context.element,B=this.state,D=B.comparisonOperator;
"comparison"===B.type&&(this.debouncedEditCell(y.businessObject,Jl(D,z)),this.setState({comparisonValue:z}))}},{key:"onRangeStartTypeChange",value:function(z){var y=this.props.context.element,B=this.state,D=B.rangeStartValue,H=B.rangeEndValue,L=B.rangeEndType;"range"===B.type&&(this.editCell(y.businessObject,Me(D,H,z,L)),this.setState({rangeStartType:z}))}},{key:"onRangeStartValueChange",value:function(z){var y=this.props.context.element,B=this.state,D=B.rangeEndValue,H=B.rangeStartType,L=B.rangeEndType;
"range"===B.type&&(this.editCell(y.businessObject,Me(z,D,H,L)),this.setState({rangeStartValue:z}))}},{key:"onRangeEndTypeChange",value:function(z){var y=this.props.context.element,B=this.state,D=B.rangeStartValue,H=B.rangeEndValue,L=B.rangeStartType;"range"===B.type&&(this.editCell(y.businessObject,Me(D,H,L,z)),this.setState({rangeEndType:z}))}},{key:"onRangeEndValueChange",value:function(z){var y=this.props.context.element,B=this.state,D=B.rangeStartValue,H=B.rangeStartType,L=B.rangeEndType;"range"===
B.type&&(this.editCell(y.businessObject,Me(D,z,H,L)),this.setState({rangeEndValue:z}))}},{key:"renderComparison",value:function(z,y){return E(1,"div","comparison",[E(1,"h4","dms-heading",aa("Value"),2),E(1,"div","dms-fill-row",[X(2,fb,{noInput:!0,onChange:this.onComparisonOperatorChange,options:[{label:"Equals",value:"equals"},{label:"Less",value:"less"},{label:"Less or equals",value:"lessEquals"},{label:"Greater",value:"greater"},{label:"Greater or equals",value:"greaterEquals"}],value:z}),aa("\u00a0"),
X(2,Vb,{className:"comparison-number-input",onInput:this.onComparisonValueChange,type:"number",value:y})],4)],4)}},{key:"renderRange",value:function(z,y,B,D){var H=[{label:"Include",value:"include"},{label:"Exclude",value:"exclude"}];return E(1,"div","range",[E(1,"h4","dms-heading",aa("Start Value"),2),E(1,"div","dms-fill-row",[X(2,fb,{noInput:!0,onChange:this.onRangeStartTypeChange,options:H,value:B}),aa("\u00a0"),X(2,Vb,{className:"range-start-number-input",onInput:this.onRangeStartValueChange,
type:"number",value:z})],4),E(1,"h4","dms-heading",aa("End Value"),2),E(1,"div","dms-fill-row",[X(2,fb,{noInput:!0,onChange:this.onRangeEndTypeChange,options:H,value:D}),aa("\u00a0"),X(2,Vb,{className:"range-end-number-input",onInput:this.onRangeEndValueChange,type:"number",value:y})],4)],4)}},{key:"render",value:function(){var z=this.state,y=z.type,B=z.comparisonOperator,D=z.comparisonValue,H=z.rangeStartValue,L=z.rangeEndValue,J=z.rangeStartType;z=z.rangeEndType;return E(1,"div","context-menu-container simple-number-edit",
[E(1,"h3","dms-heading",aa("Edit Number"),2),E(1,"div","dms-fill-row",X(2,fb,{noInput:!0,onChange:this.onTypeChange,options:[{label:"Comparison",value:"comparison"},{label:"Range",value:"range"}],value:y}),2),"comparison"===y&&this.renderComparison(B,D),"range"===y&&this.renderRange(H,L,J,z)],0)}}]);return A}(Z),EF=function(x){function A(z,y){if(!(this instanceof A))throw new TypeError("Cannot call a class as a function");var B=Ol(A).call(this,z,y);B=!B||"object"!==Nl(B)&&"function"!==typeof B?og(this):
B;B._modeling=y.injector.get("modeling");var D=Ds(B.props.context.element.businessObject.text);B.state=D?{value:D.value}:{value:""};D=y.injector.get("debounceInput");B.debouncedEditCell=D(B.editCell.bind(og(B)));B.editCell=B.editCell.bind(og(B));B.onInput=B.onInput.bind(og(B));return B}YB(A,x);XB(A,[{key:"editCell",value:function(z,y){this._modeling.editCell(z,y)}},{key:"onInput",value:function(z){this.debouncedEditCell(this.props.context.element.businessObject,z);this.setState({value:z})}},{key:"render",
value:function(){var z=this.state.value;return E(1,"div","context-menu-container simple-number-edit",[E(1,"h3","dms-heading",aa("Edit Number"),2),E(1,"h4","dms-heading",aa("Set Value"),2),X(2,Vb,{onInput:this.onInput,type:"number",value:z})],4)}}]);return A}(Z),lv=function y(A,z){if(!(this instanceof y))throw new TypeError("Cannot call a class as a function");z.registerProvider(function(B){var D=Gs(B);return(Da(B.col)||vb(B.col))&&("integer"===D||"long"===D||"double"===D)});A.onGetComponent("context-menu",
function(){var B=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(B.contextMenuType&&"simple-mode-edit"===B.contextMenuType&&B.element){var D=Gs(B.element);if("integer"===D||"long"===D||"double"===D){if(Da(B.element.col))return DF;if(vb(B.element.col))return EF}}})};lv.$inject=["components","simpleMode"];var FF={__depends__:[Ue,Ve],__init__:["simpleNumberEdit"],simpleNumberEdit:["type",lv]},GF=function(A){function z(y,B){if(!(this instanceof z))throw new TypeError("Cannot call a class as a function");
var D=aC(this,Rl(z).call(this,y,B));D._translate=B.injector.get("translate");D._modeling=B.injector.get("modeling");var H=pg(y.context.element.businessObject.text);H||(H={values:[],type:"disjunction"});var L=ZB(y.context.element.col.businessObject),J=H.values.filter(function(Q){return-1===L.indexOf(Q)}),K=Da(y.context.element.col),N=L.map(function(Q){return{value:Q,isChecked:-1!==H.values.indexOf(Q),isRemovable:!1,group:"Predefined Values"}});K&&(N=N.concat(J.map(function(Q){return{value:Q,isChecked:!0,
isRemovable:!0,group:"Custom Values"}})));J="";!K&&H.values.length&&-1===L.indexOf(H.values[0])&&(J=H.values[0]);D.state={items:N,unaryTestsType:H.type,inputValue:J,isOutputValueInputChecked:""!==J};K=B.injector.get("debounceInput");D.debouncedEditCell=K(D.editCell.bind(ec(D)));D.editCell=D.editCell.bind(ec(D));D.addUnaryTestsListItem=D.addUnaryTestsListItem.bind(ec(D));D.onInput=D.onInput.bind(ec(D));D.onKeyDown=D.onKeyDown.bind(ec(D));D.onOutputValueInputClick=D.onOutputValueInputClick.bind(ec(D));
D.onUnaryTestsListChanged=D.onUnaryTestsListChanged.bind(ec(D));D.onUnaryTestsTypeChange=D.onUnaryTestsTypeChange.bind(ec(D));return D}bC(z,A);$B(z,[{key:"editCell",value:function(y,B){this._modeling.editCell(y,B)}},{key:"onUnaryTestsTypeChange",value:function(y){var B=Tl(this.state.items),D=this.props.context.element;"disjunction"===y?(this.editCell(D.businessObject,B.join(",")),this.setState({unaryTestsType:"disjunction"})):(this.editCell(D.businessObject,"not(".concat(B.join(","),")")),this.setState({unaryTestsType:"negation"}))}},
{key:"onUnaryTestsListChanged",value:function(y){var B=Tl(y),D=this.props.context.element;"disjunction"===this.state.unaryTestsType?this.editCell(D.businessObject,B.join(",")):this.editCell(D.businessObject,"not(".concat(B.join(","),")"));this.setState({items:y,isOutputValueInputChecked:!1})}},{key:"onOutputValueInputClick",value:function(){var y=this.props.context.element,B=this.state,D=B.items;!(B=pg(B.inputValue))||1<B.values.length||(this.editCell(y.businessObject,"".concat(B.values.join(""))),
this.setState({items:D.map(function(H){H.isChecked=!1;return H}),isOutputValueInputChecked:!0}))}},{key:"onInput",value:function(y){var B=y.isValid;y=y.value;var D=this.state.isOutputValueInputChecked;this.setState({inputValue:y});var H=this.props.context.element;!Da(H)&&B&&D&&this.debouncedEditCell(H.businessObject,y)}},{key:"onKeyDown",value:function(y){var B=y.isValid;y=y.event;if(13===y.keyCode){var D=Da(this.props.context.element.col);if(D||!B)y.stopPropagation(),y.preventDefault();if(B)if(D)this.addUnaryTestsListItem();
else this.onOutputValueInputClick()}}},{key:"addUnaryTestsListItem",value:function(){var y=this.state,B=y.items,D=y.unaryTestsType;if(y=pg(y.inputValue)){var H=this.props.context.element,L=Tl(B);L=[].concat(L,y.values);"disjunction"===D?this.editCell(H.businessObject,L.join(",")):this.editCell(H.businessObject,"not(".concat(L.join(","),")"));B=B.concat(y.values.map(function(J){return{value:J,isChecked:!0,isRemovable:!0,group:"Custom Values"}}));this.setState({items:B,inputValue:""})}}},{key:"render",
value:function(){var y=this,B=this.state,D=B.inputValue,H=B.isOutputValueInputChecked,L=B.items,J=B.unaryTestsType;B=[{label:"Match one",value:"disjunction"},{label:"Match none",value:"negation"}];var K=Da(this.props.context.element.col);J="negation"===J;var N=!K&&0<L.length;return E(1,"div","simple-string-edit context-menu-container",[E(1,"h3","dms-heading",this._translate("Edit String"),0),K&&E(1,"p",null,X(2,fb,{noInput:!0,onChange:this.onUnaryTestsTypeChange,options:B,value:J?"negation":"disjunction"},
null,function(Q){return y.selectNode=Q}),2),X(2,Ju,{onChange:this.onUnaryTestsListChanged,items:L,type:K?"checkbox":"radio"}),K?E(1,"h4","dms-heading",this._translate("Add Values"),0):E(1,"h4","dms-heading",this._translate("Set Value"),0),E(1,"div","dms-fill-row",[N&&E(64,"input","cursor-pointer",null,1,{checked:H,onClick:this.onOutputValueInputClick,type:"radio",style:{marginRight:"8px"}}),X(2,Te,{className:"dms-block",onKeyDown:this.onKeyDown,onInput:this.onInput,placeholder:K?'"value", "value", ...':
'"value"',type:"text",validate:function(Q){if(!pg(Q))return y._translate("Strings must be in double quotes.")},value:D})],0)],0)}}]);return z}(Z),mv=function B(z,y){if(!(this instanceof B))throw new TypeError("Cannot call a class as a function");y.registerProvider(function(D){return(Da(D.col)||vb(D.col))&&"string"===Is(D)});z.onGetComponent("context-menu",function(){var D=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(D.contextMenuType&&"simple-mode-edit"===D.contextMenuType&&D.element&&
"string"===Is(D.element))return GF})};mv.$inject=["components","simpleMode"];var HF={__depends__:[Ue,Ve],__init__:["simpleStringEdit"],simpleStringEdit:["type",mv]},IF=function(z){function y(){if(!(this instanceof y))throw new TypeError("Cannot call a class as a function");var B=Vl(y).apply(this,arguments);if(!B||"object"!==Ul(B)&&"function"!==typeof B){if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");B=this}return B}dC(y,z);cC(y,[{key:"getModules",
value:function(){return[].concat(Js(cu._getModules()),Js(y._getModules()))}}],[{key:"_getModules",value:function(){return[NE,RE,Cg,fd,ou,TE,UE,WE,Pd,Lu,hF,kF,lF,dd,Ue,Lu,oF,ru,rF,Sm,tF,wF,Bg,Ve,zF,CF,FF,HF]}}]);return y}(cu),nv=function(){function z(y){var B=this;if(!(this instanceof z))throw new TypeError("Cannot call a class as a function");this._listeners={};y.on("elements.changed",function(D){B.elementsChanged(D.elements)});y.on("element.updateId",function(D){B.updateId(D.element.id,D.newId)})}
eC(z,[{key:"elementsChanged",value:function(y){for(var B={},D=y.length,H=0;H<D;H++){var L=y[H].id;if(B[L])break;B[L]=!0;var J=this._listeners[L]&&this._listeners[L].length;if(J)for(var K=0;K<J;K++)this._listeners[L][K]&&this._listeners[L][K]()}}},{key:"onElementsChanged",value:function(y,B){this._listeners[y]||(this._listeners[y]=[]);this._listeners[y][this._listeners[y].length]=B}},{key:"offElementsChanged",value:function(y,B){if(this._listeners[y])if(B){var D=this._listeners[y].indexOf(B);-1!==
D&&this._listeners[y].splice(D,1)}else this._listeners[y].length=0}},{key:"updateId",value:function(y,B){this._listeners[y]&&(this._listeners[B]=this._listeners[y],delete this._listeners[y])}}]);return z}();nv.$inject=["eventBus"];var JF=function(){function z(){if(!(this instanceof z))throw new TypeError("Cannot call a class as a function");this._listeners={}}fC(z,[{key:"getComponent",value:function(y,B){var D=this._listeners[y];if(D){for(var H,L=0;L<D.length&&!(H=D[L].callback(B));L++);return H}}},
{key:"getComponents",value:function(y,B){var D=this._listeners[y];if(D){for(var H=[],L=0;L<D.length;L++){var J=D[L].callback(B);J&&H.push(J)}if(H.length)return H}}},{key:"onGetComponent",value:function(y,B,D){Na(B)&&(D=B,B=1E3);if(!ua(B))throw Error("priority must be a number");y=this._getListeners(y);var H,L={priority:B,callback:D};for(H=0;D=y[H];H++)if(D.priority<B){y.splice(H,0,L);return}y.push(L)}},{key:"offGetComponent",value:function(y,B){var D=this._getListeners(y),H,L;if(B)for(L=D.length-
1;H=D[L];L--)H=H.callback,H===B&&D.splice(L,1);else D.length=0}},{key:"_getListeners",value:function(y){var B=this._listeners[y];B||(this._listeners[y]=B=[]);return B}}]);return z}(),KF=function(z){function y(B){if(!(this instanceof y))throw new TypeError("Cannot call a class as a function");var D=Yl(y).call(this,B);if(!D||"object"!==Xl(D)&&"function"!==typeof D){if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");D=this}B=D._injector=B.injector;
D._changeSupport=B.get("changeSupport");D._components=B.get("components");D._renderer=B.get("renderer");return D}hC(y,z);gC(y,[{key:"getChildContext",value:function(){return{changeSupport:this._changeSupport,components:this._components,renderer:this._renderer,injector:this._injector}}},{key:"render",value:function(){var B=this._components.getComponents("viewer");return E(1,"div","viewer-container",B&&B.map(function(D,H){return X(2,D,null,H)}),0)}}]);return y}(Z),ov=function(){function z(y,B,D,H,L){if(!(this instanceof
z))throw new TypeError("Cannot call a class as a function");var J=D.container;this._container=J;H.on("renderer.mount",function(){Qf(X(2,KF,{injector:L}),J)});H.on("renderer.unmount",function(){Qf(null,J)})}iC(z,[{key:"getContainer",value:function(){return this._container}}]);return z}();ov.$inject=["changeSupport","components","config.renderer","eventBus","injector"];var LF={__init__:["changeSupport","components","renderer"],changeSupport:["type",nv],components:["type",JF],eventBus:["type",Ta],renderer:["type",
ov]},MF=function(){function z(){var y=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(!(this instanceof z))throw new TypeError("Cannot call a class as a function");var B=y.injector;B||(y=this._init(y),y=[{config:["value",y.config]},LF].concat(y.modules||[]),B=kC(y));this.get=B.get;this.invoke=B.invoke;this.get("eventBus").fire("viewer.init")}jC(z,[{key:"_init",value:function(y){var B=y.modules;var D=["modules"];if(null==y)y={};else{if(null==y)var H={};else{H={};var L=Object.keys(y),J;
for(J=0;J<L.length;J++){var K=L[J];0<=D.indexOf(K)||(H[K]=y[K])}}if(Object.getOwnPropertySymbols)for(J=Object.getOwnPropertySymbols(y),K=0;K<J.length;K++)L=J[K],0<=D.indexOf(L)||Object.prototype.propertyIsEnumerable.call(y,L)&&(H[L]=y[L]);y=H}return{modules:B,config:y}}},{key:"destroy",value:function(){this.get("eventBus").fire("viewer.destroy")}},{key:"clear",value:function(){this.get("eventBus").fire("viewer.clear")}}]);return z}(),pv=function(){function z(y,B){if(!(this instanceof z))throw new TypeError("Cannot call a class as a function");
this._eventBus=B;this._viewer=y}lC(z,[{key:"getDecision",value:function(){return this._viewer.getDecision()}},{key:"updateId",value:function(y,B){var D=this.getDecision();if(y!==D)throw Error("element !== decision");this._eventBus.fire("element.updateId",{element:y,newId:B});y.id=B}}]);return z}();pv.$inject=["viewer","eventBus"];var NF={__init__:["elementRegistry"],elementRegistry:["type",pv]},OF=function(z){function y(B,D){if(!(this instanceof y))throw new TypeError("Cannot call a class as a function");
var H=am(y).call(this,B,D);if(!H||"object"!==$l(H)&&"function"!==typeof H){if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");H=this}H._viewer=D.injector.get("viewer");return H}nC(y,z);mC(y,[{key:"render",value:function(){var B=this._viewer.getDecision(),D=B.id;return E(1,"div","decision-properties",[E(1,"h3","decision-name",B.name,0),E(1,"h5","decision-id",D,0)],4)}}]);return y}(Z),qv=function B(y){if(!(this instanceof B))throw new TypeError("Cannot call a class as a function");
y.onGetComponent("viewer",2E3,function(){return OF})};qv.$inject=["components"];var PF={__init__:["decisionProperties"],decisionProperties:["type",qv]},QF=function(y){function B(D,H){if(!(this instanceof B))throw new TypeError("Cannot call a class as a function");var L=dm(B).call(this,D,H);if(!L||"object"!==cm(L)&&"function"!==typeof L){if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");L=this}L._viewer=H.injector.get("viewer");return L}pC(B,y);
oC(B,[{key:"render",value:function(){var D=this._viewer.getDecision(),H=D.literalExpression;D=D.variable;return E(1,"div","literal-expression-properties",E(1,"table",null,[E(1,"tr",null,[E(1,"td",null,aa("Variable Name:"),2),E(1,"td",null,E(1,"span",null,D.name||"-",0),2)],4),E(1,"tr",null,[E(1,"td",null,aa("Variable Type:"),2),E(1,"td",null,E(1,"span",null,D.typeRef||"-",0),2)],4),E(1,"tr",null,[E(1,"td",null,aa("Expression Language:"),2),E(1,"td",null,E(1,"span",null,H.expressionLanguage||"-",0),
2)],4)],4),2)}}]);return B}(Z),rv=function D(B){if(!(this instanceof D))throw new TypeError("Cannot call a class as a function");B.onGetComponent("viewer",500,function(){return QF})};rv.$inject=["components"];var RF={__depends__:[dd],__init__:["literalExpressionProperties"],literalExpressionProperties:["type",rv]},SF=function(B){function D(H,L){if(!(this instanceof D))throw new TypeError("Cannot call a class as a function");var J=rC(this,gm(D).call(this,H,L));tC(Us(J),"onClick",function(){J._eventBus.fire("poweredBy.show")});
J._eventBus=L.injector.get("eventBus");return J}sC(D,B);qC(D,[{key:"render",value:function(){var H=this;return E(1,"div","powered-by-logo",E(1,"img","logo",null,1,{src:"data:image/png;base64,".concat("iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAMAAADypuvZAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAADBQTFRFiMte9PrwldFwfcZPqtqN0+zEyOe1XLgjvuKncsJAZ70y6fXh3vDT////UrQV////G2zN+AAAABB0Uk5T////////////////////AOAjXRkAAAHDSURBVHjavJZJkoUgDEBJmAX8979tM8u3E6x20VlYJfFFMoL4vBDxATxZcakIOJTWSmxvKWVIkJ8jHvlRv1F2LFrVISCZI+tCtQx+XfewgVTfyY3plPiQEAzI3zWy+kR6NBhFBYeBuscJLOUuA2WVLpCjVIaFzrNQZArxAZKUQm6gsj37L9Cb7dnIBUKxENaaMJQqMpDXvSL+ktxdGRm2IsKgJGGPg7atwUG5CcFUEuSv+CwQqizTrvDTNXdMU2bMiDWZd8d7QIySWVRsb2vBBioxOFt4OinPBapL+neAb5KL5IJ8szOza2/DYoipUCx+CjO0Bpsv0V6mktNZ+k8rlABlWG0FrOpKYVo8DT3dBeLEjUBAj7moDogVii7nSS9QzZnFcOVBp1g2PyBQ3Vr5aIapN91VJy33HTJLC1iX2FY6F8gRdaAeIEfVONgtFCzZTmoLEdOjBDfsIOA6128gw3eu1shAajdZNAORxuQDJN5A5PbEG6gNIu24QJD5iNyRMZIr6bsHbCtCU/OaOaSvgkUyDMdDa1BXGf5HJ1To+/Ym6mCKT02Y+/Sa126ZKyd3jxhzpc1r8zVL6YM1Qy/kR4ABAFJ6iQUnivhAAAAAAElFTkSuQmCC")}),
2,{onClick:this.onClick,title:"Powered by bpmn.io"},null,function(L){return H.node=L})}}]);return D}(Z),TF=function(B){function D(H){if(!(this instanceof D))throw new TypeError("Cannot call a class as a function");H=jm(D).call(this,H);H=!H||"object"!==im(H)&&"function"!==typeof H?km(this):H;H.state={show:!1};H.onClick=H.onClick.bind(km(H));H.onShow=H.onShow.bind(km(H));return H}vC(D,B);uC(D,[{key:"onClick",value:function(){this.setState({show:!1})}},{key:"onShow",value:function(){this.setState({show:!0})}},
{key:"componentWillMount",value:function(){(this._eventBus=this.context.injector.get("eventBus")).on("poweredBy.show",this.onShow)}},{key:"componentWillUnmount",value:function(){this._eventBus.off("poweredBy.show",this.onShow)}},{key:"render",value:function(){return this.state.show&&E(1,"div","powered-by-overlay",E(1,"div","powered-by-overlay-content",[E(1,"div",null,E(1,"img","logo",null,1,{src:"data:image/png;base64,".concat("iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAMAAADypuvZAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAADBQTFRFiMte9PrwldFwfcZPqtqN0+zEyOe1XLgjvuKncsJAZ70y6fXh3vDT////UrQV////G2zN+AAAABB0Uk5T////////////////////AOAjXRkAAAHDSURBVHjavJZJkoUgDEBJmAX8979tM8u3E6x20VlYJfFFMoL4vBDxATxZcakIOJTWSmxvKWVIkJ8jHvlRv1F2LFrVISCZI+tCtQx+XfewgVTfyY3plPiQEAzI3zWy+kR6NBhFBYeBuscJLOUuA2WVLpCjVIaFzrNQZArxAZKUQm6gsj37L9Cb7dnIBUKxENaaMJQqMpDXvSL+ktxdGRm2IsKgJGGPg7atwUG5CcFUEuSv+CwQqizTrvDTNXdMU2bMiDWZd8d7QIySWVRsb2vBBioxOFt4OinPBapL+neAb5KL5IJ8szOza2/DYoipUCx+CjO0Bpsv0V6mktNZ+k8rlABlWG0FrOpKYVo8DT3dBeLEjUBAj7moDogVii7nSS9QzZnFcOVBp1g2PyBQ3Vr5aIapN91VJy33HTJLC1iX2FY6F8gRdaAeIEfVONgtFCzZTmoLEdOjBDfsIOA6128gw3eu1shAajdZNAORxuQDJN5A5PbEG6gNIu24QJD5iNyRMZIr6bsHbCtCU/OaOaSvgkUyDMdDa1BXGf5HJ1To+/Ym6mCKT02Y+/Sa126ZKyd3jxhzpc1r8zVL6YM1Qy/kR4ABAFJ6iQUnivhAAAAAAElFTkSuQmCC")}),
2),E(1,"div",null,[aa("Web-based tooling for BPMN, DMN and CMMN diagrams powered by "),E(1,"a",null,aa("bpmn.io"),2,{href:"http://bpmn.io",target:"_blank"}),aa(".")],4)],4,{onClick:function(H){return H.stopPropagation()}}),2,{onClick:this.onClick})}}]);return D}(Z),sv=function L(D,H){if(!(this instanceof L))throw new TypeError("Cannot call a class as a function");D.onGetComponent("viewer",2E3,function(){return SF});D.onGetComponent("viewer",function(){return TF})};sv.$inject=["components","eventBus"];
var UF={__init__:["poweredBy"],poweredBy:["type",sv]},VF=function(D){function H(L,J){if(!(this instanceof H))throw new TypeError("Cannot call a class as a function");var K=nm(H).call(this,L,J);if(!K||"object"!==mm(K)&&"function"!==typeof K){if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");K=this}K._viewer=J.injector.get("viewer");return K}xC(H,D);wC(H,[{key:"render",value:function(){var L=this._viewer.getDecision().literalExpression.text;return E(1,
"div","textarea",E(1,"div","content",L,0),2)}}]);return H}(Z),tv=function L(H){if(!(this instanceof L))throw new TypeError("Cannot call a class as a function");H.onGetComponent("viewer",function(){return VF})};tv.$inject=["components"];var WF={__init__:["textarea"],textarea:["type",tv]},XF=function(H){function L(J,K){if(!(this instanceof L))throw new TypeError("Cannot call a class as a function");var N=zC(this,qm(L).call(this,J,K));BC(Ys(N),"onClick",function(){N._eventBus.fire("showDrd")});N._eventBus=
K.injector.get("eventBus");return N}AC(L,H);yC(L,[{key:"render",value:function(){var J=this;return E(1,"div","view-drd",E(1,"button","view-drd-button",aa("View DRD"),2,{onClick:this.onClick}),2,null,null,function(K){return J.node=K})}}]);return L}(Z),uv=function(){function H(L,J,K,N){var Q=this;if(!(this instanceof H))throw new TypeError("Cannot call a class as a function");this._injector=N;this._viewer=J;L.onGetComponent("viewer",1500,function(){if(Q.canViewDrd())return XF});K.on("showDrd",function(){var S=
N.get("_parent",!1),ka=Q.getDefinitions();ka=S.getView(ka);S.open(ka)})}CC(H,[{key:"canViewDrd",value:function(){var L=this._injector.get("_parent",!1);if(L){var J=this.getDefinitions();return!!L.getView(J)}}},{key:"getDefinitions",value:function(){return this._viewer.getDecision().$parent}}]);return H}();uv.$inject=["components","viewer","eventBus","injector"];var YF={__init__:["viewDrd"],viewDrd:["type",uv]},vv=function(H){function L(){var J=0<arguments.length&&void 0!==arguments[0]?arguments[0]:
{};if(!(this instanceof L))throw new TypeError("Cannot call a class as a function");var K=L._createContainer();J=Ne(L).call(this,R(J,{renderer:{container:K}}));if(!J||"object"!==sm(J)&&"function"!==typeof J){if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");J=this}J._container=K;return J}EC(L,H);DC(L,[{key:"open",value:function(J,K){try{this._decision&&(this.clear(),this.get("eventBus").fire("renderer.unmount")),this._decision=J,this.get("eventBus").fire("import",
J),this.get("eventBus").fire("renderer.mount")}catch(Q){var N=Q}return K(N)}},{key:"_init",value:function(J){var K=J.modules,N=J.additionalModules;var Q=["modules","additionalModules"];if(null==J)J={};else{if(null==J)var S={};else{S={};var ka=Object.keys(J),fa;for(fa=0;fa<ka.length;fa++){var oa=ka[fa];0<=Q.indexOf(oa)||(S[oa]=J[oa])}}if(Object.getOwnPropertySymbols)for(fa=Object.getOwnPropertySymbols(J),oa=0;oa<fa.length;oa++)ka=fa[oa],0<=Q.indexOf(ka)||Object.prototype.propertyIsEnumerable.call(J,
ka)&&(S[ka]=J[ka]);J=S}K=K||this.getModules();N=N||[];Q=[{viewer:["value",this]}];return{modules:[].concat($s(K),$s(N),Q),config:J}}},{key:"on",value:function(J,K,N,Q){return this.get("eventBus").on(J,K,N,Q)}},{key:"off",value:function(J,K){this.get("eventBus").off(J,K)}},{key:"_emit",value:function(J,K){return this.get("eventBus").fire(J,K)}},{key:"getDecision",value:function(){return this._decision}},{key:"attachTo",value:function(J){if(!J)throw Error("parentNode required");this.detach();J.appendChild(this._container);
this._emit("attach",{})}},{key:"detach",value:function(){var J=this._container;J.parentNode&&(this._emit("detach",{}),kb(J))}},{key:"destroy",value:function(){tm(Ne(L.prototype),"destroy",this).call(this);this.detach()}},{key:"getModules",value:function(){return L._getModules()}}],[{key:"_getModules",value:function(){return[NF,PF,RF,UF,WF,YF]}},{key:"_createContainer",value:function(){return ta('<div class="dmn-literal-expression-container"></div>')}}]);return L}(MF),aG=function(H){function L(J,K){wm(this,
L);var N=ym(this,Pe(L).call(this,J,K));qg(Oe(N),"onElementsChanged",function(){N.forceUpdate()});qg(Oe(N),"setDecisionName",function(Q){N._modeling.editDecisionName(Q)});qg(Oe(N),"setDecisionId",function(Q){N.getDecision().id!==Q&&N._modeling.editDecisionId(Q)});qg(Oe(N),"validateId",function(Q){return Or(N.getDecision(),Q)});N._viewer=K.injector.get("viewer");N._modeling=K.injector.get("modeling");N.setupChangeListeners({bind:N.getDecision().id});return N}zm(L,H);xm(L,[{key:"componentWillUnmount",
value:function(){this.setupChangeListeners({unbind:this.getDecision().id})}},{key:"getDecision",value:function(){return this._viewer.getDecision()}},{key:"setupChangeListeners",value:function(J){var K=J.bind;J=J.unbind;var N=this.context.changeSupport;"string"===typeof J&&N.offElementsChanged(J,this.onElementsChanged);if("string"===typeof K)N.onElementsChanged(K,this.onElementsChanged)}},{key:"render",value:function(){var J=this.getDecision(),K=J.id;return E(1,"header","decision-properties",[X(2,
ZF,{className:"decision-name editor",value:J.name,onChange:this.setDecisionName}),X(2,$F,{className:"decision-id editor",value:K,validate:this.validateId,onChange:this.setDecisionId})],4)}}]);return L}(Z),ZF=function(H){function L(){wm(this,L);return ym(this,Pe(L).apply(this,arguments))}zm(L,H);xm(L,[{key:"render",value:function(){return E(1,"h3",this.getClassName(),this.getEditor(),0)}}]);return L}(Ic),$F=function(H){function L(){wm(this,L);return ym(this,Pe(L).apply(this,arguments))}zm(L,H);xm(L,
[{key:"render",value:function(){return E(1,"h5",this.getClassName(),this.getEditor(),0)}}]);return L}(Ic),wv=function J(L){if(!(this instanceof J))throw new TypeError("Cannot call a class as a function");L.onGetComponent("viewer",2E3,function(){return aG})};wv.$inject=["components"];var bG={__depends__:[ed],__init__:["decisionProperties"],decisionProperties:["type",wv]},xv=function(){function L(J,K){if(!(this instanceof L))throw new TypeError("Cannot call a class as a function");this._actions={undo:function(){J.undo()},
redo:function(){J.redo()}}}FC(L,[{key:"trigger",value:function(J,K){if(!this._actions[J])throw Error(J+" is not a registered action");return this._actions[J](K)}},{key:"register",value:function(J,K){var N=this;if("string"===typeof J)return this._registerAction(J,K);O(J,function(Q,S){N._registerAction(S,Q)})}},{key:"_registerAction",value:function(J,K){if(this.isRegistered(J))throw Error(J+" is already registered");this._actions[J]=K}},{key:"unregister",value:function(J){if(!this.isRegistered(J))throw Error(J+
" is not a registered action");this._actions[J]=void 0}},{key:"isRegistered",value:function(J){return!!this._actions[J]}}]);return L}();xv.$inject=["commandStack","eventBus"];var cG={__init__:["editorActions"],editorActions:["type",xv]},yv=function(){function L(J,K,N){var Q=this;if(!(this instanceof L))throw new TypeError("Cannot call a class as a function");rg(this,"_init",function(){Q._registerDefaultBindings();Q._fire("init")});rg(this,"_destroy",function(){Q._fire("destroy");Q.unbind();Q._listeners=
null});rg(this,"_keyHandler",function(S){var ka,fa,oa=Q._listeners,ca=S.keyCode||S.charCode||-1;for(ka=0;fa=oa[ka];ka++)if(fa(ca,S)){S.preventDefault();S.stopPropagation();break}});rg(this,"unbind",function(){var S=Q._node;S&&(Q._fire("unbind"),U.unbind(S,"keydown",Q._keyHandler,!0));Q._node=null});this._config=J||{};this._eventBus=K;this._editorActions=N;this._listeners=[];K.on("viewer.destroy",this._destroy);K.on("viewer.init",this._init);K.on("attach",function(){Q._config.bindTo&&Q.bind(J.bindTo)});
K.on("detach",this.unbind)}GC(L,[{key:"bind",value:function(J){this.unbind();this._node=J;U.bind(J,"keydown",this._keyHandler,!0);this._fire("bind")}},{key:"getBinding",value:function(){return this._node}},{key:"_fire",value:function(J){this._eventBus.fire("keyboard."+J,{node:this._node,listeners:this._listeners})}},{key:"_registerDefaultBindings",value:function(){var J=this._listeners,K=this._editorActions;J.push(function(N,Q){if((Q.altKey?0:Q.ctrlKey||Q.metaKey)&&!Q.shiftKey&&90===N)return K.trigger("undo"),
!0});J.push(function(N,Q){if((Q.altKey?0:Q.ctrlKey||Q.metaKey)&&(89===N||90===N&&Q.shiftKey))return K.trigger("redo"),!0})}},{key:"addListener",value:function(J){this._listeners.unshift(J)}},{key:"removeListener",value:function(J){this._listeners=this._listeners.filter(function(K){return K!==J})}}]);return L}();yv.$inject=["config.keyboard","eventBus","editorActions"];var zv={__depends__:[cG],__init__:["keyboard"],keyboard:["type",yv]},dG=[{label:"string",value:"string"},{label:"boolean",value:"boolean"},
{label:"integer",value:"integer"},{label:"long",value:"long"},{label:"double",value:"double"},{label:"date",value:"date"}],eG=function(L){function J(K,N){if(!(this instanceof J))throw new TypeError("Cannot call a class as a function");var Q=Cm(J).call(this,K,N);Q=!Q||"object"!==Bm(Q)&&"function"!==typeof Q?sg(this):Q;Q._viewer=N.injector.get("viewer");Q._modeling=N.injector.get("modeling");Q._expressionLanguages=N.injector.get("expressionLanguages");var S=Q._viewer.getDecision(),ka=S.variable.name,
fa=S.variable.typeRef;S=(S=S.literalExpression)&&S.expressionLanguage?S.expressionLanguage.toLowerCase():void 0;Q.state={name:ka,typeRef:fa,expressionLanguage:S};Q.setVariableName=Q.setVariableName.bind(sg(Q));Q.setVariableType=Q.setVariableType.bind(sg(Q));Q.setExpressionLanguage=Q.setExpressionLanguage.bind(sg(Q));return Q}IC(J,L);HC(J,[{key:"setVariableName",value:function(K){this._modeling.editVariableName(K);this.setState({name:K})}},{key:"setVariableType",value:function(K){""===K?(this._modeling.editVariableType(void 0),
this.setState({typeRef:void 0})):(this._modeling.editVariableType(K),this.setState({typeRef:K}))}},{key:"setExpressionLanguage",value:function(K){""===K?(this._modeling.editExpressionLanguage(void 0),this.setState({expressionLanguage:void 0})):(this._modeling.editExpressionLanguage(K),this.setState({expressionLanguage:K}))}},{key:"render",value:function(){var K=this.state,N=K.expressionLanguage,Q=K.name;K=K.typeRef;var S=this._expressionLanguages.getAll();return E(1,"div","literal-expression-properties",
E(1,"table",null,[E(1,"tr",null,[E(1,"td",null,aa("Variable Name:"),2),E(1,"td",null,X(2,Vb,{className:"variable-name-input",onInput:this.setVariableName,placeholder:"name",value:Q||""}),2)],4),E(1,"tr",null,[E(1,"td",null,aa("Variable Type:"),2),E(1,"td",null,E(1,"div","dms-fill-row",X(2,fb,{onChange:this.setVariableType,options:dG,value:K,className:"variable-type-select dms-block"}),2),2)],4),E(1,"tr",null,[E(1,"td",null,aa("Expression Language:"),2),E(1,"td",null,E(1,"div","dms-fill-row",X(2,fb,
{onChange:this.setExpressionLanguage,options:S,value:N,className:"expression-language-select dms-block"}),2),2)],4)],4),2)}}]);return J}(Z),Av=function K(J){if(!(this instanceof K))throw new TypeError("Cannot call a class as a function");J.onGetComponent("viewer",500,function(){return eG})};Av.$inject=["components"];var fG={__depends__:[ed,zv],__init__:["literalExpressionProperties"],literalExpressionProperties:["type",Av]},Bv=function(){function J(K,N,Q){var S=this;if(!(this instanceof J))throw new TypeError("Cannot call a class as a function");
this._commandStack=K;this._viewer=N;this._eventBus=Q;Q.on("viewer.init",function(){KC(S.getHandlers(),K)})}JC(J,[{key:"getHandlers",value:function(){return J._getHandlers()}},{key:"getDecision",value:function(){return this._viewer.getDecision()}},{key:"editDecisionName",value:function(K){K={element:this.getDecision(),properties:{name:K}};this._commandStack.execute("updateProperties",K)}},{key:"editDecisionId",value:function(K){K={element:this.getDecision(),properties:{id:K}};this._commandStack.execute("updateProperties",
K)}},{key:"editLiteralExpressionText",value:function(K){K={element:this.getDecision().literalExpression,properties:{text:K}};this._commandStack.execute("updateProperties",K)}},{key:"editExpressionLanguage",value:function(K){K={element:this.getDecision().literalExpression,properties:{expressionLanguage:K}};this._commandStack.execute("updateProperties",K)}},{key:"editVariableName",value:function(K){K={element:this.getDecision().variable,properties:{name:K}};this._commandStack.execute("updateProperties",
K)}},{key:"editVariableType",value:function(K){K={element:this.getDecision().variable,properties:{typeRef:K}};this._commandStack.execute("updateProperties",K)}}],[{key:"_getHandlers",value:function(){return{updateProperties:Um}}}]);return J}();Bv.$inject=["commandStack","viewer","eventBus"];var gG={__init__:["idChangeBehavior","modeling"],commandStack:["type",Aa],idChangeBehavior:["type",xg],modeling:["type",Bv]},iG=function(J){function K(N,Q){gt(this,K);var S=jt(this,tg(K).call(this,N,Q));S._modeling=
Q.injector.get("modeling");S._viewer=Q.injector.get("viewer");S.editLiteralExpressionText=S.editLiteralExpressionText.bind(Fm(S));S.onElementsChanged=S.onElementsChanged.bind(Fm(S));var ka=S.getLiteralExpression().id;Q.changeSupport.onElementsChanged(ka,S.onElementsChanged);return S}kt(K,J);it(K,[{key:"getLiteralExpression",value:function(){return this._viewer.getDecision().literalExpression}},{key:"onElementsChanged",value:function(){this.forceUpdate()}},{key:"editLiteralExpressionText",value:function(N){this._modeling.editLiteralExpressionText(N)}},
{key:"render",value:function(){var N=this.getLiteralExpression().text;return X(2,hG,{className:"textarea editor",value:N,onChange:this.editLiteralExpressionText})}}]);return K}(Z),hG=function(J){function K(){gt(this,K);return jt(this,tg(K).apply(this,arguments))}kt(K,J);it(K,[{key:"render",value:function(){return E(1,"div",this.getClassName(),this.getEditor(),0)}}]);return K}(Ic),Cv=function N(K){if(!(this instanceof N))throw new TypeError("Cannot call a class as a function");K.onGetComponent("viewer",
function(){return iG})};Cv.$inject=["components"];var jG={__depends__:[ed],__init__:["textarea"],textarea:["type",Cv]},kG=function(K){function N(){if(!(this instanceof N))throw new TypeError("Cannot call a class as a function");var Q=Im(N).apply(this,arguments);if(!Q||"object"!==Hm(Q)&&"function"!==typeof Q){if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");Q=this}return Q}MC(N,K);LC(N,[{key:"getModules",value:function(){return[].concat(lt(vv._getModules()),
lt(N._getModules()))}}],[{key:"_getModules",value:function(){return[bG,zv,fG,gG,dd,jG]}}]);return N}(vv);return function(K){function N(){if(!(this instanceof N))throw new TypeError("Cannot call a class as a function");var Q=Eg(N).apply(this,arguments);if(!Q||"object"!==typeof Q&&"function"!==typeof Q){if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");Q=this}return Q}Ev(N,K);Dv(N,[{key:"_getViewProviders",value:function(){return[{id:"drd",constructor:Cd,
opens:"dmn:Definitions"},{id:"decisionTable",constructor:IF,opens:function(Q){return P(Q,"dmn:Decision")&&Q.decisionTable}},{id:"literalExpression",constructor:kG,opens:function(Q){return P(Q,"dmn:Decision")&&Q.literalExpression}}]}},{key:"_getInitialView",value:function(Q){for(var S,ka=0;ka<Q.length;ka++){var fa=Q[ka],oa=fa.element;if(P(oa,"dmn:Decision")||P(oa,"dmn:Definitions")&&(S=fa,We(oa.drgElements,Ko)))return fa}return S||Q[0]}}]);return N}(ZC)});